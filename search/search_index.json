{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-\\.]+"},"docs":[{"location":"","text":"../README.md","title":"Home"},{"location":"license/","text":"License \u00b6 MIT License The graduate cap icon made by Freepik from www.flaticon.com is licensed by CC 3.0 BY Support Author \u00b6 Amazon wish list","title":"License"},{"location":"license/#license","text":"MIT License The graduate cap icon made by Freepik from www.flaticon.com is licensed by CC 3.0 BY","title":"License"},{"location":"license/#support_author","text":"Amazon wish list","title":"Support Author"},{"location":"MongoDB/MongoDB/","text":"3\u3001MongoDB\u5feb\u901f\u5165\u95e8 \u00b6 3.1\u3001MongoDB\u7b80\u4ecb \u00b6 MongoDB\u662f\u4e00\u4e2a\u57fa\u4e8e\u5206\u5e03\u5f0f\u6587\u4ef6\u5b58\u50a8\u7684\u6570\u636e\u5e93\u3002\u7531C++\u8bed\u8a00\u7f16\u5199\u3002\u65e8\u5728\u4e3aWEB\u5e94\u7528\u63d0\u4f9b\u53ef\u6269\u5c55\u7684\u9ad8\u6027\u80fd\u6570\u636e\u5b58\u50a8\u89e3\u51b3\u65b9\u6848\u3002 MongoDB\u662f\u4e00\u4e2a\u4ecb\u4e8e\u5173\u7cfb\u6570\u636e\u5e93\u548c\u975e\u5173\u7cfb\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u4ea7\u54c1\uff0c\u662f\u975e\u5173\u7cfb\u6570\u636e\u5e93\u5f53\u4e2d\u529f\u80fd\u6700\u4e30\u5bcc\uff0c\u6700\u50cf\u5173\u7cfb\u6570\u636e\u5e93\u7684\uff0c\u5b83\u652f\u6301\u7684\u6570\u636e\u7ed3\u6784\u975e\u5e38\u677e\u6563\uff0c\u662f\u7c7b\u4f3cjson\u7684bson\u683c\u5f0f\uff0c\u56e0\u6b64\u53ef\u4ee5\u5b58\u50a8\u6bd4\u8f83\u590d\u6742\u7684\u6570\u636e\u7c7b\u578b\u3002 MongoDB\u6700\u5927\u7684\u7279\u70b9\u662f\u5b83\u652f\u6301\u7684\u67e5\u8be2\u8bed\u8a00\u975e\u5e38\u5f3a\u5927\uff0c\u5176\u8bed\u6cd5\u6709\u70b9\u7c7b\u4f3c\u4e8e\u9762\u5411\u5bf9\u8c61\u7684\u67e5\u8be2\u8bed\u8a00\uff0c\u51e0\u4e4e\u53ef\u4ee5\u5b9e\u73b0\u7c7b\u4f3c\u5173\u7cfb\u6570\u636e\u5e93\u5355\u8868\u67e5\u8be2\u7684\u7edd\u5927\u90e8\u5206\u529f\u80fd\uff0c\u800c\u4e14\u8fd8\u652f\u6301\u5bf9\u6570\u636e\u5efa\u7acb\u7d22\u5f15\u3002 \u5b98\u7f51\uff1ahttps://www.mongodb.com 3.2\u3001\u901a\u8fc7docker\u5b89\u88c5MongoDB \u00b6 #\u62c9\u53d6\u955c\u50cf docker pull mongo:4.0.3 #\u521b\u5efa\u5bb9\u5668 docker create --name mongodb-server -p 27018 :27017 -v mongodb-data:/data/db mongo:4.0.3 --auth #\u542f\u52a8\u5bb9\u5668 docker start mongodb-server #\u8fdb\u5165\u5bb9\u5668 docker exec -it mongodb-server /bin/bash #\u8fdb\u5165admin\u6570\u636e\u5e93 mongo use admin #\u6dfb\u52a0\u7ba1\u7406\u5458\uff0c\u5176\u62e5\u6709\u7ba1\u7406\u7528\u6237\u548c\u89d2\u8272\u7684\u6743\u9650 db.createUser ({ user: 'root' , pwd: 'root' , roles: [ { role: \"root\" , db: \"admin\" } ] }) #\u6d4b\u8bd5\uff0c\u53d1\u73b0\u662f\u6ca1\u6709\u6743\u9650\u64cd\u4f5c\u7684 > show dbs 2020 -10-20T09:09:15.543+0000 E QUERY [ js ] Error: listDatabases failed: { \"ok\" : 0 , \"errmsg\" : \"command listDatabases requires authentication\" , \"code\" : 13 , \"codeName\" : \"Unauthorized\" } : #\u8fdb\u884c\u8ba4\u8bc1 mongo -u \"root\" -p \"root\" --authenticationDatabase \"admin\" #\u901a\u8fc7admin\u6dfb\u52a0\u666e\u901a\u7528\u6237 use admin db.createUser ({ user: 'tanhua' , pwd: 'l3SCjl0HvmSkTtiSbN0Swv40spYnHhDV' , roles: [ { role: \"readWrite\" , db: \"tanhua\" } ] }) ; #\u901a\u8fc7tanhua\u7528\u6237\u767b\u5f55\u8fdb\u884c\u6d4b\u8bd5 mongo -u \"tanhua\" -p \"l3SCjl0HvmSkTtiSbN0Swv40spYnHhDV\" --authenticationDatabase \"admin\" #\u6d4b\u8bd5 root@5d848955ff7e:/# mongo -u \"tanhua\" -p \"tanhua123\" --authenticationDatabase \"admin\" MongoDB shell version v4.0.3 connecting to: mongodb://127.0.0.1:27017 Implicit session: session { \"id\" : UUID ( \"6c368269-30f0-4b29-a224-05a38b5847e2\" ) } MongoDB server version: 4 .0.3 > use tanhua switched to db tanhua > db.user.insert ({ id:1,username: 'zhangsan' ,age:20 }) WriteResult ({ \"nInserted\" : 1 }) > db.user.find () { \"_id\" : ObjectId ( \"5f8eb2726e0de0aa9517afd3\" ) , \"id\" : 1 , \"username\" : \"zhangsan\" , \"age\" : 20 } 3.3\u3001MongoDB\u57fa\u672c\u64cd\u4f5c \u00b6 3.3.1\u3001\u57fa\u672c\u6982\u5ff5 \u00b6 \u4e3a\u4e86\u66f4\u597d\u7684\u7406\u89e3\uff0c\u4e0b\u9762\u4e0eSQL\u4e2d\u7684\u6982\u5ff5\u8fdb\u884c\u5bf9\u6bd4\uff1a SQL\u672f\u8bed/\u6982\u5ff5 MongoDB\u672f\u8bed/\u6982\u5ff5 \u89e3\u91ca/\u8bf4\u660e database database \u6570\u636e\u5e93 table collection \u6570\u636e\u5e93\u8868/\u96c6\u5408 row document \u6570\u636e\u8bb0\u5f55\u884c/\u6587\u6863 column field \u6570\u636e\u5b57\u6bb5/\u57df index index \u7d22\u5f15 table joins \u8868\u8fde\u63a5,MongoDB\u4e0d\u652f\u6301 primary key primary key \u4e3b\u952e,MongoDB\u81ea\u52a8\u5c06_id\u5b57\u6bb5\u8bbe\u7f6e\u4e3a\u4e3b\u952e 3.3.2\u3001\u6570\u636e\u5e93\u4ee5\u53ca\u8868\u7684\u64cd\u4f5c \u00b6 #\u67e5\u770b\u6240\u6709\u7684\u6570\u636e\u5e93 > show dbs admin 0 .000GB config 0 .000GB local 0 .000GB #\u901a\u8fc7use\u5173\u952e\u5b57\u5207\u6362\u6570\u636e\u5e93 > use admin switched to db admin #\u521b\u5efa\u6570\u636e\u5e93 #\u8bf4\u660e\uff1a\u5728MongoDB\u4e2d\uff0c\u6570\u636e\u5e93\u662f\u81ea\u52a8\u521b\u5efa\u7684\uff0c\u901a\u8fc7use\u5207\u6362\u5230\u65b0\u6570\u636e\u5e93\u4e2d\uff0c\u8fdb\u884c\u63d2\u5165\u6570\u636e\u5373\u53ef\u81ea\u52a8\u521b\u5efa\u6570\u636e\u5e93 > use testdb switched to db testdb > show dbs #\u5e76\u6ca1\u6709\u521b\u5efa\u6570\u636e\u5e93 admin 0 .000GB config 0 .000GB local 0 .000GB > db.user.insert ({ id:1,name: 'zhangsan' }) #\u63d2\u5165\u6570\u636e WriteResult ({ \"nInserted\" : 1 }) > show dbs admin 0 .000GB config 0 .000GB local 0 .000GB testdb 0 .000GB #\u6570\u636e\u5e93\u81ea\u52a8\u521b\u5efa #\u67e5\u770b\u8868 > show tables user > show collections user > #\u5220\u9664\u96c6\u5408\uff08\u8868\uff09 > db.user.drop () true #\u5982\u679c\u6210\u529f\u5220\u9664\u9009\u5b9a\u96c6\u5408\uff0c\u5219 drop() \u65b9\u6cd5\u8fd4\u56de true\uff0c\u5426\u5219\u8fd4\u56de false\u3002 #\u5220\u9664\u6570\u636e\u5e93 > use testdb #\u5148\u5207\u6362\u5230\u8981\u5220\u9664\u7684\u6570\u636e\u5e93\u4e2d switched to db testdb > db.dropDatabase () #\u5220\u9664\u6570\u636e\u5e93 { \"dropped\" : \"testdb\" , \"ok\" : 1 } > show dbs admin 0 .000GB config 0 .000GB local 0 .000GB 3.3.3\u3001\u65b0\u589e\u6570\u636e \u00b6 \u5728MongoDB\u4e2d\uff0c\u5b58\u50a8\u7684\u6587\u6863\u7ed3\u6784\u662f\u4e00\u79cd\u7c7b\u4f3c\u4e8ejson\u7684\u7ed3\u6784\uff0c\u79f0\u4e4b\u4e3abson\uff08\u5168\u79f0\u4e3a\uff1aBinary JSON\uff09\u3002 #\u63d2\u5165\u6570\u636e #\u8bed\u6cd5\uff1adb.COLLECTION_NAME.insert(document) > db.user.insert ({ id:1,username: 'zhangsan' ,age:20 }) WriteResult ({ \"nInserted\" : 1 }) > db.user.save ({ id:2,username: 'lisi' ,age:25 }) WriteResult ({ \"nInserted\" : 1 }) > db.user.find () #\u67e5\u8be2\u6570\u636e { \"_id\" : ObjectId ( \"5c08c0024b318926e0c1f6dc\" ) , \"id\" : 1 , \"username\" : \"zhangsan\" , \"age\" : 20 } { \"_id\" : ObjectId ( \"5c08c0134b318926e0c1f6dd\" ) , \"id\" : 2 , \"username\" : \"lisi\" , \"age\" : 25 } 3.3.4\u3001\u66f4\u65b0\u6570\u636e \u00b6 update() \u65b9\u6cd5\u7528\u4e8e\u66f4\u65b0\u5df2\u5b58\u5728\u7684\u6587\u6863\u3002\u8bed\u6cd5\u683c\u5f0f\u5982\u4e0b\uff1a db.collection.update ( <query>, <update>, [ upsert: <boolean>, multi: <boolean>, writeConcern: <document> ] ) \u53c2\u6570\u8bf4\u660e\uff1a query : update\u7684\u67e5\u8be2\u6761\u4ef6\uff0c\u7c7b\u4f3csql update\u67e5\u8be2\u5185where\u540e\u9762\u7684\u3002 update : update\u7684\u5bf9\u8c61\u548c\u4e00\u4e9b\u66f4\u65b0\u7684\u64cd\u4f5c\u7b26\uff08\u5982 , inc...\uff09\u7b49\uff0c\u4e5f\u53ef\u4ee5\u7406\u89e3\u4e3asql update\u67e5\u8be2\u5185set\u540e\u9762\u7684 upsert : \u53ef\u9009\uff0c\u8fd9\u4e2a\u53c2\u6570\u7684\u610f\u601d\u662f\uff0c\u5982\u679c\u4e0d\u5b58\u5728update\u7684\u8bb0\u5f55\uff0c\u662f\u5426\u63d2\u5165objNew,true\u4e3a\u63d2\u5165\uff0c\u9ed8\u8ba4\u662ffalse\uff0c\u4e0d\u63d2\u5165\u3002 multi : \u53ef\u9009\uff0cmongodb \u9ed8\u8ba4\u662ffalse,\u53ea\u66f4\u65b0\u627e\u5230\u7684\u7b2c\u4e00\u6761\u8bb0\u5f55\uff0c\u5982\u679c\u8fd9\u4e2a\u53c2\u6570\u4e3atrue,\u5c31\u628a\u6309\u6761\u4ef6\u67e5\u51fa\u6765\u591a\u6761\u8bb0\u5f55\u5168\u90e8\u66f4\u65b0\u3002 writeConcern :\u53ef\u9009\uff0c\u629b\u51fa\u5f02\u5e38\u7684\u7ea7\u522b\u3002 > db.user.find () { \"_id\" : ObjectId ( \"5c08c0024b318926e0c1f6dc\" ) , \"id\" : 1 , \"username\" : \"zhangsan\" , \"age\" : 20 } { \"_id\" : ObjectId ( \"5c08c0134b318926e0c1f6dd\" ) , \"id\" : 2 , \"username\" : \"lisi\" , \"age\" : 25 } > db.user.update ({ id:1 } , { $set : { age:22 }}) #\u66f4\u65b0\u6570\u636e WriteResult ({ \"nMatched\" : 1 , \"nUpserted\" : 0 , \"nModified\" : 1 }) > db.user.find () { \"_id\" : ObjectId ( \"5c08c0024b318926e0c1f6dc\" ) , \"id\" : 1 , \"username\" : \"zhangsan\" , \"age\" : 22 } { \"_id\" : ObjectId ( \"5c08c0134b318926e0c1f6dd\" ) , \"id\" : 2 , \"username\" : \"lisi\" , \"age\" : 25 } #\u6ce8\u610f\uff1a\u5982\u679c\u8fd9\u6837\u5199\uff0c\u4f1a\u5220\u9664\u6389\u5176\u4ed6\u7684\u5b57\u6bb5 > db.user.update ({ id:1 } , { age:25 }) WriteResult ({ \"nMatched\" : 1 , \"nUpserted\" : 0 , \"nModified\" : 1 }) > db.user.find () { \"_id\" : ObjectId ( \"5c08c0024b318926e0c1f6dc\" ) , \"age\" : 25 } { \"_id\" : ObjectId ( \"5c08c0134b318926e0c1f6dd\" ) , \"id\" : 2 , \"username\" : \"lisi\" , \"age\" : 25 } #\u66f4\u65b0\u4e0d\u5b58\u5728\u7684\u5b57\u6bb5\uff0c\u4f1a\u65b0\u589e\u5b57\u6bb5 > db.user.update ({ id:2 } , { $set : { sex:1 }}) #\u66f4\u65b0\u6570\u636e > db.user.find () { \"_id\" : ObjectId ( \"5c08c0024b318926e0c1f6dc\" ) , \"age\" : 25 } { \"_id\" : ObjectId ( \"5c08c0134b318926e0c1f6dd\" ) , \"id\" : 2 , \"username\" : \"lisi\" , \"age\" : 25 , \"sex\" : 1 } #\u66f4\u65b0\u4e0d\u5b58\u5728\u7684\u6570\u636e\uff0c\u9ed8\u8ba4\u4e0d\u4f1a\u65b0\u589e\u6570\u636e > db.user.update ({ id:3 } , { $set : { sex:1 }}) WriteResult ({ \"nMatched\" : 0 , \"nUpserted\" : 0 , \"nModified\" : 0 }) > db.user.find () { \"_id\" : ObjectId ( \"5c08c0024b318926e0c1f6dc\" ) , \"age\" : 25 } { \"_id\" : ObjectId ( \"5c08c0134b318926e0c1f6dd\" ) , \"id\" : 2 , \"username\" : \"lisi\" , \"age\" : 25 , \"sex\" : 1 } #\u5982\u679c\u8bbe\u7f6e\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3atrue\uff0c\u5c31\u662f\u65b0\u589e\u6570\u636e > db.user.update ({ id:3 } , { $set : { sex:1 }} ,true ) WriteResult ({ \"nMatched\" : 0 , \"nUpserted\" : 1 , \"nModified\" : 0 , \"_id\" : ObjectId ( \"5c08cb281418d073246bc642\" ) }) > db.user.find () { \"_id\" : ObjectId ( \"5c08c0024b318926e0c1f6dc\" ) , \"age\" : 25 } { \"_id\" : ObjectId ( \"5c08c0134b318926e0c1f6dd\" ) , \"id\" : 2 , \"username\" : \"lisi\" , \"age\" : 25 , \"sex\" : 1 } { \"_id\" : ObjectId ( \"5c08cb281418d073246bc642\" ) , \"id\" : 3 , \"sex\" : 1 } 3.3.5\u3001\u5220\u9664\u6570\u636e \u00b6 \u901a\u8fc7remove()\u65b9\u6cd5\u8fdb\u884c\u5220\u9664\u6570\u636e\uff0c\u8bed\u6cd5\u5982\u4e0b\uff1a db.collection.remove ( <query>, { justOne: <boolean>, writeConcern: <document> } ) \u53c2\u6570\u8bf4\u660e\uff1a query :\uff08\u53ef\u9009\uff09\u5220\u9664\u7684\u6587\u6863\u7684\u6761\u4ef6\u3002 justOne : \uff08\u53ef\u9009\uff09\u5982\u679c\u8bbe\u4e3a true \u6216 1\uff0c\u5219\u53ea\u5220\u9664\u4e00\u4e2a\u6587\u6863\uff0c\u5982\u679c\u4e0d\u8bbe\u7f6e\u8be5\u53c2\u6570\uff0c\u6216\u4f7f\u7528\u9ed8\u8ba4\u503c false\uff0c\u5219\u5220\u9664\u6240\u6709\u5339\u914d\u6761\u4ef6\u7684\u6587\u6863\u3002 writeConcern :\uff08\u53ef\u9009\uff09\u629b\u51fa\u5f02\u5e38\u7684\u7ea7\u522b\u3002 \u5b9e\u4f8b\uff1a > db.user.remove ({ age:25 }) WriteResult ({ \"nRemoved\" : 2 }) #\u5220\u9664\u4e862\u6761\u6570\u636e #\u63d2\u51654\u6761\u6d4b\u8bd5\u6570\u636e db.user.insert ({ id:1,username: 'zhangsan' ,age:20 }) db.user.insert ({ id:2,username: 'lisi' ,age:21 }) db.user.insert ({ id:3,username: 'wangwu' ,age:22 }) db.user.insert ({ id:4,username: 'zhaoliu' ,age:22 }) > db.user.remove ({ age:22 } ,true ) WriteResult ({ \"nRemoved\" : 1 }) #\u5220\u9664\u4e861\u6761\u6570\u636e #\u5220\u9664\u6240\u6709\u6570\u636e > db.user.remove ({}) #\u8bf4\u660e\uff1a\u4e3a\u4e86\u7b80\u5316\u64cd\u4f5c\uff0c\u5b98\u65b9\u63a8\u8350\u4f7f\u7528deleteOne()\u4e0edeleteMany()\u8fdb\u884c\u5220\u9664\u6570\u636e\u64cd\u4f5c\u3002 db.user.deleteOne ({ id:1 }) db.user.deleteMany ({}) #\u5220\u9664\u6240\u6709\u6570\u636e 3.3.6\u3001\u67e5\u8be2\u6570\u636e \u00b6 MongoDB \u67e5\u8be2\u6570\u636e\u7684\u8bed\u6cd5\u683c\u5f0f\u5982\u4e0b\uff1a db . user . find ( [ query ] , [ fields ] ) query \uff1a\u53ef\u9009\uff0c\u4f7f\u7528\u67e5\u8be2\u64cd\u4f5c\u7b26\u6307\u5b9a\u67e5\u8be2\u6761\u4ef6 fields \uff1a\u53ef\u9009\uff0c\u4f7f\u7528\u6295\u5f71\u64cd\u4f5c\u7b26\u6307\u5b9a\u8fd4\u56de\u7684\u952e\u3002\u67e5\u8be2\u65f6\u8fd4\u56de\u6587\u6863\u4e2d\u6240\u6709\u952e\u503c\uff0c \u53ea\u9700\u7701\u7565\u8be5\u53c2\u6570\u5373\u53ef\uff08\u9ed8\u8ba4\u7701\u7565\uff09\u3002 \u5982\u679c\u4f60\u9700\u8981\u4ee5\u6613\u8bfb\u7684\u65b9\u5f0f\u6765\u8bfb\u53d6\u6570\u636e\uff0c\u53ef\u4ee5\u4f7f\u7528 pretty() \u65b9\u6cd5\uff0c\u8bed\u6cd5\u683c\u5f0f\u5982\u4e0b\uff1a >db.col.find().pretty() pretty() \u65b9\u6cd5\u4ee5\u683c\u5f0f\u5316\u7684\u65b9\u5f0f\u6765\u663e\u793a\u6240\u6709\u6587\u6863\u3002 \u6761\u4ef6\u67e5\u8be2\uff1a \u64cd\u4f5c \u683c\u5f0f \u8303\u4f8b RDBMS\u4e2d\u7684\u7c7b\u4f3c\u8bed\u53e5 \u7b49\u4e8e {<key>:<value> } db.col.find({\"by\":\"\u9ed1\u9a6c\u7a0b\u5e8f\u5458\"}).pretty() where by = '\u9ed1\u9a6c\u7a0b\u5e8f\u5458' \u5c0f\u4e8e {<key>:{$lt:<value>}} db.col.find({\"likes\":{$lt:50}}).pretty() where likes < 50 \u5c0f\u4e8e\u6216\u7b49\u4e8e {<key>:{$lte:<value>}} db.col.find({\"likes\":{$lte:50}}).pretty() where likes <= 50 \u5927\u4e8e {<key>:{$gt:<value>}} db.col.find({\"likes\":{$gt:50}}).pretty() where likes > 50 \u5927\u4e8e\u6216\u7b49\u4e8e {<key>:{$gte:<value>}} db.col.find({\"likes\":{$gte:50}}).pretty() where likes >= 50 \u4e0d\u7b49\u4e8e {<key>:{$ne:<value>}} db.col.find({\"likes\":{$ne:50}}).pretty() where likes != 50 \u5b9e\u4f8b\uff1a #\u63d2\u5165\u6d4b\u8bd5\u6570\u636e db.user.insert ({ id:1,username: 'zhangsan' ,age:20 }) db.user.insert ({ id:2,username: 'lisi' ,age:21 }) db.user.insert ({ id:3,username: 'wangwu' ,age:22 }) db.user.insert ({ id:4,username: 'zhaoliu' ,age:22 }) db.user.find () #\u67e5\u8be2\u5168\u90e8\u6570\u636e db.user.find ({} , { id:1,username:1 }) #\u53ea\u67e5\u8be2id\u4e0eusername\u5b57\u6bb5 db.user.find () .count () #\u67e5\u8be2\u6570\u636e\u6761\u6570 db.user.find ({ id:1 }) #\u67e5\u8be2id\u4e3a1\u7684\u6570\u636e db.user.find ({ age: { $lte :21 }}) #\u67e5\u8be2\u5c0f\u4e8e\u7b49\u4e8e21\u7684\u6570\u636e db.user.find ({ age: { $lte :21 } , id: { $gte :2 }}) #and\u67e5\u8be2\uff0cage\u5c0f\u4e8e\u7b49\u4e8e21\u5e76\u4e14id\u5927\u4e8e\u7b49\u4e8e2 db.user.find ({ $or : [{ id:1 } , { id:2 }]}) #\u67e5\u8be2id=1 or id=2 #\u5206\u9875\u67e5\u8be2\uff1aSkip()\u8df3\u8fc7\u51e0\u6761\uff0climit()\u67e5\u8be2\u6761\u6570 db.user.find () .limit ( 2 ) .skip ( 1 ) #\u8df3\u8fc71\u6761\u6570\u636e\uff0c\u67e5\u8be22\u6761\u6570\u636e db.user.find () .sort ({ id:-1 }) #\u6309\u7167age\u5012\u5e8f\u6392\u5e8f\uff0c-1\u4e3a\u5012\u5e8f\uff0c1\u4e3a\u6b63\u5e8f 3.4\u3001\u7d22\u5f15 \u00b6 \u7d22\u5f15\u901a\u5e38\u80fd\u591f\u6781\u5927\u7684\u63d0\u9ad8\u67e5\u8be2\u7684\u6548\u7387\uff0c\u5982\u679c\u6ca1\u6709\u7d22\u5f15\uff0cMongoDB\u5728\u8bfb\u53d6\u6570\u636e\u65f6\u5fc5\u987b\u626b\u63cf\u96c6\u5408\u4e2d\u7684\u6bcf\u4e2a\u6587\u4ef6\u5e76\u9009\u53d6\u90a3\u4e9b\u7b26\u5408\u67e5\u8be2\u6761\u4ef6\u7684\u8bb0\u5f55\u3002 \u8fd9\u79cd\u626b\u63cf\u5168\u96c6\u5408\u7684\u67e5\u8be2\u6548\u7387\u662f\u975e\u5e38\u4f4e\u7684\uff0c\u7279\u522b\u5728\u5904\u7406\u5927\u91cf\u7684\u6570\u636e\u65f6\uff0c\u67e5\u8be2\u53ef\u4ee5\u8981\u82b1\u8d39\u51e0\u5341\u79d2\u751a\u81f3\u51e0\u5206\u949f\uff0c\u8fd9\u5bf9\u7f51\u7ad9\u7684\u6027\u80fd\u662f\u975e\u5e38\u81f4\u547d\u7684\u3002 \u7d22\u5f15\u662f\u7279\u6b8a\u7684\u6570\u636e\u7ed3\u6784\uff0c\u7d22\u5f15\u5b58\u50a8\u5728\u4e00\u4e2a\u6613\u4e8e\u904d\u5386\u8bfb\u53d6\u7684\u6570\u636e\u96c6\u5408\u4e2d\uff0c\u7d22\u5f15\u662f\u5bf9\u6570\u636e\u5e93\u8868\u4e2d\u4e00\u5217\u6216\u591a\u5217\u7684\u503c\u8fdb\u884c\u6392\u5e8f\u7684\u4e00\u79cd\u7ed3\u6784 #\u67e5\u770b\u7d22\u5f15 > db.user.getIndexes () [ { \"v\" : 2 , \"key\" : { \"_id\" : 1 } , \"name\" : \"_id_\" , \"ns\" : \"testdb.user\" } ] #\u8bf4\u660e\uff1a1\u8868\u793a\u5347\u5e8f\u521b\u5efa\u7d22\u5f15\uff0c-1\u8868\u793a\u964d\u5e8f\u521b\u5efa\u7d22\u5f15\u3002 #\u521b\u5efa\u7d22\u5f15 > db.user.createIndex ({ 'age' :1 }) { \"createdCollectionAutomatically\" : false, \"numIndexesBefore\" : 1 , \"numIndexesAfter\" : 2 , \"ok\" : 1 } #\u5220\u9664\u7d22\u5f15 db.user.dropIndex ( \"age_1\" ) #\u6216\u8005\uff0c\u5220\u9664\u9664\u4e86_id\u4e4b\u5916\u7684\u7d22\u5f15 db.user.dropIndexes () #\u521b\u5efa\u8054\u5408\u7d22\u5f15 db.user.createIndex ({ 'age' :1, 'id' :-1 }) #\u67e5\u770b\u7d22\u5f15\u5927\u5c0f\uff0c\u5355\u4f4d\uff1a\u5b57\u8282 db.user.totalIndexSize () 3.5\u3001\u6267\u884c\u8ba1\u5212 \u00b6 MongoDB \u67e5\u8be2\u5206\u6790\u53ef\u4ee5\u786e\u4fdd\u6211\u4eec\u5efa\u8bae\u7684\u7d22\u5f15\u662f\u5426\u6709\u6548\uff0c\u662f\u67e5\u8be2\u8bed\u53e5\u6027\u80fd\u5206\u6790\u7684\u91cd\u8981\u5de5\u5177\u3002 #\u63d2\u51651000\u6761\u6570\u636e for ( var i = 1 ; i< 1000 ; i++ ) db.user.insert ({ id:100+i,username: 'name_' +i,age:10+i }) #\u67e5\u770b\u6267\u884c\u8ba1\u5212 > db.user.find ({ age: { $gt :100 } ,id: { $lt :200 }}) .explain () { \"queryPlanner\" : { \"plannerVersion\" : 1 , \"namespace\" : \"testdb.user\" , \"indexFilterSet\" : false, \"parsedQuery\" : { \" $and \" : [ { \"id\" : { \" $lt \" : 200 } } , { \"age\" : { \" $gt \" : 100 } } ] } , \"winningPlan\" : { #\u6700\u4f73\u6267\u884c\u8ba1\u5212 \"stage\" : \"FETCH\" , #\u67e5\u8be2\u65b9\u5f0f\uff0c\u5e38\u89c1\u7684\u6709COLLSCAN/\u5168\u8868\u626b\u63cf\u3001IXSCAN/\u7d22\u5f15\u626b\u63cf\u3001FETCH/\u6839\u636e\u7d22\u5f15\u53bb\u68c0\u7d22\u6587\u6863\u3001SHARD_MERGE/\u5408\u5e76\u5206\u7247\u7ed3\u679c\u3001IDHACK/\u9488\u5bf9_id\u8fdb\u884c\u67e5\u8be2 \"inputStage\" : { \"stage\" : \"IXSCAN\" , \"keyPattern\" : { \"age\" : 1 , \"id\" : -1 } , \"indexName\" : \"age_1_id_-1\" , \"isMultiKey\" : false, \"multiKeyPaths\" : { \"age\" : [ ] , \"id\" : [ ] } , \"isUnique\" : false, \"isSparse\" : false, \"isPartial\" : false, \"indexVersion\" : 2 , \"direction\" : \"forward\" , \"indexBounds\" : { \"age\" : [ \"(100.0, inf.0]\" ] , \"id\" : [ \"(200.0, -inf.0]\" ] } } } , \"rejectedPlans\" : [ ] } , \"serverInfo\" : { \"host\" : \"c493d5ff750a\" , \"port\" : 27017 , \"version\" : \"4.0.3\" , \"gitVersion\" : \"7ea530946fa7880364d88c8d8b6026bbc9ffa48c\" } , \"ok\" : 1 } #\u6d4b\u8bd5\u6ca1\u6709\u4f7f\u7528\u7d22\u5f15 > db.user.find ({ username: 'zhangsan' }) .explain () { \"queryPlanner\" : { \"plannerVersion\" : 1 , \"namespace\" : \"testdb.user\" , \"indexFilterSet\" : false, \"parsedQuery\" : { \"username\" : { \" $eq \" : \"zhangsan\" } } , \"winningPlan\" : { \"stage\" : \"COLLSCAN\" , #\u5168\u8868\u626b\u63cf \"filter\" : { \"username\" : { \" $eq \" : \"zhangsan\" } } , \"direction\" : \"forward\" } , \"rejectedPlans\" : [ ] } , \"serverInfo\" : { \"host\" : \"c493d5ff750a\" , \"port\" : 27017 , \"version\" : \"4.0.3\" , \"gitVersion\" : \"7ea530946fa7880364d88c8d8b6026bbc9ffa48c\" } , \"ok\" : 1 } 3.6\u3001UI\u5ba2\u6237\u7aef\u5de5\u5177 \u00b6 Robo 3T\u662fMongoDB\u7684\u5ba2\u6237\u7aef\u5de5\u5177\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5b83\u6765\u64cd\u4f5cMongoDB\u3002 \u67e5\u770b\u6570\u636e\uff1a \u6216\u4f7f\u7528Navicat Premium 15\uff1a 4\u3001SpringBoot\u6574\u5408MongoDB \u00b6 spring-data\u5bf9MongoDB\u505a\u4e86\u652f\u6301\uff0c\u4f7f\u7528spring-data-mongodb\u53ef\u4ee5\u7b80\u5316MongoDB\u7684\u64cd\u4f5c\u3002 \u5730\u5740\uff1ahttps://spring.io/projects/spring-data-mongodb 4.1\u3001\u5bfc\u5165\u4f9d\u8d56 \u00b6 <?xml version=\"1.0\" encoding=\"UTF-8\"?> <project xmlns= \"http://maven.apache.org/POM/4.0.0\" xmlns:xsi= \"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation= \"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\" > <modelVersion> 4.0.0 </modelVersion> <parent> <groupId> org.springframework.boot </groupId> <artifactId> spring-boot-starter-parent </artifactId> <version> 2.1.0.RELEASE </version> </parent> <groupId> cn.itcast.mongodb </groupId> <artifactId> itcast-mongodb </artifactId> <version> 1.0-SNAPSHOT </version> <dependencies> <dependency> <groupId> org.springframework.boot </groupId> <artifactId> spring-boot-starter-data-mongodb </artifactId> </dependency> <dependency> <groupId> org.springframework.boot </groupId> <artifactId> spring-boot-starter-test </artifactId> <scope> test </scope> </dependency> <dependency> <groupId> org.projectlombok </groupId> <artifactId> lombok </artifactId> <optional> true </optional> <version> 1.18.4 </version> </dependency> </dependencies> <build> <plugins> <!-- java\u7f16\u8bd1\u63d2\u4ef6 --> <plugin> <groupId> org.apache.maven.plugins </groupId> <artifactId> maven-compiler-plugin </artifactId> <version> 3.2 </version> <configuration> <source> 1.8 </source> <target> 1.8 </target> <encoding> UTF-8 </encoding> </configuration> </plugin> </plugins> </build> </project> 4.2\u3001\u7f16\u5199application.properties\u914d\u7f6e\u6587\u4ef6 \u00b6 # Spring boot application spring.application.name = itcast-mongodb #\u65e0\u8ba4\u8bc1\u4fe1\u606f\u7684\u914d\u7f6e #spring.data.mongodb.uri=mongodb://192.168.31.81:27017/tanhua #springboot \u914d\u7f6e spring.data.mongodb.username = tanhua spring.data.mongodb.password = l3SCjl0HvmSkTtiSbN0Swv40spYnHhDV spring.data.mongodb.authentication-database = admin spring.data.mongodb.database = tanhua spring.data.mongodb.port = 27018 spring.data.mongodb.host = 192.168.31.81 4.3\u3001\u7f16\u5199\u5b9e\u4f53 \u00b6 package cn.itcast.mongodb.pojo ; import lombok.AllArgsConstructor ; import lombok.Data ; import lombok.NoArgsConstructor ; import org.bson.types.ObjectId ; @Data @AllArgsConstructor @NoArgsConstructor public class Person { private ObjectId id ; private String name ; private int age ; private Address address ; } package cn.itcast.mongodb.pojo ; import lombok.AllArgsConstructor ; import lombok.Data ; import lombok.NoArgsConstructor ; @Data @AllArgsConstructor @NoArgsConstructor public class Address { private String street ; private String city ; private String zip ; } 4.4\u3001\u7f16\u5199dao \u00b6 package cn.itcast.mongodb.dao ; import cn.itcast.mongodb.pojo.Person ; import com.mongodb.client.result.DeleteResult ; import com.mongodb.client.result.UpdateResult ; import org.springframework.beans.factory.annotation.Autowired ; import org.springframework.data.mongodb.core.MongoTemplate ; import org.springframework.data.mongodb.core.query.Criteria ; import org.springframework.data.mongodb.core.query.Query ; import org.springframework.data.mongodb.core.query.Update ; import org.springframework.stereotype.Component ; import java.util.List ; @Component public class PersonDao { @Autowired private MongoTemplate mongoTemplate ; public void savePerson ( Person person ) { this . mongoTemplate . save ( person ); } public List < Person > queryPersonListByName ( String name ) { Query query = Query . query ( Criteria . where ( \"name\" ). is ( name )); return this . mongoTemplate . find ( query , Person . class ); } public List < Person > queryPersonPageList ( Integer page , Integer rows ) { Query query = new Query (). limit ( rows ). skip (( page - 1 ) * rows ); return this . mongoTemplate . find ( query , Person . class ); } public UpdateResult update ( Person person ) { Query query = Query . query ( Criteria . where ( \"id\" ). is ( person . getId ())); Update update = Update . update ( \"age\" , person . getAge ()); return this . mongoTemplate . updateFirst ( query , update , Person . class ); } public DeleteResult deleteById ( String id ) { Query query = Query . query ( Criteria . where ( \"id\" ). is ( id )); return this . mongoTemplate . remove ( query , Person . class ); } } 4.5\u3001\u7f16\u5199\u542f\u52a8\u7c7b \u00b6 package cn.itcast.mongodb ; import org.springframework.boot.SpringApplication ; import org.springframework.boot.autoconfigure.SpringBootApplication ; @SpringBootApplication public class MongoApplication { public static void main ( String [] args ) { SpringApplication . run ( MongoApplication . class , args ); } } 4.6\u3001\u7f16\u5199\u5355\u5143\u6d4b\u8bd5 \u00b6 package cn.itcast.mongodb ; import cn.itcast.mongodb.dao.PersonDao ; import cn.itcast.mongodb.pojo.Address ; import cn.itcast.mongodb.pojo.Person ; import org.bson.types.ObjectId ; import org.junit.Test ; import org.junit.runner.RunWith ; import org.springframework.beans.factory.annotation.Autowired ; import org.springframework.boot.test.context.SpringBootTest ; import org.springframework.test.context.junit4.SpringRunner ; import java.util.List ; @RunWith ( SpringRunner . class ) @SpringBootTest public class TestPersonDao { @Autowired private PersonDao personDao ; @Test public void testSave () { Person person = new Person ( ObjectId . get (), \"\u5f20\u4e09\" , 20 , new Address ( \"\u4eba\u6c11\u8def\" , \"\u4e0a\u6d77\u5e02\" , \"666666\" )); this . personDao . savePerson ( person ); } @Test public void testQuery () { List < Person > personList = this . personDao . queryPersonListByName ( \"\u5f20\u4e09\" ); for ( Person person : personList ) { System . out . println ( person ); } } @Test public void testQuery2 () { List < Person > personList = this . personDao . queryPersonPageList ( 2 , 2 ); for ( Person person : personList ) { System . out . println ( person ); } } @Test public void testUpdate () { Person person = new Person (); person . setId ( new ObjectId ( \"5c0956ce235e192520086736\" )); person . setAge ( 30 ); this . personDao . update ( person ); } @Test public void testDelete () { this . personDao . deleteById ( \"5c09ca05235e192d8887a389\" ); } }","title":"MongoDB"},{"location":"MongoDB/MongoDB/#3mongodb","text":"","title":"3\u3001MongoDB\u5feb\u901f\u5165\u95e8"},{"location":"MongoDB/MongoDB/#31mongodb","text":"MongoDB\u662f\u4e00\u4e2a\u57fa\u4e8e\u5206\u5e03\u5f0f\u6587\u4ef6\u5b58\u50a8\u7684\u6570\u636e\u5e93\u3002\u7531C++\u8bed\u8a00\u7f16\u5199\u3002\u65e8\u5728\u4e3aWEB\u5e94\u7528\u63d0\u4f9b\u53ef\u6269\u5c55\u7684\u9ad8\u6027\u80fd\u6570\u636e\u5b58\u50a8\u89e3\u51b3\u65b9\u6848\u3002 MongoDB\u662f\u4e00\u4e2a\u4ecb\u4e8e\u5173\u7cfb\u6570\u636e\u5e93\u548c\u975e\u5173\u7cfb\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u4ea7\u54c1\uff0c\u662f\u975e\u5173\u7cfb\u6570\u636e\u5e93\u5f53\u4e2d\u529f\u80fd\u6700\u4e30\u5bcc\uff0c\u6700\u50cf\u5173\u7cfb\u6570\u636e\u5e93\u7684\uff0c\u5b83\u652f\u6301\u7684\u6570\u636e\u7ed3\u6784\u975e\u5e38\u677e\u6563\uff0c\u662f\u7c7b\u4f3cjson\u7684bson\u683c\u5f0f\uff0c\u56e0\u6b64\u53ef\u4ee5\u5b58\u50a8\u6bd4\u8f83\u590d\u6742\u7684\u6570\u636e\u7c7b\u578b\u3002 MongoDB\u6700\u5927\u7684\u7279\u70b9\u662f\u5b83\u652f\u6301\u7684\u67e5\u8be2\u8bed\u8a00\u975e\u5e38\u5f3a\u5927\uff0c\u5176\u8bed\u6cd5\u6709\u70b9\u7c7b\u4f3c\u4e8e\u9762\u5411\u5bf9\u8c61\u7684\u67e5\u8be2\u8bed\u8a00\uff0c\u51e0\u4e4e\u53ef\u4ee5\u5b9e\u73b0\u7c7b\u4f3c\u5173\u7cfb\u6570\u636e\u5e93\u5355\u8868\u67e5\u8be2\u7684\u7edd\u5927\u90e8\u5206\u529f\u80fd\uff0c\u800c\u4e14\u8fd8\u652f\u6301\u5bf9\u6570\u636e\u5efa\u7acb\u7d22\u5f15\u3002 \u5b98\u7f51\uff1ahttps://www.mongodb.com","title":"3.1\u3001MongoDB\u7b80\u4ecb"},{"location":"MongoDB/MongoDB/#32dockermongodb","text":"#\u62c9\u53d6\u955c\u50cf docker pull mongo:4.0.3 #\u521b\u5efa\u5bb9\u5668 docker create --name mongodb-server -p 27018 :27017 -v mongodb-data:/data/db mongo:4.0.3 --auth #\u542f\u52a8\u5bb9\u5668 docker start mongodb-server #\u8fdb\u5165\u5bb9\u5668 docker exec -it mongodb-server /bin/bash #\u8fdb\u5165admin\u6570\u636e\u5e93 mongo use admin #\u6dfb\u52a0\u7ba1\u7406\u5458\uff0c\u5176\u62e5\u6709\u7ba1\u7406\u7528\u6237\u548c\u89d2\u8272\u7684\u6743\u9650 db.createUser ({ user: 'root' , pwd: 'root' , roles: [ { role: \"root\" , db: \"admin\" } ] }) #\u6d4b\u8bd5\uff0c\u53d1\u73b0\u662f\u6ca1\u6709\u6743\u9650\u64cd\u4f5c\u7684 > show dbs 2020 -10-20T09:09:15.543+0000 E QUERY [ js ] Error: listDatabases failed: { \"ok\" : 0 , \"errmsg\" : \"command listDatabases requires authentication\" , \"code\" : 13 , \"codeName\" : \"Unauthorized\" } : #\u8fdb\u884c\u8ba4\u8bc1 mongo -u \"root\" -p \"root\" --authenticationDatabase \"admin\" #\u901a\u8fc7admin\u6dfb\u52a0\u666e\u901a\u7528\u6237 use admin db.createUser ({ user: 'tanhua' , pwd: 'l3SCjl0HvmSkTtiSbN0Swv40spYnHhDV' , roles: [ { role: \"readWrite\" , db: \"tanhua\" } ] }) ; #\u901a\u8fc7tanhua\u7528\u6237\u767b\u5f55\u8fdb\u884c\u6d4b\u8bd5 mongo -u \"tanhua\" -p \"l3SCjl0HvmSkTtiSbN0Swv40spYnHhDV\" --authenticationDatabase \"admin\" #\u6d4b\u8bd5 root@5d848955ff7e:/# mongo -u \"tanhua\" -p \"tanhua123\" --authenticationDatabase \"admin\" MongoDB shell version v4.0.3 connecting to: mongodb://127.0.0.1:27017 Implicit session: session { \"id\" : UUID ( \"6c368269-30f0-4b29-a224-05a38b5847e2\" ) } MongoDB server version: 4 .0.3 > use tanhua switched to db tanhua > db.user.insert ({ id:1,username: 'zhangsan' ,age:20 }) WriteResult ({ \"nInserted\" : 1 }) > db.user.find () { \"_id\" : ObjectId ( \"5f8eb2726e0de0aa9517afd3\" ) , \"id\" : 1 , \"username\" : \"zhangsan\" , \"age\" : 20 }","title":"3.2\u3001\u901a\u8fc7docker\u5b89\u88c5MongoDB"},{"location":"MongoDB/MongoDB/#33mongodb","text":"","title":"3.3\u3001MongoDB\u57fa\u672c\u64cd\u4f5c"},{"location":"MongoDB/MongoDB/#331","text":"\u4e3a\u4e86\u66f4\u597d\u7684\u7406\u89e3\uff0c\u4e0b\u9762\u4e0eSQL\u4e2d\u7684\u6982\u5ff5\u8fdb\u884c\u5bf9\u6bd4\uff1a SQL\u672f\u8bed/\u6982\u5ff5 MongoDB\u672f\u8bed/\u6982\u5ff5 \u89e3\u91ca/\u8bf4\u660e database database \u6570\u636e\u5e93 table collection \u6570\u636e\u5e93\u8868/\u96c6\u5408 row document \u6570\u636e\u8bb0\u5f55\u884c/\u6587\u6863 column field \u6570\u636e\u5b57\u6bb5/\u57df index index \u7d22\u5f15 table joins \u8868\u8fde\u63a5,MongoDB\u4e0d\u652f\u6301 primary key primary key \u4e3b\u952e,MongoDB\u81ea\u52a8\u5c06_id\u5b57\u6bb5\u8bbe\u7f6e\u4e3a\u4e3b\u952e","title":"3.3.1\u3001\u57fa\u672c\u6982\u5ff5"},{"location":"MongoDB/MongoDB/#332","text":"#\u67e5\u770b\u6240\u6709\u7684\u6570\u636e\u5e93 > show dbs admin 0 .000GB config 0 .000GB local 0 .000GB #\u901a\u8fc7use\u5173\u952e\u5b57\u5207\u6362\u6570\u636e\u5e93 > use admin switched to db admin #\u521b\u5efa\u6570\u636e\u5e93 #\u8bf4\u660e\uff1a\u5728MongoDB\u4e2d\uff0c\u6570\u636e\u5e93\u662f\u81ea\u52a8\u521b\u5efa\u7684\uff0c\u901a\u8fc7use\u5207\u6362\u5230\u65b0\u6570\u636e\u5e93\u4e2d\uff0c\u8fdb\u884c\u63d2\u5165\u6570\u636e\u5373\u53ef\u81ea\u52a8\u521b\u5efa\u6570\u636e\u5e93 > use testdb switched to db testdb > show dbs #\u5e76\u6ca1\u6709\u521b\u5efa\u6570\u636e\u5e93 admin 0 .000GB config 0 .000GB local 0 .000GB > db.user.insert ({ id:1,name: 'zhangsan' }) #\u63d2\u5165\u6570\u636e WriteResult ({ \"nInserted\" : 1 }) > show dbs admin 0 .000GB config 0 .000GB local 0 .000GB testdb 0 .000GB #\u6570\u636e\u5e93\u81ea\u52a8\u521b\u5efa #\u67e5\u770b\u8868 > show tables user > show collections user > #\u5220\u9664\u96c6\u5408\uff08\u8868\uff09 > db.user.drop () true #\u5982\u679c\u6210\u529f\u5220\u9664\u9009\u5b9a\u96c6\u5408\uff0c\u5219 drop() \u65b9\u6cd5\u8fd4\u56de true\uff0c\u5426\u5219\u8fd4\u56de false\u3002 #\u5220\u9664\u6570\u636e\u5e93 > use testdb #\u5148\u5207\u6362\u5230\u8981\u5220\u9664\u7684\u6570\u636e\u5e93\u4e2d switched to db testdb > db.dropDatabase () #\u5220\u9664\u6570\u636e\u5e93 { \"dropped\" : \"testdb\" , \"ok\" : 1 } > show dbs admin 0 .000GB config 0 .000GB local 0 .000GB","title":"3.3.2\u3001\u6570\u636e\u5e93\u4ee5\u53ca\u8868\u7684\u64cd\u4f5c"},{"location":"MongoDB/MongoDB/#333","text":"\u5728MongoDB\u4e2d\uff0c\u5b58\u50a8\u7684\u6587\u6863\u7ed3\u6784\u662f\u4e00\u79cd\u7c7b\u4f3c\u4e8ejson\u7684\u7ed3\u6784\uff0c\u79f0\u4e4b\u4e3abson\uff08\u5168\u79f0\u4e3a\uff1aBinary JSON\uff09\u3002 #\u63d2\u5165\u6570\u636e #\u8bed\u6cd5\uff1adb.COLLECTION_NAME.insert(document) > db.user.insert ({ id:1,username: 'zhangsan' ,age:20 }) WriteResult ({ \"nInserted\" : 1 }) > db.user.save ({ id:2,username: 'lisi' ,age:25 }) WriteResult ({ \"nInserted\" : 1 }) > db.user.find () #\u67e5\u8be2\u6570\u636e { \"_id\" : ObjectId ( \"5c08c0024b318926e0c1f6dc\" ) , \"id\" : 1 , \"username\" : \"zhangsan\" , \"age\" : 20 } { \"_id\" : ObjectId ( \"5c08c0134b318926e0c1f6dd\" ) , \"id\" : 2 , \"username\" : \"lisi\" , \"age\" : 25 }","title":"3.3.3\u3001\u65b0\u589e\u6570\u636e"},{"location":"MongoDB/MongoDB/#334","text":"update() \u65b9\u6cd5\u7528\u4e8e\u66f4\u65b0\u5df2\u5b58\u5728\u7684\u6587\u6863\u3002\u8bed\u6cd5\u683c\u5f0f\u5982\u4e0b\uff1a db.collection.update ( <query>, <update>, [ upsert: <boolean>, multi: <boolean>, writeConcern: <document> ] ) \u53c2\u6570\u8bf4\u660e\uff1a query : update\u7684\u67e5\u8be2\u6761\u4ef6\uff0c\u7c7b\u4f3csql update\u67e5\u8be2\u5185where\u540e\u9762\u7684\u3002 update : update\u7684\u5bf9\u8c61\u548c\u4e00\u4e9b\u66f4\u65b0\u7684\u64cd\u4f5c\u7b26\uff08\u5982 , inc...\uff09\u7b49\uff0c\u4e5f\u53ef\u4ee5\u7406\u89e3\u4e3asql update\u67e5\u8be2\u5185set\u540e\u9762\u7684 upsert : \u53ef\u9009\uff0c\u8fd9\u4e2a\u53c2\u6570\u7684\u610f\u601d\u662f\uff0c\u5982\u679c\u4e0d\u5b58\u5728update\u7684\u8bb0\u5f55\uff0c\u662f\u5426\u63d2\u5165objNew,true\u4e3a\u63d2\u5165\uff0c\u9ed8\u8ba4\u662ffalse\uff0c\u4e0d\u63d2\u5165\u3002 multi : \u53ef\u9009\uff0cmongodb \u9ed8\u8ba4\u662ffalse,\u53ea\u66f4\u65b0\u627e\u5230\u7684\u7b2c\u4e00\u6761\u8bb0\u5f55\uff0c\u5982\u679c\u8fd9\u4e2a\u53c2\u6570\u4e3atrue,\u5c31\u628a\u6309\u6761\u4ef6\u67e5\u51fa\u6765\u591a\u6761\u8bb0\u5f55\u5168\u90e8\u66f4\u65b0\u3002 writeConcern :\u53ef\u9009\uff0c\u629b\u51fa\u5f02\u5e38\u7684\u7ea7\u522b\u3002 > db.user.find () { \"_id\" : ObjectId ( \"5c08c0024b318926e0c1f6dc\" ) , \"id\" : 1 , \"username\" : \"zhangsan\" , \"age\" : 20 } { \"_id\" : ObjectId ( \"5c08c0134b318926e0c1f6dd\" ) , \"id\" : 2 , \"username\" : \"lisi\" , \"age\" : 25 } > db.user.update ({ id:1 } , { $set : { age:22 }}) #\u66f4\u65b0\u6570\u636e WriteResult ({ \"nMatched\" : 1 , \"nUpserted\" : 0 , \"nModified\" : 1 }) > db.user.find () { \"_id\" : ObjectId ( \"5c08c0024b318926e0c1f6dc\" ) , \"id\" : 1 , \"username\" : \"zhangsan\" , \"age\" : 22 } { \"_id\" : ObjectId ( \"5c08c0134b318926e0c1f6dd\" ) , \"id\" : 2 , \"username\" : \"lisi\" , \"age\" : 25 } #\u6ce8\u610f\uff1a\u5982\u679c\u8fd9\u6837\u5199\uff0c\u4f1a\u5220\u9664\u6389\u5176\u4ed6\u7684\u5b57\u6bb5 > db.user.update ({ id:1 } , { age:25 }) WriteResult ({ \"nMatched\" : 1 , \"nUpserted\" : 0 , \"nModified\" : 1 }) > db.user.find () { \"_id\" : ObjectId ( \"5c08c0024b318926e0c1f6dc\" ) , \"age\" : 25 } { \"_id\" : ObjectId ( \"5c08c0134b318926e0c1f6dd\" ) , \"id\" : 2 , \"username\" : \"lisi\" , \"age\" : 25 } #\u66f4\u65b0\u4e0d\u5b58\u5728\u7684\u5b57\u6bb5\uff0c\u4f1a\u65b0\u589e\u5b57\u6bb5 > db.user.update ({ id:2 } , { $set : { sex:1 }}) #\u66f4\u65b0\u6570\u636e > db.user.find () { \"_id\" : ObjectId ( \"5c08c0024b318926e0c1f6dc\" ) , \"age\" : 25 } { \"_id\" : ObjectId ( \"5c08c0134b318926e0c1f6dd\" ) , \"id\" : 2 , \"username\" : \"lisi\" , \"age\" : 25 , \"sex\" : 1 } #\u66f4\u65b0\u4e0d\u5b58\u5728\u7684\u6570\u636e\uff0c\u9ed8\u8ba4\u4e0d\u4f1a\u65b0\u589e\u6570\u636e > db.user.update ({ id:3 } , { $set : { sex:1 }}) WriteResult ({ \"nMatched\" : 0 , \"nUpserted\" : 0 , \"nModified\" : 0 }) > db.user.find () { \"_id\" : ObjectId ( \"5c08c0024b318926e0c1f6dc\" ) , \"age\" : 25 } { \"_id\" : ObjectId ( \"5c08c0134b318926e0c1f6dd\" ) , \"id\" : 2 , \"username\" : \"lisi\" , \"age\" : 25 , \"sex\" : 1 } #\u5982\u679c\u8bbe\u7f6e\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3atrue\uff0c\u5c31\u662f\u65b0\u589e\u6570\u636e > db.user.update ({ id:3 } , { $set : { sex:1 }} ,true ) WriteResult ({ \"nMatched\" : 0 , \"nUpserted\" : 1 , \"nModified\" : 0 , \"_id\" : ObjectId ( \"5c08cb281418d073246bc642\" ) }) > db.user.find () { \"_id\" : ObjectId ( \"5c08c0024b318926e0c1f6dc\" ) , \"age\" : 25 } { \"_id\" : ObjectId ( \"5c08c0134b318926e0c1f6dd\" ) , \"id\" : 2 , \"username\" : \"lisi\" , \"age\" : 25 , \"sex\" : 1 } { \"_id\" : ObjectId ( \"5c08cb281418d073246bc642\" ) , \"id\" : 3 , \"sex\" : 1 }","title":"3.3.4\u3001\u66f4\u65b0\u6570\u636e"},{"location":"MongoDB/MongoDB/#335","text":"\u901a\u8fc7remove()\u65b9\u6cd5\u8fdb\u884c\u5220\u9664\u6570\u636e\uff0c\u8bed\u6cd5\u5982\u4e0b\uff1a db.collection.remove ( <query>, { justOne: <boolean>, writeConcern: <document> } ) \u53c2\u6570\u8bf4\u660e\uff1a query :\uff08\u53ef\u9009\uff09\u5220\u9664\u7684\u6587\u6863\u7684\u6761\u4ef6\u3002 justOne : \uff08\u53ef\u9009\uff09\u5982\u679c\u8bbe\u4e3a true \u6216 1\uff0c\u5219\u53ea\u5220\u9664\u4e00\u4e2a\u6587\u6863\uff0c\u5982\u679c\u4e0d\u8bbe\u7f6e\u8be5\u53c2\u6570\uff0c\u6216\u4f7f\u7528\u9ed8\u8ba4\u503c false\uff0c\u5219\u5220\u9664\u6240\u6709\u5339\u914d\u6761\u4ef6\u7684\u6587\u6863\u3002 writeConcern :\uff08\u53ef\u9009\uff09\u629b\u51fa\u5f02\u5e38\u7684\u7ea7\u522b\u3002 \u5b9e\u4f8b\uff1a > db.user.remove ({ age:25 }) WriteResult ({ \"nRemoved\" : 2 }) #\u5220\u9664\u4e862\u6761\u6570\u636e #\u63d2\u51654\u6761\u6d4b\u8bd5\u6570\u636e db.user.insert ({ id:1,username: 'zhangsan' ,age:20 }) db.user.insert ({ id:2,username: 'lisi' ,age:21 }) db.user.insert ({ id:3,username: 'wangwu' ,age:22 }) db.user.insert ({ id:4,username: 'zhaoliu' ,age:22 }) > db.user.remove ({ age:22 } ,true ) WriteResult ({ \"nRemoved\" : 1 }) #\u5220\u9664\u4e861\u6761\u6570\u636e #\u5220\u9664\u6240\u6709\u6570\u636e > db.user.remove ({}) #\u8bf4\u660e\uff1a\u4e3a\u4e86\u7b80\u5316\u64cd\u4f5c\uff0c\u5b98\u65b9\u63a8\u8350\u4f7f\u7528deleteOne()\u4e0edeleteMany()\u8fdb\u884c\u5220\u9664\u6570\u636e\u64cd\u4f5c\u3002 db.user.deleteOne ({ id:1 }) db.user.deleteMany ({}) #\u5220\u9664\u6240\u6709\u6570\u636e","title":"3.3.5\u3001\u5220\u9664\u6570\u636e"},{"location":"MongoDB/MongoDB/#336","text":"MongoDB \u67e5\u8be2\u6570\u636e\u7684\u8bed\u6cd5\u683c\u5f0f\u5982\u4e0b\uff1a db . user . find ( [ query ] , [ fields ] ) query \uff1a\u53ef\u9009\uff0c\u4f7f\u7528\u67e5\u8be2\u64cd\u4f5c\u7b26\u6307\u5b9a\u67e5\u8be2\u6761\u4ef6 fields \uff1a\u53ef\u9009\uff0c\u4f7f\u7528\u6295\u5f71\u64cd\u4f5c\u7b26\u6307\u5b9a\u8fd4\u56de\u7684\u952e\u3002\u67e5\u8be2\u65f6\u8fd4\u56de\u6587\u6863\u4e2d\u6240\u6709\u952e\u503c\uff0c \u53ea\u9700\u7701\u7565\u8be5\u53c2\u6570\u5373\u53ef\uff08\u9ed8\u8ba4\u7701\u7565\uff09\u3002 \u5982\u679c\u4f60\u9700\u8981\u4ee5\u6613\u8bfb\u7684\u65b9\u5f0f\u6765\u8bfb\u53d6\u6570\u636e\uff0c\u53ef\u4ee5\u4f7f\u7528 pretty() \u65b9\u6cd5\uff0c\u8bed\u6cd5\u683c\u5f0f\u5982\u4e0b\uff1a >db.col.find().pretty() pretty() \u65b9\u6cd5\u4ee5\u683c\u5f0f\u5316\u7684\u65b9\u5f0f\u6765\u663e\u793a\u6240\u6709\u6587\u6863\u3002 \u6761\u4ef6\u67e5\u8be2\uff1a \u64cd\u4f5c \u683c\u5f0f \u8303\u4f8b RDBMS\u4e2d\u7684\u7c7b\u4f3c\u8bed\u53e5 \u7b49\u4e8e {<key>:<value> } db.col.find({\"by\":\"\u9ed1\u9a6c\u7a0b\u5e8f\u5458\"}).pretty() where by = '\u9ed1\u9a6c\u7a0b\u5e8f\u5458' \u5c0f\u4e8e {<key>:{$lt:<value>}} db.col.find({\"likes\":{$lt:50}}).pretty() where likes < 50 \u5c0f\u4e8e\u6216\u7b49\u4e8e {<key>:{$lte:<value>}} db.col.find({\"likes\":{$lte:50}}).pretty() where likes <= 50 \u5927\u4e8e {<key>:{$gt:<value>}} db.col.find({\"likes\":{$gt:50}}).pretty() where likes > 50 \u5927\u4e8e\u6216\u7b49\u4e8e {<key>:{$gte:<value>}} db.col.find({\"likes\":{$gte:50}}).pretty() where likes >= 50 \u4e0d\u7b49\u4e8e {<key>:{$ne:<value>}} db.col.find({\"likes\":{$ne:50}}).pretty() where likes != 50 \u5b9e\u4f8b\uff1a #\u63d2\u5165\u6d4b\u8bd5\u6570\u636e db.user.insert ({ id:1,username: 'zhangsan' ,age:20 }) db.user.insert ({ id:2,username: 'lisi' ,age:21 }) db.user.insert ({ id:3,username: 'wangwu' ,age:22 }) db.user.insert ({ id:4,username: 'zhaoliu' ,age:22 }) db.user.find () #\u67e5\u8be2\u5168\u90e8\u6570\u636e db.user.find ({} , { id:1,username:1 }) #\u53ea\u67e5\u8be2id\u4e0eusername\u5b57\u6bb5 db.user.find () .count () #\u67e5\u8be2\u6570\u636e\u6761\u6570 db.user.find ({ id:1 }) #\u67e5\u8be2id\u4e3a1\u7684\u6570\u636e db.user.find ({ age: { $lte :21 }}) #\u67e5\u8be2\u5c0f\u4e8e\u7b49\u4e8e21\u7684\u6570\u636e db.user.find ({ age: { $lte :21 } , id: { $gte :2 }}) #and\u67e5\u8be2\uff0cage\u5c0f\u4e8e\u7b49\u4e8e21\u5e76\u4e14id\u5927\u4e8e\u7b49\u4e8e2 db.user.find ({ $or : [{ id:1 } , { id:2 }]}) #\u67e5\u8be2id=1 or id=2 #\u5206\u9875\u67e5\u8be2\uff1aSkip()\u8df3\u8fc7\u51e0\u6761\uff0climit()\u67e5\u8be2\u6761\u6570 db.user.find () .limit ( 2 ) .skip ( 1 ) #\u8df3\u8fc71\u6761\u6570\u636e\uff0c\u67e5\u8be22\u6761\u6570\u636e db.user.find () .sort ({ id:-1 }) #\u6309\u7167age\u5012\u5e8f\u6392\u5e8f\uff0c-1\u4e3a\u5012\u5e8f\uff0c1\u4e3a\u6b63\u5e8f","title":"3.3.6\u3001\u67e5\u8be2\u6570\u636e"},{"location":"MongoDB/MongoDB/#34","text":"\u7d22\u5f15\u901a\u5e38\u80fd\u591f\u6781\u5927\u7684\u63d0\u9ad8\u67e5\u8be2\u7684\u6548\u7387\uff0c\u5982\u679c\u6ca1\u6709\u7d22\u5f15\uff0cMongoDB\u5728\u8bfb\u53d6\u6570\u636e\u65f6\u5fc5\u987b\u626b\u63cf\u96c6\u5408\u4e2d\u7684\u6bcf\u4e2a\u6587\u4ef6\u5e76\u9009\u53d6\u90a3\u4e9b\u7b26\u5408\u67e5\u8be2\u6761\u4ef6\u7684\u8bb0\u5f55\u3002 \u8fd9\u79cd\u626b\u63cf\u5168\u96c6\u5408\u7684\u67e5\u8be2\u6548\u7387\u662f\u975e\u5e38\u4f4e\u7684\uff0c\u7279\u522b\u5728\u5904\u7406\u5927\u91cf\u7684\u6570\u636e\u65f6\uff0c\u67e5\u8be2\u53ef\u4ee5\u8981\u82b1\u8d39\u51e0\u5341\u79d2\u751a\u81f3\u51e0\u5206\u949f\uff0c\u8fd9\u5bf9\u7f51\u7ad9\u7684\u6027\u80fd\u662f\u975e\u5e38\u81f4\u547d\u7684\u3002 \u7d22\u5f15\u662f\u7279\u6b8a\u7684\u6570\u636e\u7ed3\u6784\uff0c\u7d22\u5f15\u5b58\u50a8\u5728\u4e00\u4e2a\u6613\u4e8e\u904d\u5386\u8bfb\u53d6\u7684\u6570\u636e\u96c6\u5408\u4e2d\uff0c\u7d22\u5f15\u662f\u5bf9\u6570\u636e\u5e93\u8868\u4e2d\u4e00\u5217\u6216\u591a\u5217\u7684\u503c\u8fdb\u884c\u6392\u5e8f\u7684\u4e00\u79cd\u7ed3\u6784 #\u67e5\u770b\u7d22\u5f15 > db.user.getIndexes () [ { \"v\" : 2 , \"key\" : { \"_id\" : 1 } , \"name\" : \"_id_\" , \"ns\" : \"testdb.user\" } ] #\u8bf4\u660e\uff1a1\u8868\u793a\u5347\u5e8f\u521b\u5efa\u7d22\u5f15\uff0c-1\u8868\u793a\u964d\u5e8f\u521b\u5efa\u7d22\u5f15\u3002 #\u521b\u5efa\u7d22\u5f15 > db.user.createIndex ({ 'age' :1 }) { \"createdCollectionAutomatically\" : false, \"numIndexesBefore\" : 1 , \"numIndexesAfter\" : 2 , \"ok\" : 1 } #\u5220\u9664\u7d22\u5f15 db.user.dropIndex ( \"age_1\" ) #\u6216\u8005\uff0c\u5220\u9664\u9664\u4e86_id\u4e4b\u5916\u7684\u7d22\u5f15 db.user.dropIndexes () #\u521b\u5efa\u8054\u5408\u7d22\u5f15 db.user.createIndex ({ 'age' :1, 'id' :-1 }) #\u67e5\u770b\u7d22\u5f15\u5927\u5c0f\uff0c\u5355\u4f4d\uff1a\u5b57\u8282 db.user.totalIndexSize ()","title":"3.4\u3001\u7d22\u5f15"},{"location":"MongoDB/MongoDB/#35","text":"MongoDB \u67e5\u8be2\u5206\u6790\u53ef\u4ee5\u786e\u4fdd\u6211\u4eec\u5efa\u8bae\u7684\u7d22\u5f15\u662f\u5426\u6709\u6548\uff0c\u662f\u67e5\u8be2\u8bed\u53e5\u6027\u80fd\u5206\u6790\u7684\u91cd\u8981\u5de5\u5177\u3002 #\u63d2\u51651000\u6761\u6570\u636e for ( var i = 1 ; i< 1000 ; i++ ) db.user.insert ({ id:100+i,username: 'name_' +i,age:10+i }) #\u67e5\u770b\u6267\u884c\u8ba1\u5212 > db.user.find ({ age: { $gt :100 } ,id: { $lt :200 }}) .explain () { \"queryPlanner\" : { \"plannerVersion\" : 1 , \"namespace\" : \"testdb.user\" , \"indexFilterSet\" : false, \"parsedQuery\" : { \" $and \" : [ { \"id\" : { \" $lt \" : 200 } } , { \"age\" : { \" $gt \" : 100 } } ] } , \"winningPlan\" : { #\u6700\u4f73\u6267\u884c\u8ba1\u5212 \"stage\" : \"FETCH\" , #\u67e5\u8be2\u65b9\u5f0f\uff0c\u5e38\u89c1\u7684\u6709COLLSCAN/\u5168\u8868\u626b\u63cf\u3001IXSCAN/\u7d22\u5f15\u626b\u63cf\u3001FETCH/\u6839\u636e\u7d22\u5f15\u53bb\u68c0\u7d22\u6587\u6863\u3001SHARD_MERGE/\u5408\u5e76\u5206\u7247\u7ed3\u679c\u3001IDHACK/\u9488\u5bf9_id\u8fdb\u884c\u67e5\u8be2 \"inputStage\" : { \"stage\" : \"IXSCAN\" , \"keyPattern\" : { \"age\" : 1 , \"id\" : -1 } , \"indexName\" : \"age_1_id_-1\" , \"isMultiKey\" : false, \"multiKeyPaths\" : { \"age\" : [ ] , \"id\" : [ ] } , \"isUnique\" : false, \"isSparse\" : false, \"isPartial\" : false, \"indexVersion\" : 2 , \"direction\" : \"forward\" , \"indexBounds\" : { \"age\" : [ \"(100.0, inf.0]\" ] , \"id\" : [ \"(200.0, -inf.0]\" ] } } } , \"rejectedPlans\" : [ ] } , \"serverInfo\" : { \"host\" : \"c493d5ff750a\" , \"port\" : 27017 , \"version\" : \"4.0.3\" , \"gitVersion\" : \"7ea530946fa7880364d88c8d8b6026bbc9ffa48c\" } , \"ok\" : 1 } #\u6d4b\u8bd5\u6ca1\u6709\u4f7f\u7528\u7d22\u5f15 > db.user.find ({ username: 'zhangsan' }) .explain () { \"queryPlanner\" : { \"plannerVersion\" : 1 , \"namespace\" : \"testdb.user\" , \"indexFilterSet\" : false, \"parsedQuery\" : { \"username\" : { \" $eq \" : \"zhangsan\" } } , \"winningPlan\" : { \"stage\" : \"COLLSCAN\" , #\u5168\u8868\u626b\u63cf \"filter\" : { \"username\" : { \" $eq \" : \"zhangsan\" } } , \"direction\" : \"forward\" } , \"rejectedPlans\" : [ ] } , \"serverInfo\" : { \"host\" : \"c493d5ff750a\" , \"port\" : 27017 , \"version\" : \"4.0.3\" , \"gitVersion\" : \"7ea530946fa7880364d88c8d8b6026bbc9ffa48c\" } , \"ok\" : 1 }","title":"3.5\u3001\u6267\u884c\u8ba1\u5212"},{"location":"MongoDB/MongoDB/#36ui","text":"Robo 3T\u662fMongoDB\u7684\u5ba2\u6237\u7aef\u5de5\u5177\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5b83\u6765\u64cd\u4f5cMongoDB\u3002 \u67e5\u770b\u6570\u636e\uff1a \u6216\u4f7f\u7528Navicat Premium 15\uff1a","title":"3.6\u3001UI\u5ba2\u6237\u7aef\u5de5\u5177"},{"location":"MongoDB/MongoDB/#4springbootmongodb","text":"spring-data\u5bf9MongoDB\u505a\u4e86\u652f\u6301\uff0c\u4f7f\u7528spring-data-mongodb\u53ef\u4ee5\u7b80\u5316MongoDB\u7684\u64cd\u4f5c\u3002 \u5730\u5740\uff1ahttps://spring.io/projects/spring-data-mongodb","title":"4\u3001SpringBoot\u6574\u5408MongoDB"},{"location":"MongoDB/MongoDB/#41","text":"<?xml version=\"1.0\" encoding=\"UTF-8\"?> <project xmlns= \"http://maven.apache.org/POM/4.0.0\" xmlns:xsi= \"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation= \"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\" > <modelVersion> 4.0.0 </modelVersion> <parent> <groupId> org.springframework.boot </groupId> <artifactId> spring-boot-starter-parent </artifactId> <version> 2.1.0.RELEASE </version> </parent> <groupId> cn.itcast.mongodb </groupId> <artifactId> itcast-mongodb </artifactId> <version> 1.0-SNAPSHOT </version> <dependencies> <dependency> <groupId> org.springframework.boot </groupId> <artifactId> spring-boot-starter-data-mongodb </artifactId> </dependency> <dependency> <groupId> org.springframework.boot </groupId> <artifactId> spring-boot-starter-test </artifactId> <scope> test </scope> </dependency> <dependency> <groupId> org.projectlombok </groupId> <artifactId> lombok </artifactId> <optional> true </optional> <version> 1.18.4 </version> </dependency> </dependencies> <build> <plugins> <!-- java\u7f16\u8bd1\u63d2\u4ef6 --> <plugin> <groupId> org.apache.maven.plugins </groupId> <artifactId> maven-compiler-plugin </artifactId> <version> 3.2 </version> <configuration> <source> 1.8 </source> <target> 1.8 </target> <encoding> UTF-8 </encoding> </configuration> </plugin> </plugins> </build> </project>","title":"4.1\u3001\u5bfc\u5165\u4f9d\u8d56"},{"location":"MongoDB/MongoDB/#42applicationproperties","text":"# Spring boot application spring.application.name = itcast-mongodb #\u65e0\u8ba4\u8bc1\u4fe1\u606f\u7684\u914d\u7f6e #spring.data.mongodb.uri=mongodb://192.168.31.81:27017/tanhua #springboot \u914d\u7f6e spring.data.mongodb.username = tanhua spring.data.mongodb.password = l3SCjl0HvmSkTtiSbN0Swv40spYnHhDV spring.data.mongodb.authentication-database = admin spring.data.mongodb.database = tanhua spring.data.mongodb.port = 27018 spring.data.mongodb.host = 192.168.31.81","title":"4.2\u3001\u7f16\u5199application.properties\u914d\u7f6e\u6587\u4ef6"},{"location":"MongoDB/MongoDB/#43","text":"package cn.itcast.mongodb.pojo ; import lombok.AllArgsConstructor ; import lombok.Data ; import lombok.NoArgsConstructor ; import org.bson.types.ObjectId ; @Data @AllArgsConstructor @NoArgsConstructor public class Person { private ObjectId id ; private String name ; private int age ; private Address address ; } package cn.itcast.mongodb.pojo ; import lombok.AllArgsConstructor ; import lombok.Data ; import lombok.NoArgsConstructor ; @Data @AllArgsConstructor @NoArgsConstructor public class Address { private String street ; private String city ; private String zip ; }","title":"4.3\u3001\u7f16\u5199\u5b9e\u4f53"},{"location":"MongoDB/MongoDB/#44dao","text":"package cn.itcast.mongodb.dao ; import cn.itcast.mongodb.pojo.Person ; import com.mongodb.client.result.DeleteResult ; import com.mongodb.client.result.UpdateResult ; import org.springframework.beans.factory.annotation.Autowired ; import org.springframework.data.mongodb.core.MongoTemplate ; import org.springframework.data.mongodb.core.query.Criteria ; import org.springframework.data.mongodb.core.query.Query ; import org.springframework.data.mongodb.core.query.Update ; import org.springframework.stereotype.Component ; import java.util.List ; @Component public class PersonDao { @Autowired private MongoTemplate mongoTemplate ; public void savePerson ( Person person ) { this . mongoTemplate . save ( person ); } public List < Person > queryPersonListByName ( String name ) { Query query = Query . query ( Criteria . where ( \"name\" ). is ( name )); return this . mongoTemplate . find ( query , Person . class ); } public List < Person > queryPersonPageList ( Integer page , Integer rows ) { Query query = new Query (). limit ( rows ). skip (( page - 1 ) * rows ); return this . mongoTemplate . find ( query , Person . class ); } public UpdateResult update ( Person person ) { Query query = Query . query ( Criteria . where ( \"id\" ). is ( person . getId ())); Update update = Update . update ( \"age\" , person . getAge ()); return this . mongoTemplate . updateFirst ( query , update , Person . class ); } public DeleteResult deleteById ( String id ) { Query query = Query . query ( Criteria . where ( \"id\" ). is ( id )); return this . mongoTemplate . remove ( query , Person . class ); } }","title":"4.4\u3001\u7f16\u5199dao"},{"location":"MongoDB/MongoDB/#45","text":"package cn.itcast.mongodb ; import org.springframework.boot.SpringApplication ; import org.springframework.boot.autoconfigure.SpringBootApplication ; @SpringBootApplication public class MongoApplication { public static void main ( String [] args ) { SpringApplication . run ( MongoApplication . class , args ); } }","title":"4.5\u3001\u7f16\u5199\u542f\u52a8\u7c7b"},{"location":"MongoDB/MongoDB/#46","text":"package cn.itcast.mongodb ; import cn.itcast.mongodb.dao.PersonDao ; import cn.itcast.mongodb.pojo.Address ; import cn.itcast.mongodb.pojo.Person ; import org.bson.types.ObjectId ; import org.junit.Test ; import org.junit.runner.RunWith ; import org.springframework.beans.factory.annotation.Autowired ; import org.springframework.boot.test.context.SpringBootTest ; import org.springframework.test.context.junit4.SpringRunner ; import java.util.List ; @RunWith ( SpringRunner . class ) @SpringBootTest public class TestPersonDao { @Autowired private PersonDao personDao ; @Test public void testSave () { Person person = new Person ( ObjectId . get (), \"\u5f20\u4e09\" , 20 , new Address ( \"\u4eba\u6c11\u8def\" , \"\u4e0a\u6d77\u5e02\" , \"666666\" )); this . personDao . savePerson ( person ); } @Test public void testQuery () { List < Person > personList = this . personDao . queryPersonListByName ( \"\u5f20\u4e09\" ); for ( Person person : personList ) { System . out . println ( person ); } } @Test public void testQuery2 () { List < Person > personList = this . personDao . queryPersonPageList ( 2 , 2 ); for ( Person person : personList ) { System . out . println ( person ); } } @Test public void testUpdate () { Person person = new Person (); person . setId ( new ObjectId ( \"5c0956ce235e192520086736\" )); person . setAge ( 30 ); this . personDao . update ( person ); } @Test public void testDelete () { this . personDao . deleteById ( \"5c09ca05235e192d8887a389\" ); } }","title":"4.6\u3001\u7f16\u5199\u5355\u5143\u6d4b\u8bd5"},{"location":"ajax/","text":"1\u3001Ajax\u5feb\u901f\u5165\u95e8 \u00b6 1.1\u3001AJAX\u4ecb\u7ecd \u00b6 AJAX(Asynchronous JavaScript And XML)\uff1a\u5f02\u6b65\u7684 JavaScript \u548c XML\u3002 \u672c\u8eab\u4e0d\u662f\u4e00\u79cd\u65b0\u6280\u672f\uff0c\u800c\u662f\u591a\u4e2a\u6280\u672f\u7efc\u5408\u3002\u7528\u4e8e\u5feb\u901f\u521b\u5efa\u52a8\u6001\u7f51\u9875\u7684\u6280\u672f\u3002 \u4e00\u822c\u7684\u7f51\u9875\u5982\u679c\u9700\u8981\u66f4\u65b0\u5185\u5bb9\uff0c\u5fc5\u9700\u91cd\u65b0\u52a0\u8f7d\u4e2a\u9875\u9762\u3002 \u800c AJAX \u901a\u8fc7\u6d4f\u89c8\u5668\u4e0e\u670d\u52a1\u5668\u8fdb\u884c\u5c11\u91cf\u6570\u636e\u4ea4\u6362\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7f51\u9875\u5b9e\u73b0\u5f02\u6b65\u66f4\u65b0\u3002\u4e5f\u5c31\u662f\u5728\u4e0d\u91cd\u65b0\u52a0\u8f7d\u6574\u4e2a\u9875 \u9762\u7684\u60c5\u51b5\u4e0b\uff0c\u5bf9\u7f51\u9875\u7684\u90e8\u5206\u5185\u5bb9\u8fdb\u884c \u5c40\u90e8\u66f4\u65b0 \u3002 \u200b \u200b 1.2\u3001\u539f\u751fJS\u5b9e\u73b0AJAX \u00b6 \u4ee3\u7801\u5b9e\u73b0 ```java import javax.servlet.ServletException; import javax.servlet.annotation.WebServlet; import javax.servlet.http.HttpServlet; import javax.servlet.http.HttpServletRequest; import javax.servlet.http.HttpServletResponse; import java.io.IOException; @WebServlet(\"/userServlet\") public class UserServlet extends HttpServlet { @Override protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException { //\u8bbe\u7f6e\u8bf7\u6c42\u548c\u54cd\u5e94\u7684\u4e71\u7801 req.setCharacterEncoding(\"UTF-8\"); resp.setContentType(\"text/html;charset=UTF-8\"); //1.\u83b7\u53d6\u8bf7\u6c42\u53c2\u6570 String username = req.getParameter(\"username\"); //\u6a21\u62df\u670d\u52a1\u5668\u5904\u7406\u8bf7\u6c42\u9700\u89815\u79d2\u949f /*try { Thread.sleep(5000); } catch (InterruptedException e) { e.printStackTrace(); }*/ //2.\u5224\u65ad\u59d3\u540d\u662f\u5426\u5df2\u6ce8\u518c if(\"zhangsan\".equals(username)) { resp.getWriter().write(\" <font color= 'red' > \u7528\u6237\u540d\u5df2\u6ce8\u518c </font> \"); }else { resp.getWriter().write(\" <font color= 'green' > \u7528\u6237\u540d\u53ef\u7528 </font> \"); } } @Override protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException { doGet(req,resp); } } ``` html\u4ee3\u7801 ```html \u7528\u6237\u6ce8\u518c \u59d3\u540d\uff1a \u5bc6\u7801\uff1a //1.\u4e3a\u59d3\u540d\u7ed1\u5b9a\u5931\u53bb\u7126\u70b9\u4e8b\u4ef6 document.getElementById(\"username\").onblur = function() { //2.\u521b\u5efaXMLHttpRequest\u6838\u5fc3\u5bf9\u8c61 let xmlHttp = new XMLHttpRequest(); //3.\u6253\u5f00\u94fe\u63a5 let username = document.getElementById(\"username\").value; xmlHttp.open(\"GET\",\"userServlet?username=\"+username,true); //xmlHttp.open(\"GET\",\"userServlet?username=\"+username,false); //4.\u53d1\u9001\u8bf7\u6c42 xmlHttp.send(); //5.\u5904\u7406\u54cd\u5e94 xmlHttp.onreadystatechange = function() { //\u5224\u65ad\u8bf7\u6c42\u548c\u54cd\u5e94\u662f\u5426\u6210\u529f if(xmlHttp.readyState == 4 && xmlHttp.status == 200) { //\u5c06\u54cd\u5e94\u7684\u6570\u636e\u663e\u793a\u5230span\u6807\u7b7e document.getElementById(\"uSpan\").innerHTML = xmlHttp.responseText; } } } ``` 1.3\u3001\u539f\u751fJS\u5b9e\u73b0AJAX\u8be6\u89e3 \u00b6 \u6838\u5fc3\u5bf9\u8c61\uff1aXMLHttpRequest \u200b \u7528\u4e8e\u5728\u540e\u53f0\u4e0e\u670d\u52a1\u5668\u4ea4\u6362\u6570\u636e\u3002\u53ef\u4ee5\u5728\u4e0d\u91cd\u65b0\u52a0\u8f7d\u6574\u4e2a\u7f51\u9875\u7684\u60c5\u51b5\u4e0b\uff0c\u5bf9\u7f51\u9875\u7684\u67d0\u90e8\u5206\u8fdb\u884c\u66f4\u65b0\u3002 \u6253\u5f00\u94fe\u63a5\uff1aopen(method,url,async) \u200b method\uff1a\u8bf7\u6c42\u7684\u7c7b\u578b GET \u6216 POST\u3002 \u200b url\uff1a\u8bf7\u6c42\u8d44\u6e90\u7684\u8def\u5f84\u3002 \u200b async\uff1atrue(\u5f02\u6b65) \u6216 false(\u540c\u6b65)\u3002 \u53d1\u9001\u8bf7\u6c42\uff1asend(String params) \u200b params\uff1a\u8bf7\u6c42\u7684\u53c2\u6570(POST \u4e13\u7528)\u3002 \u5904\u7406\u54cd\u5e94\uff1aonreadystatechange \u200b readyState\uff1a0-\u8bf7\u6c42\u672a\u521d\u59cb\u5316\uff0c1-\u670d\u52a1\u5668\u8fde\u63a5\u5df2\u5efa\u7acb\uff0c2-\u8bf7\u6c42\u5df2\u63a5\u6536\uff0c3-\u8bf7\u6c42\u5904\u7406\u4e2d\uff0c4-\u8bf7\u6c42\u5df2\u5b8c\u6210\uff0c\u4e14\u54cd\u5e94\u5df2\u5c31\u7eea\u3002 \u200b status\uff1a200-\u54cd\u5e94\u5df2\u5168\u90e8 OK\u3002 \u83b7\u5f97\u54cd\u5e94\u6570\u636e\u5f62\u5f0f \u200b responseText\uff1a\u83b7\u5f97\u5b57\u7b26\u4e32\u5f62\u5f0f\u7684\u54cd\u5e94\u6570\u636e\u3002 \u200b responseXML\uff1a\u83b7\u5f97 XML \u5f62\u5f0f\u7684\u54cd\u5e94\u6570\u636e\u3002 1.4\u3001JQuery\u7684GET\u65b9\u5f0f\u5b9e\u73b0AJAX \u00b6 \u6838\u5fc3\u8bed\u6cd5\uff1a $.get(url,[data],[callback],[type]); url\uff1a\u8bf7\u6c42\u7684\u8d44\u6e90\u8def\u5f84\u3002 data\uff1a\u53d1\u9001\u7ed9\u670d\u52a1\u5668\u7aef\u7684\u8bf7\u6c42\u53c2\u6570\uff0c\u683c\u5f0f\u53ef\u4ee5\u662fkey=value\uff0c\u4e5f\u53ef\u4ee5\u662f js \u5bf9\u8c61\u3002 callback\uff1a\u5f53\u8bf7\u6c42\u6210\u529f\u540e\u7684\u56de\u8c03\u51fd\u6570\uff0c\u53ef\u4ee5\u5728\u51fd\u6570\u4e2d\u7f16\u5199\u6211\u4eec\u7684\u903b\u8f91\u4ee3\u7801\u3002 type\uff1a\u9884\u671f\u7684\u8fd4\u56de\u6570\u636e\u7684\u7c7b\u578b\uff0c\u53d6\u503c\u53ef\u4ee5\u662f xml, html, js, json, text\u7b49\u3002 \u4ee3\u7801\u5b9e\u73b0 ```html \u7528\u6237\u6ce8\u518c \u59d3\u540d\uff1a \u5bc6\u7801\uff1a //1.\u4e3a\u7528\u6237\u540d\u7ed1\u5b9a\u5931\u53bb\u7126\u70b9\u4e8b\u4ef6 $(\"#username\").blur(function () { let username = $(\"#username\").val(); //2.jQuery\u7684GET\u65b9\u5f0f\u5b9e\u73b0AJAX $.get( //\u8bf7\u6c42\u7684\u8d44\u6e90\u8def\u5f84 \"userServlet\", //\u8bf7\u6c42\u53c2\u6570 \"username=\" + username, //\u56de\u8c03\u51fd\u6570 function (data) { //\u5c06\u54cd\u5e94\u7684\u6570\u636e\u663e\u793a\u5230span\u6807\u7b7e $(\"#uSpan\").html(data); }, //\u54cd\u5e94\u6570\u636e\u5f62\u5f0f \"text\" ); }); ``` 1.5\u3001JQuery\u7684POST\u65b9\u5f0f\u5b9e\u73b0AJAX \u00b6 \u6838\u5fc3\u8bed\u6cd5\uff1a $.post(url,[data],[callback],[type]); url\uff1a\u8bf7\u6c42\u7684\u8d44\u6e90\u8def\u5f84\u3002 data\uff1a\u53d1\u9001\u7ed9\u670d\u52a1\u5668\u7aef\u7684\u8bf7\u6c42\u53c2\u6570\uff0c\u683c\u5f0f\u53ef\u4ee5\u662fkey=value\uff0c\u4e5f\u53ef\u4ee5\u662f js \u5bf9\u8c61\u3002 callback\uff1a\u5f53\u8bf7\u6c42\u6210\u529f\u540e\u7684\u56de\u8c03\u51fd\u6570\uff0c\u53ef\u4ee5\u5728\u51fd\u6570\u4e2d\u7f16\u5199\u6211\u4eec\u7684\u903b\u8f91\u4ee3\u7801\u3002 type\uff1a\u9884\u671f\u7684\u8fd4\u56de\u6570\u636e\u7684\u7c7b\u578b\uff0c\u53d6\u503c\u53ef\u4ee5\u662f xml, html, js, json, text\u7b49\u3002 \u4ee3\u7801\u5b9e\u73b0 ```html \u7528\u6237\u6ce8\u518c \u59d3\u540d\uff1a \u5bc6\u7801\uff1a //1.\u4e3a\u7528\u6237\u540d\u7ed1\u5b9a\u5931\u53bb\u7126\u70b9\u4e8b\u4ef6 $(\"#username\").blur(function () { let username = $(\"#username\").val(); //2.jQuery\u7684POST\u65b9\u5f0f\u5b9e\u73b0AJAX $.post( //\u8bf7\u6c42\u7684\u8d44\u6e90\u8def\u5f84 \"userServlet\", //\u8bf7\u6c42\u53c2\u6570 \"username=\" + username, //\u56de\u8c03\u51fd\u6570 function (data) { //\u5c06\u54cd\u5e94\u7684\u6570\u636e\u663e\u793a\u5230span\u6807\u7b7e $(\"#uSpan\").html(data); }, //\u54cd\u5e94\u6570\u636e\u5f62\u5f0f \"text\" ); }); ``` 1.6\u3001JQuery\u7684\u901a\u7528\u65b9\u5f0f\u5b9e\u73b0AJAX \u00b6 \u6838\u5fc3\u8bed\u6cd5\uff1a $.ajax({name:value,name:value,\u2026}); url\uff1a\u8bf7\u6c42\u7684\u8d44\u6e90\u8def\u5f84\u3002 async\uff1a\u662f\u5426\u5f02\u6b65\u8bf7\u6c42\uff0ctrue-\u662f\uff0cfalse-\u5426 (\u9ed8\u8ba4\u662f true)\u3002 data\uff1a\u53d1\u9001\u5230\u670d\u52a1\u5668\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u662f\u952e\u503c\u5bf9\u5f62\u5f0f\uff0c\u4e5f\u53ef\u4ee5\u662f js \u5bf9\u8c61\u5f62\u5f0f\u3002 type\uff1a\u8bf7\u6c42\u65b9\u5f0f\uff0cPOST \u6216 GET (\u9ed8\u8ba4\u662f GET)\u3002 dataType\uff1a\u9884\u671f\u7684\u8fd4\u56de\u6570\u636e\u7684\u7c7b\u578b\uff0c\u53d6\u503c\u53ef\u4ee5\u662f xml, html, js, json, text\u7b49\u3002 success\uff1a\u8bf7\u6c42\u6210\u529f\u65f6\u8c03\u7528\u7684\u56de\u8c03\u51fd\u6570\u3002 error\uff1a\u8bf7\u6c42\u5931\u8d25\u65f6\u8c03\u7528\u7684\u56de\u8c03\u51fd\u6570\u3002 \u4ee3\u7801\u5b9e\u73b0 ```html \u7528\u6237\u6ce8\u518c \u59d3\u540d\uff1a \u5bc6\u7801\uff1a //1.\u4e3a\u7528\u6237\u540d\u7ed1\u5b9a\u5931\u53bb\u7126\u70b9\u4e8b\u4ef6 $(\"#username\").blur(function () { let username = $(\"#username\").val(); //2.jQuery\u7684\u901a\u7528\u65b9\u5f0f\u5b9e\u73b0AJAX $.ajax({ //\u8bf7\u6c42\u8d44\u6e90\u8def\u5f84 url:\"userServletxxx\", //\u662f\u5426\u5f02\u6b65 async:true, //\u8bf7\u6c42\u53c2\u6570 data:\"username=\"+username, //\u8bf7\u6c42\u65b9\u5f0f type:\"POST\", //\u6570\u636e\u5f62\u5f0f dataType:\"text\", //\u8bf7\u6c42\u6210\u529f\u540e\u8c03\u7528\u7684\u56de\u8c03\u51fd\u6570 success:function (data) { //\u5c06\u54cd\u5e94\u7684\u6570\u636e\u663e\u793a\u5230span\u6807\u7b7e $(\"#uSpan\").html(data); }, //\u8bf7\u6c42\u5931\u8d25\u540e\u8c03\u7528\u7684\u56de\u8c03\u51fd\u6570 error:function () { alert(\"\u64cd\u4f5c\u5931\u8d25...\"); } }); }); ``` 1.7\u3001\u5c0f\u7ed3 \u00b6 AJAX(Asynchronous JavaScript And XML)\uff1a \u5f02\u6b65\u7684 JavaScript \u548c XML\u3002 \u901a\u8fc7\u6d4f\u89c8\u5668\u4e0e\u670d\u52a1\u5668\u8fdb\u884c\u5c11\u91cf\u6570\u636e\u4ea4\u6362\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7f51\u9875\u5b9e\u73b0\u5f02\u6b65\u66f4\u65b0\u3002\u4e5f\u5c31\u662f\u5728\u4e0d\u91cd\u65b0\u52a0\u8f7d\u6574\u4e2a\u9875\u9762\u7684\u60c5\u51b5\u4e0b\uff0c\u5bf9\u7f51\u9875\u7684\u90e8 \u5206\u5185\u5bb9\u8fdb\u884c\u5c40\u90e8\u66f4\u65b0\u3002 \u540c\u6b65\u548c\u5f02\u6b65 \u540c\u6b65\uff1a\u670d\u52a1\u5668\u7aef\u5728\u5904\u7406\u8fc7\u7a0b\u4e2d\uff0c\u65e0\u6cd5\u8fdb\u884c\u5176\u4ed6\u64cd\u4f5c\u3002 \u5f02\u6b65\uff1a\u670d\u52a1\u5668\u7aef\u5728\u5904\u7406\u8fc7\u7a0b\u4e2d\uff0c\u53ef\u4ee5\u8fdb\u884c\u5176\u4ed6\u64cd\u4f5c\u3002 GET \u65b9\u5f0f\u5b9e\u73b0\uff1a $.get(); POST \u65b9\u5f0f\u5b9e\u73b0\uff1a $.post(); url\uff1a\u8bf7\u6c42\u7684\u8d44\u6e90\u8def\u5f84\u3002 data\uff1a\u53d1\u9001\u7ed9\u670d\u52a1\u5668\u7aef\u7684\u8bf7\u6c42\u53c2\u6570\uff0c\u683c\u5f0f\u53ef\u4ee5\u662fkey=value\uff0c\u4e5f\u53ef\u4ee5\u662f js \u5bf9\u8c61\u3002 callback\uff1a\u5f53\u8bf7\u6c42\u6210\u529f\u540e\u7684\u56de\u8c03\u51fd\u6570\uff0c\u53ef\u4ee5\u5728\u51fd\u6570\u4e2d\u7f16\u5199\u6211\u4eec\u7684\u903b\u8f91\u4ee3\u7801\u3002 type\uff1a\u9884\u671f\u7684\u8fd4\u56de\u6570\u636e\u7684\u7c7b\u578b\uff0c\u53d6\u503c\u53ef\u4ee5\u662f xml, html, js, json, text\u7b49\u3002 \u901a\u7528\u65b9\u5f0f\u5b9e\u73b0\uff1a $.ajax(); url\uff1a\u8bf7\u6c42\u7684\u8d44\u6e90\u8def\u5f84\u3002 async\uff1a\u662f\u5426\u5f02\u6b65\u8bf7\u6c42\uff0ctrue-\u662f\uff0cfalse-\u5426 (\u9ed8\u8ba4\u662f true)\u3002 data\uff1a\u53d1\u9001\u5230\u670d\u52a1\u5668\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u662f\u952e\u503c\u5bf9\u5f62\u5f0f\uff0c\u4e5f\u53ef\u4ee5\u662f js \u5bf9\u8c61\u5f62\u5f0f\u3002 type\uff1a\u8bf7\u6c42\u65b9\u5f0f\uff0cPOST \u6216 GET (\u9ed8\u8ba4\u662f GET)\u3002 dataType\uff1a\u9884\u671f\u7684\u8fd4\u56de\u6570\u636e\u7684\u7c7b\u578b\uff0c\u53d6\u503c\u53ef\u4ee5\u662f xml, html, js, json, text\u7b49\u3002 success\uff1a\u8bf7\u6c42\u6210\u529f\u65f6\u8c03\u7528\u7684\u56de\u8c03\u51fd\u6570\u3002 error\uff1a\u8bf7\u6c42\u5931\u8d25\u65f6\u8c03\u7528\u7684\u56de\u8c03\u51fd\u6570\u3002 2\u3001JSON\u7684\u5904\u7406 \u00b6 2.1\u3001JSON\u56de\u987e \u00b6 JSON(JavaScript Object Notation)\uff1a\u662f\u4e00\u79cd\u8f7b\u91cf\u7ea7\u7684\u6570\u636e\u4ea4\u6362\u683c\u5f0f\u3002 \u5b83\u662f\u57fa\u4e8e ECMAScript \u89c4\u8303\u7684\u4e00\u4e2a\u5b50\u96c6\uff0c\u91c7\u7528\u5b8c\u5168\u72ec\u7acb\u4e8e\u7f16\u7a0b\u8bed\u8a00\u7684\u6587\u672c\u683c\u5f0f\u6765\u5b58\u50a8\u548c\u8868\u793a\u6570\u636e\u3002 \u7b80\u6d01\u548c\u6e05\u6670\u7684\u5c42\u6b21\u7ed3\u6784\u4f7f\u5f97 JSON \u6210\u4e3a\u7406\u60f3\u7684\u6570\u636e\u4ea4\u6362\u8bed\u8a00\u3002\u6613\u4e8e\u4eba\u9605\u8bfb\u548c\u7f16\u5199\uff0c\u540c\u65f6\u4e5f\u6613\u4e8e\u8ba1\u7b97\u673a\u89e3\u6790\u548c\u751f\u6210\uff0c\u5e76\u6709\u6548\u7684 \u63d0\u5347\u7f51\u7edc\u4f20\u8f93\u6548\u7387\u3002 \u521b\u5efa\u683c\u5f0f \u5e38\u7528\u65b9\u6cd5 2.2\u3001JSON\u8f6c\u6362\u5de5\u5177\u7684\u4ecb\u7ecd \u00b6 \u6211\u4eec\u9664\u4e86\u53ef\u4ee5\u5728 JavaScript \u4e2d\u6765\u4f7f\u7528 JSON \u4ee5\u5916\uff0c\u5728 JAVA \u4e2d\u540c\u6837\u4e5f\u53ef\u4ee5\u4f7f\u7528 JSON\u3002 JSON \u7684\u8f6c\u6362\u5de5\u5177\u662f\u901a\u8fc7 JAVA \u5c01\u88c5\u597d\u7684\u4e00\u4e9b JAR \u5de5\u5177\u5305\u3002 \u53ef\u4ee5\u5c06 JAVA \u5bf9\u8c61\u6216\u96c6\u5408\u8f6c\u6362\u6210 JSON \u683c\u5f0f\u7684\u5b57\u7b26\u4e32\uff0c\u4e5f\u53ef\u4ee5\u5c06 JSON \u683c\u5f0f\u7684\u5b57\u7b26\u4e32\u8f6c\u6210 JAVA \u5bf9\u8c61\u3002 Jackson\uff1a\u5f00\u6e90\u514d\u8d39\u7684 JSON \u8f6c\u6362\u5de5\u5177\uff0cSpringMVC \u8f6c\u6362\u9ed8\u8ba4\u4f7f\u7528 Jackson\u3002 \u5bfc\u5165 jar \u5305\u3002 \u521b\u5efa\u6838\u5fc3\u5bf9\u8c61\u3002 \u8c03\u7528\u65b9\u6cd5\u5b8c\u6210\u8f6c\u6362\u3002 \u5e38\u7528\u7c7b ObjectMapper\u5e38\u7528\u65b9\u6cd5 2.3\u3001JSON\u8f6c\u6362\u7ec3\u4e60 \u00b6 \u5bf9\u8c61\u8f6c JSON, JSON \u8f6c\u5bf9\u8c61\u3002 ```java / JSON\u8f6c\u6362\u5de5\u5177\u7684\u4f7f\u7528 / public class ObjectMapperTest { private ObjectMapper mapper = new ObjectMapper(); / 1.User\u5bf9\u8c61\u8f6cjson, json\u8f6cUser\u5bf9\u8c61 json\u5b57\u7b26\u4e32 = {\"name\":\"\u5f20\u4e09\",\"age\":23} user\u5bf9\u8c61 = User{name='\u5f20\u4e09', age=23} / @Test public void test01() throws Exception{ //User\u5bf9\u8c61\u8f6cjson User user = new User(\"\u5f20\u4e09\",23); String json = mapper.writeValueAsString(user); System.out.println(\"json\u5b57\u7b26\u4e32\uff1a\" + json); //json\u8f6cUser\u5bf9\u8c61 User user2 = mapper.readValue(json, User.class); System.out.println(\"java\u5bf9\u8c61\uff1a\" + user2); } } ``` Map\u8f6c JSON, JSON \u8f6c Map\u3002 ```java / 2.map \u8f6cjson, json\u8f6cmap json\u5b57\u7b26\u4e32 = {\"\u59d3\u540d\":\"\u5f20\u4e09\",\"\u6027\u522b\":\"\u7537\"} map\u5bf9\u8c61 = {\u59d3\u540d=\u5f20\u4e09, \u6027\u522b=\u7537} / @Test public void test02() throws Exception{ //map \u8f6cjson HashMap map = new HashMap<>(); map.put(\"\u59d3\u540d\",\"\u5f20\u4e09\"); map.put(\"\u6027\u522b\",\"\u7537\"); String json = mapper.writeValueAsString(map); System.out.println(\"json\u5b57\u7b26\u4e32\uff1a\" + json); //json\u8f6cmap<String,String> HashMap<String,String> map2 = mapper.readValue(json, HashMap.class); System.out.println(\"java\u5bf9\u8c61\uff1a\" + map2); } ``` Map\u8f6c JSON, JSON \u8f6c Map\u3002 ```java / 3.map \u8f6cjson, json\u8f6cmap json\u5b57\u7b26\u4e32 = {\"\u9ed1\u9a6c\u4e00\u73ed\":{\"name\":\"\u5f20\u4e09\",\"age\":23},\"\u9ed1\u9a6c\u4e8c\u73ed\":{\"name\":\"\u674e\u56db\",\"age\":24}} map\u5bf9\u8c61 = {\u9ed1\u9a6c\u4e00\u73ed=User{name='\u5f20\u4e09', age=23}, \u9ed1\u9a6c\u4e8c\u73ed=User{name='\u674e\u56db', age=24}} / @Test public void test03() throws Exception{ //map \u8f6cjson HashMap map = new HashMap<>(); map.put(\"\u9ed1\u9a6c\u4e00\u73ed\",new User(\"\u5f20\u4e09\",23)); map.put(\"\u9ed1\u9a6c\u4e8c\u73ed\",new User(\"\u674e\u56db\",24)); String json = mapper.writeValueAsString(map); System.out.println(\"json\u5b57\u7b26\u4e32\uff1a\" + json); //json\u8f6cmap<String,User> HashMap<String,User> map2 = mapper.readValue(json,new TypeReference<HashMap<String,User>>(){}); System.out.println(\"java\u5bf9\u8c61\uff1a\" + map2); } ``` List\u8f6c JSON, JSON \u8f6c List\u3002 ```java / 4.List \u8f6cjson, json\u8f6c List json\u5b57\u7b26\u4e32 = [\"\u5f20\u4e09\",\"\u674e\u56db\"] list\u5bf9\u8c61 = [\u5f20\u4e09, \u674e\u56db] / @Test public void test04() throws Exception{ //List \u8f6cjson ArrayList list = new ArrayList<>(); list.add(\"\u5f20\u4e09\"); list.add(\"\u674e\u56db\"); String json = mapper.writeValueAsString(list); System.out.println(\"json\u5b57\u7b26\u4e32\uff1a\" + json); //json\u8f6c List<String> ArrayList<String> list2 = mapper.readValue(json,ArrayList.class); System.out.println(\"java\u5bf9\u8c61\uff1a\" + list2); } ``` List\u8f6c JSON, JSON \u8f6c List\u3002 ```java / 5.List \u8f6cjson, json\u8f6cList json\u5b57\u7b26\u4e32 = [{\"name\":\"\u5f20\u4e09\",\"age\":23},{\"name\":\"\u674e\u56db\",\"age\":24}] list\u5bf9\u8c61 = [User{name='\u5f20\u4e09', age=23}, User{name='\u674e\u56db', age=24}] / @Test public void test05() throws Exception{ //List \u8f6cjson ArrayList list = new ArrayList<>(); list.add(new User(\"\u5f20\u4e09\",23)); list.add(new User(\"\u674e\u56db\",24)); String json = mapper.writeValueAsString(list); System.out.println(\"json\u5b57\u7b26\u4e32\uff1a\" + json); //json\u8f6cList<User> ArrayList<User> list2 = mapper.readValue(json,new TypeReference<ArrayList<User>>(){}); System.out.println(\"java\u5bf9\u8c61\uff1a\" + list2); } ``` 2.4\u3001\u5c0f\u7ed3 \u00b6 Jackson\uff1a \u5f00\u6e90\u514d\u8d39\u7684 JSON \u8f6c\u6362\u5de5\u5177\uff0cSpringMVC \u8f6c\u6362\u9ed8\u8ba4\u4f7f\u7528 Jackson\u3002 \u53ef\u4ee5\u5c06 JAVA \u5bf9\u8c61\u6216\u96c6\u5408\u8f6c\u6362\u6210 JSON \u683c\u5f0f\u7684\u5b57\u7b26\u4e32\uff0c\u4e5f\u53ef\u4ee5\u5c06 JSON \u683c\u5f0f\u7684\u5b57\u7b26\u4e32\u8f6c\u6210 JAVA \u5bf9\u8c61\u3002 \u5e38\u7528\u7c7b 3\u3001\u7efc\u5408\u6848\u4f8b \u641c\u7d22\u8054\u60f3 \u00b6 \u6848\u4f8b\u6548\u679c\u548c\u73af\u5883\u4ecb\u7ecd \u6848\u4f8b\u5206\u6790 \u9875\u9762 \u4e3a\u7528\u6237\u540d\u8f93\u5165\u6846\u7ed1\u5b9a\u9f20\u6807\u70b9\u51fb\u4e8b\u4ef6\u3002 \u83b7\u53d6\u8f93\u5165\u7684\u7528\u6237\u540d\u6570\u636e\u3002 \u5224\u65ad\u7528\u6237\u540d\u662f\u5426\u4e3a\u7a7a\u3002 \u5982\u679c\u4e3a\u7a7a\uff0c\u5219\u5c06\u8054\u60f3\u63d0\u793a\u6846\u9690\u85cf\u3002 \u5982\u679c\u4e0d\u4e3a\u7a7a\uff0c\u5219\u53d1\u9001 AJAX \u8bf7\u6c42\uff0c\u5e76\u5c06\u54cd\u5e94\u7684\u6570\u636e\u663e\u793a\u5230\u8054\u60f3\u6846\u3002 \u63a7\u5236\u5c42 \u83b7\u53d6\u8bf7\u6c42\u53c2\u6570\u3002 \u8c03\u7528\u4e1a\u52a1\u5c42\u7684\u6a21\u7cca\u67e5\u8be2\u65b9\u6cd5\u3002 \u5c06\u8fd4\u56de\u7684\u6570\u636e\u8f6c\u6210 JSON\uff0c\u5e76\u54cd\u5e94\u7ed9\u5ba2\u6237\u7aef\u3002 \u4ee3\u7801\u5b9e\u73b0 html\u9875\u9762 ```html <!DOCTYPE html> \u7528\u6237\u641c\u7d22","title":"AJAX"},{"location":"ajax/#1ajax","text":"","title":"1\u3001Ajax\u5feb\u901f\u5165\u95e8"},{"location":"ajax/#11ajax","text":"AJAX(Asynchronous JavaScript And XML)\uff1a\u5f02\u6b65\u7684 JavaScript \u548c XML\u3002 \u672c\u8eab\u4e0d\u662f\u4e00\u79cd\u65b0\u6280\u672f\uff0c\u800c\u662f\u591a\u4e2a\u6280\u672f\u7efc\u5408\u3002\u7528\u4e8e\u5feb\u901f\u521b\u5efa\u52a8\u6001\u7f51\u9875\u7684\u6280\u672f\u3002 \u4e00\u822c\u7684\u7f51\u9875\u5982\u679c\u9700\u8981\u66f4\u65b0\u5185\u5bb9\uff0c\u5fc5\u9700\u91cd\u65b0\u52a0\u8f7d\u4e2a\u9875\u9762\u3002 \u800c AJAX \u901a\u8fc7\u6d4f\u89c8\u5668\u4e0e\u670d\u52a1\u5668\u8fdb\u884c\u5c11\u91cf\u6570\u636e\u4ea4\u6362\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7f51\u9875\u5b9e\u73b0\u5f02\u6b65\u66f4\u65b0\u3002\u4e5f\u5c31\u662f\u5728\u4e0d\u91cd\u65b0\u52a0\u8f7d\u6574\u4e2a\u9875 \u9762\u7684\u60c5\u51b5\u4e0b\uff0c\u5bf9\u7f51\u9875\u7684\u90e8\u5206\u5185\u5bb9\u8fdb\u884c \u5c40\u90e8\u66f4\u65b0 \u3002 \u200b \u200b","title":"1.1\u3001AJAX\u4ecb\u7ecd"},{"location":"ajax/#12jsajax","text":"\u4ee3\u7801\u5b9e\u73b0 ```java import javax.servlet.ServletException; import javax.servlet.annotation.WebServlet; import javax.servlet.http.HttpServlet; import javax.servlet.http.HttpServletRequest; import javax.servlet.http.HttpServletResponse; import java.io.IOException; @WebServlet(\"/userServlet\") public class UserServlet extends HttpServlet { @Override protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException { //\u8bbe\u7f6e\u8bf7\u6c42\u548c\u54cd\u5e94\u7684\u4e71\u7801 req.setCharacterEncoding(\"UTF-8\"); resp.setContentType(\"text/html;charset=UTF-8\"); //1.\u83b7\u53d6\u8bf7\u6c42\u53c2\u6570 String username = req.getParameter(\"username\"); //\u6a21\u62df\u670d\u52a1\u5668\u5904\u7406\u8bf7\u6c42\u9700\u89815\u79d2\u949f /*try { Thread.sleep(5000); } catch (InterruptedException e) { e.printStackTrace(); }*/ //2.\u5224\u65ad\u59d3\u540d\u662f\u5426\u5df2\u6ce8\u518c if(\"zhangsan\".equals(username)) { resp.getWriter().write(\" <font color= 'red' > \u7528\u6237\u540d\u5df2\u6ce8\u518c </font> \"); }else { resp.getWriter().write(\" <font color= 'green' > \u7528\u6237\u540d\u53ef\u7528 </font> \"); } } @Override protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException { doGet(req,resp); } } ``` html\u4ee3\u7801 ```html \u7528\u6237\u6ce8\u518c \u59d3\u540d\uff1a \u5bc6\u7801\uff1a //1.\u4e3a\u59d3\u540d\u7ed1\u5b9a\u5931\u53bb\u7126\u70b9\u4e8b\u4ef6 document.getElementById(\"username\").onblur = function() { //2.\u521b\u5efaXMLHttpRequest\u6838\u5fc3\u5bf9\u8c61 let xmlHttp = new XMLHttpRequest(); //3.\u6253\u5f00\u94fe\u63a5 let username = document.getElementById(\"username\").value; xmlHttp.open(\"GET\",\"userServlet?username=\"+username,true); //xmlHttp.open(\"GET\",\"userServlet?username=\"+username,false); //4.\u53d1\u9001\u8bf7\u6c42 xmlHttp.send(); //5.\u5904\u7406\u54cd\u5e94 xmlHttp.onreadystatechange = function() { //\u5224\u65ad\u8bf7\u6c42\u548c\u54cd\u5e94\u662f\u5426\u6210\u529f if(xmlHttp.readyState == 4 && xmlHttp.status == 200) { //\u5c06\u54cd\u5e94\u7684\u6570\u636e\u663e\u793a\u5230span\u6807\u7b7e document.getElementById(\"uSpan\").innerHTML = xmlHttp.responseText; } } } ```","title":"1.2\u3001\u539f\u751fJS\u5b9e\u73b0AJAX"},{"location":"ajax/#13jsajax","text":"\u6838\u5fc3\u5bf9\u8c61\uff1aXMLHttpRequest \u200b \u7528\u4e8e\u5728\u540e\u53f0\u4e0e\u670d\u52a1\u5668\u4ea4\u6362\u6570\u636e\u3002\u53ef\u4ee5\u5728\u4e0d\u91cd\u65b0\u52a0\u8f7d\u6574\u4e2a\u7f51\u9875\u7684\u60c5\u51b5\u4e0b\uff0c\u5bf9\u7f51\u9875\u7684\u67d0\u90e8\u5206\u8fdb\u884c\u66f4\u65b0\u3002 \u6253\u5f00\u94fe\u63a5\uff1aopen(method,url,async) \u200b method\uff1a\u8bf7\u6c42\u7684\u7c7b\u578b GET \u6216 POST\u3002 \u200b url\uff1a\u8bf7\u6c42\u8d44\u6e90\u7684\u8def\u5f84\u3002 \u200b async\uff1atrue(\u5f02\u6b65) \u6216 false(\u540c\u6b65)\u3002 \u53d1\u9001\u8bf7\u6c42\uff1asend(String params) \u200b params\uff1a\u8bf7\u6c42\u7684\u53c2\u6570(POST \u4e13\u7528)\u3002 \u5904\u7406\u54cd\u5e94\uff1aonreadystatechange \u200b readyState\uff1a0-\u8bf7\u6c42\u672a\u521d\u59cb\u5316\uff0c1-\u670d\u52a1\u5668\u8fde\u63a5\u5df2\u5efa\u7acb\uff0c2-\u8bf7\u6c42\u5df2\u63a5\u6536\uff0c3-\u8bf7\u6c42\u5904\u7406\u4e2d\uff0c4-\u8bf7\u6c42\u5df2\u5b8c\u6210\uff0c\u4e14\u54cd\u5e94\u5df2\u5c31\u7eea\u3002 \u200b status\uff1a200-\u54cd\u5e94\u5df2\u5168\u90e8 OK\u3002 \u83b7\u5f97\u54cd\u5e94\u6570\u636e\u5f62\u5f0f \u200b responseText\uff1a\u83b7\u5f97\u5b57\u7b26\u4e32\u5f62\u5f0f\u7684\u54cd\u5e94\u6570\u636e\u3002 \u200b responseXML\uff1a\u83b7\u5f97 XML \u5f62\u5f0f\u7684\u54cd\u5e94\u6570\u636e\u3002","title":"1.3\u3001\u539f\u751fJS\u5b9e\u73b0AJAX\u8be6\u89e3"},{"location":"ajax/#14jquerygetajax","text":"\u6838\u5fc3\u8bed\u6cd5\uff1a $.get(url,[data],[callback],[type]); url\uff1a\u8bf7\u6c42\u7684\u8d44\u6e90\u8def\u5f84\u3002 data\uff1a\u53d1\u9001\u7ed9\u670d\u52a1\u5668\u7aef\u7684\u8bf7\u6c42\u53c2\u6570\uff0c\u683c\u5f0f\u53ef\u4ee5\u662fkey=value\uff0c\u4e5f\u53ef\u4ee5\u662f js \u5bf9\u8c61\u3002 callback\uff1a\u5f53\u8bf7\u6c42\u6210\u529f\u540e\u7684\u56de\u8c03\u51fd\u6570\uff0c\u53ef\u4ee5\u5728\u51fd\u6570\u4e2d\u7f16\u5199\u6211\u4eec\u7684\u903b\u8f91\u4ee3\u7801\u3002 type\uff1a\u9884\u671f\u7684\u8fd4\u56de\u6570\u636e\u7684\u7c7b\u578b\uff0c\u53d6\u503c\u53ef\u4ee5\u662f xml, html, js, json, text\u7b49\u3002 \u4ee3\u7801\u5b9e\u73b0 ```html \u7528\u6237\u6ce8\u518c \u59d3\u540d\uff1a \u5bc6\u7801\uff1a //1.\u4e3a\u7528\u6237\u540d\u7ed1\u5b9a\u5931\u53bb\u7126\u70b9\u4e8b\u4ef6 $(\"#username\").blur(function () { let username = $(\"#username\").val(); //2.jQuery\u7684GET\u65b9\u5f0f\u5b9e\u73b0AJAX $.get( //\u8bf7\u6c42\u7684\u8d44\u6e90\u8def\u5f84 \"userServlet\", //\u8bf7\u6c42\u53c2\u6570 \"username=\" + username, //\u56de\u8c03\u51fd\u6570 function (data) { //\u5c06\u54cd\u5e94\u7684\u6570\u636e\u663e\u793a\u5230span\u6807\u7b7e $(\"#uSpan\").html(data); }, //\u54cd\u5e94\u6570\u636e\u5f62\u5f0f \"text\" ); }); ```","title":"1.4\u3001JQuery\u7684GET\u65b9\u5f0f\u5b9e\u73b0AJAX"},{"location":"ajax/#15jquerypostajax","text":"\u6838\u5fc3\u8bed\u6cd5\uff1a $.post(url,[data],[callback],[type]); url\uff1a\u8bf7\u6c42\u7684\u8d44\u6e90\u8def\u5f84\u3002 data\uff1a\u53d1\u9001\u7ed9\u670d\u52a1\u5668\u7aef\u7684\u8bf7\u6c42\u53c2\u6570\uff0c\u683c\u5f0f\u53ef\u4ee5\u662fkey=value\uff0c\u4e5f\u53ef\u4ee5\u662f js \u5bf9\u8c61\u3002 callback\uff1a\u5f53\u8bf7\u6c42\u6210\u529f\u540e\u7684\u56de\u8c03\u51fd\u6570\uff0c\u53ef\u4ee5\u5728\u51fd\u6570\u4e2d\u7f16\u5199\u6211\u4eec\u7684\u903b\u8f91\u4ee3\u7801\u3002 type\uff1a\u9884\u671f\u7684\u8fd4\u56de\u6570\u636e\u7684\u7c7b\u578b\uff0c\u53d6\u503c\u53ef\u4ee5\u662f xml, html, js, json, text\u7b49\u3002 \u4ee3\u7801\u5b9e\u73b0 ```html \u7528\u6237\u6ce8\u518c \u59d3\u540d\uff1a \u5bc6\u7801\uff1a //1.\u4e3a\u7528\u6237\u540d\u7ed1\u5b9a\u5931\u53bb\u7126\u70b9\u4e8b\u4ef6 $(\"#username\").blur(function () { let username = $(\"#username\").val(); //2.jQuery\u7684POST\u65b9\u5f0f\u5b9e\u73b0AJAX $.post( //\u8bf7\u6c42\u7684\u8d44\u6e90\u8def\u5f84 \"userServlet\", //\u8bf7\u6c42\u53c2\u6570 \"username=\" + username, //\u56de\u8c03\u51fd\u6570 function (data) { //\u5c06\u54cd\u5e94\u7684\u6570\u636e\u663e\u793a\u5230span\u6807\u7b7e $(\"#uSpan\").html(data); }, //\u54cd\u5e94\u6570\u636e\u5f62\u5f0f \"text\" ); }); ```","title":"1.5\u3001JQuery\u7684POST\u65b9\u5f0f\u5b9e\u73b0AJAX"},{"location":"ajax/#16jqueryajax","text":"\u6838\u5fc3\u8bed\u6cd5\uff1a $.ajax({name:value,name:value,\u2026}); url\uff1a\u8bf7\u6c42\u7684\u8d44\u6e90\u8def\u5f84\u3002 async\uff1a\u662f\u5426\u5f02\u6b65\u8bf7\u6c42\uff0ctrue-\u662f\uff0cfalse-\u5426 (\u9ed8\u8ba4\u662f true)\u3002 data\uff1a\u53d1\u9001\u5230\u670d\u52a1\u5668\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u662f\u952e\u503c\u5bf9\u5f62\u5f0f\uff0c\u4e5f\u53ef\u4ee5\u662f js \u5bf9\u8c61\u5f62\u5f0f\u3002 type\uff1a\u8bf7\u6c42\u65b9\u5f0f\uff0cPOST \u6216 GET (\u9ed8\u8ba4\u662f GET)\u3002 dataType\uff1a\u9884\u671f\u7684\u8fd4\u56de\u6570\u636e\u7684\u7c7b\u578b\uff0c\u53d6\u503c\u53ef\u4ee5\u662f xml, html, js, json, text\u7b49\u3002 success\uff1a\u8bf7\u6c42\u6210\u529f\u65f6\u8c03\u7528\u7684\u56de\u8c03\u51fd\u6570\u3002 error\uff1a\u8bf7\u6c42\u5931\u8d25\u65f6\u8c03\u7528\u7684\u56de\u8c03\u51fd\u6570\u3002 \u4ee3\u7801\u5b9e\u73b0 ```html \u7528\u6237\u6ce8\u518c \u59d3\u540d\uff1a \u5bc6\u7801\uff1a //1.\u4e3a\u7528\u6237\u540d\u7ed1\u5b9a\u5931\u53bb\u7126\u70b9\u4e8b\u4ef6 $(\"#username\").blur(function () { let username = $(\"#username\").val(); //2.jQuery\u7684\u901a\u7528\u65b9\u5f0f\u5b9e\u73b0AJAX $.ajax({ //\u8bf7\u6c42\u8d44\u6e90\u8def\u5f84 url:\"userServletxxx\", //\u662f\u5426\u5f02\u6b65 async:true, //\u8bf7\u6c42\u53c2\u6570 data:\"username=\"+username, //\u8bf7\u6c42\u65b9\u5f0f type:\"POST\", //\u6570\u636e\u5f62\u5f0f dataType:\"text\", //\u8bf7\u6c42\u6210\u529f\u540e\u8c03\u7528\u7684\u56de\u8c03\u51fd\u6570 success:function (data) { //\u5c06\u54cd\u5e94\u7684\u6570\u636e\u663e\u793a\u5230span\u6807\u7b7e $(\"#uSpan\").html(data); }, //\u8bf7\u6c42\u5931\u8d25\u540e\u8c03\u7528\u7684\u56de\u8c03\u51fd\u6570 error:function () { alert(\"\u64cd\u4f5c\u5931\u8d25...\"); } }); }); ```","title":"1.6\u3001JQuery\u7684\u901a\u7528\u65b9\u5f0f\u5b9e\u73b0AJAX"},{"location":"ajax/#17","text":"AJAX(Asynchronous JavaScript And XML)\uff1a \u5f02\u6b65\u7684 JavaScript \u548c XML\u3002 \u901a\u8fc7\u6d4f\u89c8\u5668\u4e0e\u670d\u52a1\u5668\u8fdb\u884c\u5c11\u91cf\u6570\u636e\u4ea4\u6362\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7f51\u9875\u5b9e\u73b0\u5f02\u6b65\u66f4\u65b0\u3002\u4e5f\u5c31\u662f\u5728\u4e0d\u91cd\u65b0\u52a0\u8f7d\u6574\u4e2a\u9875\u9762\u7684\u60c5\u51b5\u4e0b\uff0c\u5bf9\u7f51\u9875\u7684\u90e8 \u5206\u5185\u5bb9\u8fdb\u884c\u5c40\u90e8\u66f4\u65b0\u3002 \u540c\u6b65\u548c\u5f02\u6b65 \u540c\u6b65\uff1a\u670d\u52a1\u5668\u7aef\u5728\u5904\u7406\u8fc7\u7a0b\u4e2d\uff0c\u65e0\u6cd5\u8fdb\u884c\u5176\u4ed6\u64cd\u4f5c\u3002 \u5f02\u6b65\uff1a\u670d\u52a1\u5668\u7aef\u5728\u5904\u7406\u8fc7\u7a0b\u4e2d\uff0c\u53ef\u4ee5\u8fdb\u884c\u5176\u4ed6\u64cd\u4f5c\u3002 GET \u65b9\u5f0f\u5b9e\u73b0\uff1a $.get(); POST \u65b9\u5f0f\u5b9e\u73b0\uff1a $.post(); url\uff1a\u8bf7\u6c42\u7684\u8d44\u6e90\u8def\u5f84\u3002 data\uff1a\u53d1\u9001\u7ed9\u670d\u52a1\u5668\u7aef\u7684\u8bf7\u6c42\u53c2\u6570\uff0c\u683c\u5f0f\u53ef\u4ee5\u662fkey=value\uff0c\u4e5f\u53ef\u4ee5\u662f js \u5bf9\u8c61\u3002 callback\uff1a\u5f53\u8bf7\u6c42\u6210\u529f\u540e\u7684\u56de\u8c03\u51fd\u6570\uff0c\u53ef\u4ee5\u5728\u51fd\u6570\u4e2d\u7f16\u5199\u6211\u4eec\u7684\u903b\u8f91\u4ee3\u7801\u3002 type\uff1a\u9884\u671f\u7684\u8fd4\u56de\u6570\u636e\u7684\u7c7b\u578b\uff0c\u53d6\u503c\u53ef\u4ee5\u662f xml, html, js, json, text\u7b49\u3002 \u901a\u7528\u65b9\u5f0f\u5b9e\u73b0\uff1a $.ajax(); url\uff1a\u8bf7\u6c42\u7684\u8d44\u6e90\u8def\u5f84\u3002 async\uff1a\u662f\u5426\u5f02\u6b65\u8bf7\u6c42\uff0ctrue-\u662f\uff0cfalse-\u5426 (\u9ed8\u8ba4\u662f true)\u3002 data\uff1a\u53d1\u9001\u5230\u670d\u52a1\u5668\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u662f\u952e\u503c\u5bf9\u5f62\u5f0f\uff0c\u4e5f\u53ef\u4ee5\u662f js \u5bf9\u8c61\u5f62\u5f0f\u3002 type\uff1a\u8bf7\u6c42\u65b9\u5f0f\uff0cPOST \u6216 GET (\u9ed8\u8ba4\u662f GET)\u3002 dataType\uff1a\u9884\u671f\u7684\u8fd4\u56de\u6570\u636e\u7684\u7c7b\u578b\uff0c\u53d6\u503c\u53ef\u4ee5\u662f xml, html, js, json, text\u7b49\u3002 success\uff1a\u8bf7\u6c42\u6210\u529f\u65f6\u8c03\u7528\u7684\u56de\u8c03\u51fd\u6570\u3002 error\uff1a\u8bf7\u6c42\u5931\u8d25\u65f6\u8c03\u7528\u7684\u56de\u8c03\u51fd\u6570\u3002","title":"1.7\u3001\u5c0f\u7ed3"},{"location":"ajax/#2json","text":"","title":"2\u3001JSON\u7684\u5904\u7406"},{"location":"ajax/#21json","text":"JSON(JavaScript Object Notation)\uff1a\u662f\u4e00\u79cd\u8f7b\u91cf\u7ea7\u7684\u6570\u636e\u4ea4\u6362\u683c\u5f0f\u3002 \u5b83\u662f\u57fa\u4e8e ECMAScript \u89c4\u8303\u7684\u4e00\u4e2a\u5b50\u96c6\uff0c\u91c7\u7528\u5b8c\u5168\u72ec\u7acb\u4e8e\u7f16\u7a0b\u8bed\u8a00\u7684\u6587\u672c\u683c\u5f0f\u6765\u5b58\u50a8\u548c\u8868\u793a\u6570\u636e\u3002 \u7b80\u6d01\u548c\u6e05\u6670\u7684\u5c42\u6b21\u7ed3\u6784\u4f7f\u5f97 JSON \u6210\u4e3a\u7406\u60f3\u7684\u6570\u636e\u4ea4\u6362\u8bed\u8a00\u3002\u6613\u4e8e\u4eba\u9605\u8bfb\u548c\u7f16\u5199\uff0c\u540c\u65f6\u4e5f\u6613\u4e8e\u8ba1\u7b97\u673a\u89e3\u6790\u548c\u751f\u6210\uff0c\u5e76\u6709\u6548\u7684 \u63d0\u5347\u7f51\u7edc\u4f20\u8f93\u6548\u7387\u3002 \u521b\u5efa\u683c\u5f0f \u5e38\u7528\u65b9\u6cd5","title":"2.1\u3001JSON\u56de\u987e"},{"location":"ajax/#22json","text":"\u6211\u4eec\u9664\u4e86\u53ef\u4ee5\u5728 JavaScript \u4e2d\u6765\u4f7f\u7528 JSON \u4ee5\u5916\uff0c\u5728 JAVA \u4e2d\u540c\u6837\u4e5f\u53ef\u4ee5\u4f7f\u7528 JSON\u3002 JSON \u7684\u8f6c\u6362\u5de5\u5177\u662f\u901a\u8fc7 JAVA \u5c01\u88c5\u597d\u7684\u4e00\u4e9b JAR \u5de5\u5177\u5305\u3002 \u53ef\u4ee5\u5c06 JAVA \u5bf9\u8c61\u6216\u96c6\u5408\u8f6c\u6362\u6210 JSON \u683c\u5f0f\u7684\u5b57\u7b26\u4e32\uff0c\u4e5f\u53ef\u4ee5\u5c06 JSON \u683c\u5f0f\u7684\u5b57\u7b26\u4e32\u8f6c\u6210 JAVA \u5bf9\u8c61\u3002 Jackson\uff1a\u5f00\u6e90\u514d\u8d39\u7684 JSON \u8f6c\u6362\u5de5\u5177\uff0cSpringMVC \u8f6c\u6362\u9ed8\u8ba4\u4f7f\u7528 Jackson\u3002 \u5bfc\u5165 jar \u5305\u3002 \u521b\u5efa\u6838\u5fc3\u5bf9\u8c61\u3002 \u8c03\u7528\u65b9\u6cd5\u5b8c\u6210\u8f6c\u6362\u3002 \u5e38\u7528\u7c7b ObjectMapper\u5e38\u7528\u65b9\u6cd5","title":"2.2\u3001JSON\u8f6c\u6362\u5de5\u5177\u7684\u4ecb\u7ecd"},{"location":"ajax/#23json","text":"\u5bf9\u8c61\u8f6c JSON, JSON \u8f6c\u5bf9\u8c61\u3002 ```java / JSON\u8f6c\u6362\u5de5\u5177\u7684\u4f7f\u7528 / public class ObjectMapperTest { private ObjectMapper mapper = new ObjectMapper(); / 1.User\u5bf9\u8c61\u8f6cjson, json\u8f6cUser\u5bf9\u8c61 json\u5b57\u7b26\u4e32 = {\"name\":\"\u5f20\u4e09\",\"age\":23} user\u5bf9\u8c61 = User{name='\u5f20\u4e09', age=23} / @Test public void test01() throws Exception{ //User\u5bf9\u8c61\u8f6cjson User user = new User(\"\u5f20\u4e09\",23); String json = mapper.writeValueAsString(user); System.out.println(\"json\u5b57\u7b26\u4e32\uff1a\" + json); //json\u8f6cUser\u5bf9\u8c61 User user2 = mapper.readValue(json, User.class); System.out.println(\"java\u5bf9\u8c61\uff1a\" + user2); } } ``` Map\u8f6c JSON, JSON \u8f6c Map\u3002 ```java / 2.map \u8f6cjson, json\u8f6cmap json\u5b57\u7b26\u4e32 = {\"\u59d3\u540d\":\"\u5f20\u4e09\",\"\u6027\u522b\":\"\u7537\"} map\u5bf9\u8c61 = {\u59d3\u540d=\u5f20\u4e09, \u6027\u522b=\u7537} / @Test public void test02() throws Exception{ //map \u8f6cjson HashMap map = new HashMap<>(); map.put(\"\u59d3\u540d\",\"\u5f20\u4e09\"); map.put(\"\u6027\u522b\",\"\u7537\"); String json = mapper.writeValueAsString(map); System.out.println(\"json\u5b57\u7b26\u4e32\uff1a\" + json); //json\u8f6cmap<String,String> HashMap<String,String> map2 = mapper.readValue(json, HashMap.class); System.out.println(\"java\u5bf9\u8c61\uff1a\" + map2); } ``` Map\u8f6c JSON, JSON \u8f6c Map\u3002 ```java / 3.map \u8f6cjson, json\u8f6cmap json\u5b57\u7b26\u4e32 = {\"\u9ed1\u9a6c\u4e00\u73ed\":{\"name\":\"\u5f20\u4e09\",\"age\":23},\"\u9ed1\u9a6c\u4e8c\u73ed\":{\"name\":\"\u674e\u56db\",\"age\":24}} map\u5bf9\u8c61 = {\u9ed1\u9a6c\u4e00\u73ed=User{name='\u5f20\u4e09', age=23}, \u9ed1\u9a6c\u4e8c\u73ed=User{name='\u674e\u56db', age=24}} / @Test public void test03() throws Exception{ //map \u8f6cjson HashMap map = new HashMap<>(); map.put(\"\u9ed1\u9a6c\u4e00\u73ed\",new User(\"\u5f20\u4e09\",23)); map.put(\"\u9ed1\u9a6c\u4e8c\u73ed\",new User(\"\u674e\u56db\",24)); String json = mapper.writeValueAsString(map); System.out.println(\"json\u5b57\u7b26\u4e32\uff1a\" + json); //json\u8f6cmap<String,User> HashMap<String,User> map2 = mapper.readValue(json,new TypeReference<HashMap<String,User>>(){}); System.out.println(\"java\u5bf9\u8c61\uff1a\" + map2); } ``` List\u8f6c JSON, JSON \u8f6c List\u3002 ```java / 4.List \u8f6cjson, json\u8f6c List json\u5b57\u7b26\u4e32 = [\"\u5f20\u4e09\",\"\u674e\u56db\"] list\u5bf9\u8c61 = [\u5f20\u4e09, \u674e\u56db] / @Test public void test04() throws Exception{ //List \u8f6cjson ArrayList list = new ArrayList<>(); list.add(\"\u5f20\u4e09\"); list.add(\"\u674e\u56db\"); String json = mapper.writeValueAsString(list); System.out.println(\"json\u5b57\u7b26\u4e32\uff1a\" + json); //json\u8f6c List<String> ArrayList<String> list2 = mapper.readValue(json,ArrayList.class); System.out.println(\"java\u5bf9\u8c61\uff1a\" + list2); } ``` List\u8f6c JSON, JSON \u8f6c List\u3002 ```java / 5.List \u8f6cjson, json\u8f6cList json\u5b57\u7b26\u4e32 = [{\"name\":\"\u5f20\u4e09\",\"age\":23},{\"name\":\"\u674e\u56db\",\"age\":24}] list\u5bf9\u8c61 = [User{name='\u5f20\u4e09', age=23}, User{name='\u674e\u56db', age=24}] / @Test public void test05() throws Exception{ //List \u8f6cjson ArrayList list = new ArrayList<>(); list.add(new User(\"\u5f20\u4e09\",23)); list.add(new User(\"\u674e\u56db\",24)); String json = mapper.writeValueAsString(list); System.out.println(\"json\u5b57\u7b26\u4e32\uff1a\" + json); //json\u8f6cList<User> ArrayList<User> list2 = mapper.readValue(json,new TypeReference<ArrayList<User>>(){}); System.out.println(\"java\u5bf9\u8c61\uff1a\" + list2); } ```","title":"2.3\u3001JSON\u8f6c\u6362\u7ec3\u4e60"},{"location":"ajax/#24","text":"Jackson\uff1a \u5f00\u6e90\u514d\u8d39\u7684 JSON \u8f6c\u6362\u5de5\u5177\uff0cSpringMVC \u8f6c\u6362\u9ed8\u8ba4\u4f7f\u7528 Jackson\u3002 \u53ef\u4ee5\u5c06 JAVA \u5bf9\u8c61\u6216\u96c6\u5408\u8f6c\u6362\u6210 JSON \u683c\u5f0f\u7684\u5b57\u7b26\u4e32\uff0c\u4e5f\u53ef\u4ee5\u5c06 JSON \u683c\u5f0f\u7684\u5b57\u7b26\u4e32\u8f6c\u6210 JAVA \u5bf9\u8c61\u3002 \u5e38\u7528\u7c7b","title":"2.4\u3001\u5c0f\u7ed3"},{"location":"ajax/#3","text":"\u6848\u4f8b\u6548\u679c\u548c\u73af\u5883\u4ecb\u7ecd \u6848\u4f8b\u5206\u6790 \u9875\u9762 \u4e3a\u7528\u6237\u540d\u8f93\u5165\u6846\u7ed1\u5b9a\u9f20\u6807\u70b9\u51fb\u4e8b\u4ef6\u3002 \u83b7\u53d6\u8f93\u5165\u7684\u7528\u6237\u540d\u6570\u636e\u3002 \u5224\u65ad\u7528\u6237\u540d\u662f\u5426\u4e3a\u7a7a\u3002 \u5982\u679c\u4e3a\u7a7a\uff0c\u5219\u5c06\u8054\u60f3\u63d0\u793a\u6846\u9690\u85cf\u3002 \u5982\u679c\u4e0d\u4e3a\u7a7a\uff0c\u5219\u53d1\u9001 AJAX \u8bf7\u6c42\uff0c\u5e76\u5c06\u54cd\u5e94\u7684\u6570\u636e\u663e\u793a\u5230\u8054\u60f3\u6846\u3002 \u63a7\u5236\u5c42 \u83b7\u53d6\u8bf7\u6c42\u53c2\u6570\u3002 \u8c03\u7528\u4e1a\u52a1\u5c42\u7684\u6a21\u7cca\u67e5\u8be2\u65b9\u6cd5\u3002 \u5c06\u8fd4\u56de\u7684\u6570\u636e\u8f6c\u6210 JSON\uff0c\u5e76\u54cd\u5e94\u7ed9\u5ba2\u6237\u7aef\u3002 \u4ee3\u7801\u5b9e\u73b0 html\u9875\u9762 ```html <!DOCTYPE html> \u7528\u6237\u641c\u7d22","title":"3\u3001\u7efc\u5408\u6848\u4f8b \u641c\u7d22\u8054\u60f3"},{"location":"docker/1/","text":"\u521d\u8bc6 Docker \u00b6 1.1\u5b89\u88c5docker \u00b6 Docker\u53ef\u4ee5\u8fd0\u884c\u5728MAC\u3001Windows\u3001CentOS\u3001UBUNTU\u7b49\u64cd\u4f5c\u7cfb\u7edf\u4e0a\uff0c\u672c\u8bfe\u7a0b\u57fa\u4e8eCentOS 7 \u5b89\u88c5 Docker\u3002\u5b98\u7f51\uff1ahttps://www.docker.com # 1\u3001yum \u5305\u66f4\u65b0\u5230\u6700\u65b0 yum update # 2\u3001\u5b89\u88c5\u9700\u8981\u7684\u8f6f\u4ef6\u5305\uff0c yum-util \u63d0\u4f9byum-config-manager\u529f\u80fd\uff0c\u53e6\u5916\u4e24\u4e2a\u662fdevicemapper\u9a71\u52a8\u4f9d\u8d56\u7684 yum install -y yum-utils device-mapper-persistent-data lvm2 # 3\u3001 \u8bbe\u7f6eyum\u6e90 yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo # 4\u3001 \u5b89\u88c5docker\uff0c\u51fa\u73b0\u8f93\u5165\u7684\u754c\u9762\u90fd\u6309 y yum install -y docker-ce # 5\u3001 \u67e5\u770bdocker\u7248\u672c\uff0c\u9a8c\u8bc1\u662f\u5426\u9a8c\u8bc1\u6210\u529f docker -v 1.2\u914d\u7f6e Docker \u955c\u50cf\u52a0\u901f\u5668 \u00b6","title":"\u521d\u8bc6 Docker"},{"location":"docker/1/#docker","text":"","title":"\u521d\u8bc6 Docker"},{"location":"docker/1/#11docker","text":"Docker\u53ef\u4ee5\u8fd0\u884c\u5728MAC\u3001Windows\u3001CentOS\u3001UBUNTU\u7b49\u64cd\u4f5c\u7cfb\u7edf\u4e0a\uff0c\u672c\u8bfe\u7a0b\u57fa\u4e8eCentOS 7 \u5b89\u88c5 Docker\u3002\u5b98\u7f51\uff1ahttps://www.docker.com # 1\u3001yum \u5305\u66f4\u65b0\u5230\u6700\u65b0 yum update # 2\u3001\u5b89\u88c5\u9700\u8981\u7684\u8f6f\u4ef6\u5305\uff0c yum-util \u63d0\u4f9byum-config-manager\u529f\u80fd\uff0c\u53e6\u5916\u4e24\u4e2a\u662fdevicemapper\u9a71\u52a8\u4f9d\u8d56\u7684 yum install -y yum-utils device-mapper-persistent-data lvm2 # 3\u3001 \u8bbe\u7f6eyum\u6e90 yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo # 4\u3001 \u5b89\u88c5docker\uff0c\u51fa\u73b0\u8f93\u5165\u7684\u754c\u9762\u90fd\u6309 y yum install -y docker-ce # 5\u3001 \u67e5\u770bdocker\u7248\u672c\uff0c\u9a8c\u8bc1\u662f\u5426\u9a8c\u8bc1\u6210\u529f docker -v","title":"1.1\u5b89\u88c5docker"},{"location":"docker/1/#12_docker","text":"","title":"1.2\u914d\u7f6e Docker \u955c\u50cf\u52a0\u901f\u5668"},{"location":"docker/2/","text":"docker\u547d\u4ee4 \u00b6 2.1 \u8fdb\u7a0b\u76f8\u5173\u547d\u4ee4 \u00b6 \u5173\u4e8e\u8fdb\u7a0b\u76f8\u5173\u7684\u547d\u4ee4 2.1.1 \u542f\u52a8docker\u670d\u52a1 \u00b6 systemctl start docker 2.1.2 \u505c\u6b62docker\u670d\u52a1 \u00b6 systemctl stop docker 2.1.3 \u91cd\u542fdocker\u670d\u52a1 \u00b6 systemctl restart docker 2.1.4 \u67e5\u770bdocker\u670d\u52a1\u72b6\u6001 \u00b6 systemctl status docker 2.1.5 \u5f00\u673a\u542f\u52a8docker\u670d\u52a1 \u00b6 systemctl enable docker 2.2 Docker \u955c\u50cf\u76f8\u5173\u547d\u4ee4 \u00b6 2.2.1 \u67e5\u770b\u955c\u50cf \u00b6 \u67e5\u770b\u672c\u5730\u6240\u6709\u7684\u955c\u50cf docker images docker images \u2013q # \u67e5\u770b\u6240\u7528\u955c\u50cf\u7684id REPOSITORY\uff1a\u955c\u50cf\u540d\u79f0 TAG\uff1a\u955c\u50cf\u6807\u7b7e IMAGE ID\uff1a\u955c\u50cfID CREATED\uff1a\u955c\u50cf\u7684\u521b\u5efa\u65e5\u671f SIZE\uff1a\u955c\u50cf\u5927\u5c0f 2.2.2 \u641c\u7d22\u955c\u50cf \u00b6 \u4ece\u7f51\u7edc\u4e2d\u67e5\u627e\u9700\u8981\u7684\u955c\u50cf docker search \u955c\u50cf\u540d\u79f0 NAME\uff1a\u955c\u50cf\u540d\u79f0 DESCRIPTION\uff1a\u955c\u50cf\u63cf\u8ff0 STARS\uff1a\u7528\u6237\u8bc4\u4ef7\uff0c\u53cd\u5e94\u4e00\u4e2a\u955c\u50cf\u7684\u53d7\u6b22\u8fce\u7a0b\u5ea6 OFFICIAL\uff1a\u662f\u5426\u5b98\u65b9 AUTOMATED\uff1a\u81ea\u52a8\u6784\u5efa\uff0c\u8868\u793a\u8be5\u955c\u50cf\u7531Docker Hub\u81ea\u52a8\u6784\u5efa\u6d41\u7a0b\u521b\u5efa\u7684 2.2.3 \u62c9\u53d6\u955c\u50cf \u00b6 \u4eceDocker\u4ed3\u5e93\u4e0b\u8f7d\u955c\u50cf\u5230\u672c\u5730\uff0c\u955c\u50cf\u540d\u79f0\u683c\u5f0f\u4e3a \u540d\u79f0:\u7248\u672c\u53f7\uff0c\u5982\u679c\u7248\u672c\u53f7\u4e0d\u6307\u5b9a\u5219\u662f\u6700\u65b0\u7684\u7248\u672c\u3002 \u5982\u679c\u4e0d\u77e5\u9053\u955c\u50cf\u7248\u672c\uff0c\u53ef\u4ee5\u53bbdocker hub \u641c\u7d22\u5bf9\u5e94\u955c\u50cf\u67e5\u770b\u3002 docker pull \u955c\u50cf\u540d\u79f0 2.2.4 \u5220\u9664\u955c\u50cf \u00b6 \u5220\u9664\u672c\u5730\u955c\u50cf docker rmi \u955c\u50cfid # \u5220\u9664\u6307\u5b9a\u672c\u5730\u955c\u50cf docker rmi ` docker images -q ` # \u5220\u9664\u6240\u6709\u672c\u5730\u955c\u50cf \u5173\u4e8edocker\u66f4\u591a\u547d\u4ee4\uff0c \u5927\u5bb6\u53ef\u4ee5\u83dc\u9e1f\u6559\u7a0b\u67e5\u770b, \u7f51\u5740\uff1a https://www.runoob.com/docker/docker-command-manual.html 2.3 \u5bb9\u5668\u76f8\u5173\u7684\u547d\u4ee4 \u00b6 2.3.1 \u67e5\u770b\u5bb9\u5668 \u00b6 docker ps # \u67e5\u770b\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668 docker ps -a # \u67e5\u770b\u6240\u6709\u5bb9\u5668\uff0c\u5305\u62ec\u6b63\u5728\u8fd0\u884c\u548c\u505c\u6b62\u7684\u5bb9\u5668 2.3.2 \u521b\u5efa\u5e76\u542f\u52a8\u5bb9\u5668 \u00b6 docker run \u53c2\u6570 \u53c2\u6570\u8bf4\u660e\uff1a \u2022 -i\uff1a\u4fdd\u6301\u5bb9\u5668\u8fd0\u884c\u3002\u901a\u5e38\u4e0e -t \u540c\u65f6\u4f7f\u7528\u3002\u52a0\u5165it\u8fd9\u4e24\u4e2a\u53c2\u6570\u540e\uff0c\u5bb9\u5668\u521b\u5efa\u540e\u81ea\u52a8\u8fdb\u5165\u5bb9\u5668\u4e2d\uff0c\u9000\u51fa\u5bb9\u5668\u540e\uff0c\u5bb9\u5668\u81ea\u52a8\u5173\u95ed\u3002 \u2022 -t\uff1a\u4e3a\u5bb9\u5668\u91cd\u65b0\u5206\u914d\u4e00\u4e2a\u4f2a\u8f93\u5165\u7ec8\u7aef\uff0c\u901a\u5e38\u4e0e -i \u540c\u65f6\u4f7f\u7528\u3002 \u2022 -d\uff1a\u4ee5\u5b88\u62a4\uff08\u540e\u53f0\uff09\u6a21\u5f0f\u8fd0\u884c\u5bb9\u5668\u3002\u521b\u5efa\u4e00\u4e2a\u5bb9\u5668\u5728\u540e\u53f0\u8fd0\u884c\uff0c\u9700\u8981\u4f7f\u7528docker exec \u8fdb\u5165\u5bb9\u5668\u3002\u9000\u51fa\u540e\uff0c\u5bb9\u5668\u4e0d\u4f1a\u5173\u95ed\u3002 \u2022 -it \u521b\u5efa\u7684\u5bb9\u5668\u4e00\u822c\u79f0\u4e3a\u4ea4\u4e92\u5f0f\u5bb9\u5668\uff0c-id \u521b\u5efa\u7684\u5bb9\u5668\u4e00\u822c\u79f0\u4e3a\u5b88\u62a4\u5f0f\u5bb9\u5668 \u2022 --name\uff1a\u4e3a\u521b\u5efa\u7684\u5bb9\u5668\u547d\u540d\u3002 1\uff09\u4ea4\u4e92\u5f0f\u5bb9\u5668 \u4ee5 \u4ea4\u4e92\u5f0f \u65b9\u5f0f\u521b\u5efa\u5e76\u542f\u52a8\u5bb9\u5668\uff0c\u542f\u52a8\u5b8c\u6210\u540e\uff0c\u76f4\u63a5\u8fdb\u5165\u5f53\u524d\u5bb9\u5668\u3002\u4f7f\u7528exit\u547d\u4ee4\u9000\u51fa\u5bb9\u5668\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\u4ee5\u6b64\u79cd\u65b9\u5f0f \u542f\u52a8\u5bb9\u5668\uff0c\u5982\u679c\u9000\u51fa\u5bb9\u5668\uff0c\u5219\u5bb9\u5668\u4f1a\u8fdb\u5165 \u505c\u6b62 \u72b6\u6001\u3002 # \u5148\u62c9\u53d6\u4e00\u4e2a\u955c\u50cf\uff1b\u8fd9\u4e00\u6b65\u4e0d\u662f\u6bcf\u6b21\u542f\u52a8\u5bb9\u5668\u90fd\u8981\u505a\u7684\uff0c\u800c\u662f\u56e0\u4e3a\u524d\u9762\u6211\u4eec\u5220\u9664\u4e86\u955c\u50cf\uff0c\u65e0\u955c\u50cf\u53ef\u7528\u6240\u4ee5\u624d\u518d\u62c9\u53d6\u4e00\u4e2a docker pull centos:7 #\u521b\u5efa\u5e76\u542f\u52a8\u540d\u79f0\u4e3a mycentos7 \u7684\u4ea4\u4e92\u5f0f\u5bb9\u5668\uff1b\u4e0b\u9762\u6307\u4ee4\u4e2d\u7684\u955c\u50cf\u540d\u79f0 centos:7 \u4e5f\u53ef\u4ee5\u4f7f\u7528\u955c\u50cfid docker run -it --name = mycentos7 centos:7 /bin/bash 2\uff09\u5b88\u62a4\u5f0f\u5bb9\u5668 \u521b\u5efa\u4e00\u4e2a\u5b88\u62a4\u5f0f\u5bb9\u5668\uff1b\u5982\u679c\u5bf9\u4e8e\u4e00\u4e2a\u9700\u8981\u957f\u671f\u8fd0\u884c\u7684\u5bb9\u5668\u6765\u8bf4\uff0c\u6211\u4eec\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u5b88\u62a4\u5f0f\u5bb9\u5668\u3002\u547d\u4ee4\u5982\u4e0b\uff08\u5bb9\u5668\u540d\u79f0 \u4e0d\u80fd\u91cd\u590d\uff09\uff1a #\u521b\u5efa\u5e76\u542f\u52a8\u5b88\u62a4\u5f0f\u5bb9\u5668 docker run -di --name = mycentos2 centos:7 #\u767b\u5f55\u8fdb\u5165\u5bb9\u5668\u547d\u4ee4\u4e3a\uff1adocker exec -it container_name (\u6216\u8005 container_id) /bin/bash\uff08exit\u9000\u51fa \u65f6\uff0c\u5bb9\u5668\u4e0d\u4f1a\u505c\u6b62\uff09 docker exec -it mycentos2 /bin/bash 2.3.3 \u8fdb\u5165\u5bb9\u5668 \u00b6 docker exec \u53c2\u6570 # \u9000\u51fa\u5bb9\u5668\uff0c\u5bb9\u5668\u4e0d\u4f1a\u5173\u95ed eg: docker exec -it mycentos2 /bin/bash 2.3.4 \u505c\u6b62\u5bb9\u5668 \u00b6 docker stop \u5bb9\u5668\u540d\u79f0\u6216\u8005\u5bb9\u5668id 2.3.5 \u542f\u52a8\u5bb9\u5668 \u00b6 docker start \u5bb9\u5668\u540d\u79f0\u6216\u8005\u5bb9\u5668id 2.3.6 \u5220\u9664\u5bb9\u5668 \u00b6 #\u5220\u9664\u6307\u5b9a\u5bb9\u5668 docker rm \u5bb9\u5668\u540d\u79f0\u6216\u8005\u5bb9\u5668id # \u5220\u9664\u6240\u6709\u5bb9\u5668\uff1a docker rm ` docker ps -a -q ` \u6ce8\u610f\uff1a\u5982\u679c\u5bb9\u5668\u662f\u8fd0\u884c\u72b6\u6001\u5219\u5220\u9664\u5931\u8d25\uff0c\u9700\u8981\u505c\u6b62\u5bb9\u5668\u624d\u80fd\u5220\u9664 2.3. 7 \u67e5\u770b\u5bb9\u5668\u4fe1\u606f \u00b6 docker inspect \u5bb9\u5668\u540d\u79f0\u6216\u8005\u5bb9\u5668id \u8bf4\u660e\uff1a\u5bb9\u5668\u4e4b\u95f4\u5728\u4e00\u4e2a\u5c40\u57df\u7f51\u5185\uff0clinux\u5bbf\u4e3b\u673a\u5668\u53ef\u4ee5\u4e0e\u5bb9\u5668\u8fdb\u884c\u901a\u4fe1\uff1b\u4f46\u662f\u5916\u90e8\u7684\u7269\u7406\u673a\u7b14\u8bb0\u672c\u662f\u4e0d\u80fd\u4e0e\u5bb9\u5668\u76f4\u63a5\u901a\u4fe1\u7684\uff0c\u5982\u679c\u9700\u8981\u5219\u9700\u8981\u901a\u8fc7\u5bbf\u4e3b\u673a\u5668\u7aef\u53e3\u7684\u4ee3\u7406\u3002","title":"docker\u547d\u4ee4"},{"location":"docker/2/#docker","text":"","title":"docker\u547d\u4ee4"},{"location":"docker/2/#21","text":"\u5173\u4e8e\u8fdb\u7a0b\u76f8\u5173\u7684\u547d\u4ee4","title":"2.1 \u8fdb\u7a0b\u76f8\u5173\u547d\u4ee4"},{"location":"docker/2/#211_docker","text":"systemctl start docker","title":"2.1.1 \u542f\u52a8docker\u670d\u52a1"},{"location":"docker/2/#212_docker","text":"systemctl stop docker","title":"2.1.2 \u505c\u6b62docker\u670d\u52a1"},{"location":"docker/2/#213_docker","text":"systemctl restart docker","title":"2.1.3 \u91cd\u542fdocker\u670d\u52a1"},{"location":"docker/2/#214_docker","text":"systemctl status docker","title":"2.1.4 \u67e5\u770bdocker\u670d\u52a1\u72b6\u6001"},{"location":"docker/2/#215_docker","text":"systemctl enable docker","title":"2.1.5 \u5f00\u673a\u542f\u52a8docker\u670d\u52a1"},{"location":"docker/2/#22_docker","text":"","title":"2.2 Docker \u955c\u50cf\u76f8\u5173\u547d\u4ee4"},{"location":"docker/2/#221","text":"\u67e5\u770b\u672c\u5730\u6240\u6709\u7684\u955c\u50cf docker images docker images \u2013q # \u67e5\u770b\u6240\u7528\u955c\u50cf\u7684id REPOSITORY\uff1a\u955c\u50cf\u540d\u79f0 TAG\uff1a\u955c\u50cf\u6807\u7b7e IMAGE ID\uff1a\u955c\u50cfID CREATED\uff1a\u955c\u50cf\u7684\u521b\u5efa\u65e5\u671f SIZE\uff1a\u955c\u50cf\u5927\u5c0f","title":"2.2.1 \u67e5\u770b\u955c\u50cf"},{"location":"docker/2/#222","text":"\u4ece\u7f51\u7edc\u4e2d\u67e5\u627e\u9700\u8981\u7684\u955c\u50cf docker search \u955c\u50cf\u540d\u79f0 NAME\uff1a\u955c\u50cf\u540d\u79f0 DESCRIPTION\uff1a\u955c\u50cf\u63cf\u8ff0 STARS\uff1a\u7528\u6237\u8bc4\u4ef7\uff0c\u53cd\u5e94\u4e00\u4e2a\u955c\u50cf\u7684\u53d7\u6b22\u8fce\u7a0b\u5ea6 OFFICIAL\uff1a\u662f\u5426\u5b98\u65b9 AUTOMATED\uff1a\u81ea\u52a8\u6784\u5efa\uff0c\u8868\u793a\u8be5\u955c\u50cf\u7531Docker Hub\u81ea\u52a8\u6784\u5efa\u6d41\u7a0b\u521b\u5efa\u7684","title":"2.2.2 \u641c\u7d22\u955c\u50cf"},{"location":"docker/2/#223","text":"\u4eceDocker\u4ed3\u5e93\u4e0b\u8f7d\u955c\u50cf\u5230\u672c\u5730\uff0c\u955c\u50cf\u540d\u79f0\u683c\u5f0f\u4e3a \u540d\u79f0:\u7248\u672c\u53f7\uff0c\u5982\u679c\u7248\u672c\u53f7\u4e0d\u6307\u5b9a\u5219\u662f\u6700\u65b0\u7684\u7248\u672c\u3002 \u5982\u679c\u4e0d\u77e5\u9053\u955c\u50cf\u7248\u672c\uff0c\u53ef\u4ee5\u53bbdocker hub \u641c\u7d22\u5bf9\u5e94\u955c\u50cf\u67e5\u770b\u3002 docker pull \u955c\u50cf\u540d\u79f0","title":"2.2.3 \u62c9\u53d6\u955c\u50cf"},{"location":"docker/2/#224","text":"\u5220\u9664\u672c\u5730\u955c\u50cf docker rmi \u955c\u50cfid # \u5220\u9664\u6307\u5b9a\u672c\u5730\u955c\u50cf docker rmi ` docker images -q ` # \u5220\u9664\u6240\u6709\u672c\u5730\u955c\u50cf \u5173\u4e8edocker\u66f4\u591a\u547d\u4ee4\uff0c \u5927\u5bb6\u53ef\u4ee5\u83dc\u9e1f\u6559\u7a0b\u67e5\u770b, \u7f51\u5740\uff1a https://www.runoob.com/docker/docker-command-manual.html","title":"2.2.4 \u5220\u9664\u955c\u50cf"},{"location":"docker/2/#23","text":"","title":"2.3 \u5bb9\u5668\u76f8\u5173\u7684\u547d\u4ee4"},{"location":"docker/2/#231","text":"docker ps # \u67e5\u770b\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668 docker ps -a # \u67e5\u770b\u6240\u6709\u5bb9\u5668\uff0c\u5305\u62ec\u6b63\u5728\u8fd0\u884c\u548c\u505c\u6b62\u7684\u5bb9\u5668","title":"2.3.1 \u67e5\u770b\u5bb9\u5668"},{"location":"docker/2/#232","text":"docker run \u53c2\u6570 \u53c2\u6570\u8bf4\u660e\uff1a \u2022 -i\uff1a\u4fdd\u6301\u5bb9\u5668\u8fd0\u884c\u3002\u901a\u5e38\u4e0e -t \u540c\u65f6\u4f7f\u7528\u3002\u52a0\u5165it\u8fd9\u4e24\u4e2a\u53c2\u6570\u540e\uff0c\u5bb9\u5668\u521b\u5efa\u540e\u81ea\u52a8\u8fdb\u5165\u5bb9\u5668\u4e2d\uff0c\u9000\u51fa\u5bb9\u5668\u540e\uff0c\u5bb9\u5668\u81ea\u52a8\u5173\u95ed\u3002 \u2022 -t\uff1a\u4e3a\u5bb9\u5668\u91cd\u65b0\u5206\u914d\u4e00\u4e2a\u4f2a\u8f93\u5165\u7ec8\u7aef\uff0c\u901a\u5e38\u4e0e -i \u540c\u65f6\u4f7f\u7528\u3002 \u2022 -d\uff1a\u4ee5\u5b88\u62a4\uff08\u540e\u53f0\uff09\u6a21\u5f0f\u8fd0\u884c\u5bb9\u5668\u3002\u521b\u5efa\u4e00\u4e2a\u5bb9\u5668\u5728\u540e\u53f0\u8fd0\u884c\uff0c\u9700\u8981\u4f7f\u7528docker exec \u8fdb\u5165\u5bb9\u5668\u3002\u9000\u51fa\u540e\uff0c\u5bb9\u5668\u4e0d\u4f1a\u5173\u95ed\u3002 \u2022 -it \u521b\u5efa\u7684\u5bb9\u5668\u4e00\u822c\u79f0\u4e3a\u4ea4\u4e92\u5f0f\u5bb9\u5668\uff0c-id \u521b\u5efa\u7684\u5bb9\u5668\u4e00\u822c\u79f0\u4e3a\u5b88\u62a4\u5f0f\u5bb9\u5668 \u2022 --name\uff1a\u4e3a\u521b\u5efa\u7684\u5bb9\u5668\u547d\u540d\u3002 1\uff09\u4ea4\u4e92\u5f0f\u5bb9\u5668 \u4ee5 \u4ea4\u4e92\u5f0f \u65b9\u5f0f\u521b\u5efa\u5e76\u542f\u52a8\u5bb9\u5668\uff0c\u542f\u52a8\u5b8c\u6210\u540e\uff0c\u76f4\u63a5\u8fdb\u5165\u5f53\u524d\u5bb9\u5668\u3002\u4f7f\u7528exit\u547d\u4ee4\u9000\u51fa\u5bb9\u5668\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\u4ee5\u6b64\u79cd\u65b9\u5f0f \u542f\u52a8\u5bb9\u5668\uff0c\u5982\u679c\u9000\u51fa\u5bb9\u5668\uff0c\u5219\u5bb9\u5668\u4f1a\u8fdb\u5165 \u505c\u6b62 \u72b6\u6001\u3002 # \u5148\u62c9\u53d6\u4e00\u4e2a\u955c\u50cf\uff1b\u8fd9\u4e00\u6b65\u4e0d\u662f\u6bcf\u6b21\u542f\u52a8\u5bb9\u5668\u90fd\u8981\u505a\u7684\uff0c\u800c\u662f\u56e0\u4e3a\u524d\u9762\u6211\u4eec\u5220\u9664\u4e86\u955c\u50cf\uff0c\u65e0\u955c\u50cf\u53ef\u7528\u6240\u4ee5\u624d\u518d\u62c9\u53d6\u4e00\u4e2a docker pull centos:7 #\u521b\u5efa\u5e76\u542f\u52a8\u540d\u79f0\u4e3a mycentos7 \u7684\u4ea4\u4e92\u5f0f\u5bb9\u5668\uff1b\u4e0b\u9762\u6307\u4ee4\u4e2d\u7684\u955c\u50cf\u540d\u79f0 centos:7 \u4e5f\u53ef\u4ee5\u4f7f\u7528\u955c\u50cfid docker run -it --name = mycentos7 centos:7 /bin/bash 2\uff09\u5b88\u62a4\u5f0f\u5bb9\u5668 \u521b\u5efa\u4e00\u4e2a\u5b88\u62a4\u5f0f\u5bb9\u5668\uff1b\u5982\u679c\u5bf9\u4e8e\u4e00\u4e2a\u9700\u8981\u957f\u671f\u8fd0\u884c\u7684\u5bb9\u5668\u6765\u8bf4\uff0c\u6211\u4eec\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u5b88\u62a4\u5f0f\u5bb9\u5668\u3002\u547d\u4ee4\u5982\u4e0b\uff08\u5bb9\u5668\u540d\u79f0 \u4e0d\u80fd\u91cd\u590d\uff09\uff1a #\u521b\u5efa\u5e76\u542f\u52a8\u5b88\u62a4\u5f0f\u5bb9\u5668 docker run -di --name = mycentos2 centos:7 #\u767b\u5f55\u8fdb\u5165\u5bb9\u5668\u547d\u4ee4\u4e3a\uff1adocker exec -it container_name (\u6216\u8005 container_id) /bin/bash\uff08exit\u9000\u51fa \u65f6\uff0c\u5bb9\u5668\u4e0d\u4f1a\u505c\u6b62\uff09 docker exec -it mycentos2 /bin/bash","title":"2.3.2 \u521b\u5efa\u5e76\u542f\u52a8\u5bb9\u5668"},{"location":"docker/2/#233","text":"docker exec \u53c2\u6570 # \u9000\u51fa\u5bb9\u5668\uff0c\u5bb9\u5668\u4e0d\u4f1a\u5173\u95ed eg: docker exec -it mycentos2 /bin/bash","title":"2.3.3 \u8fdb\u5165\u5bb9\u5668"},{"location":"docker/2/#234","text":"docker stop \u5bb9\u5668\u540d\u79f0\u6216\u8005\u5bb9\u5668id","title":"2.3.4 \u505c\u6b62\u5bb9\u5668"},{"location":"docker/2/#235","text":"docker start \u5bb9\u5668\u540d\u79f0\u6216\u8005\u5bb9\u5668id","title":"2.3.5 \u542f\u52a8\u5bb9\u5668"},{"location":"docker/2/#236","text":"#\u5220\u9664\u6307\u5b9a\u5bb9\u5668 docker rm \u5bb9\u5668\u540d\u79f0\u6216\u8005\u5bb9\u5668id # \u5220\u9664\u6240\u6709\u5bb9\u5668\uff1a docker rm ` docker ps -a -q ` \u6ce8\u610f\uff1a\u5982\u679c\u5bb9\u5668\u662f\u8fd0\u884c\u72b6\u6001\u5219\u5220\u9664\u5931\u8d25\uff0c\u9700\u8981\u505c\u6b62\u5bb9\u5668\u624d\u80fd\u5220\u9664","title":"2.3.6 \u5220\u9664\u5bb9\u5668"},{"location":"docker/2/#23_7","text":"docker inspect \u5bb9\u5668\u540d\u79f0\u6216\u8005\u5bb9\u5668id \u8bf4\u660e\uff1a\u5bb9\u5668\u4e4b\u95f4\u5728\u4e00\u4e2a\u5c40\u57df\u7f51\u5185\uff0clinux\u5bbf\u4e3b\u673a\u5668\u53ef\u4ee5\u4e0e\u5bb9\u5668\u8fdb\u884c\u901a\u4fe1\uff1b\u4f46\u662f\u5916\u90e8\u7684\u7269\u7406\u673a\u7b14\u8bb0\u672c\u662f\u4e0d\u80fd\u4e0e\u5bb9\u5668\u76f4\u63a5\u901a\u4fe1\u7684\uff0c\u5982\u679c\u9700\u8981\u5219\u9700\u8981\u901a\u8fc7\u5bbf\u4e3b\u673a\u5668\u7aef\u53e3\u7684\u4ee3\u7406\u3002","title":"2.3. 7 \u67e5\u770b\u5bb9\u5668\u4fe1\u606f"},{"location":"docker/3/","text":"docker\u5bb9\u5668\u7684\u6570\u636e\u5377 \u00b6 3.1 \u6570\u636e\u5377\u6982\u5ff5 \u00b6 \u601d\u8003\uff1a \u2022 Docker \u5bb9\u5668\u5220\u9664\u540e\uff0c\u5728\u5bb9\u5668\u4e2d\u4ea7\u751f\u7684\u6570\u636e\u4e5f\u4f1a\u968f\u4e4b\u9500\u6bc1 \u2022 Docker \u5bb9\u5668\u548c\u5916\u90e8\u673a\u5668\u53ef\u4ee5\u76f4\u63a5\u4ea4\u6362\u6587\u4ef6\u5417\uff1f \u2022 \u5bb9\u5668\u4e4b\u95f4\u60f3\u8981\u8fdb\u884c\u6570\u636e\u4ea4\u4e92\uff1f \u6570\u636e\u5377 \u6570\u636e\u5377\u662f\u5bbf\u4e3b\u673a\u4e2d\u7684\u4e00\u4e2a\u76ee\u5f55\u6216\u6587\u4ef6 \u5f53\u5bb9\u5668\u76ee\u5f55\u548c\u6570\u636e\u5377\u76ee\u5f55\u7ed1\u5b9a\u540e\uff0c\u5bf9\u65b9\u7684\u4fee\u6539\u4f1a\u7acb\u5373\u540c\u6b65 \u4e00\u4e2a\u6570\u636e\u5377\u53ef\u4ee5\u88ab\u591a\u4e2a\u5bb9\u5668\u540c\u65f6\u6302\u8f7d \u4e00\u4e2a\u5bb9\u5668\u4e5f\u53ef\u4ee5\u88ab\u6302\u8f7d\u591a\u4e2a\u6570\u636e\u5377 \u6570\u636e\u5377\u7684\u4f5c\u7528 \u2022 \u5bb9\u5668\u6570\u636e\u6301\u4e45\u5316 \u2022 \u5916\u90e8\u673a\u5668\u548c\u5bb9\u5668\u95f4\u63a5\u901a\u4fe1 \u2022 \u5bb9\u5668\u4e4b\u95f4\u6570\u636e\u4ea4\u6362 3.2 \u914d\u7f6e\u6570\u636e\u5377 \u00b6 \u521b\u5efa\u542f\u52a8\u5bb9\u5668\u65f6\uff0c\u4f7f\u7528 \u2013v \u53c2\u6570 \u8bbe\u7f6e\u6570\u636e\u5377 docker run ... -v \u5bbf\u4e3b\u673a\u76ee\u5f55 ( \u6587\u4ef6 ) :\u5bb9\u5668\u5185\u76ee\u5f55 ( \u6587\u4ef6 ) ... \u6ce8\u610f\u4e8b\u9879\uff1a \u76ee\u5f55\u5fc5\u987b\u662f\u7edd\u5bf9\u8def\u5f84 \u5982\u679c\u76ee\u5f55\u4e0d\u5b58\u5728\uff0c\u4f1a\u81ea\u52a8\u521b\u5efa \u4e00\u4e2a\u5bb9\u5668\u53ef\u4ee5\u6302\u8f7d\u591a\u4e2a\u6570\u636e\u5377 \u4e00\u4e2a\u6570\u636e\u5377\u4e5f\u53ef\u4ee5\u88ab\u591a\u4e2a\u5bb9\u5668\u6302\u8f7d \u4e24\u4e2a\u5bb9\u5668\u53ef\u4ee5\u6302\u8f7d\u540c\u4e00\u4e2a\u5bb9\u5668 \u5728\u5bbf\u4e3b\u673a\u4e2d\u5b9e\u73b0\u4e0e\u5bb9\u5668\u76ee\u5f55\u7684\u6302\u8f7d\uff1a \u6570\u636e\u5377\u7684\u6301\u4e45\u5316\uff1a \u200b \u5f53\u6211\u4eec\u628ac1\u5bb9\u5668\u5220\u9664\u540e\uff0c\u5bbf\u4e3b\u673a\u4e2d\u7684\u6570\u636e\u5377\u4f9d\u7136\u5b58\u5728\u3002 \u6240\u4ee5\u5f53\u6211\u4eec\u91cd\u65b0\u521b\u5efa\u4e00\u4e2a\u5bb9\u5668\u7684\u540c\u65f6\u4f9d\u7136\u53ef\u4ee5\u6302\u8f7d\u5bbf\u4e3b\u673a\u4e2d\u7684data\u6587\u4ef6\u5939\uff0c\u5bf9\u5e94data\u91cc\u7684\u6570\u636e\u4f9d\u7136\u540c\u6b65\u5230\u5bb9\u5668\u4e2d\u3002 \u4e00\u4e2a\u5bb9\u5668\u53ef\u4ee5\u6302\u8f7d\u591a\u4e2a\u6570\u636e\u5377 \u591a\u4e2a\u5bb9\u5668\u53ef\u4ee5\u6302\u8f7d\u540c\u4e00\u4e2a\u6570\u636e\u5377 \u5206\u522b\u521b\u5efa\u4e24\u4e2a\u5bb9\u5668\uff0c\u4e24\u4e2a\u5bb9\u5668\u90fd\u6302\u8f7d\u5bbf\u4e3b\u673a\u4e2ddata\u76ee\u5f55\uff0c\u5f53 \u4fee\u6539c3\u5bb9\u5668\u7684data\u76ee\u5f55c4\u4f1a\u5b9e\u73b0\u540c\u6b65\u3002 \u4ece\u800c\u5b9e\u73b0\u4e24\u4e2a\u5bb9\u5668\u4e4b\u95f4\u7684\u4ea4\u4e92\u3002 3.3 \u914d\u7f6e\u6570\u636e\u5377\u5bb9\u5668 \u00b6 \u591a\u5bb9\u5668\u8fdb\u884c\u6570\u636e\u4ea4\u6362 \u591a\u4e2a\u5bb9\u5668\u6302\u8f7d\u540c\u4e00\u4e2a\u6570\u636e\u5377 \u6570\u636e\u5377\u5bb9\u5668 \u6b65\u9aa4\uff1a 1.\u521b\u5efa\u542f\u52a8c3\u6570\u636e\u5377\u5bb9\u5668\uff0c\u4f7f\u7528 \u2013v \u53c2\u6570 \u8bbe\u7f6e\u6570\u636e\u5377 docker run \u2013it --name = c3 -v /volume centos:7 /bin/bash \u521b\u5efa\u542f\u52a8 c1 c2 \u5bb9\u5668\uff0c\u4f7f\u7528 \u2013-volumes-from \u53c2\u6570 \u8bbe\u7f6e\u6570\u636e\u5377 docker run \u2013it --name = c1 --volumes-from c3 centos:7 /bin/bash docker run \u2013it --name = c2 --volumes-from c3 centos:7 /bin/bash 3.4 \u6570\u636e\u5377\u5c0f\u7ed3 \u00b6 \u6570\u636e\u5377\u6982\u5ff5 \u2022\u5bbf\u4e3b\u673a\u7684\u4e00\u4e2a\u76ee\u5f55\u6216\u6587\u4ef6 \u6570\u636e\u5377\u4f5c\u7528 \u2022 \u5bb9\u5668\u6570\u636e\u6301\u4e45\u5316 \u2022 \u5ba2\u6237\u7aef\u548c\u5bb9\u5668\u6570\u636e\u4ea4\u6362 \u2022 \u5bb9\u5668\u95f4\u6570\u636e\u4ea4\u6362 \u6570\u636e\u5377\u5bb9\u5668 \u2022 \u521b\u5efa\u4e00\u4e2a\u5bb9\u5668\uff0c\u6302\u8f7d\u4e00\u4e2a\u76ee\u5f55\uff0c\u8ba9\u5176\u4ed6\u5bb9\u5668\u7ee7\u627f\u81ea\u8be5\u5bb9\u5668( --volume-from )\u3002 \u2022 \u901a\u8fc7\u7b80\u5355\u65b9\u5f0f\u5b9e\u73b0\u6570\u636e\u5377\u914d\u7f6e","title":"docker\u5bb9\u5668\u7684\u6570\u636e\u5377"},{"location":"docker/3/#docker","text":"","title":"docker\u5bb9\u5668\u7684\u6570\u636e\u5377"},{"location":"docker/3/#31","text":"\u601d\u8003\uff1a \u2022 Docker \u5bb9\u5668\u5220\u9664\u540e\uff0c\u5728\u5bb9\u5668\u4e2d\u4ea7\u751f\u7684\u6570\u636e\u4e5f\u4f1a\u968f\u4e4b\u9500\u6bc1 \u2022 Docker \u5bb9\u5668\u548c\u5916\u90e8\u673a\u5668\u53ef\u4ee5\u76f4\u63a5\u4ea4\u6362\u6587\u4ef6\u5417\uff1f \u2022 \u5bb9\u5668\u4e4b\u95f4\u60f3\u8981\u8fdb\u884c\u6570\u636e\u4ea4\u4e92\uff1f \u6570\u636e\u5377 \u6570\u636e\u5377\u662f\u5bbf\u4e3b\u673a\u4e2d\u7684\u4e00\u4e2a\u76ee\u5f55\u6216\u6587\u4ef6 \u5f53\u5bb9\u5668\u76ee\u5f55\u548c\u6570\u636e\u5377\u76ee\u5f55\u7ed1\u5b9a\u540e\uff0c\u5bf9\u65b9\u7684\u4fee\u6539\u4f1a\u7acb\u5373\u540c\u6b65 \u4e00\u4e2a\u6570\u636e\u5377\u53ef\u4ee5\u88ab\u591a\u4e2a\u5bb9\u5668\u540c\u65f6\u6302\u8f7d \u4e00\u4e2a\u5bb9\u5668\u4e5f\u53ef\u4ee5\u88ab\u6302\u8f7d\u591a\u4e2a\u6570\u636e\u5377 \u6570\u636e\u5377\u7684\u4f5c\u7528 \u2022 \u5bb9\u5668\u6570\u636e\u6301\u4e45\u5316 \u2022 \u5916\u90e8\u673a\u5668\u548c\u5bb9\u5668\u95f4\u63a5\u901a\u4fe1 \u2022 \u5bb9\u5668\u4e4b\u95f4\u6570\u636e\u4ea4\u6362","title":"3.1 \u6570\u636e\u5377\u6982\u5ff5"},{"location":"docker/3/#32","text":"\u521b\u5efa\u542f\u52a8\u5bb9\u5668\u65f6\uff0c\u4f7f\u7528 \u2013v \u53c2\u6570 \u8bbe\u7f6e\u6570\u636e\u5377 docker run ... -v \u5bbf\u4e3b\u673a\u76ee\u5f55 ( \u6587\u4ef6 ) :\u5bb9\u5668\u5185\u76ee\u5f55 ( \u6587\u4ef6 ) ... \u6ce8\u610f\u4e8b\u9879\uff1a \u76ee\u5f55\u5fc5\u987b\u662f\u7edd\u5bf9\u8def\u5f84 \u5982\u679c\u76ee\u5f55\u4e0d\u5b58\u5728\uff0c\u4f1a\u81ea\u52a8\u521b\u5efa \u4e00\u4e2a\u5bb9\u5668\u53ef\u4ee5\u6302\u8f7d\u591a\u4e2a\u6570\u636e\u5377 \u4e00\u4e2a\u6570\u636e\u5377\u4e5f\u53ef\u4ee5\u88ab\u591a\u4e2a\u5bb9\u5668\u6302\u8f7d \u4e24\u4e2a\u5bb9\u5668\u53ef\u4ee5\u6302\u8f7d\u540c\u4e00\u4e2a\u5bb9\u5668 \u5728\u5bbf\u4e3b\u673a\u4e2d\u5b9e\u73b0\u4e0e\u5bb9\u5668\u76ee\u5f55\u7684\u6302\u8f7d\uff1a \u6570\u636e\u5377\u7684\u6301\u4e45\u5316\uff1a \u200b \u5f53\u6211\u4eec\u628ac1\u5bb9\u5668\u5220\u9664\u540e\uff0c\u5bbf\u4e3b\u673a\u4e2d\u7684\u6570\u636e\u5377\u4f9d\u7136\u5b58\u5728\u3002 \u6240\u4ee5\u5f53\u6211\u4eec\u91cd\u65b0\u521b\u5efa\u4e00\u4e2a\u5bb9\u5668\u7684\u540c\u65f6\u4f9d\u7136\u53ef\u4ee5\u6302\u8f7d\u5bbf\u4e3b\u673a\u4e2d\u7684data\u6587\u4ef6\u5939\uff0c\u5bf9\u5e94data\u91cc\u7684\u6570\u636e\u4f9d\u7136\u540c\u6b65\u5230\u5bb9\u5668\u4e2d\u3002 \u4e00\u4e2a\u5bb9\u5668\u53ef\u4ee5\u6302\u8f7d\u591a\u4e2a\u6570\u636e\u5377 \u591a\u4e2a\u5bb9\u5668\u53ef\u4ee5\u6302\u8f7d\u540c\u4e00\u4e2a\u6570\u636e\u5377 \u5206\u522b\u521b\u5efa\u4e24\u4e2a\u5bb9\u5668\uff0c\u4e24\u4e2a\u5bb9\u5668\u90fd\u6302\u8f7d\u5bbf\u4e3b\u673a\u4e2ddata\u76ee\u5f55\uff0c\u5f53 \u4fee\u6539c3\u5bb9\u5668\u7684data\u76ee\u5f55c4\u4f1a\u5b9e\u73b0\u540c\u6b65\u3002 \u4ece\u800c\u5b9e\u73b0\u4e24\u4e2a\u5bb9\u5668\u4e4b\u95f4\u7684\u4ea4\u4e92\u3002","title":"3.2 \u914d\u7f6e\u6570\u636e\u5377"},{"location":"docker/3/#33","text":"\u591a\u5bb9\u5668\u8fdb\u884c\u6570\u636e\u4ea4\u6362 \u591a\u4e2a\u5bb9\u5668\u6302\u8f7d\u540c\u4e00\u4e2a\u6570\u636e\u5377 \u6570\u636e\u5377\u5bb9\u5668 \u6b65\u9aa4\uff1a 1.\u521b\u5efa\u542f\u52a8c3\u6570\u636e\u5377\u5bb9\u5668\uff0c\u4f7f\u7528 \u2013v \u53c2\u6570 \u8bbe\u7f6e\u6570\u636e\u5377 docker run \u2013it --name = c3 -v /volume centos:7 /bin/bash \u521b\u5efa\u542f\u52a8 c1 c2 \u5bb9\u5668\uff0c\u4f7f\u7528 \u2013-volumes-from \u53c2\u6570 \u8bbe\u7f6e\u6570\u636e\u5377 docker run \u2013it --name = c1 --volumes-from c3 centos:7 /bin/bash docker run \u2013it --name = c2 --volumes-from c3 centos:7 /bin/bash","title":"3.3 \u914d\u7f6e\u6570\u636e\u5377\u5bb9\u5668"},{"location":"docker/3/#34","text":"\u6570\u636e\u5377\u6982\u5ff5 \u2022\u5bbf\u4e3b\u673a\u7684\u4e00\u4e2a\u76ee\u5f55\u6216\u6587\u4ef6 \u6570\u636e\u5377\u4f5c\u7528 \u2022 \u5bb9\u5668\u6570\u636e\u6301\u4e45\u5316 \u2022 \u5ba2\u6237\u7aef\u548c\u5bb9\u5668\u6570\u636e\u4ea4\u6362 \u2022 \u5bb9\u5668\u95f4\u6570\u636e\u4ea4\u6362 \u6570\u636e\u5377\u5bb9\u5668 \u2022 \u521b\u5efa\u4e00\u4e2a\u5bb9\u5668\uff0c\u6302\u8f7d\u4e00\u4e2a\u76ee\u5f55\uff0c\u8ba9\u5176\u4ed6\u5bb9\u5668\u7ee7\u627f\u81ea\u8be5\u5bb9\u5668( --volume-from )\u3002 \u2022 \u901a\u8fc7\u7b80\u5355\u65b9\u5f0f\u5b9e\u73b0\u6570\u636e\u5377\u914d\u7f6e","title":"3.4 \u6570\u636e\u5377\u5c0f\u7ed3"},{"location":"docker/4/","text":"\u4e00\u3001\u90e8\u7f72MySQL \u00b6 \u641c\u7d22mysql\u955c\u50cf docker search mysql \u62c9\u53d6mysql\u955c\u50cf docker pull mysql:5.6 \u521b\u5efa\u5bb9\u5668\uff0c\u8bbe\u7f6e\u7aef\u53e3\u6620\u5c04\u3001\u76ee\u5f55\u6620\u5c04 # \u5728/root\u76ee\u5f55\u4e0b\u521b\u5efamysql\u76ee\u5f55\u7528\u4e8e\u5b58\u50a8mysql\u6570\u636e\u4fe1\u606f mkdir ~/mysql cd ~/mysql docker run -id \\ -p 3306 :3306 \\ --name = c_mysql1 \\ -v $PWD /conf:/etc/mysql/conf.d \\ -v $PWD /logs:/logs \\ -v $PWD /data:/var/lib/mysql \\ -e MYSQL_ROOT_PASSWORD = 123456 \\ mysql:5.6 \u53c2\u6570\u8bf4\u660e\uff1a -p 3307:3306 \uff1a\u5c06\u5bb9\u5668\u7684 3306 \u7aef\u53e3\u6620\u5c04\u5230\u5bbf\u4e3b\u673a\u7684 3307 \u7aef\u53e3\u3002 -v $PWD/conf:/etc/mysql/conf.d \uff1a\u5c06\u4e3b\u673a\u5f53\u524d\u76ee\u5f55\u4e0b\u7684 conf/my.cnf \u6302\u8f7d\u5230\u5bb9\u5668\u7684 /etc/mysql/my.cnf\u3002\u914d\u7f6e\u76ee\u5f55 -v $PWD/logs:/logs \uff1a\u5c06\u4e3b\u673a\u5f53\u524d\u76ee\u5f55\u4e0b\u7684 logs \u76ee\u5f55\u6302\u8f7d\u5230\u5bb9\u5668\u7684 /logs\u3002\u65e5\u5fd7\u76ee\u5f55 -v $PWD/data:/var/lib/mysql \uff1a\u5c06\u4e3b\u673a\u5f53\u524d\u76ee\u5f55\u4e0b\u7684data\u76ee\u5f55\u6302\u8f7d\u5230\u5bb9\u5668\u7684 /var/lib/mysql \u3002\u6570\u636e\u76ee\u5f55 -e MYSQL_ROOT_PASSWORD=123456\uff1a \u521d\u59cb\u5316 root \u7528\u6237\u7684\u5bc6\u7801\u3002 \u8fdb\u5165\u5bb9\u5668\uff0c\u64cd\u4f5cmysql docker exec \u2013it c_mysql /bin/bash \u4f7f\u7528\u5916\u90e8\u673a\u5668\u8fde\u63a5\u5bb9\u5668\u4e2d\u7684mysql \u4e8c\u3001\u90e8\u7f72Tomcat \u00b6 \u641c\u7d22tomcat\u955c\u50cf docker search tomcat \u62c9\u53d6tomcat\u955c\u50cf docker pull tomcat \u521b\u5efa\u5bb9\u5668\uff0c\u8bbe\u7f6e\u7aef\u53e3\u6620\u5c04\u3001\u76ee\u5f55\u6620\u5c04 # \u5728/root\u76ee\u5f55\u4e0b\u521b\u5efatomcat\u76ee\u5f55\u7528\u4e8e\u5b58\u50a8tomcat\u6570\u636e\u4fe1\u606f mkdir ~/tomcat cd ~/tomcat docker run -id --name = c_tomcat \\ -p 8080 :8080 \\ -v $PWD :/usr/local/tomcat/webapps \\ tomcat \u53c2\u6570\u8bf4\u660e\uff1a -p 8080:8080\uff1a \u5c06\u5bb9\u5668\u76848080\u7aef\u53e3\u6620\u5c04\u5230\u4e3b\u673a\u76848080\u7aef\u53e3 -v $PWD:/usr/local/tomcat/webapps\uff1a \u5c06\u4e3b\u673a\u4e2d\u5f53\u524d\u76ee\u5f55\u6302\u8f7d\u5230\u5bb9\u5668\u7684webapps \u4f7f\u7528\u5916\u90e8\u673a\u5668\u8bbf\u95eetomcat \u4e09\u3001\u90e8\u7f72Nginx \u00b6 \u641c\u7d22nginx\u955c\u50cf docker search nginx \u62c9\u53d6nginx\u955c\u50cf docker pull nginx \u521b\u5efa\u5bb9\u5668\uff0c\u8bbe\u7f6e\u7aef\u53e3\u6620\u5c04\u3001\u76ee\u5f55\u6620\u5c04 # \u5728/root\u76ee\u5f55\u4e0b\u521b\u5efanginx\u76ee\u5f55\u7528\u4e8e\u5b58\u50a8nginx\u6570\u636e\u4fe1\u606f mkdir ~/nginx cd ~/nginx mkdir conf cd conf # \u5728~/nginx/conf/\u4e0b\u521b\u5efanginx.conf\u6587\u4ef6,\u7c98\u8d34\u4e0b\u9762\u5185\u5bb9 vim nginx.conf user nginx ; worker_processes 1 ; error_log /var/log/nginx/error.log warn ; pid /var/run/nginx.pid ; events { worker_connections 1024 ; } http { include /etc/nginx/mime.types ; default_type application/octet-stream ; log_format main '$remote_addr - $remote_user [$time_local] \"$request\" ' '$status $body_bytes_sent \"$http_referer\" ' '\"$http_user_agent\" \"$http_x_forwarded_for\"' ; access_log /var/log/nginx/access.log main ; sendfile on ; #tcp_nopush on; keepalive_timeout 65 ; #gzip on; include /etc/nginx/conf.d/*.conf ; } docker run -id --name = c_nginx \\ -p 80 :80 \\ -v $PWD /conf/nginx.conf:/etc/nginx/nginx.conf \\ -v $PWD /logs:/var/log/nginx \\ -v $PWD /html:/usr/share/nginx/html \\ nginx \u53c2\u6570\u8bf4\u660e\uff1a -p 80:80 \uff1a\u5c06\u5bb9\u5668\u7684 80\u7aef\u53e3\u6620\u5c04\u5230\u5bbf\u4e3b\u673a\u7684 80 \u7aef\u53e3\u3002 -v $PWD/conf/nginx.conf:/etc/nginx/nginx.conf \uff1a\u5c06\u4e3b\u673a\u5f53\u524d\u76ee\u5f55\u4e0b\u7684 /conf/nginx.conf \u6302\u8f7d\u5230\u5bb9\u5668\u7684 :/etc/nginx/nginx.conf\u3002\u914d\u7f6e\u76ee\u5f55 -v $PWD/logs:/var/log/nginx \uff1a\u5c06\u4e3b\u673a\u5f53\u524d\u76ee\u5f55\u4e0b\u7684 logs \u76ee\u5f55\u6302\u8f7d\u5230\u5bb9\u5668\u7684/var/log/nginx\u3002\u65e5\u5fd7\u76ee\u5f55 \u4f7f\u7528\u5916\u90e8\u673a\u5668\u8bbf\u95eenginx \u56db\u3001\u90e8\u7f72Redis \u00b6 \u641c\u7d22redis\u955c\u50cf docker search redis \u62c9\u53d6redis\u955c\u50cf docker pull redis:5.0 \u521b\u5efa\u5bb9\u5668\uff0c\u8bbe\u7f6e\u7aef\u53e3\u6620\u5c04 docker run -id --name = c_redis -p 6379 :6379 redis:5.0 \u4f7f\u7528\u5916\u90e8\u673a\u5668\u8fde\u63a5redis ./redis-cli.exe -h 192 .168.149.135 -p 6379","title":"docker\u90e8\u7f72\u5bb9\u5668"},{"location":"docker/4/#mysql","text":"\u641c\u7d22mysql\u955c\u50cf docker search mysql \u62c9\u53d6mysql\u955c\u50cf docker pull mysql:5.6 \u521b\u5efa\u5bb9\u5668\uff0c\u8bbe\u7f6e\u7aef\u53e3\u6620\u5c04\u3001\u76ee\u5f55\u6620\u5c04 # \u5728/root\u76ee\u5f55\u4e0b\u521b\u5efamysql\u76ee\u5f55\u7528\u4e8e\u5b58\u50a8mysql\u6570\u636e\u4fe1\u606f mkdir ~/mysql cd ~/mysql docker run -id \\ -p 3306 :3306 \\ --name = c_mysql1 \\ -v $PWD /conf:/etc/mysql/conf.d \\ -v $PWD /logs:/logs \\ -v $PWD /data:/var/lib/mysql \\ -e MYSQL_ROOT_PASSWORD = 123456 \\ mysql:5.6 \u53c2\u6570\u8bf4\u660e\uff1a -p 3307:3306 \uff1a\u5c06\u5bb9\u5668\u7684 3306 \u7aef\u53e3\u6620\u5c04\u5230\u5bbf\u4e3b\u673a\u7684 3307 \u7aef\u53e3\u3002 -v $PWD/conf:/etc/mysql/conf.d \uff1a\u5c06\u4e3b\u673a\u5f53\u524d\u76ee\u5f55\u4e0b\u7684 conf/my.cnf \u6302\u8f7d\u5230\u5bb9\u5668\u7684 /etc/mysql/my.cnf\u3002\u914d\u7f6e\u76ee\u5f55 -v $PWD/logs:/logs \uff1a\u5c06\u4e3b\u673a\u5f53\u524d\u76ee\u5f55\u4e0b\u7684 logs \u76ee\u5f55\u6302\u8f7d\u5230\u5bb9\u5668\u7684 /logs\u3002\u65e5\u5fd7\u76ee\u5f55 -v $PWD/data:/var/lib/mysql \uff1a\u5c06\u4e3b\u673a\u5f53\u524d\u76ee\u5f55\u4e0b\u7684data\u76ee\u5f55\u6302\u8f7d\u5230\u5bb9\u5668\u7684 /var/lib/mysql \u3002\u6570\u636e\u76ee\u5f55 -e MYSQL_ROOT_PASSWORD=123456\uff1a \u521d\u59cb\u5316 root \u7528\u6237\u7684\u5bc6\u7801\u3002 \u8fdb\u5165\u5bb9\u5668\uff0c\u64cd\u4f5cmysql docker exec \u2013it c_mysql /bin/bash \u4f7f\u7528\u5916\u90e8\u673a\u5668\u8fde\u63a5\u5bb9\u5668\u4e2d\u7684mysql","title":"\u4e00\u3001\u90e8\u7f72MySQL"},{"location":"docker/4/#tomcat","text":"\u641c\u7d22tomcat\u955c\u50cf docker search tomcat \u62c9\u53d6tomcat\u955c\u50cf docker pull tomcat \u521b\u5efa\u5bb9\u5668\uff0c\u8bbe\u7f6e\u7aef\u53e3\u6620\u5c04\u3001\u76ee\u5f55\u6620\u5c04 # \u5728/root\u76ee\u5f55\u4e0b\u521b\u5efatomcat\u76ee\u5f55\u7528\u4e8e\u5b58\u50a8tomcat\u6570\u636e\u4fe1\u606f mkdir ~/tomcat cd ~/tomcat docker run -id --name = c_tomcat \\ -p 8080 :8080 \\ -v $PWD :/usr/local/tomcat/webapps \\ tomcat \u53c2\u6570\u8bf4\u660e\uff1a -p 8080:8080\uff1a \u5c06\u5bb9\u5668\u76848080\u7aef\u53e3\u6620\u5c04\u5230\u4e3b\u673a\u76848080\u7aef\u53e3 -v $PWD:/usr/local/tomcat/webapps\uff1a \u5c06\u4e3b\u673a\u4e2d\u5f53\u524d\u76ee\u5f55\u6302\u8f7d\u5230\u5bb9\u5668\u7684webapps \u4f7f\u7528\u5916\u90e8\u673a\u5668\u8bbf\u95eetomcat","title":"\u4e8c\u3001\u90e8\u7f72Tomcat"},{"location":"docker/4/#nginx","text":"\u641c\u7d22nginx\u955c\u50cf docker search nginx \u62c9\u53d6nginx\u955c\u50cf docker pull nginx \u521b\u5efa\u5bb9\u5668\uff0c\u8bbe\u7f6e\u7aef\u53e3\u6620\u5c04\u3001\u76ee\u5f55\u6620\u5c04 # \u5728/root\u76ee\u5f55\u4e0b\u521b\u5efanginx\u76ee\u5f55\u7528\u4e8e\u5b58\u50a8nginx\u6570\u636e\u4fe1\u606f mkdir ~/nginx cd ~/nginx mkdir conf cd conf # \u5728~/nginx/conf/\u4e0b\u521b\u5efanginx.conf\u6587\u4ef6,\u7c98\u8d34\u4e0b\u9762\u5185\u5bb9 vim nginx.conf user nginx ; worker_processes 1 ; error_log /var/log/nginx/error.log warn ; pid /var/run/nginx.pid ; events { worker_connections 1024 ; } http { include /etc/nginx/mime.types ; default_type application/octet-stream ; log_format main '$remote_addr - $remote_user [$time_local] \"$request\" ' '$status $body_bytes_sent \"$http_referer\" ' '\"$http_user_agent\" \"$http_x_forwarded_for\"' ; access_log /var/log/nginx/access.log main ; sendfile on ; #tcp_nopush on; keepalive_timeout 65 ; #gzip on; include /etc/nginx/conf.d/*.conf ; } docker run -id --name = c_nginx \\ -p 80 :80 \\ -v $PWD /conf/nginx.conf:/etc/nginx/nginx.conf \\ -v $PWD /logs:/var/log/nginx \\ -v $PWD /html:/usr/share/nginx/html \\ nginx \u53c2\u6570\u8bf4\u660e\uff1a -p 80:80 \uff1a\u5c06\u5bb9\u5668\u7684 80\u7aef\u53e3\u6620\u5c04\u5230\u5bbf\u4e3b\u673a\u7684 80 \u7aef\u53e3\u3002 -v $PWD/conf/nginx.conf:/etc/nginx/nginx.conf \uff1a\u5c06\u4e3b\u673a\u5f53\u524d\u76ee\u5f55\u4e0b\u7684 /conf/nginx.conf \u6302\u8f7d\u5230\u5bb9\u5668\u7684 :/etc/nginx/nginx.conf\u3002\u914d\u7f6e\u76ee\u5f55 -v $PWD/logs:/var/log/nginx \uff1a\u5c06\u4e3b\u673a\u5f53\u524d\u76ee\u5f55\u4e0b\u7684 logs \u76ee\u5f55\u6302\u8f7d\u5230\u5bb9\u5668\u7684/var/log/nginx\u3002\u65e5\u5fd7\u76ee\u5f55 \u4f7f\u7528\u5916\u90e8\u673a\u5668\u8bbf\u95eenginx","title":"\u4e09\u3001\u90e8\u7f72Nginx"},{"location":"docker/4/#redis","text":"\u641c\u7d22redis\u955c\u50cf docker search redis \u62c9\u53d6redis\u955c\u50cf docker pull redis:5.0 \u521b\u5efa\u5bb9\u5668\uff0c\u8bbe\u7f6e\u7aef\u53e3\u6620\u5c04 docker run -id --name = c_redis -p 6379 :6379 redis:5.0 \u4f7f\u7528\u5916\u90e8\u673a\u5668\u8fde\u63a5redis ./redis-cli.exe -h 192 .168.149.135 -p 6379","title":"\u56db\u3001\u90e8\u7f72Redis"},{"location":"docker/5/","text":"Docerfile \u00b6 \u524d\u9762\u7684\u8bfe\u7a0b\u4e2d\u5df2\u7ecf\u77e5\u9053\u4e86\uff0c\u8981\u83b7\u5f97\u955c\u50cf\uff0c\u53ef\u4ee5\u4eceDocker\u4ed3\u5e93\u4e2d\u8fdb\u884c\u4e0b\u8f7d\u3002\u90a3\u5982\u679c\u6211\u4eec\u60f3\u81ea\u5df1\u5f00\u53d1\u4e00\u4e2a\u955c\u50cf\uff0c\u90a3\u8be5\u5982 \u4f55\u505a\u5462\uff1f\u7b54\u6848\u662f\uff1aDockerfifile Dockerfifile\u5176\u5b9e\u5c31\u662f\u4e00\u4e2a\u6587\u672c\u6587\u4ef6\uff0c\u7531\u4e00\u7cfb\u5217\u547d\u4ee4\u548c\u53c2\u6570\u6784\u6210\uff0cDocker\u53ef\u4ee5\u8bfb\u53d6Dockerfifile\u6587\u4ef6\u5e76\u6839\u636eDockerfifile\u6587 \u4ef6\u7684\u63cf\u8ff0\u6765\u6784\u5efa\u955c\u50cf\u3002 \u5173\u952e\u5b57 \u4f5c\u7528 \u5907\u6ce8 FROM \u6307\u5b9a\u7236\u955c\u50cf \u6307\u5b9adockerfile\u57fa\u4e8e\u90a3\u4e2aimage\u6784\u5efa MAINTAINER \u4f5c\u8005\u4fe1\u606f \u7528\u6765\u6807\u660e\u8fd9\u4e2adockerfile\u8c01\u5199\u7684 LABEL \u6807\u7b7e \u7528\u6765\u6807\u660edockerfile\u7684\u6807\u7b7e \u53ef\u4ee5\u4f7f\u7528Label\u4ee3\u66ffMaintainer \u6700\u7ec8\u90fd\u662f\u5728docker image\u57fa\u672c\u4fe1\u606f\u4e2d\u53ef\u4ee5\u67e5\u770b RUN \u6267\u884c\u547d\u4ee4 \u6267\u884c\u4e00\u6bb5\u547d\u4ee4 \u9ed8\u8ba4\u662f/bin/sh \u683c\u5f0f: RUN command \u6216\u8005 RUN [\"command\" , \"param1\",\"param2\"] CMD \u5bb9\u5668\u542f\u52a8\u547d\u4ee4 \u63d0\u4f9b\u542f\u52a8\u5bb9\u5668\u65f6\u5019\u7684\u9ed8\u8ba4\u547d\u4ee4 \u548cENTRYPOINT\u914d\u5408\u4f7f\u7528.\u683c\u5f0f CMD command param1 param2 \u6216\u8005 CMD [\"command\" , \"param1\",\"param2\"] ENTRYPOINT \u5165\u53e3 \u4e00\u822c\u5728\u5236\u4f5c\u4e00\u4e9b\u6267\u884c\u5c31\u5173\u95ed\u7684\u5bb9\u5668\u4e2d\u4f1a\u4f7f\u7528 COPY \u590d\u5236\u6587\u4ef6 build\u7684\u65f6\u5019\u590d\u5236\u6587\u4ef6\u5230image\u4e2d ADD \u6dfb\u52a0\u6587\u4ef6 build\u7684\u65f6\u5019\u6dfb\u52a0\u6587\u4ef6\u5230image\u4e2d \u4e0d\u4ec5\u4ec5\u5c40\u9650\u4e8e\u5f53\u524dbuild\u4e0a\u4e0b\u6587 \u53ef\u4ee5\u6765\u6e90\u4e8e\u8fdc\u7a0b\u670d\u52a1 ENV \u73af\u5883\u53d8\u91cf \u6307\u5b9abuild\u65f6\u5019\u7684\u73af\u5883\u53d8\u91cf \u53ef\u4ee5\u5728\u542f\u52a8\u7684\u5bb9\u5668\u7684\u65f6\u5019 \u901a\u8fc7-e\u8986\u76d6 \u683c\u5f0fENV name=value ARG \u6784\u5efa\u53c2\u6570 \u6784\u5efa\u53c2\u6570 \u53ea\u5728\u6784\u5efa\u7684\u65f6\u5019\u4f7f\u7528\u7684\u53c2\u6570 \u5982\u679c\u6709ENV \u90a3\u4e48ENV\u7684\u76f8\u540c\u540d\u5b57\u7684\u503c\u59cb\u7ec8\u8986\u76d6arg\u7684\u53c2\u6570 VOLUME \u5b9a\u4e49\u5916\u90e8\u53ef\u4ee5\u6302\u8f7d\u7684\u6570\u636e\u5377 \u6307\u5b9abuild\u7684image\u90a3\u4e9b\u76ee\u5f55\u53ef\u4ee5\u542f\u52a8\u7684\u65f6\u5019\u6302\u8f7d\u5230\u6587\u4ef6\u7cfb\u7edf\u4e2d \u542f\u52a8\u5bb9\u5668\u7684\u65f6\u5019\u4f7f\u7528 -v \u7ed1\u5b9a \u683c\u5f0f VOLUME [\"\u76ee\u5f55\"] EXPOSE \u66b4\u9732\u7aef\u53e3 \u5b9a\u4e49\u5bb9\u5668\u8fd0\u884c\u7684\u65f6\u5019\u76d1\u542c\u7684\u7aef\u53e3 \u542f\u52a8\u5bb9\u5668\u7684\u4f7f\u7528-p\u6765\u7ed1\u5b9a\u66b4\u9732\u7aef\u53e3 \u683c\u5f0f: EXPOSE 8080 \u6216\u8005 EXPOSE 8080/udp WORKDIR \u5de5\u4f5c\u76ee\u5f55 \u6307\u5b9a\u5bb9\u5668\u5185\u90e8\u7684\u5de5\u4f5c\u76ee\u5f55 \u5982\u679c\u6ca1\u6709\u521b\u5efa\u5219\u81ea\u52a8\u521b\u5efa \u5982\u679c\u6307\u5b9a/ \u4f7f\u7528\u7684\u662f\u7edd\u5bf9\u5730\u5740 \u5982\u679c\u4e0d\u662f/\u5f00\u5934\u90a3\u4e48\u662f\u5728\u4e0a\u4e00\u6761workdir\u7684\u8def\u5f84\u7684\u76f8\u5bf9\u8def\u5f84 USER \u6307\u5b9a\u6267\u884c\u7528\u6237 \u6307\u5b9abuild\u6216\u8005\u542f\u52a8\u7684\u65f6\u5019 \u7528\u6237 \u5728RUN CMD ENTRYPONT\u6267\u884c\u7684\u65f6\u5019\u7684\u7528\u6237 HEALTHCHECK \u5065\u5eb7\u68c0\u67e5 \u6307\u5b9a\u76d1\u6d4b\u5f53\u524d\u5bb9\u5668\u7684\u5065\u5eb7\u76d1\u6d4b\u7684\u547d\u4ee4 \u57fa\u672c\u4e0a\u6ca1\u7528 \u56e0\u4e3a\u5f88\u591a\u65f6\u5019 \u5e94\u7528\u672c\u8eab\u6709\u5065\u5eb7\u76d1\u6d4b\u673a\u5236 ONBUILD \u89e6\u53d1\u5668 \u5f53\u5b58\u5728ONBUILD\u5173\u952e\u5b57\u7684\u955c\u50cf\u4f5c\u4e3a\u57fa\u7840\u955c\u50cf\u7684\u65f6\u5019 \u5f53\u6267\u884cFROM\u5b8c\u6210\u4e4b\u540e \u4f1a\u6267\u884c ONBUILD\u7684\u547d\u4ee4 \u4f46\u662f\u4e0d\u5f71\u54cd\u5f53\u524d\u955c\u50cf \u7528\u5904\u4e5f\u4e0d\u600e\u4e48\u5927 STOPSIGNAL \u53d1\u9001\u4fe1\u53f7\u91cf\u5230\u5bbf\u4e3b\u673a \u8be5STOPSIGNAL\u6307\u4ee4\u8bbe\u7f6e\u5c06\u53d1\u9001\u5230\u5bb9\u5668\u7684\u7cfb\u7edf\u8c03\u7528\u4fe1\u53f7\u4ee5\u9000\u51fa\u3002 SHELL \u6307\u5b9a\u6267\u884c\u811a\u672c\u7684shell \u6307\u5b9aRUN CMD ENTRYPOINT \u6267\u884c\u547d\u4ee4\u7684\u65f6\u5019 \u4f7f\u7528\u7684shell","title":"Docerfile"},{"location":"docker/5/#docerfile","text":"\u524d\u9762\u7684\u8bfe\u7a0b\u4e2d\u5df2\u7ecf\u77e5\u9053\u4e86\uff0c\u8981\u83b7\u5f97\u955c\u50cf\uff0c\u53ef\u4ee5\u4eceDocker\u4ed3\u5e93\u4e2d\u8fdb\u884c\u4e0b\u8f7d\u3002\u90a3\u5982\u679c\u6211\u4eec\u60f3\u81ea\u5df1\u5f00\u53d1\u4e00\u4e2a\u955c\u50cf\uff0c\u90a3\u8be5\u5982 \u4f55\u505a\u5462\uff1f\u7b54\u6848\u662f\uff1aDockerfifile Dockerfifile\u5176\u5b9e\u5c31\u662f\u4e00\u4e2a\u6587\u672c\u6587\u4ef6\uff0c\u7531\u4e00\u7cfb\u5217\u547d\u4ee4\u548c\u53c2\u6570\u6784\u6210\uff0cDocker\u53ef\u4ee5\u8bfb\u53d6Dockerfifile\u6587\u4ef6\u5e76\u6839\u636eDockerfifile\u6587 \u4ef6\u7684\u63cf\u8ff0\u6765\u6784\u5efa\u955c\u50cf\u3002 \u5173\u952e\u5b57 \u4f5c\u7528 \u5907\u6ce8 FROM \u6307\u5b9a\u7236\u955c\u50cf \u6307\u5b9adockerfile\u57fa\u4e8e\u90a3\u4e2aimage\u6784\u5efa MAINTAINER \u4f5c\u8005\u4fe1\u606f \u7528\u6765\u6807\u660e\u8fd9\u4e2adockerfile\u8c01\u5199\u7684 LABEL \u6807\u7b7e \u7528\u6765\u6807\u660edockerfile\u7684\u6807\u7b7e \u53ef\u4ee5\u4f7f\u7528Label\u4ee3\u66ffMaintainer \u6700\u7ec8\u90fd\u662f\u5728docker image\u57fa\u672c\u4fe1\u606f\u4e2d\u53ef\u4ee5\u67e5\u770b RUN \u6267\u884c\u547d\u4ee4 \u6267\u884c\u4e00\u6bb5\u547d\u4ee4 \u9ed8\u8ba4\u662f/bin/sh \u683c\u5f0f: RUN command \u6216\u8005 RUN [\"command\" , \"param1\",\"param2\"] CMD \u5bb9\u5668\u542f\u52a8\u547d\u4ee4 \u63d0\u4f9b\u542f\u52a8\u5bb9\u5668\u65f6\u5019\u7684\u9ed8\u8ba4\u547d\u4ee4 \u548cENTRYPOINT\u914d\u5408\u4f7f\u7528.\u683c\u5f0f CMD command param1 param2 \u6216\u8005 CMD [\"command\" , \"param1\",\"param2\"] ENTRYPOINT \u5165\u53e3 \u4e00\u822c\u5728\u5236\u4f5c\u4e00\u4e9b\u6267\u884c\u5c31\u5173\u95ed\u7684\u5bb9\u5668\u4e2d\u4f1a\u4f7f\u7528 COPY \u590d\u5236\u6587\u4ef6 build\u7684\u65f6\u5019\u590d\u5236\u6587\u4ef6\u5230image\u4e2d ADD \u6dfb\u52a0\u6587\u4ef6 build\u7684\u65f6\u5019\u6dfb\u52a0\u6587\u4ef6\u5230image\u4e2d \u4e0d\u4ec5\u4ec5\u5c40\u9650\u4e8e\u5f53\u524dbuild\u4e0a\u4e0b\u6587 \u53ef\u4ee5\u6765\u6e90\u4e8e\u8fdc\u7a0b\u670d\u52a1 ENV \u73af\u5883\u53d8\u91cf \u6307\u5b9abuild\u65f6\u5019\u7684\u73af\u5883\u53d8\u91cf \u53ef\u4ee5\u5728\u542f\u52a8\u7684\u5bb9\u5668\u7684\u65f6\u5019 \u901a\u8fc7-e\u8986\u76d6 \u683c\u5f0fENV name=value ARG \u6784\u5efa\u53c2\u6570 \u6784\u5efa\u53c2\u6570 \u53ea\u5728\u6784\u5efa\u7684\u65f6\u5019\u4f7f\u7528\u7684\u53c2\u6570 \u5982\u679c\u6709ENV \u90a3\u4e48ENV\u7684\u76f8\u540c\u540d\u5b57\u7684\u503c\u59cb\u7ec8\u8986\u76d6arg\u7684\u53c2\u6570 VOLUME \u5b9a\u4e49\u5916\u90e8\u53ef\u4ee5\u6302\u8f7d\u7684\u6570\u636e\u5377 \u6307\u5b9abuild\u7684image\u90a3\u4e9b\u76ee\u5f55\u53ef\u4ee5\u542f\u52a8\u7684\u65f6\u5019\u6302\u8f7d\u5230\u6587\u4ef6\u7cfb\u7edf\u4e2d \u542f\u52a8\u5bb9\u5668\u7684\u65f6\u5019\u4f7f\u7528 -v \u7ed1\u5b9a \u683c\u5f0f VOLUME [\"\u76ee\u5f55\"] EXPOSE \u66b4\u9732\u7aef\u53e3 \u5b9a\u4e49\u5bb9\u5668\u8fd0\u884c\u7684\u65f6\u5019\u76d1\u542c\u7684\u7aef\u53e3 \u542f\u52a8\u5bb9\u5668\u7684\u4f7f\u7528-p\u6765\u7ed1\u5b9a\u66b4\u9732\u7aef\u53e3 \u683c\u5f0f: EXPOSE 8080 \u6216\u8005 EXPOSE 8080/udp WORKDIR \u5de5\u4f5c\u76ee\u5f55 \u6307\u5b9a\u5bb9\u5668\u5185\u90e8\u7684\u5de5\u4f5c\u76ee\u5f55 \u5982\u679c\u6ca1\u6709\u521b\u5efa\u5219\u81ea\u52a8\u521b\u5efa \u5982\u679c\u6307\u5b9a/ \u4f7f\u7528\u7684\u662f\u7edd\u5bf9\u5730\u5740 \u5982\u679c\u4e0d\u662f/\u5f00\u5934\u90a3\u4e48\u662f\u5728\u4e0a\u4e00\u6761workdir\u7684\u8def\u5f84\u7684\u76f8\u5bf9\u8def\u5f84 USER \u6307\u5b9a\u6267\u884c\u7528\u6237 \u6307\u5b9abuild\u6216\u8005\u542f\u52a8\u7684\u65f6\u5019 \u7528\u6237 \u5728RUN CMD ENTRYPONT\u6267\u884c\u7684\u65f6\u5019\u7684\u7528\u6237 HEALTHCHECK \u5065\u5eb7\u68c0\u67e5 \u6307\u5b9a\u76d1\u6d4b\u5f53\u524d\u5bb9\u5668\u7684\u5065\u5eb7\u76d1\u6d4b\u7684\u547d\u4ee4 \u57fa\u672c\u4e0a\u6ca1\u7528 \u56e0\u4e3a\u5f88\u591a\u65f6\u5019 \u5e94\u7528\u672c\u8eab\u6709\u5065\u5eb7\u76d1\u6d4b\u673a\u5236 ONBUILD \u89e6\u53d1\u5668 \u5f53\u5b58\u5728ONBUILD\u5173\u952e\u5b57\u7684\u955c\u50cf\u4f5c\u4e3a\u57fa\u7840\u955c\u50cf\u7684\u65f6\u5019 \u5f53\u6267\u884cFROM\u5b8c\u6210\u4e4b\u540e \u4f1a\u6267\u884c ONBUILD\u7684\u547d\u4ee4 \u4f46\u662f\u4e0d\u5f71\u54cd\u5f53\u524d\u955c\u50cf \u7528\u5904\u4e5f\u4e0d\u600e\u4e48\u5927 STOPSIGNAL \u53d1\u9001\u4fe1\u53f7\u91cf\u5230\u5bbf\u4e3b\u673a \u8be5STOPSIGNAL\u6307\u4ee4\u8bbe\u7f6e\u5c06\u53d1\u9001\u5230\u5bb9\u5668\u7684\u7cfb\u7edf\u8c03\u7528\u4fe1\u53f7\u4ee5\u9000\u51fa\u3002 SHELL \u6307\u5b9a\u6267\u884c\u811a\u672c\u7684shell \u6307\u5b9aRUN CMD ENTRYPOINT \u6267\u884c\u547d\u4ee4\u7684\u65f6\u5019 \u4f7f\u7528\u7684shell","title":"Docerfile"},{"location":"docker/6/","text":"\u670d\u52a1\u7f16\u6392 \u00b6 6.1 \u670d\u52a1\u7f16\u6392\u6982\u5ff5 \u00b6 \u5fae\u670d\u52a1\u67b6\u6784\u7684\u5e94\u7528\u7cfb\u7edf\u4e2d\u4e00\u822c\u5305\u542b\u82e5\u5e72\u4e2a\u5fae\u670d\u52a1\uff0c\u6bcf\u4e2a\u5fae\u670d\u52a1\u4e00\u822c\u90fd\u4f1a\u90e8\u7f72\u591a\u4e2a\u5b9e\u4f8b\uff0c\u5982\u679c\u6bcf\u4e2a\u5fae\u670d\u52a1\u90fd\u8981\u624b\u52a8\u542f\u505c\uff0c\u7ef4\u62a4\u7684\u5de5\u4f5c\u91cf\u4f1a\u5f88\u5927\u3002 \u8981\u4eceDockerfile build image \u6216\u8005\u53bbdockerhub\u62c9\u53d6image \u8981\u521b\u5efa\u591a\u4e2acontainer \u8981\u7ba1\u7406\u8fd9\u4e9bcontainer\uff08\u542f\u52a8\u505c\u6b62\u5220\u9664\uff09 \u670d\u52a1\u7f16\u6392\uff1a \u6309\u7167\u4e00\u5b9a\u7684\u4e1a\u52a1\u89c4\u5219\u6279\u91cf\u7ba1\u7406\u5bb9\u5668 6.2 Docker Compose \u6982\u8ff0 \u00b6 6.2.1 Docker Compose \u00b6 Docker Compose\u662f\u4e00\u4e2a\u7f16\u6392\u591a\u5bb9\u5668\u5206\u5e03\u5f0f\u90e8\u7f72\u7684\u5de5\u5177\uff0c\u63d0\u4f9b\u547d\u4ee4\u96c6\u7ba1\u7406\u5bb9\u5668\u5316\u5e94\u7528\u7684\u5b8c\u6574\u5f00\u53d1\u5468\u671f\uff0c\u5305\u62ec\u670d\u52a1\u6784\u5efa \uff0c\u542f\u52a8\u548c\u505c\u6b62\u3002\u4f7f\u7528\u6b65\u9aa4\uff1a \u5229\u7528 Dockerfile \u5b9a\u4e49\u8fd0\u884c\u73af\u5883\u955c\u50cf \u4f7f\u7528 docker-compose.yml \u5b9a\u4e49\u7ec4\u6210\u5e94\u7528\u7684\u5404\u670d\u52a1 \u8fd0\u884c docker-compose up \u542f\u52a8\u5e94\u7528 6.2.2 Docker Compose \u5b89\u88c5\u4f7f\u7528 \u00b6 Docker Compose \u00b6 \u4e00\u3001\u5b89\u88c5Docker Compose \u00b6 # Compose\u76ee\u524d\u5df2\u7ecf\u5b8c\u5168\u652f\u6301Linux\u3001Mac OS\u548cWindows\uff0c\u5728\u6211\u4eec\u5b89\u88c5Compose\u4e4b\u524d\uff0c\u9700\u8981\u5148\u5b89\u88c5Docker\u3002\u4e0b\u9762\u6211 \u4eec\u4ee5\u7f16\u8bd1\u597d\u7684\u4e8c\u8fdb\u5236\u5305\u65b9\u5f0f\u5b89\u88c5\u5728Linux\u7cfb\u7edf\u4e2d\u3002 curl -L https://github.com/docker/compose/releases/download/1.22.0/docker-compose- ` uname -s ` - ` uname -m ` -o /usr/local/bin/docker-compose # \u8bbe\u7f6e\u6587\u4ef6\u53ef\u6267\u884c\u6743\u9650 chmod +x /usr/local/bin/docker-compose # \u67e5\u770b\u7248\u672c\u4fe1\u606f docker-compose -version \u4e8c\u3001\u5378\u8f7dDocker Compose \u00b6 # \u4e8c\u8fdb\u5236\u5305\u65b9\u5f0f\u5b89\u88c5\u7684\uff0c\u5220\u9664\u4e8c\u8fdb\u5236\u6587\u4ef6\u5373\u53ef rm /usr/local/bin/docker-compose \u4e09\u3001 \u4f7f\u7528docker compose\u7f16\u6392nginx+springboot\u9879\u76ee \u00b6 \u521b\u5efadocker-compose\u76ee\u5f55 mkdir ~/docker-compose cd ~/docker-compose \u7f16\u5199 docker-compose.yml \u6587\u4ef6 version: '3' services: nginx: image: nginx ports: - 80 :80 links: - app volumes: - ./nginx/conf.d:/etc/nginx/conf.d app: image: app expose: - \"8080\" \u521b\u5efa./nginx/conf.d\u76ee\u5f55 mkdir -p ./nginx/conf.d \u5728./nginx/conf.d\u76ee\u5f55\u4e0b \u7f16\u5199itheima.conf\u6587\u4ef6 server { listen 80 ; access_log off ; location / { proxy_pass http://app:8080 ; } } \u5728~/docker-compose \u76ee\u5f55\u4e0b \u4f7f\u7528docker-compose \u542f\u52a8\u5bb9\u5668 docker-compose up \u6d4b\u8bd5\u8bbf\u95ee http://192.168.149.135/hello","title":"\u670d\u52a1\u7f16\u6392"},{"location":"docker/6/#_1","text":"","title":"\u670d\u52a1\u7f16\u6392"},{"location":"docker/6/#61","text":"\u5fae\u670d\u52a1\u67b6\u6784\u7684\u5e94\u7528\u7cfb\u7edf\u4e2d\u4e00\u822c\u5305\u542b\u82e5\u5e72\u4e2a\u5fae\u670d\u52a1\uff0c\u6bcf\u4e2a\u5fae\u670d\u52a1\u4e00\u822c\u90fd\u4f1a\u90e8\u7f72\u591a\u4e2a\u5b9e\u4f8b\uff0c\u5982\u679c\u6bcf\u4e2a\u5fae\u670d\u52a1\u90fd\u8981\u624b\u52a8\u542f\u505c\uff0c\u7ef4\u62a4\u7684\u5de5\u4f5c\u91cf\u4f1a\u5f88\u5927\u3002 \u8981\u4eceDockerfile build image \u6216\u8005\u53bbdockerhub\u62c9\u53d6image \u8981\u521b\u5efa\u591a\u4e2acontainer \u8981\u7ba1\u7406\u8fd9\u4e9bcontainer\uff08\u542f\u52a8\u505c\u6b62\u5220\u9664\uff09 \u670d\u52a1\u7f16\u6392\uff1a \u6309\u7167\u4e00\u5b9a\u7684\u4e1a\u52a1\u89c4\u5219\u6279\u91cf\u7ba1\u7406\u5bb9\u5668","title":"6.1 \u670d\u52a1\u7f16\u6392\u6982\u5ff5"},{"location":"docker/6/#62_docker_compose","text":"","title":"6.2 Docker Compose \u6982\u8ff0"},{"location":"docker/6/#621_docker_compose","text":"Docker Compose\u662f\u4e00\u4e2a\u7f16\u6392\u591a\u5bb9\u5668\u5206\u5e03\u5f0f\u90e8\u7f72\u7684\u5de5\u5177\uff0c\u63d0\u4f9b\u547d\u4ee4\u96c6\u7ba1\u7406\u5bb9\u5668\u5316\u5e94\u7528\u7684\u5b8c\u6574\u5f00\u53d1\u5468\u671f\uff0c\u5305\u62ec\u670d\u52a1\u6784\u5efa \uff0c\u542f\u52a8\u548c\u505c\u6b62\u3002\u4f7f\u7528\u6b65\u9aa4\uff1a \u5229\u7528 Dockerfile \u5b9a\u4e49\u8fd0\u884c\u73af\u5883\u955c\u50cf \u4f7f\u7528 docker-compose.yml \u5b9a\u4e49\u7ec4\u6210\u5e94\u7528\u7684\u5404\u670d\u52a1 \u8fd0\u884c docker-compose up \u542f\u52a8\u5e94\u7528","title":"6.2.1 Docker Compose"},{"location":"docker/6/#622_docker_compose","text":"","title":"6.2.2  Docker Compose \u5b89\u88c5\u4f7f\u7528"},{"location":"docker/6/#docker_compose","text":"","title":"Docker Compose"},{"location":"docker/6/#docker_compose_1","text":"# Compose\u76ee\u524d\u5df2\u7ecf\u5b8c\u5168\u652f\u6301Linux\u3001Mac OS\u548cWindows\uff0c\u5728\u6211\u4eec\u5b89\u88c5Compose\u4e4b\u524d\uff0c\u9700\u8981\u5148\u5b89\u88c5Docker\u3002\u4e0b\u9762\u6211 \u4eec\u4ee5\u7f16\u8bd1\u597d\u7684\u4e8c\u8fdb\u5236\u5305\u65b9\u5f0f\u5b89\u88c5\u5728Linux\u7cfb\u7edf\u4e2d\u3002 curl -L https://github.com/docker/compose/releases/download/1.22.0/docker-compose- ` uname -s ` - ` uname -m ` -o /usr/local/bin/docker-compose # \u8bbe\u7f6e\u6587\u4ef6\u53ef\u6267\u884c\u6743\u9650 chmod +x /usr/local/bin/docker-compose # \u67e5\u770b\u7248\u672c\u4fe1\u606f docker-compose -version","title":"\u4e00\u3001\u5b89\u88c5Docker Compose"},{"location":"docker/6/#docker_compose_2","text":"# \u4e8c\u8fdb\u5236\u5305\u65b9\u5f0f\u5b89\u88c5\u7684\uff0c\u5220\u9664\u4e8c\u8fdb\u5236\u6587\u4ef6\u5373\u53ef rm /usr/local/bin/docker-compose","title":"\u4e8c\u3001\u5378\u8f7dDocker Compose"},{"location":"docker/6/#docker_composenginxspringboot","text":"\u521b\u5efadocker-compose\u76ee\u5f55 mkdir ~/docker-compose cd ~/docker-compose \u7f16\u5199 docker-compose.yml \u6587\u4ef6 version: '3' services: nginx: image: nginx ports: - 80 :80 links: - app volumes: - ./nginx/conf.d:/etc/nginx/conf.d app: image: app expose: - \"8080\" \u521b\u5efa./nginx/conf.d\u76ee\u5f55 mkdir -p ./nginx/conf.d \u5728./nginx/conf.d\u76ee\u5f55\u4e0b \u7f16\u5199itheima.conf\u6587\u4ef6 server { listen 80 ; access_log off ; location / { proxy_pass http://app:8080 ; } } \u5728~/docker-compose \u76ee\u5f55\u4e0b \u4f7f\u7528docker-compose \u542f\u52a8\u5bb9\u5668 docker-compose up \u6d4b\u8bd5\u8bbf\u95ee http://192.168.149.135/hello","title":"\u4e09\u3001 \u4f7f\u7528docker compose\u7f16\u6392nginx+springboot\u9879\u76ee"},{"location":"docker/7/","text":"\u4e00\u3001\u79c1\u6709\u4ed3\u5e93\u642d\u5efa \u00b6 # 1\u3001\u62c9\u53d6\u79c1\u6709\u4ed3\u5e93\u955c\u50cf docker pull registry # 2\u3001\u542f\u52a8\u79c1\u6709\u4ed3\u5e93\u5bb9\u5668 docker run -id --name = registry -p 5000 :5000 registry # 3\u3001\u6253\u5f00\u6d4f\u89c8\u5668 \u8f93\u5165\u5730\u5740http://\u79c1\u6709\u4ed3\u5e93\u670d\u52a1\u5668ip:5000/v2/_catalog\uff0c\u770b\u5230{\"repositories\":[]} \u8868\u793a\u79c1\u6709\u4ed3\u5e93 \u642d\u5efa\u6210\u529f # 4\u3001\u4fee\u6539daemon.json vim /etc/docker/daemon.json # \u5728\u4e0a\u8ff0\u6587\u4ef6\u4e2d\u6dfb\u52a0\u4e00\u4e2akey\uff0c\u4fdd\u5b58\u9000\u51fa\u3002\u6b64\u6b65\u7528\u4e8e\u8ba9 docker \u4fe1\u4efb\u79c1\u6709\u4ed3\u5e93\u5730\u5740\uff1b\u6ce8\u610f\u5c06\u79c1\u6709\u4ed3\u5e93\u670d\u52a1\u5668ip\u4fee\u6539\u4e3a\u81ea\u5df1\u79c1\u6709\u4ed3\u5e93\u670d\u52a1\u5668\u771f\u5b9eip { \"insecure-registries\" : [ \"\u79c1\u6709\u4ed3\u5e93\u670d\u52a1\u5668ip:5000\" ]} # 5\u3001\u91cd\u542fdocker \u670d\u52a1 systemctl restart docker docker start registry \u4e8c\u3001\u5c06\u955c\u50cf\u4e0a\u4f20\u81f3\u79c1\u6709\u4ed3\u5e93 \u00b6 # 1\u3001\u6807\u8bb0\u955c\u50cf\u4e3a\u79c1\u6709\u4ed3\u5e93\u7684\u955c\u50cf docker tag centos:7 \u79c1\u6709\u4ed3\u5e93\u670d\u52a1\u5668IP:5000/centos:7 # 2\u3001\u4e0a\u4f20\u6807\u8bb0\u7684\u955c\u50cf docker push \u79c1\u6709\u4ed3\u5e93\u670d\u52a1\u5668IP:5000/centos:7 \u4e09\u3001 \u4ece\u79c1\u6709\u4ed3\u5e93\u62c9\u53d6\u955c\u50cf \u00b6 #\u62c9\u53d6\u955c\u50cf docker pull \u79c1\u6709\u4ed3\u5e93\u670d\u52a1\u5668ip:5000/centos:7","title":"\u79c1\u6709\u4ed3\u5e93"},{"location":"docker/7/#_1","text":"# 1\u3001\u62c9\u53d6\u79c1\u6709\u4ed3\u5e93\u955c\u50cf docker pull registry # 2\u3001\u542f\u52a8\u79c1\u6709\u4ed3\u5e93\u5bb9\u5668 docker run -id --name = registry -p 5000 :5000 registry # 3\u3001\u6253\u5f00\u6d4f\u89c8\u5668 \u8f93\u5165\u5730\u5740http://\u79c1\u6709\u4ed3\u5e93\u670d\u52a1\u5668ip:5000/v2/_catalog\uff0c\u770b\u5230{\"repositories\":[]} \u8868\u793a\u79c1\u6709\u4ed3\u5e93 \u642d\u5efa\u6210\u529f # 4\u3001\u4fee\u6539daemon.json vim /etc/docker/daemon.json # \u5728\u4e0a\u8ff0\u6587\u4ef6\u4e2d\u6dfb\u52a0\u4e00\u4e2akey\uff0c\u4fdd\u5b58\u9000\u51fa\u3002\u6b64\u6b65\u7528\u4e8e\u8ba9 docker \u4fe1\u4efb\u79c1\u6709\u4ed3\u5e93\u5730\u5740\uff1b\u6ce8\u610f\u5c06\u79c1\u6709\u4ed3\u5e93\u670d\u52a1\u5668ip\u4fee\u6539\u4e3a\u81ea\u5df1\u79c1\u6709\u4ed3\u5e93\u670d\u52a1\u5668\u771f\u5b9eip { \"insecure-registries\" : [ \"\u79c1\u6709\u4ed3\u5e93\u670d\u52a1\u5668ip:5000\" ]} # 5\u3001\u91cd\u542fdocker \u670d\u52a1 systemctl restart docker docker start registry","title":"\u4e00\u3001\u79c1\u6709\u4ed3\u5e93\u642d\u5efa"},{"location":"docker/7/#_2","text":"# 1\u3001\u6807\u8bb0\u955c\u50cf\u4e3a\u79c1\u6709\u4ed3\u5e93\u7684\u955c\u50cf docker tag centos:7 \u79c1\u6709\u4ed3\u5e93\u670d\u52a1\u5668IP:5000/centos:7 # 2\u3001\u4e0a\u4f20\u6807\u8bb0\u7684\u955c\u50cf docker push \u79c1\u6709\u4ed3\u5e93\u670d\u52a1\u5668IP:5000/centos:7","title":"\u4e8c\u3001\u5c06\u955c\u50cf\u4e0a\u4f20\u81f3\u79c1\u6709\u4ed3\u5e93"},{"location":"docker/7/#_3","text":"#\u62c9\u53d6\u955c\u50cf docker pull \u79c1\u6709\u4ed3\u5e93\u670d\u52a1\u5668ip:5000/centos:7","title":"\u4e09\u3001 \u4ece\u79c1\u6709\u4ed3\u5e93\u62c9\u53d6\u955c\u50cf"},{"location":"jquery/","text":"1\u3001JQuery\u5feb\u901f\u5165\u95e8 1.1\u3001JQuery\u4ecb\u7ecd \u00b6 jQuery \u662f\u4e00\u4e2a JavaScript \u5e93\u3002 \u6240\u8c13\u7684\u5e93\uff0c\u5c31\u662f\u4e00\u4e2a JS \u6587\u4ef6\uff0c\u91cc\u9762\u5c01\u88c5\u4e86\u5f88\u591a\u9884\u5b9a\u4e49\u7684\u51fd\u6570\uff0c\u6bd4\u5982\u83b7\u53d6\u5143\u7d20\uff0c\u6267\u884c\u9690\u85cf\u3001\u79fb\u52a8\u7b49\uff0c\u76ee\u7684\u5c31 \u662f\u5728\u4f7f\u7528\u65f6\u76f4\u63a5\u8c03\u7528\uff0c\u4e0d\u9700\u8981\u518d\u91cd\u590d\u5b9a\u4e49\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u6781\u5927\u5730\u7b80\u5316\u4e86 JavaScript \u7f16\u7a0b\u3002 jQuery \u5b98\u7f51\uff1ahttps://www.jquery.com 1.2\u3001JQuery\u5feb\u901f\u5165\u95e8 \u00b6 \u5f00\u53d1\u601d\u8def \u7f16\u5199 HTML \u6587\u6863\u3002 \u5f15\u5165 jQuery \u6587\u4ef6\u3002 \u4f7f\u7528 jQuery \u83b7\u53d6\u5143\u7d20\u3002 \u4f7f\u7528\u6d4f\u89c8\u5668\u6d4b\u8bd5\u3002 \u4ee3\u7801\u5b9e\u73b0 <!DOCTYPE html> < html lang = \"en\" > < head > < meta charset = \"UTF-8\" > < meta name = \"viewport\" content = \"width=device-width, initial-scale=1.0\" > < title > \u5feb\u901f\u5165\u95e8 </ title > </ head > < body > < div id = \"div\" > \u6211\u662fdiv </ div > </ body > <!--\u5f15\u5165 jQuery \u6587\u4ef6--> < script src = \"js/jquery-3.3.1.min.js\" ></ script > < script > // JS\u65b9\u5f0f\uff0c\u901a\u8fc7id\u5c5e\u6027\u503c\u6765\u83b7\u53d6div\u5143\u7d20 let jsDiv = document . getElementById ( \"div\" ); //alert(jsDiv); //alert(jsDiv.innerHTML); // jQuery\u65b9\u5f0f\uff0c\u901a\u8fc7id\u5c5e\u6027\u503c\u6765\u83b7\u53d6div\u5143\u7d20 let jqDiv = $ ( \"#div\" ); alert ( jqDiv ); alert ( jqDiv . html ()); </ script > </ html > 1.3\u3001\u5c0f\u7ed3 \u00b6 jQuery \u662f\u4e00\u4e2a JavaScript \u5e93\u3002 \u8bf4\u767d\u4e86\u5c31\u662f\u5b9a\u4e49\u597d\u7684\u4e00\u4e2a JS \u6587\u4ef6\uff0c\u5185\u90e8\u5c01\u88c5\u4e86\u5f88\u591a\u529f\u80fd\uff0c\u53ef\u4ee5\u5927\u5927\u7b80\u5316\u6211\u4eec\u7684 JS \u64cd\u4f5c\u6b65\u9aa4\u3002 jQuery \u5b98\u7f51\uff1ahttps://www.jquery.com\u3002 \u8981\u60f3\u4f7f\u7528\uff0c\u5fc5\u987b\u8981\u5f15\u5165\u8be5\u6587\u4ef6\u3002 jQuery \u7684\u6838\u5fc3\u8bed\u6cd5 $(); 2\u3001JQuery\u57fa\u672c\u8bed\u6cd5 \u00b6 2.1\u3001JS\u5bf9\u8c61\u548cJQuery\u5bf9\u8c61\u8f6c\u6362 \u00b6 jQuery \u672c\u8d28\u4e0a\u867d\u7136\u4e5f\u662f JS\uff0c\u4f46\u5982\u679c\u60f3\u4f7f\u7528 jQuery \u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u90a3\u4e48\u5fc5\u987b\u4fdd\u8bc1\u5bf9\u8c61\u662f jQuery \u5bf9\u8c61\uff0c\u800c\u4e0d\u662f JS \u65b9\u5f0f\u83b7\u5f97\u7684 DOM \u5bf9\u8c61\uff0c\u4e8c\u8005\u7684 API \u65b9\u6cd5\u4e0d\u80fd\u6df7\u5408\u4f7f\u7528\uff0c\u82e5\u60f3\u4f7f\u7528\u5bf9\u65b9\u7684 API\uff0c\u9700\u8981\u8fdb\u884c\u5bf9\u8c61\u7684\u8f6c\u6362\u3002 JS \u7684 DOM \u5bf9\u8c61\u8f6c\u6362\u6210 jQuery \u5bf9\u8c61 ```js //$(JS \u7684 DOM \u5bf9\u8c61); // JS\u65b9\u5f0f\uff0c\u901a\u8fc7id\u5c5e\u6027\u503c\u83b7\u53d6div\u5143\u7d20 let jsDiv = document.getElementById(\"div\"); alert(jsDiv.innerHTML); //alert(jsDiv.html()); JS\u5bf9\u8c61\u65e0\u6cd5\u4f7f\u7528jQuery\u91cc\u9762\u7684\u529f\u80fd // \u5c06 JS \u5bf9\u8c61\u8f6c\u6362\u4e3ajQuery\u5bf9\u8c61 let jq = $(jsDiv); alert(jq.html()); ``` jQuery \u5bf9\u8c61\u8f6c\u6362\u6210 JS \u5bf9\u8c61 ```js / jQuery \u5bf9\u8c61[\u7d22\u5f15]; jQuery \u5bf9\u8c61.get(\u7d22\u5f15); / // jQuery\u65b9\u5f0f\uff0c\u901a\u8fc7id\u5c5e\u6027\u503c\u83b7\u53d6div\u5143\u7d20 let jqDiv = $(\"#div\"); alert(jqDiv.html()); // alert(jqDiv.innerHTML); jQuery\u5bf9\u8c61\u65e0\u6cd5\u4f7f\u7528JS\u91cc\u9762\u7684\u529f\u80fd // \u5c06 jQuery\u5bf9\u8c61\u8f6c\u6362\u4e3aJS\u5bf9\u8c61 let js = jqDiv[0]; alert(js.innerHTML); ``` 2.2\u3001\u4e8b\u4ef6\u7684\u57fa\u672c\u4f7f\u7528 \u00b6 \u5e38\u7528\u7684\u4e8b\u4ef6 \u5728 jQuery \u4e2d\u5c06\u4e8b\u4ef6\u5c01\u88c5\u6210\u4e86\u5bf9\u5e94\u7684\u65b9\u6cd5\u3002\u53bb\u6389\u4e86 JS \u4e2d\u7684 .on \u8bed\u6cd5\u3002 \u4ee3\u7801\u5b9e\u73b0 ```html \u4e8b\u4ef6\u7684\u4f7f\u7528 //\u5355\u51fb\u4e8b\u4ef6 $(\"#btn\").click(function(){ alert(\"\u70b9\u6211\u5e72\u561b?\"); }); //\u83b7\u53d6\u7126\u70b9\u4e8b\u4ef6 // $(\"#input\").focus(function(){ // alert(\"\u4f60\u8981\u8f93\u5165\u6570\u636e\u5566...\"); // }); //\u5931\u53bb\u7126\u70b9\u4e8b\u4ef6 $(\"#input\").blur(function(){ alert(\"\u4f60\u8f93\u5165\u5b8c\u6210\u5566...\"); }); ``` 2.3\u3001\u4e8b\u4ef6\u7684\u7ed1\u5b9a\u548c\u89e3\u7ed1 \u00b6 \u7ed1\u5b9a\u4e8b\u4ef6 //jQuery \u5bf9\u8c61.on(\u4e8b\u4ef6\u540d\u79f0,\u6267\u884c\u7684\u529f\u80fd); js //\u7ed9btn1\u6309\u94ae\u7ed1\u5b9a\u5355\u51fb\u4e8b\u4ef6 $(\"#btn1\").on(\"click\",function(){ alert(\"\u70b9\u6211\u5e72\u561b?\"); }); \u89e3\u7ed1\u4e8b\u4ef6 \u5982\u679c\u4e0d\u6307\u5b9a\u4e8b\u4ef6\u540d\u79f0\uff0c\u5219\u4f1a\u628a\u8be5\u5bf9\u8c61\u7ed1\u5b9a\u7684\u6240\u6709\u4e8b\u4ef6\u90fd\u89e3\u7ed1 //jQuery \u5bf9\u8c61.off(\u4e8b\u4ef6\u540d\u79f0); js //\u901a\u8fc7btn2\u89e3\u7ed1btn1\u7684\u5355\u51fb\u4e8b\u4ef6 $(\"#btn2\").on(\"click\",function(){ $(\"#btn1\").off(\"click\"); }); 2.4\u3001\u4e8b\u4ef6\u7684\u5207\u6362 \u00b6 \u4e8b\u4ef6\u7684\u5207\u6362\uff1a\u9700\u8981\u7ed9\u540c\u4e00\u4e2a\u5bf9\u8c61\u7ed1\u5b9a\u591a\u4e2a\u4e8b\u4ef6\uff0c\u800c\u4e14\u591a\u4e2a\u4e8b\u4ef6\u8fd8\u6709\u5148\u540e\u987a\u5e8f\u5173\u7cfb\u3002 \u65b9\u5f0f\u4e00\uff1a\u5355\u72ec\u5b9a\u4e49 $(\u5143\u7d20).\u4e8b\u4ef6\u65b9\u6cd5\u540d1(\u8981\u6267\u884c\u7684\u529f\u80fd); $(\u5143\u7d20).\u4e8b\u4ef6\u65b9\u6cd5\u540d2(\u8981\u6267\u884c\u7684\u529f\u80fd); js //\u65b9\u5f0f\u4e00 \u5355\u72ec\u5b9a\u4e49 $(\"#div\").mouseover(function(){ //\u80cc\u666f\u8272\uff1a\u7ea2\u8272 //$(\"#div\").css(\"background\",\"red\"); $(this).css(\"background\",\"red\"); }); $(\"#div\").mouseout(function(){ //\u80cc\u666f\u8272\uff1a\u84dd\u8272 //$(\"#div\").css(\"background\",\"blue\"); $(this).css(\"background\",\"blue\"); }); \u65b9\u5f0f\u4e8c\uff1a\u94fe\u5f0f\u5b9a\u4e49 $(\u5143\u7d20).\u4e8b\u4ef6\u65b9\u6cd5\u540d1(\u8981\u6267\u884c\u7684\u529f\u80fd) .\u4e8b\u4ef6\u65b9\u6cd5\u540d2(\u8981\u6267\u884c\u7684\u529f\u80fd); js //\u65b9\u5f0f\u4e8c \u94fe\u5f0f\u5b9a\u4e49 $(\"#div\").mouseover(function(){ $(this).css(\"background\",\"red\"); }).mouseout(function(){ $(this).css(\"background\",\"blue\"); }); 2.5\u3001\u904d\u5386\u64cd\u4f5c \u00b6 \u65b9\u5f0f\u4e00\uff1a\u4f20\u7edf\u65b9\u5f0f tex for(let i = 0; i < \u5bb9\u5668\u5bf9\u8c61\u957f\u5ea6; i++){ \u6267\u884c\u529f\u80fd; } js //\u65b9\u5f0f\u4e00\uff1a\u4f20\u7edf\u65b9\u5f0f $(\"#btn\").click(function(){ let lis = $(\"li\"); for(let i = 0 ; i < lis.length; i++) { alert(i + \":\" + lis[i].innerHTML); } }); \u65b9\u5f0f\u4e8c\uff1a\u5bf9\u8c61.each()\u65b9\u6cd5 tex \u5bb9\u5668\u5bf9\u8c61.each(function(index,ele){ \u6267\u884c\u529f\u80fd; }); js //\u65b9\u5f0f\u4e8c\uff1a\u5bf9\u8c61.each()\u65b9\u6cd5 $(\"#btn\").click(function(){ let lis = $(\"li\"); lis.each(function(index,ele){ alert(index + \":\" + ele.innerHTML); }); }); \u65b9\u5f0f\u4e09\uff1a$.each()\u65b9\u6cd5 tex $.each(\u5bb9\u5668\u5bf9\u8c61,function(index,ele){ \u6267\u884c\u529f\u80fd; }); js //\u65b9\u5f0f\u4e09\uff1a$.each()\u65b9\u6cd5 $(\"#btn\").click(function(){ let lis = $(\"li\"); $.each(lis,function(index,ele){ alert(index + \":\" + ele.innerHTML); }); }); \u65b9\u5f0f\u56db\uff1afor of\u8bed\u53e5 tex for(ele of \u5bb9\u5668\u5bf9\u8c61){ \u6267\u884c\u529f\u80fd; } js //\u65b9\u5f0f\u56db\uff1afor of \u8bed\u53e5\u904d\u5386: \u7c7b\u4f3c\u4e8ejava \u7684\u589e\u5f3afor \u5faa\u73af, \u662f\u539f\u59cbJS \u63d0\u4f9b\u7684\u529f\u80fd $(\"#btn\").click(function(){ let lis = $(\"li\"); for(ele of lis){ alert(ele.innerHTML); } }); 2.6\u3001\u5c0f\u7ed3 \u00b6 JS \u5bf9\u8c61\u548c jQuery \u5bf9\u8c61\u76f8\u4e92\u8f6c\u6362 $(JS \u7684 DOM \u5bf9\u8c61)\uff1a\u5c06 JS \u5bf9\u8c61\u8f6c\u4e3a jQuery \u5bf9\u8c61\u3002 jQuery \u5bf9\u8c61[\u7d22\u5f15] jQuery \u5bf9\u8c61.get(\u7d22\u5f15)\uff1a\u5c06 jQuery \u5bf9\u8c61\u8f6c\u4e3a JS \u5bf9\u8c61\u3002 \u4e8b\u4ef6 \u5728 jQuery \u4e2d\u5c06\u4e8b\u4ef6\u5c01\u88c5\u6210\u4e86\u5bf9\u5e94\u7684\u65b9\u6cd5\u3002\u53bb\u6389\u4e86 JS \u4e2d\u7684 .on \u8bed\u6cd5\u3002 on(\u4e8b\u4ef6\u540d\u79f0,\u6267\u884c\u7684\u529f\u80fd)\uff1a\u7ed1\u5b9a\u4e8b\u4ef6\u3002 off(\u4e8b\u4ef6\u540d\u79f0)\uff1a\u89e3\u7ed1\u4e8b\u4ef6\u3002 \u904d\u5386 \u4f20\u7edf\u65b9\u5f0f\u3002 \u5bf9\u8c61.each() \u65b9\u6cd5\u3002 $.each() \u65b9\u6cd5\u3002 for of \u8bed\u53e5\u3002 3\u3001JQuery\u9009\u62e9\u5668 \u00b6 3.1\u3001\u57fa\u672c\u9009\u62e9\u5668 \u00b6 \u9009\u62e9\u5668\uff1a\u7c7b\u4f3c\u4e8e CSS \u7684\u9009\u62e9\u5668\uff0c\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u83b7\u53d6\u5143\u7d20\u3002 \u4f8b\u5982\uff1aid \u9009\u62e9\u5668\u3001\u7c7b\u9009\u62e9\u5668\u3001\u5143\u7d20\u9009\u62e9\u5668\u3001\u5c5e\u6027\u9009\u62e9\u5668\u7b49\u7b49\u3002 jQuery \u4e2d\u9009\u62e9\u5668\u7684\u8bed\u6cd5\uff1a$(); \u4ee3\u7801\u5b9e\u73b0 ```html \u57fa\u672c\u9009\u62e9\u5668 div1 div2 div3 //1.\u5143\u7d20\u9009\u62e9\u5668 $(\"\u5143\u7d20\u7684\u540d\u79f0\") let divs = $(\"div\"); //alert(divs.length); //2.id\u9009\u62e9\u5668 $(\"#id\u7684\u5c5e\u6027\u503c\") let div1 = $(\"#div1\"); //alert(div1); //3.\u7c7b\u9009\u62e9\u5668 $(\".class\u7684\u5c5e\u6027\u503c\") let cls = $(\".cls\"); alert(cls.length); ``` 3.2\u3001\u5c42\u7ea7\u9009\u62e9\u5668 \u00b6 \u4ee3\u7801\u5b9e\u73b0 ```html \u5c42\u7ea7\u9009\u62e9\u5668 s1 s1-1 s1-2 s2 p1 p2 // 1. \u540e\u4ee3\u9009\u62e9\u5668 $(\"A B\"); A\u4e0b\u7684\u6240\u6709B(\u5305\u62ecB\u7684\u5b50\u7ea7) let spans1 = $(\"div span\"); //alert(spans1.length); // 2. \u5b50\u9009\u62e9\u5668 $(\"A > B\"); A\u4e0b\u7684\u6240\u6709B(\u4e0d\u5305\u62ecB\u7684\u5b50\u7ea7) let spans2 = $(\"div > span\"); //alert(spans2.length); // 3. \u5144\u5f1f\u9009\u62e9\u5668 $(\"A + B\"); A\u76f8\u90bb\u7684\u4e0b\u4e00\u4e2aB let ps1 = $(\"div + p\"); //alert(ps1.length); // 4. \u5144\u5f1f\u9009\u62e9\u5668 $(\"A ~ B\"); A\u76f8\u90bb\u7684\u6240\u6709B let ps2 = $(\"div ~ p\"); alert(ps2.length); ``` 3.3\u3001\u5c5e\u6027\u9009\u62e9\u5668 \u00b6 \u4ee3\u7801\u5b9e\u73b0 ```html \u5c5e\u6027\u9009\u62e9\u5668 //1.\u5c5e\u6027\u540d\u9009\u62e9\u5668 $(\"\u5143\u7d20[\u5c5e\u6027\u540d]\") let in1 = $(\"input[type]\"); //alert(in1.length); //2.\u5c5e\u6027\u503c\u9009\u62e9\u5668 $(\"\u5143\u7d20[\u5c5e\u6027\u540d=\u5c5e\u6027\u503c]\") let in2 = $(\"input[type='password']\"); alert(in2.length); ``` 3.4\u3001\u8fc7\u6ee4\u5668\u9009\u62e9\u5668 \u00b6 \u4ee3\u7801\u5b9e\u73b0 ```html \u8fc7\u6ee4\u5668\u9009\u62e9\u5668 div1 div2 div3 div4 // 1.\u9996\u5143\u7d20\u9009\u62e9\u5668 $(\"A:first\"); let div1 = $(\"div:first\"); //alert(div1.html()); // 2.\u5c3e\u5143\u7d20\u9009\u62e9\u5668 $(\"A:last\"); let div4 = $(\"div:last\"); //alert(div4.html()); // 3.\u975e\u5143\u7d20\u9009\u62e9\u5668 $(\"A:not(B)\"); let divs1 = $(\"div:not(#div2)\"); //alert(divs1.length); // 4.\u5076\u6570\u9009\u62e9\u5668 $(\"A:even\"); let divs2 = $(\"div:even\"); //alert(divs2.length); //alert(divs2[0].innerHTML); //alert(divs2[1].innerHTML); // 5.\u5947\u6570\u9009\u62e9\u5668 $(\"A:odd\"); let divs3 = $(\"div:odd\"); //alert(divs3.length); //alert(divs3[0].innerHTML); //alert(divs3[1].innerHTML); // 6.\u7b49\u4e8e\u7d22\u5f15\u9009\u62e9\u5668 $(\"A:eq(index)\"); let div3 = $(\"div:eq(2)\"); //alert(div3.html()); // 7.\u5927\u4e8e\u7d22\u5f15\u9009\u62e9\u5668 $(\"A:gt(index)\"); let divs4 = $(\"div:gt(1)\"); //alert(divs4.length); //alert(divs4[0].innerHTML); //alert(divs4[1].innerHTML); // 8.\u5c0f\u4e8e\u7d22\u5f15\u9009\u62e9\u5668 $(\"A:lt(index)\"); let divs5 = $(\"div:lt(2)\"); alert(divs5.length); alert(divs5[0].innerHTML); alert(divs5[1].innerHTML); ``` 3.5\u3001\u8868\u5355\u5c5e\u6027\u9009\u62e9\u5668 \u00b6 \u4ee3\u7801\u5b9e\u73b0 ```html \u8868\u5355\u5c5e\u6027\u9009\u62e9\u5668 \u7537 \u5973 \u5b66\u4e60 \u7761\u89c9 ---\u8bf7\u9009\u62e9--- \u672c\u79d1 \u4e13\u79d1 // 1.\u53ef\u7528\u5143\u7d20\u9009\u62e9\u5668 $(\"A:enabled\"); let ins1 = $(\"input:enabled\"); //alert(ins1.length); // 2.\u4e0d\u53ef\u7528\u5143\u7d20\u9009\u62e9\u5668 $(\"A:disabled\"); let ins2 = $(\"input:disabled\"); //alert(ins2.length); // 3.\u5355\u9009/\u590d\u9009\u6846\u88ab\u9009\u4e2d\u7684\u5143\u7d20 $(\"A:checked\"); let ins3 = $(\"input:checked\"); //alert(ins3.length); //alert(ins3[0].value); //alert(ins3[1].value); //alert(ins3[2].value); // 4.\u4e0b\u62c9\u6846\u88ab\u9009\u4e2d\u7684\u5143\u7d20 $(\"A:selected\"); let select = $(\"select option:selected\"); alert(select.html()); ``` 3.6\u3001\u5c0f\u7ed3 \u00b6 \u9009\u62e9\u5668\uff1a\u7c7b\u4f3c\u4e8e CSS \u7684\u9009\u62e9\u5668\uff0c\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u83b7\u53d6\u5143\u7d20\u3002 jQuery \u4e2d\u9009\u62e9\u5668\u7684\u8bed\u6cd5\uff1a$(); \u57fa\u672c\u9009\u62e9\u5668 $(\"\u5143\u7d20\u7684\u540d\u79f0\"); $(\"#id\u7684\u5c5e\u6027\u503c\"); $(\".class\u7684\u5c5e\u6027\u503c\"); \u5c42\u7ea7\u9009\u62e9\u5668 $(\"A B\"); $(\"A > B\"); \u5c5e\u6027\u9009\u62e9\u5668 $(\"A[\u5c5e\u6027\u540d]\"); $(\"A[\u5c5e\u6027\u540d=\u5c5e\u6027\u503c]\"); \u8fc7\u6ee4\u5668\u9009\u62e9\u5668 $(\"A:even\"); $(\"A:odd\"); \u8868\u5355\u5c5e\u6027\u9009\u62e9\u5668 $(\"A:disabled\"); $(\"A:checked\"); $(\"A:selected\"); 4\u3001JQuery DOM \u00b6 4.1\u3001\u64cd\u4f5c\u6587\u672c \u00b6 \u5e38\u7528\u65b9\u6cd5 \u4ee3\u7801\u5b9e\u73b0 ```html \u64cd\u4f5c\u6587\u672c \u6211\u662fdiv //1. html() \u83b7\u53d6\u6807\u7b7e\u7684\u6587\u672c\u5185\u5bb9 $(\"#btn1\").click(function(){ //\u83b7\u53d6div\u6807\u7b7e\u7684\u6587\u672c\u5185\u5bb9 let value = $(\"#div\").html(); alert(value); }); //2. html(value) \u8bbe\u7f6e\u6807\u7b7e\u7684\u6587\u672c\u5185\u5bb9\uff0c\u89e3\u6790\u6807\u7b7e $(\"#btn2\").click(function(){ //\u8bbe\u7f6ediv\u6807\u7b7e\u7684\u6587\u672c\u5185\u5bb9 //$(\"#div\").html(\"\u6211\u771f\u7684\u662fdiv\"); $(\"#div\").html(\"<b>\u6211\u771f\u7684\u662fdiv</b>\"); }); ``` 4.2\u3001\u64cd\u4f5c\u5bf9\u8c61 \u00b6 \u5e38\u7528\u65b9\u6cd5 \u4ee3\u7801\u5b9e\u73b0 ```html \u64cd\u4f5c\u5bf9\u8c61 \u5317\u4eac \u4e0a\u6d77 \u5e7f\u5dde \u6df1\u5733 \u52a0\u6cb9 \u96c4\u8d77 /* 1. $(\"\u5143\u7d20\") \u521b\u5efa\u6307\u5b9a\u5143\u7d20 2. append(element) \u6dfb\u52a0\u6210\u6700\u540e\u4e00\u4e2a\u5b50\u5143\u7d20\uff0c\u7531\u6dfb\u52a0\u8005\u5bf9\u8c61\u8c03\u7528 3. appendTo(element) \u6dfb\u52a0\u6210\u6700\u540e\u4e00\u4e2a\u5b50\u5143\u7d20\uff0c\u7531\u88ab\u6dfb\u52a0\u8005\u5bf9\u8c61\u8c03\u7528 4. prepend(element) \u6dfb\u52a0\u6210\u7b2c\u4e00\u4e2a\u5b50\u5143\u7d20\uff0c\u7531\u6dfb\u52a0\u8005\u5bf9\u8c61\u8c03\u7528 5. prependTo(element) \u6dfb\u52a0\u6210\u7b2c\u4e00\u4e2a\u5b50\u5143\u7d20\uff0c\u7531\u88ab\u6dfb\u52a0\u8005\u5bf9\u8c61\u8c03\u7528 6. before(element) \u6dfb\u52a0\u5230\u5f53\u524d\u5143\u7d20\u7684\u524d\u9762\uff0c\u4e24\u8005\u4e4b\u95f4\u662f\u5144\u5f1f\u5173\u7cfb\uff0c\u7531\u6dfb\u52a0\u8005\u5bf9\u8c61\u8c03\u7528 7. after(element) \u6dfb\u52a0\u5230\u5f53\u524d\u5143\u7d20\u7684\u540e\u9762\uff0c\u4e24\u8005\u4e4b\u95f4\u662f\u5144\u5f1f\u5173\u7cfb\uff0c\u7531\u6dfb\u52a0\u8005\u5bf9\u8c61\u8c03\u7528 8. remove() \u5220\u9664\u6307\u5b9a\u5143\u7d20(\u81ea\u5df1\u79fb\u9664\u81ea\u5df1) 9. empty() \u6e05\u7a7a\u6307\u5b9a\u5143\u7d20\u7684\u6240\u6709\u5b50\u5143\u7d20 */ // \u6309\u94ae\u4e00\uff1a\u6dfb\u52a0\u4e00\u4e2aspan\u5230div $(\"#btn1\").click(function(){ let span = $(\"<span>span</span>\"); $(\"#div\").append(span); }); //\u6309\u94ae\u4e8c\uff1a\u5c06\u52a0\u6cb9\u6dfb\u52a0\u5230\u57ce\u5e02\u5217\u8868\u6700\u4e0b\u65b9 $(\"#btn2\").click(function(){ //$(\"#city\").append($(\"#jy\")); $(\"#jy\").appendTo($(\"#city\")); }); //\u6309\u94ae\u4e09\uff1a\u5c06\u52a0\u6cb9\u6dfb\u52a0\u5230\u57ce\u5e02\u5217\u8868\u6700\u4e0a\u65b9 $(\"#btn3\").click(function(){ //$(\"#city\").prepend($(\"#jy\")); $(\"#jy\").prependTo($(\"#city\")); }); //\u6309\u94ae\u56db\uff1a\u5c06\u96c4\u8d77\u6dfb\u52a0\u5230\u4e0a\u6d77\u4e0b\u65b9 $(\"#btn4\").click(function(){ $(\"#sh\").after($(\"#xq\")); }); //\u6309\u94ae\u4e94\uff1a\u5c06\u96c4\u8d77\u6dfb\u52a0\u5230\u4e0a\u6d77\u4e0a\u65b9 $(\"#btn5\").click(function(){ $(\"#sh\").before($(\"#xq\")); }); //\u6309\u94ae\u516d\uff1a\u5c06\u96c4\u8d77\u5220\u9664 $(\"#btn6\").click(function(){ $(\"#xq\").remove(); }); //\u6309\u94ae\u4e03\uff1a\u5c06\u63cf\u8ff0\u5217\u8868\u5168\u90e8\u5220\u9664 $(\"#btn7\").click(function(){ $(\"#desc\").empty(); }); ``` 4.3\u3001\u64cd\u4f5c\u6837\u5f0f \u00b6 \u5e38\u7528\u65b9\u6cd5 \u4ee3\u7801\u5b9e\u73b0 ```html \u64cd\u4f5c\u6837\u5f0f .cls1{ background: pink; height: 30px; } \u6211\u662fdiv // 1.css(name) \u83b7\u53d6css\u6837\u5f0f $(\"#btn1\").click(function(){ alert($(\"#div\").css(\"border\")); }); // 2.css(name,value) \u8bbe\u7f6eCSS\u6837\u5f0f $(\"#btn2\").click(function(){ $(\"#div\").css(\"background\",\"blue\"); }); // 3.addClass(value) \u7ed9\u6307\u5b9a\u7684\u5bf9\u8c61\u6dfb\u52a0\u6837\u5f0f\u7c7b\u540d $(\"#btn3\").click(function(){ $(\"#div\").addClass(\"cls1\"); }); // 4.removeClass(value) \u7ed9\u6307\u5b9a\u7684\u5bf9\u8c61\u5220\u9664\u6837\u5f0f\u7c7b\u540d $(\"#btn4\").click(function(){ $(\"#div\").removeClass(\"cls1\"); }); // 5.toggleClass(value) \u5982\u679c\u6ca1\u6709\u6837\u5f0f\u7c7b\u540d\uff0c\u5219\u6dfb\u52a0\u3002\u5982\u679c\u6709\uff0c\u5219\u5220\u9664 $(\"#btn5\").click(function(){ $(\"#div\").toggleClass(\"cls1\"); }); ``` 4.4\u3001\u64cd\u4f5c\u5c5e\u6027 \u00b6 \u5e38\u7528\u65b9\u6cd5 \u4ee3\u7801\u5b9e\u73b0 ```html \u64cd\u4f5c\u5c5e\u6027 \u7537 \u5973 ---\u8bf7\u9009\u62e9--- \u672c\u79d1 \u4e13\u79d1 // 1.attr(name,[value]) \u83b7\u5f97/\u8bbe\u7f6e\u5c5e\u6027\u7684\u503c //\u6309\u94ae\u4e00\uff1a\u83b7\u53d6\u8f93\u5165\u6846\u7684id\u5c5e\u6027 $(\"#btn1\").click(function(){ alert($(\"#username\").attr(\"id\")); }); //\u6309\u94ae\u4e8c\uff1a\u7ed9\u8f93\u5165\u6846\u8bbe\u7f6evalue\u5c5e\u6027 $(\"#btn2\").click(function(){ $(\"#username\").attr(\"value\",\"hello...\"); }); // 2.prop(name,[value]) \u83b7\u5f97/\u8bbe\u7f6e\u5c5e\u6027\u7684\u503c(checked\uff0cselected) //\u6309\u94ae\u4e09\uff1a\u9009\u4e2d\u5973 $(\"#btn3\").click(function(){ $(\"#gender2\").prop(\"checked\",true); }); //\u6309\u94ae\u56db\uff1a\u9009\u4e2d\u672c\u79d1 $(\"#btn4\").click(function(){ $(\"#bk\").prop(\"selected\",true); }); ``` 4.5\u3001\u5c0f\u7ed3 \u00b6 \u64cd\u4f5c\u6587\u672c html() html(\u2026)\uff1a\u83b7\u53d6\u6216\u8bbe\u7f6e\u6807\u7b7e\u7684\u6587\u672c\uff0c\u89e3\u6790\u6807\u7b7e\u3002 \u64cd\u4f5c\u5bf9\u8c61 $(\u201c\u5143\u7d20\u201d)\uff1a\u521b\u5efa\u6307\u5b9a\u5143\u7d20\u3002 append(element)\uff1a\u6dfb\u52a0\u6210\u6700\u540e\u4e00\u4e2a\u5b50\u5143\u7d20\uff0c\u7531\u6dfb\u52a0\u8005\u5bf9\u8c61\u8c03\u7528\u3002 prepend(element)\uff1a\u6dfb\u52a0\u6210\u7b2c\u4e00\u4e2a\u5b50\u5143\u7d20\uff0c\u7531\u6dfb\u52a0\u8005\u5bf9\u8c61\u8c03\u7528\u3002 before(element)\uff1a\u6dfb\u52a0\u5230\u5f53\u524d\u5143\u7d20\u7684\u524d\u9762\uff0c\u4e24\u8005\u4e4b\u95f4\u662f\u5144\u5f1f\u5173\u7cfb\uff0c\u7531\u6dfb\u52a0\u8005\u5bf9\u8c61\u8c03\u7528\u3002 after(element)\uff1a\u6dfb\u52a0\u5230\u5f53\u524d\u5143\u7d20\u7684\u540e\u9762\uff0c\u4e24\u8005\u4e4b\u95f4\u662f\u5144\u5f1f\u5173\u7cfb\uff0c\u7531\u6dfb\u52a0\u8005\u5bf9\u8c61\u8c03\u7528\u3002 remove()\uff1a\u5220\u9664\u6307\u5b9a\u5143\u7d20(\u81ea\u5df1\u79fb\u9664\u81ea\u5df1)\u3002 \u64cd\u4f5c\u6837\u5f0f addClass(value)\uff1a\u7ed9\u6307\u5b9a\u7684\u5bf9\u8c61\u6dfb\u52a0\u6837\u5f0f\u7c7b\u540d\u3002 removeClass(value)\uff1a\u7ed9\u6307\u5b9a\u7684\u5bf9\u8c61\u5220\u9664\u6837\u5f0f\u7c7b\u540d\u3002 \u64cd\u4f5c\u5c5e\u6027 attr(name,[value])\uff1a\u83b7\u5f97/\u8bbe\u7f6e\u5c5e\u6027\u7684\u503c\u3002 prop(name,[value])\uff1a\u83b7\u5f97/\u8bbe\u7f6e\u5c5e\u6027\u7684\u503c(checked\uff0cselected)\u3002 5\u3001\u7efc\u5408\u6848\u4f8b \u590d\u9009\u6846 \u00b6 5.1\u3001\u6848\u4f8b\u6548\u679c \u00b6 5.2\u3001\u5206\u6790\u548c\u5b9e\u73b0 \u00b6 \u529f\u80fd\u5206\u6790 \u5168\u9009 \u4e3a\u5168\u9009\u6309\u94ae\u7ed1\u5b9a\u5355\u51fb\u4e8b\u4ef6\u3002 \u83b7\u53d6\u6240\u6709\u7684\u5546\u54c1\u9879\u590d\u9009\u6846\u5143\u7d20\uff0c\u4e3a\u5176\u6dfb\u52a0 checked \u5c5e\u6027\uff0c\u5c5e\u6027\u503c\u4e3a true\u3002 \u5168\u4e0d\u9009 \u4e3a\u5168\u4e0d\u9009\u6309\u94ae\u7ed1\u5b9a\u5355\u51fb\u4e8b\u4ef6\u3002 \u83b7\u53d6\u6240\u6709\u7684\u5546\u54c1\u9879\u590d\u9009\u6846\u5143\u7d20\uff0c\u4e3a\u5176\u6dfb\u52a0 checked \u5c5e\u6027\uff0c\u5c5e\u6027\u503c\u4e3a false\u3002 \u53cd\u9009 \u4e3a\u53cd\u9009\u6309\u94ae\u7ed1\u5b9a\u5355\u51fb\u4e8b\u4ef6 \u83b7\u53d6\u6240\u6709\u7684\u5546\u54c1\u9879\u590d\u9009\u6846\u5143\u7d20\uff0c\u4e3a\u5176\u6dfb\u52a0 checked \u5c5e\u6027\uff0c\u5c5e\u6027\u503c\u662f\u76ee\u524d\u76f8\u53cd\u7684\u72b6\u6001\u3002 \u4ee3\u7801\u5b9e\u73b0 <!DOCTYPE html> < html lang = \"en\" > < head > < meta charset = \"UTF-8\" > < meta name = \"viewport\" content = \"width=device-width, initial-scale=1.0\" > < title > \u590d\u9009\u6846 </ title > </ head > < body > < table id = \"tab1\" border = \"1\" width = \"800\" align = \"center\" > < tr > < th style = \"text-align: left\" > < input style = \"background:lightgreen\" id = \"selectAll\" type = \"button\" value = \"\u5168\u9009\" > < input style = \"background:lightgreen\" id = \"selectNone\" type = \"button\" value = \"\u5168\u4e0d\u9009\" > < input style = \"background:lightgreen\" id = \"reverse\" type = \"button\" value = \"\u53cd\u9009\" > </ th > < th > \u5206\u7c7bID </ th > < th > \u5206\u7c7b\u540d\u79f0 </ th > < th > \u5206\u7c7b\u63cf\u8ff0 </ th > < th > \u64cd\u4f5c </ th > </ tr > < tr > < td >< input type = \"checkbox\" class = \"item\" ></ td > < td > 1 </ td > < td > \u624b\u673a\u6570\u7801 </ td > < td > \u624b\u673a\u6570\u7801\u7c7b\u5546\u54c1 </ td > < td >< a href = \"\" > \u4fee\u6539 </ a > | < a href = \"\" > \u5220\u9664 </ a ></ td > </ tr > < tr > < td >< input type = \"checkbox\" class = \"item\" ></ td > < td > 2 </ td > < td > \u7535\u8111\u529e\u516c </ td > < td > \u7535\u8111\u529e\u516c\u7c7b\u5546\u54c1 </ td > < td >< a href = \"\" > \u4fee\u6539 </ a > | < a href = \"\" > \u5220\u9664 </ a ></ td > </ tr > < tr > < td >< input type = \"checkbox\" class = \"item\" ></ td > < td > 3 </ td > < td > \u978b\u9774\u7bb1\u5305 </ td > < td > \u978b\u9774\u7bb1\u5305\u7c7b\u5546\u54c1 </ td > < td >< a href = \"\" > \u4fee\u6539 </ a > | < a href = \"\" > \u5220\u9664 </ a ></ td > </ tr > < tr > < td >< input type = \"checkbox\" class = \"item\" ></ td > < td > 4 </ td > < td > \u5bb6\u5c45\u9970\u54c1 </ td > < td > \u5bb6\u5c45\u9970\u54c1\u7c7b\u5546\u54c1 </ td > < td >< a href = \"\" > \u4fee\u6539 </ a > | < a href = \"\" > \u5220\u9664 </ a ></ td > </ tr > </ table > </ body > < script src = \"js/jquery-3.3.1.min.js\" ></ script > < script > //\u5168\u9009 //1.\u4e3a\u5168\u9009\u6309\u94ae\u6dfb\u52a0\u5355\u51fb\u4e8b\u4ef6 $ ( \"#selectAll\" ). click ( function (){ //2.\u83b7\u53d6\u6240\u6709\u7684\u5546\u54c1\u590d\u9009\u6846\u5143\u7d20\uff0c\u4e3a\u5176\u6dfb\u52a0checked\u5c5e\u6027\uff0c\u5c5e\u6027\u503ctrue $ ( \".item\" ). prop ( \"checked\" , true ); }); //\u5168\u4e0d\u9009 //1.\u4e3a\u5168\u4e0d\u9009\u6309\u94ae\u6dfb\u52a0\u5355\u51fb\u4e8b\u4ef6 $ ( \"#selectNone\" ). click ( function (){ //2.\u83b7\u53d6\u6240\u6709\u7684\u5546\u54c1\u590d\u9009\u6846\u5143\u7d20\uff0c\u4e3a\u5176\u6dfb\u52a0checked\u5c5e\u6027\uff0c\u5c5e\u6027\u503cfalse $ ( \".item\" ). prop ( \"checked\" , false ); }); //\u53cd\u9009 //1.\u4e3a\u53cd\u9009\u6309\u94ae\u6dfb\u52a0\u5355\u51fb\u4e8b\u4ef6 $ ( \"#reverse\" ). click ( function (){ //2.\u83b7\u53d6\u6240\u6709\u7684\u5546\u54c1\u590d\u9009\u6846\u5143\u7d20\uff0c\u4e3a\u5176\u6dfb\u52a0checked\u5c5e\u6027\uff0c\u5c5e\u6027\u503c\u662f\u76ee\u524d\u76f8\u53cd\u7684\u72b6\u6001 let items = $ ( \".item\" ); items . each ( function (){ $ ( this ). prop ( \"checked\" , ! $ ( this ). prop ( \"checked\" )); }); }); </ script > </ html > 6\u3001\u7efc\u5408\u6848\u4f8b \u968f\u673a\u56fe\u7247 \u00b6 6.1\u3001\u6848\u4f8b\u6548\u679c \u00b6 6.2\u3001\u52a8\u6001\u5207\u6362\u5c0f\u56fe\u7684\u5206\u6790\u548c\u5b9e\u73b0 \u00b6 \u529f\u80fd\u5206\u6790 \u51c6\u5907\u4e00\u4e2a\u6570\u7ec4 \u5b9a\u4e49\u8ba1\u6570\u5668 \u5b9a\u4e49\u5b9a\u65f6\u5668\u5bf9\u8c61 \u5b9a\u4e49\u56fe\u7247\u8def\u5f84\u53d8\u91cf \u4e3a\u5f00\u59cb\u6309\u94ae\u7ed1\u5b9a\u5355\u51fb\u4e8b\u4ef6 \u8bbe\u7f6e\u6309\u94ae\u72b6\u6001 \u8bbe\u7f6e\u5b9a\u65f6\u5668\uff0c\u5faa\u73af\u663e\u793a\u56fe\u7247 \u5faa\u73af\u83b7\u53d6\u56fe\u7247\u8def\u5f84 \u5c06\u5f53\u524d\u56fe\u7247\u663e\u793a\u5230\u5c0f\u56fe\u7247\u4e0a \u8ba1\u6570\u5668\u81ea\u589e \u4ee3\u7801\u5b9e\u73b0 ```html \u968f\u673a\u56fe\u7247 //1.\u51c6\u5907\u4e00\u4e2a\u6570\u7ec4 let imgs = [ \"img/01.jpg\", \"img/02.jpg\", \"img/03.jpg\", \"img/04.jpg\", \"img/05.jpg\", \"img/06.jpg\", \"img/07.jpg\", \"img/08.jpg\", \"img/09.jpg\", \"img/10.jpg\"]; //2.\u5b9a\u4e49\u8ba1\u6570\u5668\u53d8\u91cf let count = 0; //3.\u58f0\u660e\u5b9a\u65f6\u5668\u5bf9\u8c61 let time = null; //4.\u58f0\u660e\u56fe\u7247\u8def\u5f84\u53d8\u91cf let imgSrc = \"\"; //5.\u4e3a\u5f00\u59cb\u6309\u94ae\u7ed1\u5b9a\u5355\u51fb\u4e8b\u4ef6 $(\"#startBtn\").click(function(){ //6.\u8bbe\u7f6e\u6309\u94ae\u72b6\u6001 //\u7981\u7528\u5f00\u59cb\u6309\u94ae $(\"#startBtn\").prop(\"disabled\",true); //\u542f\u7528\u505c\u6b62\u6309\u94ae $(\"#stopBtn\").prop(\"disabled\",false); //7.\u8bbe\u7f6e\u5b9a\u65f6\u5668\uff0c\u5faa\u73af\u663e\u793a\u56fe\u7247 time = setInterval(function(){ //8.\u5faa\u73af\u83b7\u53d6\u56fe\u7247\u8def\u5f84 let index = count % imgs.length; // 0%10=0 1%10=1 2%10=2 .. 9%10=9 10%10=0 //9.\u5c06\u5f53\u524d\u56fe\u7247\u663e\u793a\u5230\u5c0f\u56fe\u7247\u4e0a imgSrc = imgs[index]; $(\"#small\").prop(\"src\",imgSrc); //10.\u8ba1\u6570\u5668\u81ea\u589e count++; },10); }); ``` 6.3\u3001\u663e\u793a\u5927\u56fe\u7684\u5206\u6790\u548c\u5b9e\u73b0 \u00b6 \u529f\u80fd\u5206\u6790 \u4e3a\u505c\u6b62\u6309\u94ae\u7ed1\u5b9a\u5355\u51fb\u4e8b\u4ef6 \u53d6\u6d88\u5b9a\u65f6\u5668 \u8bbe\u7f6e\u6309\u94ae\u72b6\u6001 \u5c06\u56fe\u7247\u663e\u793a\u5230\u5927\u56fe\u7247\u4e0a \u4ee3\u7801\u5b9e\u73b0 ```js //11.\u4e3a\u505c\u6b62\u6309\u94ae\u7ed1\u5b9a\u5355\u51fb\u4e8b\u4ef6 $(\"#stopBtn\").click(function(){ //12.\u53d6\u6d88\u5b9a\u65f6\u5668 clearInterval(time); // 13 . \u8bbe\u7f6e\u6309\u94ae\u72b6\u6001 // \u542f\u7528\u5f00\u59cb\u6309\u94ae $( \"#startBtn\" ) . prop ( \"disabled\" , false ); // \u7981\u7528\u505c\u6b62\u6309\u94ae $( \"#stopBtn\" ) . prop ( \"disabled\" , true ); // 14 . \u5c06\u56fe\u7247\u663e\u793a\u5230\u5927\u56fe\u7247\u4e0a $( \"#big\" ) . prop ( \"src\" , imgSrc ); $( \"#big\" ) . prop ( \"style\" , \"width: 400px; height: 400px;\" ); }); ```","title":"JQuery"},{"location":"jquery/#11jquery","text":"jQuery \u662f\u4e00\u4e2a JavaScript \u5e93\u3002 \u6240\u8c13\u7684\u5e93\uff0c\u5c31\u662f\u4e00\u4e2a JS \u6587\u4ef6\uff0c\u91cc\u9762\u5c01\u88c5\u4e86\u5f88\u591a\u9884\u5b9a\u4e49\u7684\u51fd\u6570\uff0c\u6bd4\u5982\u83b7\u53d6\u5143\u7d20\uff0c\u6267\u884c\u9690\u85cf\u3001\u79fb\u52a8\u7b49\uff0c\u76ee\u7684\u5c31 \u662f\u5728\u4f7f\u7528\u65f6\u76f4\u63a5\u8c03\u7528\uff0c\u4e0d\u9700\u8981\u518d\u91cd\u590d\u5b9a\u4e49\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u6781\u5927\u5730\u7b80\u5316\u4e86 JavaScript \u7f16\u7a0b\u3002 jQuery \u5b98\u7f51\uff1ahttps://www.jquery.com","title":"1.1\u3001JQuery\u4ecb\u7ecd"},{"location":"jquery/#12jquery","text":"\u5f00\u53d1\u601d\u8def \u7f16\u5199 HTML \u6587\u6863\u3002 \u5f15\u5165 jQuery \u6587\u4ef6\u3002 \u4f7f\u7528 jQuery \u83b7\u53d6\u5143\u7d20\u3002 \u4f7f\u7528\u6d4f\u89c8\u5668\u6d4b\u8bd5\u3002 \u4ee3\u7801\u5b9e\u73b0 <!DOCTYPE html> < html lang = \"en\" > < head > < meta charset = \"UTF-8\" > < meta name = \"viewport\" content = \"width=device-width, initial-scale=1.0\" > < title > \u5feb\u901f\u5165\u95e8 </ title > </ head > < body > < div id = \"div\" > \u6211\u662fdiv </ div > </ body > <!--\u5f15\u5165 jQuery \u6587\u4ef6--> < script src = \"js/jquery-3.3.1.min.js\" ></ script > < script > // JS\u65b9\u5f0f\uff0c\u901a\u8fc7id\u5c5e\u6027\u503c\u6765\u83b7\u53d6div\u5143\u7d20 let jsDiv = document . getElementById ( \"div\" ); //alert(jsDiv); //alert(jsDiv.innerHTML); // jQuery\u65b9\u5f0f\uff0c\u901a\u8fc7id\u5c5e\u6027\u503c\u6765\u83b7\u53d6div\u5143\u7d20 let jqDiv = $ ( \"#div\" ); alert ( jqDiv ); alert ( jqDiv . html ()); </ script > </ html >","title":"1.2\u3001JQuery\u5feb\u901f\u5165\u95e8"},{"location":"jquery/#13","text":"jQuery \u662f\u4e00\u4e2a JavaScript \u5e93\u3002 \u8bf4\u767d\u4e86\u5c31\u662f\u5b9a\u4e49\u597d\u7684\u4e00\u4e2a JS \u6587\u4ef6\uff0c\u5185\u90e8\u5c01\u88c5\u4e86\u5f88\u591a\u529f\u80fd\uff0c\u53ef\u4ee5\u5927\u5927\u7b80\u5316\u6211\u4eec\u7684 JS \u64cd\u4f5c\u6b65\u9aa4\u3002 jQuery \u5b98\u7f51\uff1ahttps://www.jquery.com\u3002 \u8981\u60f3\u4f7f\u7528\uff0c\u5fc5\u987b\u8981\u5f15\u5165\u8be5\u6587\u4ef6\u3002 jQuery \u7684\u6838\u5fc3\u8bed\u6cd5 $();","title":"1.3\u3001\u5c0f\u7ed3"},{"location":"jquery/#2jquery","text":"","title":"2\u3001JQuery\u57fa\u672c\u8bed\u6cd5"},{"location":"jquery/#21jsjquery","text":"jQuery \u672c\u8d28\u4e0a\u867d\u7136\u4e5f\u662f JS\uff0c\u4f46\u5982\u679c\u60f3\u4f7f\u7528 jQuery \u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u90a3\u4e48\u5fc5\u987b\u4fdd\u8bc1\u5bf9\u8c61\u662f jQuery \u5bf9\u8c61\uff0c\u800c\u4e0d\u662f JS \u65b9\u5f0f\u83b7\u5f97\u7684 DOM \u5bf9\u8c61\uff0c\u4e8c\u8005\u7684 API \u65b9\u6cd5\u4e0d\u80fd\u6df7\u5408\u4f7f\u7528\uff0c\u82e5\u60f3\u4f7f\u7528\u5bf9\u65b9\u7684 API\uff0c\u9700\u8981\u8fdb\u884c\u5bf9\u8c61\u7684\u8f6c\u6362\u3002 JS \u7684 DOM \u5bf9\u8c61\u8f6c\u6362\u6210 jQuery \u5bf9\u8c61 ```js //$(JS \u7684 DOM \u5bf9\u8c61); // JS\u65b9\u5f0f\uff0c\u901a\u8fc7id\u5c5e\u6027\u503c\u83b7\u53d6div\u5143\u7d20 let jsDiv = document.getElementById(\"div\"); alert(jsDiv.innerHTML); //alert(jsDiv.html()); JS\u5bf9\u8c61\u65e0\u6cd5\u4f7f\u7528jQuery\u91cc\u9762\u7684\u529f\u80fd // \u5c06 JS \u5bf9\u8c61\u8f6c\u6362\u4e3ajQuery\u5bf9\u8c61 let jq = $(jsDiv); alert(jq.html()); ``` jQuery \u5bf9\u8c61\u8f6c\u6362\u6210 JS \u5bf9\u8c61 ```js / jQuery \u5bf9\u8c61[\u7d22\u5f15]; jQuery \u5bf9\u8c61.get(\u7d22\u5f15); / // jQuery\u65b9\u5f0f\uff0c\u901a\u8fc7id\u5c5e\u6027\u503c\u83b7\u53d6div\u5143\u7d20 let jqDiv = $(\"#div\"); alert(jqDiv.html()); // alert(jqDiv.innerHTML); jQuery\u5bf9\u8c61\u65e0\u6cd5\u4f7f\u7528JS\u91cc\u9762\u7684\u529f\u80fd // \u5c06 jQuery\u5bf9\u8c61\u8f6c\u6362\u4e3aJS\u5bf9\u8c61 let js = jqDiv[0]; alert(js.innerHTML); ```","title":"2.1\u3001JS\u5bf9\u8c61\u548cJQuery\u5bf9\u8c61\u8f6c\u6362"},{"location":"jquery/#22","text":"\u5e38\u7528\u7684\u4e8b\u4ef6 \u5728 jQuery \u4e2d\u5c06\u4e8b\u4ef6\u5c01\u88c5\u6210\u4e86\u5bf9\u5e94\u7684\u65b9\u6cd5\u3002\u53bb\u6389\u4e86 JS \u4e2d\u7684 .on \u8bed\u6cd5\u3002 \u4ee3\u7801\u5b9e\u73b0 ```html \u4e8b\u4ef6\u7684\u4f7f\u7528 //\u5355\u51fb\u4e8b\u4ef6 $(\"#btn\").click(function(){ alert(\"\u70b9\u6211\u5e72\u561b?\"); }); //\u83b7\u53d6\u7126\u70b9\u4e8b\u4ef6 // $(\"#input\").focus(function(){ // alert(\"\u4f60\u8981\u8f93\u5165\u6570\u636e\u5566...\"); // }); //\u5931\u53bb\u7126\u70b9\u4e8b\u4ef6 $(\"#input\").blur(function(){ alert(\"\u4f60\u8f93\u5165\u5b8c\u6210\u5566...\"); }); ```","title":"2.2\u3001\u4e8b\u4ef6\u7684\u57fa\u672c\u4f7f\u7528"},{"location":"jquery/#23","text":"\u7ed1\u5b9a\u4e8b\u4ef6 //jQuery \u5bf9\u8c61.on(\u4e8b\u4ef6\u540d\u79f0,\u6267\u884c\u7684\u529f\u80fd); js //\u7ed9btn1\u6309\u94ae\u7ed1\u5b9a\u5355\u51fb\u4e8b\u4ef6 $(\"#btn1\").on(\"click\",function(){ alert(\"\u70b9\u6211\u5e72\u561b?\"); }); \u89e3\u7ed1\u4e8b\u4ef6 \u5982\u679c\u4e0d\u6307\u5b9a\u4e8b\u4ef6\u540d\u79f0\uff0c\u5219\u4f1a\u628a\u8be5\u5bf9\u8c61\u7ed1\u5b9a\u7684\u6240\u6709\u4e8b\u4ef6\u90fd\u89e3\u7ed1 //jQuery \u5bf9\u8c61.off(\u4e8b\u4ef6\u540d\u79f0); js //\u901a\u8fc7btn2\u89e3\u7ed1btn1\u7684\u5355\u51fb\u4e8b\u4ef6 $(\"#btn2\").on(\"click\",function(){ $(\"#btn1\").off(\"click\"); });","title":"2.3\u3001\u4e8b\u4ef6\u7684\u7ed1\u5b9a\u548c\u89e3\u7ed1"},{"location":"jquery/#24","text":"\u4e8b\u4ef6\u7684\u5207\u6362\uff1a\u9700\u8981\u7ed9\u540c\u4e00\u4e2a\u5bf9\u8c61\u7ed1\u5b9a\u591a\u4e2a\u4e8b\u4ef6\uff0c\u800c\u4e14\u591a\u4e2a\u4e8b\u4ef6\u8fd8\u6709\u5148\u540e\u987a\u5e8f\u5173\u7cfb\u3002 \u65b9\u5f0f\u4e00\uff1a\u5355\u72ec\u5b9a\u4e49 $(\u5143\u7d20).\u4e8b\u4ef6\u65b9\u6cd5\u540d1(\u8981\u6267\u884c\u7684\u529f\u80fd); $(\u5143\u7d20).\u4e8b\u4ef6\u65b9\u6cd5\u540d2(\u8981\u6267\u884c\u7684\u529f\u80fd); js //\u65b9\u5f0f\u4e00 \u5355\u72ec\u5b9a\u4e49 $(\"#div\").mouseover(function(){ //\u80cc\u666f\u8272\uff1a\u7ea2\u8272 //$(\"#div\").css(\"background\",\"red\"); $(this).css(\"background\",\"red\"); }); $(\"#div\").mouseout(function(){ //\u80cc\u666f\u8272\uff1a\u84dd\u8272 //$(\"#div\").css(\"background\",\"blue\"); $(this).css(\"background\",\"blue\"); }); \u65b9\u5f0f\u4e8c\uff1a\u94fe\u5f0f\u5b9a\u4e49 $(\u5143\u7d20).\u4e8b\u4ef6\u65b9\u6cd5\u540d1(\u8981\u6267\u884c\u7684\u529f\u80fd) .\u4e8b\u4ef6\u65b9\u6cd5\u540d2(\u8981\u6267\u884c\u7684\u529f\u80fd); js //\u65b9\u5f0f\u4e8c \u94fe\u5f0f\u5b9a\u4e49 $(\"#div\").mouseover(function(){ $(this).css(\"background\",\"red\"); }).mouseout(function(){ $(this).css(\"background\",\"blue\"); });","title":"2.4\u3001\u4e8b\u4ef6\u7684\u5207\u6362"},{"location":"jquery/#25","text":"\u65b9\u5f0f\u4e00\uff1a\u4f20\u7edf\u65b9\u5f0f tex for(let i = 0; i < \u5bb9\u5668\u5bf9\u8c61\u957f\u5ea6; i++){ \u6267\u884c\u529f\u80fd; } js //\u65b9\u5f0f\u4e00\uff1a\u4f20\u7edf\u65b9\u5f0f $(\"#btn\").click(function(){ let lis = $(\"li\"); for(let i = 0 ; i < lis.length; i++) { alert(i + \":\" + lis[i].innerHTML); } }); \u65b9\u5f0f\u4e8c\uff1a\u5bf9\u8c61.each()\u65b9\u6cd5 tex \u5bb9\u5668\u5bf9\u8c61.each(function(index,ele){ \u6267\u884c\u529f\u80fd; }); js //\u65b9\u5f0f\u4e8c\uff1a\u5bf9\u8c61.each()\u65b9\u6cd5 $(\"#btn\").click(function(){ let lis = $(\"li\"); lis.each(function(index,ele){ alert(index + \":\" + ele.innerHTML); }); }); \u65b9\u5f0f\u4e09\uff1a$.each()\u65b9\u6cd5 tex $.each(\u5bb9\u5668\u5bf9\u8c61,function(index,ele){ \u6267\u884c\u529f\u80fd; }); js //\u65b9\u5f0f\u4e09\uff1a$.each()\u65b9\u6cd5 $(\"#btn\").click(function(){ let lis = $(\"li\"); $.each(lis,function(index,ele){ alert(index + \":\" + ele.innerHTML); }); }); \u65b9\u5f0f\u56db\uff1afor of\u8bed\u53e5 tex for(ele of \u5bb9\u5668\u5bf9\u8c61){ \u6267\u884c\u529f\u80fd; } js //\u65b9\u5f0f\u56db\uff1afor of \u8bed\u53e5\u904d\u5386: \u7c7b\u4f3c\u4e8ejava \u7684\u589e\u5f3afor \u5faa\u73af, \u662f\u539f\u59cbJS \u63d0\u4f9b\u7684\u529f\u80fd $(\"#btn\").click(function(){ let lis = $(\"li\"); for(ele of lis){ alert(ele.innerHTML); } });","title":"2.5\u3001\u904d\u5386\u64cd\u4f5c"},{"location":"jquery/#26","text":"JS \u5bf9\u8c61\u548c jQuery \u5bf9\u8c61\u76f8\u4e92\u8f6c\u6362 $(JS \u7684 DOM \u5bf9\u8c61)\uff1a\u5c06 JS \u5bf9\u8c61\u8f6c\u4e3a jQuery \u5bf9\u8c61\u3002 jQuery \u5bf9\u8c61[\u7d22\u5f15] jQuery \u5bf9\u8c61.get(\u7d22\u5f15)\uff1a\u5c06 jQuery \u5bf9\u8c61\u8f6c\u4e3a JS \u5bf9\u8c61\u3002 \u4e8b\u4ef6 \u5728 jQuery \u4e2d\u5c06\u4e8b\u4ef6\u5c01\u88c5\u6210\u4e86\u5bf9\u5e94\u7684\u65b9\u6cd5\u3002\u53bb\u6389\u4e86 JS \u4e2d\u7684 .on \u8bed\u6cd5\u3002 on(\u4e8b\u4ef6\u540d\u79f0,\u6267\u884c\u7684\u529f\u80fd)\uff1a\u7ed1\u5b9a\u4e8b\u4ef6\u3002 off(\u4e8b\u4ef6\u540d\u79f0)\uff1a\u89e3\u7ed1\u4e8b\u4ef6\u3002 \u904d\u5386 \u4f20\u7edf\u65b9\u5f0f\u3002 \u5bf9\u8c61.each() \u65b9\u6cd5\u3002 $.each() \u65b9\u6cd5\u3002 for of \u8bed\u53e5\u3002","title":"2.6\u3001\u5c0f\u7ed3"},{"location":"jquery/#3jquery","text":"","title":"3\u3001JQuery\u9009\u62e9\u5668"},{"location":"jquery/#31","text":"\u9009\u62e9\u5668\uff1a\u7c7b\u4f3c\u4e8e CSS \u7684\u9009\u62e9\u5668\uff0c\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u83b7\u53d6\u5143\u7d20\u3002 \u4f8b\u5982\uff1aid \u9009\u62e9\u5668\u3001\u7c7b\u9009\u62e9\u5668\u3001\u5143\u7d20\u9009\u62e9\u5668\u3001\u5c5e\u6027\u9009\u62e9\u5668\u7b49\u7b49\u3002 jQuery \u4e2d\u9009\u62e9\u5668\u7684\u8bed\u6cd5\uff1a$(); \u4ee3\u7801\u5b9e\u73b0 ```html \u57fa\u672c\u9009\u62e9\u5668 div1 div2 div3 //1.\u5143\u7d20\u9009\u62e9\u5668 $(\"\u5143\u7d20\u7684\u540d\u79f0\") let divs = $(\"div\"); //alert(divs.length); //2.id\u9009\u62e9\u5668 $(\"#id\u7684\u5c5e\u6027\u503c\") let div1 = $(\"#div1\"); //alert(div1); //3.\u7c7b\u9009\u62e9\u5668 $(\".class\u7684\u5c5e\u6027\u503c\") let cls = $(\".cls\"); alert(cls.length); ```","title":"3.1\u3001\u57fa\u672c\u9009\u62e9\u5668"},{"location":"jquery/#32","text":"\u4ee3\u7801\u5b9e\u73b0 ```html \u5c42\u7ea7\u9009\u62e9\u5668 s1 s1-1 s1-2 s2 p1 p2 // 1. \u540e\u4ee3\u9009\u62e9\u5668 $(\"A B\"); A\u4e0b\u7684\u6240\u6709B(\u5305\u62ecB\u7684\u5b50\u7ea7) let spans1 = $(\"div span\"); //alert(spans1.length); // 2. \u5b50\u9009\u62e9\u5668 $(\"A > B\"); A\u4e0b\u7684\u6240\u6709B(\u4e0d\u5305\u62ecB\u7684\u5b50\u7ea7) let spans2 = $(\"div > span\"); //alert(spans2.length); // 3. \u5144\u5f1f\u9009\u62e9\u5668 $(\"A + B\"); A\u76f8\u90bb\u7684\u4e0b\u4e00\u4e2aB let ps1 = $(\"div + p\"); //alert(ps1.length); // 4. \u5144\u5f1f\u9009\u62e9\u5668 $(\"A ~ B\"); A\u76f8\u90bb\u7684\u6240\u6709B let ps2 = $(\"div ~ p\"); alert(ps2.length); ```","title":"3.2\u3001\u5c42\u7ea7\u9009\u62e9\u5668"},{"location":"jquery/#33","text":"\u4ee3\u7801\u5b9e\u73b0 ```html \u5c5e\u6027\u9009\u62e9\u5668 //1.\u5c5e\u6027\u540d\u9009\u62e9\u5668 $(\"\u5143\u7d20[\u5c5e\u6027\u540d]\") let in1 = $(\"input[type]\"); //alert(in1.length); //2.\u5c5e\u6027\u503c\u9009\u62e9\u5668 $(\"\u5143\u7d20[\u5c5e\u6027\u540d=\u5c5e\u6027\u503c]\") let in2 = $(\"input[type='password']\"); alert(in2.length); ```","title":"3.3\u3001\u5c5e\u6027\u9009\u62e9\u5668"},{"location":"jquery/#34","text":"\u4ee3\u7801\u5b9e\u73b0 ```html \u8fc7\u6ee4\u5668\u9009\u62e9\u5668 div1 div2 div3 div4 // 1.\u9996\u5143\u7d20\u9009\u62e9\u5668 $(\"A:first\"); let div1 = $(\"div:first\"); //alert(div1.html()); // 2.\u5c3e\u5143\u7d20\u9009\u62e9\u5668 $(\"A:last\"); let div4 = $(\"div:last\"); //alert(div4.html()); // 3.\u975e\u5143\u7d20\u9009\u62e9\u5668 $(\"A:not(B)\"); let divs1 = $(\"div:not(#div2)\"); //alert(divs1.length); // 4.\u5076\u6570\u9009\u62e9\u5668 $(\"A:even\"); let divs2 = $(\"div:even\"); //alert(divs2.length); //alert(divs2[0].innerHTML); //alert(divs2[1].innerHTML); // 5.\u5947\u6570\u9009\u62e9\u5668 $(\"A:odd\"); let divs3 = $(\"div:odd\"); //alert(divs3.length); //alert(divs3[0].innerHTML); //alert(divs3[1].innerHTML); // 6.\u7b49\u4e8e\u7d22\u5f15\u9009\u62e9\u5668 $(\"A:eq(index)\"); let div3 = $(\"div:eq(2)\"); //alert(div3.html()); // 7.\u5927\u4e8e\u7d22\u5f15\u9009\u62e9\u5668 $(\"A:gt(index)\"); let divs4 = $(\"div:gt(1)\"); //alert(divs4.length); //alert(divs4[0].innerHTML); //alert(divs4[1].innerHTML); // 8.\u5c0f\u4e8e\u7d22\u5f15\u9009\u62e9\u5668 $(\"A:lt(index)\"); let divs5 = $(\"div:lt(2)\"); alert(divs5.length); alert(divs5[0].innerHTML); alert(divs5[1].innerHTML); ```","title":"3.4\u3001\u8fc7\u6ee4\u5668\u9009\u62e9\u5668"},{"location":"jquery/#35","text":"\u4ee3\u7801\u5b9e\u73b0 ```html \u8868\u5355\u5c5e\u6027\u9009\u62e9\u5668 \u7537 \u5973 \u5b66\u4e60 \u7761\u89c9 ---\u8bf7\u9009\u62e9--- \u672c\u79d1 \u4e13\u79d1 // 1.\u53ef\u7528\u5143\u7d20\u9009\u62e9\u5668 $(\"A:enabled\"); let ins1 = $(\"input:enabled\"); //alert(ins1.length); // 2.\u4e0d\u53ef\u7528\u5143\u7d20\u9009\u62e9\u5668 $(\"A:disabled\"); let ins2 = $(\"input:disabled\"); //alert(ins2.length); // 3.\u5355\u9009/\u590d\u9009\u6846\u88ab\u9009\u4e2d\u7684\u5143\u7d20 $(\"A:checked\"); let ins3 = $(\"input:checked\"); //alert(ins3.length); //alert(ins3[0].value); //alert(ins3[1].value); //alert(ins3[2].value); // 4.\u4e0b\u62c9\u6846\u88ab\u9009\u4e2d\u7684\u5143\u7d20 $(\"A:selected\"); let select = $(\"select option:selected\"); alert(select.html()); ```","title":"3.5\u3001\u8868\u5355\u5c5e\u6027\u9009\u62e9\u5668"},{"location":"jquery/#36","text":"\u9009\u62e9\u5668\uff1a\u7c7b\u4f3c\u4e8e CSS \u7684\u9009\u62e9\u5668\uff0c\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u83b7\u53d6\u5143\u7d20\u3002 jQuery \u4e2d\u9009\u62e9\u5668\u7684\u8bed\u6cd5\uff1a$(); \u57fa\u672c\u9009\u62e9\u5668 $(\"\u5143\u7d20\u7684\u540d\u79f0\"); $(\"#id\u7684\u5c5e\u6027\u503c\"); $(\".class\u7684\u5c5e\u6027\u503c\"); \u5c42\u7ea7\u9009\u62e9\u5668 $(\"A B\"); $(\"A > B\"); \u5c5e\u6027\u9009\u62e9\u5668 $(\"A[\u5c5e\u6027\u540d]\"); $(\"A[\u5c5e\u6027\u540d=\u5c5e\u6027\u503c]\"); \u8fc7\u6ee4\u5668\u9009\u62e9\u5668 $(\"A:even\"); $(\"A:odd\"); \u8868\u5355\u5c5e\u6027\u9009\u62e9\u5668 $(\"A:disabled\"); $(\"A:checked\"); $(\"A:selected\");","title":"3.6\u3001\u5c0f\u7ed3"},{"location":"jquery/#4jquery_dom","text":"","title":"4\u3001JQuery DOM"},{"location":"jquery/#41","text":"\u5e38\u7528\u65b9\u6cd5 \u4ee3\u7801\u5b9e\u73b0 ```html \u64cd\u4f5c\u6587\u672c \u6211\u662fdiv //1. html() \u83b7\u53d6\u6807\u7b7e\u7684\u6587\u672c\u5185\u5bb9 $(\"#btn1\").click(function(){ //\u83b7\u53d6div\u6807\u7b7e\u7684\u6587\u672c\u5185\u5bb9 let value = $(\"#div\").html(); alert(value); }); //2. html(value) \u8bbe\u7f6e\u6807\u7b7e\u7684\u6587\u672c\u5185\u5bb9\uff0c\u89e3\u6790\u6807\u7b7e $(\"#btn2\").click(function(){ //\u8bbe\u7f6ediv\u6807\u7b7e\u7684\u6587\u672c\u5185\u5bb9 //$(\"#div\").html(\"\u6211\u771f\u7684\u662fdiv\"); $(\"#div\").html(\"<b>\u6211\u771f\u7684\u662fdiv</b>\"); }); ```","title":"4.1\u3001\u64cd\u4f5c\u6587\u672c"},{"location":"jquery/#42","text":"\u5e38\u7528\u65b9\u6cd5 \u4ee3\u7801\u5b9e\u73b0 ```html \u64cd\u4f5c\u5bf9\u8c61 \u5317\u4eac \u4e0a\u6d77 \u5e7f\u5dde \u6df1\u5733 \u52a0\u6cb9 \u96c4\u8d77 /* 1. $(\"\u5143\u7d20\") \u521b\u5efa\u6307\u5b9a\u5143\u7d20 2. append(element) \u6dfb\u52a0\u6210\u6700\u540e\u4e00\u4e2a\u5b50\u5143\u7d20\uff0c\u7531\u6dfb\u52a0\u8005\u5bf9\u8c61\u8c03\u7528 3. appendTo(element) \u6dfb\u52a0\u6210\u6700\u540e\u4e00\u4e2a\u5b50\u5143\u7d20\uff0c\u7531\u88ab\u6dfb\u52a0\u8005\u5bf9\u8c61\u8c03\u7528 4. prepend(element) \u6dfb\u52a0\u6210\u7b2c\u4e00\u4e2a\u5b50\u5143\u7d20\uff0c\u7531\u6dfb\u52a0\u8005\u5bf9\u8c61\u8c03\u7528 5. prependTo(element) \u6dfb\u52a0\u6210\u7b2c\u4e00\u4e2a\u5b50\u5143\u7d20\uff0c\u7531\u88ab\u6dfb\u52a0\u8005\u5bf9\u8c61\u8c03\u7528 6. before(element) \u6dfb\u52a0\u5230\u5f53\u524d\u5143\u7d20\u7684\u524d\u9762\uff0c\u4e24\u8005\u4e4b\u95f4\u662f\u5144\u5f1f\u5173\u7cfb\uff0c\u7531\u6dfb\u52a0\u8005\u5bf9\u8c61\u8c03\u7528 7. after(element) \u6dfb\u52a0\u5230\u5f53\u524d\u5143\u7d20\u7684\u540e\u9762\uff0c\u4e24\u8005\u4e4b\u95f4\u662f\u5144\u5f1f\u5173\u7cfb\uff0c\u7531\u6dfb\u52a0\u8005\u5bf9\u8c61\u8c03\u7528 8. remove() \u5220\u9664\u6307\u5b9a\u5143\u7d20(\u81ea\u5df1\u79fb\u9664\u81ea\u5df1) 9. empty() \u6e05\u7a7a\u6307\u5b9a\u5143\u7d20\u7684\u6240\u6709\u5b50\u5143\u7d20 */ // \u6309\u94ae\u4e00\uff1a\u6dfb\u52a0\u4e00\u4e2aspan\u5230div $(\"#btn1\").click(function(){ let span = $(\"<span>span</span>\"); $(\"#div\").append(span); }); //\u6309\u94ae\u4e8c\uff1a\u5c06\u52a0\u6cb9\u6dfb\u52a0\u5230\u57ce\u5e02\u5217\u8868\u6700\u4e0b\u65b9 $(\"#btn2\").click(function(){ //$(\"#city\").append($(\"#jy\")); $(\"#jy\").appendTo($(\"#city\")); }); //\u6309\u94ae\u4e09\uff1a\u5c06\u52a0\u6cb9\u6dfb\u52a0\u5230\u57ce\u5e02\u5217\u8868\u6700\u4e0a\u65b9 $(\"#btn3\").click(function(){ //$(\"#city\").prepend($(\"#jy\")); $(\"#jy\").prependTo($(\"#city\")); }); //\u6309\u94ae\u56db\uff1a\u5c06\u96c4\u8d77\u6dfb\u52a0\u5230\u4e0a\u6d77\u4e0b\u65b9 $(\"#btn4\").click(function(){ $(\"#sh\").after($(\"#xq\")); }); //\u6309\u94ae\u4e94\uff1a\u5c06\u96c4\u8d77\u6dfb\u52a0\u5230\u4e0a\u6d77\u4e0a\u65b9 $(\"#btn5\").click(function(){ $(\"#sh\").before($(\"#xq\")); }); //\u6309\u94ae\u516d\uff1a\u5c06\u96c4\u8d77\u5220\u9664 $(\"#btn6\").click(function(){ $(\"#xq\").remove(); }); //\u6309\u94ae\u4e03\uff1a\u5c06\u63cf\u8ff0\u5217\u8868\u5168\u90e8\u5220\u9664 $(\"#btn7\").click(function(){ $(\"#desc\").empty(); }); ```","title":"4.2\u3001\u64cd\u4f5c\u5bf9\u8c61"},{"location":"jquery/#43","text":"\u5e38\u7528\u65b9\u6cd5 \u4ee3\u7801\u5b9e\u73b0 ```html \u64cd\u4f5c\u6837\u5f0f .cls1{ background: pink; height: 30px; } \u6211\u662fdiv // 1.css(name) \u83b7\u53d6css\u6837\u5f0f $(\"#btn1\").click(function(){ alert($(\"#div\").css(\"border\")); }); // 2.css(name,value) \u8bbe\u7f6eCSS\u6837\u5f0f $(\"#btn2\").click(function(){ $(\"#div\").css(\"background\",\"blue\"); }); // 3.addClass(value) \u7ed9\u6307\u5b9a\u7684\u5bf9\u8c61\u6dfb\u52a0\u6837\u5f0f\u7c7b\u540d $(\"#btn3\").click(function(){ $(\"#div\").addClass(\"cls1\"); }); // 4.removeClass(value) \u7ed9\u6307\u5b9a\u7684\u5bf9\u8c61\u5220\u9664\u6837\u5f0f\u7c7b\u540d $(\"#btn4\").click(function(){ $(\"#div\").removeClass(\"cls1\"); }); // 5.toggleClass(value) \u5982\u679c\u6ca1\u6709\u6837\u5f0f\u7c7b\u540d\uff0c\u5219\u6dfb\u52a0\u3002\u5982\u679c\u6709\uff0c\u5219\u5220\u9664 $(\"#btn5\").click(function(){ $(\"#div\").toggleClass(\"cls1\"); }); ```","title":"4.3\u3001\u64cd\u4f5c\u6837\u5f0f"},{"location":"jquery/#44","text":"\u5e38\u7528\u65b9\u6cd5 \u4ee3\u7801\u5b9e\u73b0 ```html \u64cd\u4f5c\u5c5e\u6027 \u7537 \u5973 ---\u8bf7\u9009\u62e9--- \u672c\u79d1 \u4e13\u79d1 // 1.attr(name,[value]) \u83b7\u5f97/\u8bbe\u7f6e\u5c5e\u6027\u7684\u503c //\u6309\u94ae\u4e00\uff1a\u83b7\u53d6\u8f93\u5165\u6846\u7684id\u5c5e\u6027 $(\"#btn1\").click(function(){ alert($(\"#username\").attr(\"id\")); }); //\u6309\u94ae\u4e8c\uff1a\u7ed9\u8f93\u5165\u6846\u8bbe\u7f6evalue\u5c5e\u6027 $(\"#btn2\").click(function(){ $(\"#username\").attr(\"value\",\"hello...\"); }); // 2.prop(name,[value]) \u83b7\u5f97/\u8bbe\u7f6e\u5c5e\u6027\u7684\u503c(checked\uff0cselected) //\u6309\u94ae\u4e09\uff1a\u9009\u4e2d\u5973 $(\"#btn3\").click(function(){ $(\"#gender2\").prop(\"checked\",true); }); //\u6309\u94ae\u56db\uff1a\u9009\u4e2d\u672c\u79d1 $(\"#btn4\").click(function(){ $(\"#bk\").prop(\"selected\",true); }); ```","title":"4.4\u3001\u64cd\u4f5c\u5c5e\u6027"},{"location":"jquery/#45","text":"\u64cd\u4f5c\u6587\u672c html() html(\u2026)\uff1a\u83b7\u53d6\u6216\u8bbe\u7f6e\u6807\u7b7e\u7684\u6587\u672c\uff0c\u89e3\u6790\u6807\u7b7e\u3002 \u64cd\u4f5c\u5bf9\u8c61 $(\u201c\u5143\u7d20\u201d)\uff1a\u521b\u5efa\u6307\u5b9a\u5143\u7d20\u3002 append(element)\uff1a\u6dfb\u52a0\u6210\u6700\u540e\u4e00\u4e2a\u5b50\u5143\u7d20\uff0c\u7531\u6dfb\u52a0\u8005\u5bf9\u8c61\u8c03\u7528\u3002 prepend(element)\uff1a\u6dfb\u52a0\u6210\u7b2c\u4e00\u4e2a\u5b50\u5143\u7d20\uff0c\u7531\u6dfb\u52a0\u8005\u5bf9\u8c61\u8c03\u7528\u3002 before(element)\uff1a\u6dfb\u52a0\u5230\u5f53\u524d\u5143\u7d20\u7684\u524d\u9762\uff0c\u4e24\u8005\u4e4b\u95f4\u662f\u5144\u5f1f\u5173\u7cfb\uff0c\u7531\u6dfb\u52a0\u8005\u5bf9\u8c61\u8c03\u7528\u3002 after(element)\uff1a\u6dfb\u52a0\u5230\u5f53\u524d\u5143\u7d20\u7684\u540e\u9762\uff0c\u4e24\u8005\u4e4b\u95f4\u662f\u5144\u5f1f\u5173\u7cfb\uff0c\u7531\u6dfb\u52a0\u8005\u5bf9\u8c61\u8c03\u7528\u3002 remove()\uff1a\u5220\u9664\u6307\u5b9a\u5143\u7d20(\u81ea\u5df1\u79fb\u9664\u81ea\u5df1)\u3002 \u64cd\u4f5c\u6837\u5f0f addClass(value)\uff1a\u7ed9\u6307\u5b9a\u7684\u5bf9\u8c61\u6dfb\u52a0\u6837\u5f0f\u7c7b\u540d\u3002 removeClass(value)\uff1a\u7ed9\u6307\u5b9a\u7684\u5bf9\u8c61\u5220\u9664\u6837\u5f0f\u7c7b\u540d\u3002 \u64cd\u4f5c\u5c5e\u6027 attr(name,[value])\uff1a\u83b7\u5f97/\u8bbe\u7f6e\u5c5e\u6027\u7684\u503c\u3002 prop(name,[value])\uff1a\u83b7\u5f97/\u8bbe\u7f6e\u5c5e\u6027\u7684\u503c(checked\uff0cselected)\u3002","title":"4.5\u3001\u5c0f\u7ed3"},{"location":"jquery/#5","text":"","title":"5\u3001\u7efc\u5408\u6848\u4f8b \u590d\u9009\u6846"},{"location":"jquery/#51","text":"","title":"5.1\u3001\u6848\u4f8b\u6548\u679c"},{"location":"jquery/#52","text":"\u529f\u80fd\u5206\u6790 \u5168\u9009 \u4e3a\u5168\u9009\u6309\u94ae\u7ed1\u5b9a\u5355\u51fb\u4e8b\u4ef6\u3002 \u83b7\u53d6\u6240\u6709\u7684\u5546\u54c1\u9879\u590d\u9009\u6846\u5143\u7d20\uff0c\u4e3a\u5176\u6dfb\u52a0 checked \u5c5e\u6027\uff0c\u5c5e\u6027\u503c\u4e3a true\u3002 \u5168\u4e0d\u9009 \u4e3a\u5168\u4e0d\u9009\u6309\u94ae\u7ed1\u5b9a\u5355\u51fb\u4e8b\u4ef6\u3002 \u83b7\u53d6\u6240\u6709\u7684\u5546\u54c1\u9879\u590d\u9009\u6846\u5143\u7d20\uff0c\u4e3a\u5176\u6dfb\u52a0 checked \u5c5e\u6027\uff0c\u5c5e\u6027\u503c\u4e3a false\u3002 \u53cd\u9009 \u4e3a\u53cd\u9009\u6309\u94ae\u7ed1\u5b9a\u5355\u51fb\u4e8b\u4ef6 \u83b7\u53d6\u6240\u6709\u7684\u5546\u54c1\u9879\u590d\u9009\u6846\u5143\u7d20\uff0c\u4e3a\u5176\u6dfb\u52a0 checked \u5c5e\u6027\uff0c\u5c5e\u6027\u503c\u662f\u76ee\u524d\u76f8\u53cd\u7684\u72b6\u6001\u3002 \u4ee3\u7801\u5b9e\u73b0 <!DOCTYPE html> < html lang = \"en\" > < head > < meta charset = \"UTF-8\" > < meta name = \"viewport\" content = \"width=device-width, initial-scale=1.0\" > < title > \u590d\u9009\u6846 </ title > </ head > < body > < table id = \"tab1\" border = \"1\" width = \"800\" align = \"center\" > < tr > < th style = \"text-align: left\" > < input style = \"background:lightgreen\" id = \"selectAll\" type = \"button\" value = \"\u5168\u9009\" > < input style = \"background:lightgreen\" id = \"selectNone\" type = \"button\" value = \"\u5168\u4e0d\u9009\" > < input style = \"background:lightgreen\" id = \"reverse\" type = \"button\" value = \"\u53cd\u9009\" > </ th > < th > \u5206\u7c7bID </ th > < th > \u5206\u7c7b\u540d\u79f0 </ th > < th > \u5206\u7c7b\u63cf\u8ff0 </ th > < th > \u64cd\u4f5c </ th > </ tr > < tr > < td >< input type = \"checkbox\" class = \"item\" ></ td > < td > 1 </ td > < td > \u624b\u673a\u6570\u7801 </ td > < td > \u624b\u673a\u6570\u7801\u7c7b\u5546\u54c1 </ td > < td >< a href = \"\" > \u4fee\u6539 </ a > | < a href = \"\" > \u5220\u9664 </ a ></ td > </ tr > < tr > < td >< input type = \"checkbox\" class = \"item\" ></ td > < td > 2 </ td > < td > \u7535\u8111\u529e\u516c </ td > < td > \u7535\u8111\u529e\u516c\u7c7b\u5546\u54c1 </ td > < td >< a href = \"\" > \u4fee\u6539 </ a > | < a href = \"\" > \u5220\u9664 </ a ></ td > </ tr > < tr > < td >< input type = \"checkbox\" class = \"item\" ></ td > < td > 3 </ td > < td > \u978b\u9774\u7bb1\u5305 </ td > < td > \u978b\u9774\u7bb1\u5305\u7c7b\u5546\u54c1 </ td > < td >< a href = \"\" > \u4fee\u6539 </ a > | < a href = \"\" > \u5220\u9664 </ a ></ td > </ tr > < tr > < td >< input type = \"checkbox\" class = \"item\" ></ td > < td > 4 </ td > < td > \u5bb6\u5c45\u9970\u54c1 </ td > < td > \u5bb6\u5c45\u9970\u54c1\u7c7b\u5546\u54c1 </ td > < td >< a href = \"\" > \u4fee\u6539 </ a > | < a href = \"\" > \u5220\u9664 </ a ></ td > </ tr > </ table > </ body > < script src = \"js/jquery-3.3.1.min.js\" ></ script > < script > //\u5168\u9009 //1.\u4e3a\u5168\u9009\u6309\u94ae\u6dfb\u52a0\u5355\u51fb\u4e8b\u4ef6 $ ( \"#selectAll\" ). click ( function (){ //2.\u83b7\u53d6\u6240\u6709\u7684\u5546\u54c1\u590d\u9009\u6846\u5143\u7d20\uff0c\u4e3a\u5176\u6dfb\u52a0checked\u5c5e\u6027\uff0c\u5c5e\u6027\u503ctrue $ ( \".item\" ). prop ( \"checked\" , true ); }); //\u5168\u4e0d\u9009 //1.\u4e3a\u5168\u4e0d\u9009\u6309\u94ae\u6dfb\u52a0\u5355\u51fb\u4e8b\u4ef6 $ ( \"#selectNone\" ). click ( function (){ //2.\u83b7\u53d6\u6240\u6709\u7684\u5546\u54c1\u590d\u9009\u6846\u5143\u7d20\uff0c\u4e3a\u5176\u6dfb\u52a0checked\u5c5e\u6027\uff0c\u5c5e\u6027\u503cfalse $ ( \".item\" ). prop ( \"checked\" , false ); }); //\u53cd\u9009 //1.\u4e3a\u53cd\u9009\u6309\u94ae\u6dfb\u52a0\u5355\u51fb\u4e8b\u4ef6 $ ( \"#reverse\" ). click ( function (){ //2.\u83b7\u53d6\u6240\u6709\u7684\u5546\u54c1\u590d\u9009\u6846\u5143\u7d20\uff0c\u4e3a\u5176\u6dfb\u52a0checked\u5c5e\u6027\uff0c\u5c5e\u6027\u503c\u662f\u76ee\u524d\u76f8\u53cd\u7684\u72b6\u6001 let items = $ ( \".item\" ); items . each ( function (){ $ ( this ). prop ( \"checked\" , ! $ ( this ). prop ( \"checked\" )); }); }); </ script > </ html >","title":"5.2\u3001\u5206\u6790\u548c\u5b9e\u73b0"},{"location":"jquery/#6","text":"","title":"6\u3001\u7efc\u5408\u6848\u4f8b \u968f\u673a\u56fe\u7247"},{"location":"jquery/#61","text":"","title":"6.1\u3001\u6848\u4f8b\u6548\u679c"},{"location":"jquery/#62","text":"\u529f\u80fd\u5206\u6790 \u51c6\u5907\u4e00\u4e2a\u6570\u7ec4 \u5b9a\u4e49\u8ba1\u6570\u5668 \u5b9a\u4e49\u5b9a\u65f6\u5668\u5bf9\u8c61 \u5b9a\u4e49\u56fe\u7247\u8def\u5f84\u53d8\u91cf \u4e3a\u5f00\u59cb\u6309\u94ae\u7ed1\u5b9a\u5355\u51fb\u4e8b\u4ef6 \u8bbe\u7f6e\u6309\u94ae\u72b6\u6001 \u8bbe\u7f6e\u5b9a\u65f6\u5668\uff0c\u5faa\u73af\u663e\u793a\u56fe\u7247 \u5faa\u73af\u83b7\u53d6\u56fe\u7247\u8def\u5f84 \u5c06\u5f53\u524d\u56fe\u7247\u663e\u793a\u5230\u5c0f\u56fe\u7247\u4e0a \u8ba1\u6570\u5668\u81ea\u589e \u4ee3\u7801\u5b9e\u73b0 ```html \u968f\u673a\u56fe\u7247 //1.\u51c6\u5907\u4e00\u4e2a\u6570\u7ec4 let imgs = [ \"img/01.jpg\", \"img/02.jpg\", \"img/03.jpg\", \"img/04.jpg\", \"img/05.jpg\", \"img/06.jpg\", \"img/07.jpg\", \"img/08.jpg\", \"img/09.jpg\", \"img/10.jpg\"]; //2.\u5b9a\u4e49\u8ba1\u6570\u5668\u53d8\u91cf let count = 0; //3.\u58f0\u660e\u5b9a\u65f6\u5668\u5bf9\u8c61 let time = null; //4.\u58f0\u660e\u56fe\u7247\u8def\u5f84\u53d8\u91cf let imgSrc = \"\"; //5.\u4e3a\u5f00\u59cb\u6309\u94ae\u7ed1\u5b9a\u5355\u51fb\u4e8b\u4ef6 $(\"#startBtn\").click(function(){ //6.\u8bbe\u7f6e\u6309\u94ae\u72b6\u6001 //\u7981\u7528\u5f00\u59cb\u6309\u94ae $(\"#startBtn\").prop(\"disabled\",true); //\u542f\u7528\u505c\u6b62\u6309\u94ae $(\"#stopBtn\").prop(\"disabled\",false); //7.\u8bbe\u7f6e\u5b9a\u65f6\u5668\uff0c\u5faa\u73af\u663e\u793a\u56fe\u7247 time = setInterval(function(){ //8.\u5faa\u73af\u83b7\u53d6\u56fe\u7247\u8def\u5f84 let index = count % imgs.length; // 0%10=0 1%10=1 2%10=2 .. 9%10=9 10%10=0 //9.\u5c06\u5f53\u524d\u56fe\u7247\u663e\u793a\u5230\u5c0f\u56fe\u7247\u4e0a imgSrc = imgs[index]; $(\"#small\").prop(\"src\",imgSrc); //10.\u8ba1\u6570\u5668\u81ea\u589e count++; },10); }); ```","title":"6.2\u3001\u52a8\u6001\u5207\u6362\u5c0f\u56fe\u7684\u5206\u6790\u548c\u5b9e\u73b0"},{"location":"jquery/#63","text":"\u529f\u80fd\u5206\u6790 \u4e3a\u505c\u6b62\u6309\u94ae\u7ed1\u5b9a\u5355\u51fb\u4e8b\u4ef6 \u53d6\u6d88\u5b9a\u65f6\u5668 \u8bbe\u7f6e\u6309\u94ae\u72b6\u6001 \u5c06\u56fe\u7247\u663e\u793a\u5230\u5927\u56fe\u7247\u4e0a \u4ee3\u7801\u5b9e\u73b0 ```js //11.\u4e3a\u505c\u6b62\u6309\u94ae\u7ed1\u5b9a\u5355\u51fb\u4e8b\u4ef6 $(\"#stopBtn\").click(function(){ //12.\u53d6\u6d88\u5b9a\u65f6\u5668 clearInterval(time); // 13 . \u8bbe\u7f6e\u6309\u94ae\u72b6\u6001 // \u542f\u7528\u5f00\u59cb\u6309\u94ae $( \"#startBtn\" ) . prop ( \"disabled\" , false ); // \u7981\u7528\u505c\u6b62\u6309\u94ae $( \"#stopBtn\" ) . prop ( \"disabled\" , true ); // 14 . \u5c06\u56fe\u7247\u663e\u793a\u5230\u5927\u56fe\u7247\u4e0a $( \"#big\" ) . prop ( \"src\" , imgSrc ); $( \"#big\" ) . prop ( \"style\" , \"width: 400px; height: 400px;\" ); }); ```","title":"6.3\u3001\u663e\u793a\u5927\u56fe\u7684\u5206\u6790\u548c\u5b9e\u73b0"},{"location":"redis/day01/","text":"1. Redis \u7b80\u4ecb \u00b6 Redis \u7684\u4e0b\u8f7d\u4e0e\u5b89\u88c5 \u00b6 \u672c\u8bfe\u7a0b\u6240\u793a\uff0c\u5747\u57fa\u4e8eCenter OS7\u5b89\u88c5Redis\u3002 0 ) \u5982\u679c wget \u547d\u4ee4\u627e\u4e0d\u5230 yum - y install wget 0 ) \u5982\u679cmake \u62a5\u9519 \u5b89\u88c5 c \u8bed\u8a00\u7f16\u8bd1\u73af\u5883 yum install gcc - c ++ (1)\u4e0b\u8f7dRedis \u4e0b\u8f7d\u5b89\u88c5\u5305\uff1a wget http://download.redis.io/releases/redis-5.0.0.tar.gz \u89e3\u538b\u5b89\u88c5\u5305\uff1a tar -xvf redis-5.0.0.tar.gz \u7f16\u8bd1\uff08\u5728\u89e3\u538b\u7684\u76ee\u5f55\u4e2d\u6267\u884c\uff09\uff1a make \u5b89\u88c5\uff08\u5728\u89e3\u538b\u7684\u76ee\u5f55\u4e2d\u6267\u884c\uff09\uff1a make install \uff082\uff09\u5b89\u88c5 Redis redis-server\uff0c\u670d\u52a1\u5668\u542f\u52a8\u547d\u4ee4 \u5ba2\u6237\u7aef\u542f\u52a8\u547d\u4ee4 redis-cli\uff0credis\u6838\u5fc3\u914d\u7f6e\u6587\u4ef6 redis.conf\uff0cRDB\u6587\u4ef6\u68c0\u67e5\u5de5\u5177\uff08\u5feb\u7167\u6301\u4e45\u5316\u6587\u4ef6\uff09 redis-check-dump\uff0cAOF\u6587\u4ef6\u4fee\u590d\u5de5\u5177 redis-check-aof Redis\u670d\u52a1\u5668\u542f\u52a8 \u00b6 Redis\u670d\u52a1\u5668\u542f\u52a8 \u00b6 \u542f\u52a8\u670d\u52a1\u5668\u2014\u2014\u53c2\u6570\u542f\u52a8 redis-server [ --port port ] \u8303\u4f8b redis-server --port 6379 \u542f\u52a8\u670d\u52a1\u5668\u2014\u2014\u914d\u7f6e\u6587\u4ef6\u542f\u52a8 redis-server config_file_name \u8303\u4f8b redis-server redis.conf Redis\u5ba2\u6237\u7aef\u542f\u52a8 \u00b6 \u542f\u52a8\u5ba2\u6237\u7aef redis-cli [ -h host ] [ -p port ] \u8303 \u4f8b redis-cli -h 61 .129.65.248 -p 6384 \u6ce8\u610f\uff1a\u670d\u52a1\u5668\u542f\u52a8\u6307\u5b9a\u7aef\u53e3\u4f7f\u7528\u7684\u662f--port\uff0c\u5ba2\u6237\u7aef\u542f\u52a8\u6307\u5b9a\u7aef\u53e3\u4f7f\u7528\u7684\u662f-p\u3002-\u7684\u6570\u91cf\u4e0d\u540c\u3002 Redis\u57fa\u7840\u73af\u5883\u8bbe\u7f6e\u7ea6\u5b9a \u00b6 \u521b\u5efa\u914d\u7f6e\u6587\u4ef6\u5b58\u50a8\u76ee\u5f55 mkdir conf \u521b\u5efa\u670d\u52a1\u5668\u6587\u4ef6\u5b58\u50a8\u76ee\u5f55\uff08\u5305\u542b\u65e5\u5fd7\u3001\u6570\u636e\u3001\u4e34\u65f6\u914d\u7f6e\u6587\u4ef6\u7b49\uff09 mkdir data \u521b\u5efa\u5feb\u901f\u8bbf\u95ee\u94fe\u63a5 ln -s redis-5.0.0 redis \u914d\u7f6e\u6587\u4ef6\u542f\u52a8\u4e0e\u5e38\u7528\u914d\u7f6e \u00b6 # \u67e5\u770b\u914d\u7f6e\u547d\u4ee4 cat redis.conf | grep -v '#' | grep -v '^$' # \u90a3\u4e9bip \u80fd\u8bbf\u95eeredis #bind 127.0.0.1 # \u7aef\u53e3\u53f7 port 6379 # \u8d85\u65f6\u65f6\u95f4 #timeout 0 # \u662f\u5426\u540e\u53f0\u542f\u52a8 daemonize yes # \u65e5\u5fd7\u6587\u4ef6 logfile \"log_6379.log\" # \u6570\u636e\u6587\u4ef6\u4f4d\u7f6e dir /usr/local/redis/data \u670d\u52a1\u5668\u7aef\u8bbe\u5b9a \u00b6 \u8bbe\u7f6e\u670d\u52a1\u5668\u4ee5\u5b88\u62a4\u8fdb\u7a0b\u7684\u65b9\u5f0f\u8fd0\u884c\uff0c\u5f00\u542f\u540e\u670d\u52a1\u5668\u63a7\u5236\u53f0\u4e2d\u5c06\u6253\u5370\u670d\u52a1\u5668\u8fd0\u884c\u4fe1\u606f\uff08\u540c\u65e5\u5fd7\u5185\u5bb9\u76f8\u540c\uff09 daemonize yes | no \u7ed1\u5b9a\u4e3b\u673a\u5730\u5740 bind ip \u8bbe\u7f6e\u670d\u52a1\u5668\u7aef\u53e3 port port \u8bbe\u7f6e\u670d\u52a1\u5668\u6587\u4ef6\u4fdd\u5b58\u5730\u5740 dir path \u5ba2\u6237\u7aef\u914d\u7f6e \u00b6 \u670d\u52a1\u5668\u5141\u8bb8\u5ba2\u6237\u7aef\u8fde\u63a5\u6700\u5927\u6570\u91cf\uff0c\u9ed8\u8ba40\uff0c\u8868\u793a\u65e0\u9650\u5236\u3002\u5f53\u5ba2\u6237\u7aef\u8fde\u63a5\u5230\u8fbe\u4e0a\u9650\u540e\uff0cRedis\u4f1a\u62d2\u7edd\u65b0\u7684\u8fde\u63a5 maxclients count \u5ba2\u6237\u7aef\u95f2\u7f6e\u7b49\u5f85\u6700\u5927\u65f6\u957f\uff0c\u8fbe\u5230\u6700\u5927\u503c\u540e\u5173\u95ed\u5bf9\u5e94\u8fde\u63a5\u3002\u5982\u9700\u5173\u95ed\u8be5\u529f\u80fd\uff0c\u8bbe\u7f6e\u4e3a 0 timeout seconds \u65e5\u5fd7\u914d\u7f6e \u00b6 \u8bbe\u7f6e\u670d\u52a1\u5668\u4ee5\u6307\u5b9a\u65e5\u5fd7\u8bb0\u5f55\u7ea7\u522b loglevel debug | verbose | notice | warning \u65e5\u5fd7\u8bb0\u5f55\u6587\u4ef6\u540d logfile filename \u6ce8\u610f\uff1a\u65e5\u5fd7\u7ea7\u522b\u5f00\u53d1\u671f\u8bbe\u7f6e\u4e3averbose\u5373\u53ef\uff0c\u751f\u4ea7\u73af\u5883\u4e2d\u914d\u7f6e\u4e3anotice\uff0c\u7b80\u5316\u65e5\u5fd7\u8f93\u51fa\u91cf\uff0c\u964d\u4f4e\u5199\u65e5\u5fd7IO\u7684\u9891\u5ea6\u3002 Redis\u57fa\u672c\u64cd\u4f5c \u00b6 \u547d\u4ee4\u884c\u6a21\u5f0f\u5de5\u5177\u4f7f\u7528\u601d\u8003 \u00b6 \u529f\u80fd\u6027\u547d\u4ee4 \u5e2e\u52a9\u4fe1\u606f\u67e5\u9605 \u9000\u51fa\u6307\u4ee4 \u6e05\u9664\u5c4f\u5e55\u4fe1\u606f \u4fe1\u606f\u8bfb\u5199 \u00b6 \u8bbe\u7f6e key\uff0cvalue \u6570\u636e set key value \u8303\u4f8b set name itheima \u6839\u636e key \u67e5\u8be2\u5bf9\u5e94\u7684 value\uff0c\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u8fd4\u56de\u7a7a\uff08nil\uff09 get key \u8303\u4f8b get name \u5e2e\u52a9\u4fe1\u606f \u00b6 \u83b7\u53d6\u547d\u4ee4\u5e2e\u52a9\u6587\u6863 help [ command ] \u8303\u4f8b help set \u83b7\u53d6\u7ec4\u4e2d\u6240\u6709\u547d\u4ee4\u4fe1\u606f\u540d\u79f0 help [ @group-name ] \u8303\u4f8b help @string \u9000\u51fa\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\u6a21\u5f0f \u9000\u51fa\u5ba2\u6237\u7aef quit exit \u5feb\u6377\u952e Ctrl+C 1.6.4 redis\u5165\u95e8\u603b\u7ed3 \u00b6 \u5230\u8fd9\u91cc\uff0cRedis \u5165\u95e8\u7684\u76f8\u5173\u77e5\u8bc6\uff0c\u6211\u4eec\u5c31\u5168\u90e8\u5b66\u4e60\u5b8c\u4e86\uff0c\u518d\u6765\u56de\u987e\u4e00\u4e0b\uff0c\u8fd9\u4e2a\u90e8\u5206\u6211\u4eec\u4e3b\u8981\u8bb2\u89e3\u4e86\u54ea\u4e9b\u5185\u5bb9\u5462\uff1f \u9996\u5148\uff0c\u6211\u4eec\u5bf9Redis\u8fdb\u884c\u4e86\u4e00\u4e2a\u7b80\u5355\u4ecb\u7ecd\uff0c\u5305\u62ecNoSQL\u7684\u6982\u5ff5\u3001Redis\u7684\u6982\u5ff5\u7b49\u3002 \u7136\u540e\uff0c\u6211\u4eec\u4ecb\u7ecd\u4e86Redis \u7684\u4e0b\u8f7d\u4e0e\u5b89\u88c5\u3002\u5305\u62ec\u4e0b\u8f7d\u4e0e\u5b89\u88c5\u3001\u670d\u52a1\u5668\u4e0e\u5ba2\u6237\u7aef\u542f\u52a8\u3001\u4ee5\u53ca\u76f8\u5173\u914d\u7f6e\u6587\u4ef6\uff083\u7c7b\uff09\u3002 \u6700\u540e\uff0c\u6211\u4eec\u4ecb\u7ecd\u4e86Redis \u7684\u57fa\u672c\u64cd\u4f5c\u3002\u5305\u62ec\u6570\u636e\u8bfb\u5199\u3001\u9000\u51fa\u4e0e\u5e2e\u52a9\u4fe1\u606f\u83b7\u53d6\u3002 2. \u6570\u636e\u7c7b\u578b \u00b6 2.1 Redis \u6570\u636e\u7c7b\u578b(5\u79cd\u5e38\u7528) \u00b6 \u57fa\u4e8e\u4ee5\u4e0a\u6570\u636e\u7279\u5f81\u6211\u4eec\u8fdb\u884c\u5206\u6790\uff0c\u6700\u7ec8\u5f97\u51fa\u6765\u6211\u4eec\u7684Redis\u4e2d\u8981\u8bbe\u8ba15\u79cd \u6570\u636e\u7c7b\u578b\uff1a string\u3001hash\u3001list\u3001set\u3001sorted_set/zset\uff08\u5e94\u7528\u6027\u8f83\u4f4e\uff09 2.2 string\u6570\u636e\u7c7b\u578b \u00b6 \u5728\u5b66\u4e60\u7b2c\u4e00\u4e2a\u6570\u636e\u7c7b\u578b\u4e4b\u524d\uff0c\u5148\u7ed9\u5927\u5bb6\u4ecb\u7ecd\u4e00\u4e0b\uff0c\u5728\u968f\u540e\u8fd9\u90e8\u5206\u5185\u5bb9\u7684\u5b66\u4e60\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u6bcf\u4e00\u79cd\u6570\u636e\u7c7b\u578b\u90fd\u5206\u6210\u4e09\u5757\u6765\u8bb2\uff1a\u9996\u5148\u662f\u8bb2\u4e0b\u5b83\u7684\u57fa\u672c\u64cd\u4f5c\uff0c\u63a5\u4e0b\u6765\u8bb2\u4e00\u4e9b\u5b83\u7684\u6269\u5c55\u64cd\u4f5c\uff0c\u6700\u540e\u6211\u4eec\u4f1a\u53bb\u505a\u4e00\u4e2a\u5c0f\u7684\u6848\u4f8b\u5206\u6790\u3002 2.2.1Redis \u6570\u636e\u5b58\u50a8\u683c\u5f0f \u00b6 \u5728\u5b66\u4e60string\u8fd9\u4e2a\u6570\u636e\u5f62\u5f0f\u4e4b\u524d\uff0c\u6211\u4eec\u5148\u8981\u660e\u767dstring\u5230\u5e95\u662f\u4fee\u9970\u4ec0\u4e48\u7684\u3002\u6211\u4eec\u77e5\u9053redis \u81ea\u8eab\u662f\u4e00\u4e2a Map\uff0c\u5176\u4e2d\u6240\u6709\u7684\u6570\u636e\u90fd\u662f\u91c7\u7528 key : value \u7684\u5f62\u5f0f\u5b58\u50a8\u3002 \u5bf9\u4e8e\u8fd9\u79cd\u7ed3\u6784\u6765\u8bf4\uff0c\u6211\u4eec\u7528\u6765\u5b58\u50a8\u6570\u636e\u4e00\u5b9a\u662f\u4e00\u4e2a\u503c\u524d\u9762\u5bf9\u5e94\u4e00\u4e2a\u540d\u79f0\u3002\u6211\u4eec\u901a\u8fc7\u540d\u79f0\u6765\u8bbf\u95ee\u540e\u9762\u7684\u503c\u3002\u6309\u7167\u8fd9\u79cd\u5f62\u52bf\uff0c\u6211\u4eec\u53ef\u4ee5\u5bf9\u51fa\u6765\u6211\u4eec\u7684\u5b58\u50a8\u683c\u5f0f\u3002\u524d\u9762\u8fd9\u4e00\u90e8\u5206\u6211\u4eec\u79f0\u4e3akey\u3002\u540e\u9762\u7684\u4e00\u90e8\u5206\u79f0\u4e3avalue\uff0c\u800c\u6211\u4eec\u7684\u6570\u636e\u7c7b\u578b\uff0c\u4ed6\u4e00\u5b9a\u662f\u4fee\u9970value\u7684\u3002 \u6570\u636e\u7c7b\u578b\u6307\u7684\u662f\u5b58\u50a8\u7684\u6570\u636e\u7684\u7c7b\u578b\uff0c\u4e5f\u5c31\u662f value \u90e8\u5206\u7684\u7c7b\u578b\uff0ckey \u90e8\u5206\u6c38\u8fdc\u90fd\u662f\u5b57\u7b26\u4e32\u3002 2.2.2 string \u7c7b\u578b \u00b6 \uff081\uff09\u5b58\u50a8\u7684\u6570\u636e\uff1a\u5355\u4e2a\u6570\u636e\uff0c\u6700\u7b80\u5355\u7684\u6570\u636e\u5b58\u50a8\u7c7b\u578b\uff0c\u4e5f\u662f\u6700\u5e38\u7528\u7684\u6570\u636e\u5b58\u50a8\u7c7b\u578b\u3002 string\uff0c\u4ed6\u5c31\u662f\u5b58\u4e00\u4e2a\u5b57\u7b26\u4e32\u513f\uff0c\u6ce8\u610f\u662fvalue\u90a3\u4e00\u90e8\u5206\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5b83\u662fredis\u4e2d\u6700\u57fa\u672c\u3001\u6700\u7b80\u5355\u7684\u5b58\u50a8\u6570\u636e\u7684\u683c\u5f0f\u3002 \uff082\uff09\u5b58\u50a8\u6570\u636e\u7684\u683c\u5f0f\uff1a\u4e00\u4e2a\u5b58\u50a8\u7a7a\u95f4\u4fdd\u5b58\u4e00\u4e2a\u6570\u636e \u6bcf\u4e00\u4e2a\u7a7a\u95f4\u4e2d\u53ea\u80fd\u4fdd\u5b58\u4e00\u4e2a\u5b57\u7b26\u4e32\u4fe1\u606f\uff0c\u8fd9\u4e2a\u4fe1\u606f\u91cc\u8fb9\u5982\u679c\u662f\u5b58\u7684\u7eaf\u6570\u5b57\uff0c\u4ed6\u4e5f\u80fd\u5f53\u6570\u5b57\u4f7f\u7528\uff0c\u6211\u4eec\u6765\u770b\u4e00\u4e0b\uff0c\u8fd9\u662f\u6211\u4eec\u7684\u6570\u636e\u7684\u5b58\u50a8\u7a7a\u95f4\u3002 \uff083\uff09\u5b58\u50a8\u5185\u5bb9\uff1a\u901a\u5e38\u4f7f\u7528\u5b57\u7b26\u4e32\uff0c\u5982\u679c\u5b57\u7b26\u4e32\u4ee5\u6574\u6570\u7684\u5f62\u5f0f\u5c55\u793a\uff0c\u53ef\u4ee5\u4f5c\u4e3a\u6570\u5b57\u64cd\u4f5c\u4f7f\u7528. \u4e00\u4e2akey\u5bf9\u4e00\u4e2avalue\uff0c\u800c\u8fd9\u4e2aitheima\u5c31\u662f\u6211\u4eec\u6240\u8bf4\u7684string\u7c7b\u578b\uff0c\u5f53\u7136\u5b83\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u7eaf\u6570\u5b57\u7684\u683c\u5f0f\u3002 2.2.3 string \u7c7b\u578b\u6570\u636e\u7684\u57fa\u672c\u64cd\u4f5c \u00b6 \uff081\uff09\u57fa\u7840\u6307\u4ee4 \u6dfb\u52a0/\u4fee\u6539\u6570\u636e\u6dfb\u52a0/\u4fee\u6539\u6570\u636e set key value \u83b7\u53d6\u6570\u636e get key \u5220\u9664\u6570\u636e del key \u5224\u5b9a\u6027\u6dfb\u52a0\u6570\u636e setnx key value \u6dfb\u52a0/\u4fee\u6539\u591a\u4e2a\u6570\u636e mset key1 value1 key2 value2 \u2026 \u83b7\u53d6\u591a\u4e2a\u6570\u636e mget key1 key2 \u2026 \u83b7\u53d6\u6570\u636e\u5b57\u7b26\u4e2a\u6570\uff08\u5b57\u7b26\u4e32\u957f\u5ea6\uff09 strlen key \u8ffd\u52a0\u4fe1\u606f\u5230\u539f\u59cb\u4fe1\u606f\u540e\u90e8\uff08\u5982\u679c\u539f\u59cb\u4fe1\u606f\u5b58\u5728\u5c31\u8ffd\u52a0\uff0c\u5426\u5219\u65b0\u5efa\uff09 append key value \uff082\uff09\u5355\u6570\u636e\u64cd\u4f5c\u4e0e\u591a\u6570\u636e\u64cd\u4f5c\u7684\u9009\u62e9\u4e4b\u60d1 \u5373set \u4e0emset\u7684\u5173\u7cfb\u3002\u8fd9\u5bf9\u4e8e\u8fd9\u4e24\u4e2a\u64cd\u4f5c\u6765\u8bf4\uff0c\u6ca1\u6709\u4ec0\u4e48\u4f60\u5e94\u8be5\u9009\u54ea\u4e2a\uff0c\u800c\u662f\u4ed6\u4eec\u81ea\u5df1\u7684\u7279\u5f81\u662f\u4ec0\u4e48\uff0c\u4f60\u8981\u6839\u636e\u8fd9\u4e2a\u7279\u5f81\u53bb\u6bd4\u5bf9\u4f60\u7684\u4e1a\u52a1\uff0c\u770b\u770b\u7a76\u7adf\u9002\u7528\u4e8e\u54ea\u4e2a\u3002 \u5047\u5982\u8bf4\u8fd9\u662f\u6211\u4eec\u73b0\u5728\u7684\u670d\u52a1\u5668\uff0c\u4ed6\u8981\u5411redis\u8981\u6570\u636e\u7684\u8bdd\uff0c\u5b83\u4f1a\u53d1\u51fa\u4e00\u6761\u6307\u4ee4\u3002\u90a3\u4e48\u5f53\u8fd9\u6761\u6307\u4ee4\u53d1\u8fc7\u6765\u7684\u65f6\u5019\uff0c\u6bd4\u5982\u8bf4\u662f\u8fd9\u4e2aset\u6307\u4ee4\u8fc7\u6765\uff0c\u90a3\u4e48\u5b83\u4f1a\u628a\u8fd9\u4e2a\u7ed3\u679c\u8fd4\u56de\u7ed9\u4f60\uff0c\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u8981\u601d\u8003\u8fd9\u91cc\u8fb9\u4e00\u5171\u7ecf\u8fc7\u4e86\u591a\u957f\u65f6\u95f4\u3002 \u9996\u5148\uff0c\u53d1\u9001set\u6307\u4ee4\u8981\u65f6\u95f4\uff0c\u8fd9\u662f\u7f51\u7edc\u7684\u4e00\u4e2a\u65f6\u95f4\uff0c\u63a5\u4e0b\u6765redis\u8981\u53bb\u8fd0\u884c\u8fd9\u4e2a\u6307\u4ee4\u8981\u6d88\u8017\u65f6\u95f4\uff0c\u6700\u7ec8\u628a\u8fd9\u4e2a\u7ed3\u679c\u8fd4\u56de\u7ed9\u4f60\u53c8\u6709\u4e00\u4e2a\u65f6\u95f4\uff0c\u8fd9\u4e2a\u65f6\u95f4\u53c8\u662f\u4e00\u4e2a\u7f51\u7edc\u7684\u65f6\u95f4\uff0c\u90a3\u6211\u4eec\u53ef\u4ee5\u7406\u89e3\u4e3a\uff1a\u4e00\u4e2a\u6307\u4ee4\u53d1\u9001\u7684\u8fc7\u7a0b\u4e2d\u9700\u8981\u6d88\u8017\u8fd9\u6837\u7684\u65f6\u95f4. \u4f46\u662f\u5982\u679c\u8bf4\u73b0\u5728\u4e0d\u662f\u4e00\u6761\u6307\u4ee4\u4e86\uff0c\u4f60\u8981\u53d13\u4e2aset\u7684\u8bdd\uff0c\u8fd8\u8981\u591a\u957f\u65f6\u95f4\u5462\uff1f\u5bf9\u5e94\u7684\u53d1\u9001\u65f6\u95f4\u8981\u4e583\u4e86\uff0c\u56e0\u4e3a\u8fd9\u662f\u4e09\u4e2a\u5355\u6761\u6307\u4ee4,\u800c\u8fd0\u884c\u7684\u64cd\u4f5c\u65f6\u95f4\u5462\uff0c\u5b83\u4e5f\u8981\u4e583\u4e86\uff0c\u4f46\u6700\u7ec8\u8fd4\u56de\u7684\u4e5f\u8981\u53d13\u6b21\uff0c\u6240\u4ee5\u8fd9\u8fb9\u4e5f\u8981\u4e583\u3002 \u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u7ed3\u8bba\uff1a\u5355\u6307\u4ee4\u53d13\u6761\u5b83\u9700\u8981\u7684\u65f6\u95f4\uff0c\u5047\u5b9a\u4ed6\u4eec\u4e24\u4e2a\u4e00\u6837\uff0c\u662f6\u4e2a\u7f51\u7edc\u65f6\u95f4\u52a03\u4e2a\u5904\u7406\u65f6\u95f4\uff0c\u5982\u679c\u6211\u4eec\u628a\u5b83\u5408\u6210\u4e00\u4e2amset\u5462\uff0c\u6211\u4eec\u60f3\u4e00\u60f3\u3002 \u5047\u5982\u8bf4\u7528\u591a\u6307\u4ee4\u53d13\u4e2a\u6307\u4ee4\u7684\u8bdd\uff0c\u5176\u5b9e\u53ea\u9700\u8981\u53d1\u4e00\u6b21\u5c31\u884c\u4e86\u3002\u8fd9\u6837\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u7ed3\u8bba\uff0c\u591a\u6307\u4ee4\u53d13\u4e2a\u6307\u4ee4\u7684\u8bdd\uff0c\u5176\u5b9e\u5b83\u662f\u4e24\u4e2a\u7f51\u7edc\u65f6\u95f4\u52a0\u4e0a3\u4e2aredis\u7684\u64cd\u4f5c\u65f6\u95f4\uff0c\u4e3a\u4ec0\u4e48\u8fd9\u5199\u4e00\u4e2a\u5c0f\u52a0\u53f7\u5462\uff0c\u5c31\u662f\u56e0\u4e3a\u6bd5\u7adf\u53d1\u7684\u4fe1\u606f\u91cf\u53d8\u5927\u4e86\uff0c\u6240\u4ee5\u7f51\u7edc\u65f6\u95f4\u6709\u53ef\u80fd\u4f1a\u53d8\u957f\u3002 \u90a3\u4e48\u901a\u8fc7\u8fd9\u5f20\u56fe\uff0c\u4f60\u5c31\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u7ed3\u8bba\uff0c\u6211\u4eec\u5355\u6307\u4ee4\u548c\u591a\u6307\u4ee4\u4ed6\u4eec\u7684\u5dee\u522b\u5c31\u5728\u4e8e\u4f60\u53d1\u9001\u7684\u6b21\u6570\u662f\u591a\u8fd8\u662f\u5c11\u3002\u5f53\u4f60\u5f71\u54cd\u7684\u6570\u636e\u6bd4\u8f83\u5c11\u7684\u65f6\u5019\uff0c\u4f60\u53ef\u4ee5\u7528\u5355\u6307\u4ee4\uff0c\u4e5f\u53ef\u4ee5\u7528\u591a\u6307\u4ee4\u3002\u4f46\u662f\u4e00\u65e6\u8fd9\u4e2a\u91cf\u5927\u4e86\uff0c\u4f60\u5c31\u8981\u9009\u62e9\u591a\u6307\u4ee4\u4e86\uff0c\u4ed6\u7684\u6548\u7387\u4f1a\u9ad8\u4e00\u4e9b\u3002 2.3 string \u7c7b\u578b\u6570\u636e\u7684\u6269\u5c55\u64cd\u4f5c \u00b6 2.3.1 string \u7c7b\u578b\u6570\u636e\u7684\u6269\u5c55\u64cd\u4f5c \u00b6 \u4e0b\u9762\u6211\u4eec\u6765\u770b\u4e00string\u7684\u6269\u5c55\u64cd\u4f5c\uff0c\u5206\u6210\u4e24\u5927\u5757\uff1a\u4e00\u5757\u662f\u5bf9\u6570\u5b57\u8fdb\u884c\u64cd\u4f5c\u7684\uff0c\u7b2c\u4e8c\u5757\u662f\u5bf9\u6211\u4eec\u7684key\u7684\u65f6\u95f4\u8fdb\u884c\u64cd\u4f5c\u7684\u3002 \u8bbe\u7f6e\u6570\u503c\u6570\u636e\u589e\u52a0\u6307\u5b9a\u8303\u56f4\u7684\u503c incr key incrby key increment incrbyfloat key increment \u8bbe\u7f6e\u6570\u503c\u6570\u636e\u51cf\u5c11\u6307\u5b9a\u8303\u56f4\u7684\u503c decr key decrby key increment \u8bbe\u7f6e\u6570\u636e\u5177\u6709\u6307\u5b9a\u7684\u751f\u547d\u5468\u671f setex key seconds value psetex key milliseconds value 2.3.2 string \u7c7b\u578b\u6570\u636e\u64cd\u4f5c\u7684\u6ce8\u610f\u4e8b\u9879 \u00b6 (1)\u6570\u636e\u64cd\u4f5c\u4e0d\u6210\u529f\u7684\u53cd\u9988\u4e0e\u6570\u636e\u6b63\u5e38\u64cd\u4f5c\u4e4b\u95f4\u7684\u5dee\u5f02 \u8868\u793a\u8fd0\u884c\u7ed3\u679c\u662f\u5426\u6210\u529f (integer) 0 \u2192 false \u5931\u8d25 (integer) 1 \u2192 true \u6210\u529f \u8868\u793a\u8fd0\u884c\u7ed3\u679c\u503c (integer) 3 \u2192 3 3\u4e2a (integer) 1 \u2192 1 1\u4e2a (2)\u6570\u636e\u672a\u83b7\u53d6\u5230\u65f6\uff0c\u5bf9\u5e94\u7684\u6570\u636e\u4e3a\uff08nil\uff09\uff0c\u7b49\u540c\u4e8enull (3)\u6570\u636e\u6700\u5927\u5b58\u50a8\u91cf\uff1a512MB (4)string\u5728redis\u5185\u90e8\u5b58\u50a8\u9ed8\u8ba4\u5c31\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5f53\u9047\u5230\u589e\u51cf\u7c7b\u64cd\u4f5cincr\uff0cdecr\u65f6\u4f1a\u8f6c\u6210\u6570\u503c\u578b\u8fdb\u884c\u8ba1\u7b97 (5)\u6309\u6570\u503c\u8fdb\u884c\u64cd\u4f5c\u7684\u6570\u636e\uff0c\u5982\u679c\u539f\u59cb\u6570\u636e\u4e0d\u80fd\u8f6c\u6210\u6570\u503c\uff0c\u6216\u8d85\u8d8a\u4e86redis \u6570\u503c\u4e0a\u9650\u8303\u56f4\uff0c\u5c06\u62a5\u9519 9223372036854775807\uff08java\u4e2dLong\u578b\u6570\u636e\u6700\u5927\u503c\uff0cLong.MAX_VALUE\uff09 (6)redis\u6240\u6709\u7684\u64cd\u4f5c\u90fd\u662f\u539f\u5b50\u6027\u7684\uff0c\u91c7\u7528\u5355\u7ebf\u7a0b\u5904\u7406\u6240\u6709\u4e1a\u52a1\uff0c\u547d\u4ee4\u662f\u4e00\u4e2a\u4e00\u4e2a\u6267\u884c\u7684\uff0c\u56e0\u6b64\u65e0\u9700\u8003\u8651\u5e76\u53d1\u5e26\u6765\u7684\u6570\u636e\u5f71\u54cd. 2.4string\u5e94\u7528\u573a\u666f\u4e0ekey\u547d\u540d\u7ea6\u5b9a \u00b6 2.4.1 \u5e94\u7528\u573a\u666f \u00b6 \u5b83\u7684\u5e94\u7528\u573a\u666f\u5728\u4e8e\uff1a\u4e3b\u9875\u9ad8\u9891\u8bbf\u95ee\u4fe1\u606f\u663e\u793a\u63a7\u5236\uff0c\u4f8b\u5982\u65b0\u6d6a\u5fae\u535a\u5927V\u4e3b\u9875\u663e\u793a\u7c89\u4e1d\u6570\u4e0e\u5fae\u535a\u6570\u91cf\u3002 \u6211\u4eec\u6765\u601d\u8003\u4e00\u4e0b\uff1a\u8fd9\u4e9b\u4fe1\u606f\u662f\u4e0d\u662f\u4f60\u8fdb\u5165\u5927V\u7684\u9875\u9762\u513f\u4ee5\u540e\u5c31\u8981\u8bfb\u53d6\u8fd9\u5199\u4fe1\u606f\u7684\u554a\uff0c\u90a3\u8fd9\u79cd\u4fe1\u606f\u4e00\u5b9a\u8981\u5b58\u50a8\u5230\u6211\u4eec\u7684redis\u4e2d\uff0c\u56e0\u4e3a\u4ed6\u7684\u8bbf\u95ee\u91cf\u592a\u9ad8\u4e86\uff01\u90a3\u8fd9\u79cd\u6570\u636e\u5e94\u8be5\u600e\u4e48\u5b58\u5462\uff1f\u6211\u4eec\u6765\u4e00\u5757\u513f\u770b\u4e00\u4e0b\u65b9\u6848\uff01 2.4.2 \u89e3\u51b3\u65b9\u6848 \u00b6 \uff081\uff09\u5728redis\u4e2d\u4e3a\u5927V\u7528\u6237\u8bbe\u5b9a\u7528\u6237\u4fe1\u606f\uff0c\u4ee5\u7528\u6237\u4e3b\u952e\u548c\u5c5e\u6027\u503c\u4f5c\u4e3akey\uff0c\u540e\u53f0\u8bbe\u5b9a\u5b9a\u65f6\u5237\u65b0\u7b56\u7565\u5373\u53ef\u3002 eg: user:id:3506728370:fans \u2192 12210947 eg: user:id:3506728370:blogs \u2192 6164 eg: user:id:3506728370:focuses \u2192 83 \uff082\uff09\u4e5f\u53ef\u4ee5\u4f7f\u7528json\u683c\u5f0f\u4fdd\u5b58\u6570\u636e eg: user:id:3506728370 \u2192 {\u201cfans\u201d\uff1a12210947\uff0c\u201cblogs\u201d\uff1a6164\uff0c\u201c focuses \u201d\uff1a83 } \uff083\uff09 key \u7684\u8bbe\u7f6e\u7ea6\u5b9a \u6570\u636e\u5e93\u4e2d\u7684\u70ed\u70b9\u6570\u636ekey\u547d\u540d\u60ef\u4f8b \u8868\u540d \u4e3b\u952e\u540d \u4e3b\u952e\u503c \u5b57\u6bb5\u540d eg1\uff1a order id 29437595 name eg2\uff1a equip id 390472345 type eg3\uff1a news id 202004150 title 2.5 hash\u7684\u57fa\u672c\u64cd\u4f5c \u00b6 \u4e0b\u9762\u6211\u4eec\u6765\u5b66\u4e60\u7b2c\u4e8c\u4e2a\u6570\u636e\u7c7b\u578bhash\u3002 2.5.1 \u6570\u636e\u5b58\u50a8\u7684\u56f0\u60d1 \u00b6 \u5bf9\u8c61\u7c7b\u6570\u636e\u7684\u5b58\u50a8\u5982\u679c\u5177\u6709\u8f83\u9891\u7e41\u7684\u66f4\u65b0\u9700\u6c42\u64cd\u4f5c\u4f1a\u663e\u5f97\u7b28\u91cd\uff01 \u5728\u6b63\u5f0f\u5b66\u4e60\u4e4b\u524d\uff0c\u6211\u4eec\u5148\u6765\u770b\u4e00\u4e2a\u5173\u4e8e\u6570\u636e\u5b58\u50a8\u7684\u56f0\u60d1\uff1a \u6bd4\u5982\u8bf4\u524d\u9762\u6211\u4eec\u7528\u4ee5\u4e0a\u5f62\u5f0f\u5b58\u4e86\u6570\u636e\uff0c\u5982\u679c\u6211\u4eec\u7528\u5355\u6761\u53bb\u5b58\u7684\u8bdd\uff0c\u5b83\u5b58\u7684\u6761\u6570\u4f1a\u5f88\u591a\u3002\u4f46\u5982\u679c\u6211\u4eec\u7528json\u683c\u5f0f\uff0c\u5b83\u5b58\u4e00\u6761\u6570\u636e\u5c31\u591f\u4e86\u3002\u95ee\u9898\u6765\u4e86\uff0c\u5047\u5982\u8bf4\u73b0\u5728\u7c89\u4e1d\u6570\u91cf\u53d1\u751f\u53d8\u5316\u4e86\uff0c\u4f60\u8981\u628a\u6574\u4e2a\u503c\u90fd\u6539\u4e86\u3002\u4f46\u662f\u7528\u5355\u6761\u5b58\u7684\u8bdd\u5c31\u4e0d\u5b58\u5728\u8fd9\u4e2a\u95ee\u9898\uff0c\u4f60\u53ea\u9700\u8981\u6539\u5176\u4e2d\u4e00\u4e2a\u5c31\u884c\u4e86\u3002\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u5c31\u60f3\uff0c\u6709\u6ca1\u6709\u4e00\u79cd\u65b0\u7684\u5b58\u50a8\u7ed3\u6784\uff0c\u80fd\u5e2e\u6211\u4eec\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u5462\u3002 \u6211\u4eec\u4e00\u5757\u513f\u6765\u5206\u6790\u4e00\u4e0b\uff1a \u5982\u4e0a\u56fe\u6240\u793a\uff1a\u5355\u6761\u7684\u8bdd\u662f\u5bf9\u5e94\u7684\u6570\u636e\u5728\u540e\u9762\u653e\u7740\u3002\u4ed4\u7ec6\u89c2\u5bdf\uff1a\u6211\u4eec\u770b\u5de6\u8fb9\u662f\u4e0d\u662f\u957f\u5f97\u90fd\u4e00\u6a21\u4e00\u6837\u554a\uff0c\u90fd\u662f\u5bf9\u5e94\u7684\u8868\u540d\u3001ID\u7b49\u7684\u4e00\u7cfb\u5217\u7684\u4e1c\u897f\u3002\u6211\u4eec\u53ef\u4ee5\u5c06\u53f3\u8fb9\u7ea2\u6846\u4e2d\u7684\u8fd9\u4e2a\u533a\u57df\u7ed9\u4ed6\u5c01\u8d77\u6765\u3002 \u90a3\u5982\u679c\u8981\u662f\u8fd9\u6837\u7684\u5f62\u5f0f\u7684\u8bdd\uff0c\u5982\u4e0b\u56fe\uff0c\u6211\u4eec\u628a\u5b83\u4e00\u5408\u5e76\uff0c\u5e76\u628a\u53f3\u8fb9\u7684\u4e1c\u897f\u7ed9\u4ed6\u53d8\u6210\u8fd9\u4e2a\u683c\u5f0f\uff0c\u8fd9\u4e0d\u5c31\u884c\u4e86\u5417\uff1f \u8fd9\u4e2a\u56fe\u5176\u5b9e\u5927\u5bb6\u5e76\u4e0d\u964c\u751f\uff0c\u7b2c\u4e00\uff0c\u4f60\u524d\u9762\u5b66\u8fc7\u4e00\u4e2a\u4e1c\u897f\u53ebhashmap\u4e0d\u5c31\u8fd9\u683c\u5f0f\u5417\uff1f\u7b2c\u4e8c\uff0credis\u81ea\u8eab\u4e0d\u4e5f\u662f\u8fd9\u683c\u5f0f\u5417\uff1f\u90a3\u662f\u4ec0\u4e48\u610f\u601d\u5462\uff1f\u6ce8\u610f\uff0c\u8fd9\u5c31\u662f\u6211\u4eec\u8981\u8bb2\u7684\u7b2c\u4e8c\u79cd\u683c\u5f0f\uff0chash\u3002 \u5728\u53f3\u8fb9\u5bf9\u5e94\u7684\u503c\uff0c\u6211\u4eec\u5c31\u5b58\u5177\u4f53\u7684\u503c\uff0c\u90a3\u5de6\u8fb9\u513f\u8fd9\u5c31\u662f\u6211\u4eec\u7684key\u3002\u95ee\u9898\u6765\u4e86\uff0c\u90a3\u4e2d\u95f4\u7684\u8fd9\u4e00\u5757\u53eb\u4ec0\u4e48\u5462\uff1f\u8fd9\u4e2a\u4e1c\u897f\u6211\u4eec\u7ed9\u4ed6\u8d77\u4e2a\u540d\u513f\uff0c\u53eb\u505afield\u5b57\u6bb5\u3002\u90a3\u4e48\u53f3\u8fb9\u513f\u6574\u4f53\u8fd9\u5757\u513f\u7a7a\u95f4\u6211\u4eec\u5c31\u79f0\u4e3ahash\uff0c\u4e5f\u5c31\u662f\u8bf4hash\u662f\u5b58\u4e86\u4e00\u4e2akey value\u7684\u5b58\u50a8\u7a7a\u95f4\u3002 2.5.2 hash \u7c7b\u578b \u00b6 \u65b0\u7684\u5b58\u50a8\u9700\u6c42\uff1a\u5bf9\u4e00\u7cfb\u5217\u5b58\u50a8\u7684\u6570\u636e\u8fdb\u884c\u7f16\u7ec4\uff0c\u65b9\u4fbf\u7ba1\u7406\uff0c\u5178\u578b\u5e94\u7528\u5b58\u50a8\u5bf9\u8c61\u4fe1\u606f \u9700\u8981\u7684\u5b58\u50a8\u7ed3\u6784\uff1a\u4e00\u4e2a\u5b58\u50a8\u7a7a\u95f4\u4fdd\u5b58\u591a\u4e2a\u952e\u503c\u5bf9\u6570\u636e hash\u7c7b\u578b\uff1a\u5e95\u5c42\u4f7f\u7528\u54c8\u5e0c\u8868\u7ed3\u6784\u5b9e\u73b0\u6570\u636e\u5b58\u50a8 \u5982\u4e0a\u56fe\u6240\u793a\uff0c\u8fd9\u79cd\u7ed3\u6784\u53eb\u505ahash\uff0c\u5de6\u8fb9\u4e00\u4e2akey\uff0c\u5bf9\u53f3\u8fb9\u4e00\u4e2a\u5b58\u50a8\u7a7a\u95f4\u3002\u8fd9\u91cc\u8981\u660e\u786e\u4e00\u70b9\uff0c\u53f3\u8fb9\u8fd9\u5757\u513f\u5b58\u50a8\u7a7a\u95f4\u53ebhash\uff0c\u4e5f\u5c31\u662f\u8bf4hash\u662f\u6307\u7684\u4e00\u4e2a\u6570\u636e\u7c7b\u578b\uff0c\u4ed6\u6307\u7684\u4e0d\u662f\u4e00\u4e2a\u6570\u636e\uff0c\u662f\u8fd9\u91cc\u8fb9\u7684\u4e00\u5806\u6570\u636e\uff0c\u90a3\u4e48\u5b83\u5e95\u5c42\u5462\uff0c\u662f\u7528hash\u8868\u7684\u7ed3\u6784\u6765\u5b9e\u73b0\u7684\u3002 \u503c\u5f97\u6ce8\u610f\u7684\u662f\uff1a \u5982\u679cfield\u6570\u91cf\u8f83\u5c11\uff0c\u5b58\u50a8\u7ed3\u6784\u4f18\u5316\u4e3a\u7c7b\u6570\u7ec4\u7ed3\u6784 \u5982\u679cfield\u6570\u91cf\u8f83\u591a\uff0c\u5b58\u50a8\u7ed3\u6784\u4f7f\u7528HashMap\u7ed3\u6784 2.5.3 hash \u7c7b\u578b\u6570\u636e\u7684\u57fa\u672c\u64cd\u4f5c \u00b6 \u6dfb\u52a0/\u4fee\u6539\u6570\u636e hset key field value \u83b7\u53d6\u6570\u636e hget key field hgetall key \u5220\u9664\u6570\u636e hdel key field1 [ field2 ] \u8bbe\u7f6efield\u7684\u503c\uff0c\u5982\u679c\u8be5field\u5b58\u5728\u5219\u4e0d\u505a\u4efb\u4f55\u64cd\u4f5c hsetnx key field value \u6dfb\u52a0/\u4fee\u6539\u591a\u4e2a\u6570\u636e hmset key field1 value1 field2 value2 \u2026 \u83b7\u53d6\u591a\u4e2a\u6570\u636e hmget key field1 field2 \u2026 \u83b7\u53d6\u54c8\u5e0c\u8868\u4e2d\u5b57\u6bb5\u7684\u6570\u91cf hlen key \u83b7\u53d6\u54c8\u5e0c\u8868\u4e2d\u662f\u5426\u5b58\u5728\u6307\u5b9a\u7684\u5b57\u6bb5 hexists key field 2.6 hash\u7684\u62d3\u5c55\u64cd\u4f5c \u00b6 \u5728\u770b\u5b8chash\u7684\u57fa\u672c\u64cd\u4f5c\u540e\uff0c\u6211\u4eec\u518d\u6765\u770b\u4ed6\u7684\u62d3\u5c55\u64cd\u4f5c\uff0c\u4ed6\u7684\u62d3\u5c55\u64cd\u4f5c\u76f8\u5bf9\u6bd4\u8f83\u7b80\u5355\uff1a 2.6.1 hash \u7c7b\u578b\u6570\u636e\u6269\u5c55\u64cd\u4f5c \u00b6 \u83b7\u53d6\u54c8\u5e0c\u8868\u4e2d\u6240\u6709\u7684\u5b57\u6bb5\u540d\u6216\u5b57\u6bb5\u503c hkeys key hvals key \u8bbe\u7f6e\u6307\u5b9a\u5b57\u6bb5\u7684\u6570\u503c\u6570\u636e\u589e\u52a0\u6307\u5b9a\u8303\u56f4\u7684\u503c hincrby key field increment hincrbyfloat key field increment 2.6.2 hash\u7c7b\u578b\u6570\u636e\u64cd\u4f5c\u7684\u6ce8\u610f\u4e8b\u9879 \u00b6 (1)hash\u7c7b\u578b\u4e2dvalue\u53ea\u80fd\u5b58\u50a8\u5b57\u7b26\u4e32\uff0c\u4e0d\u5141\u8bb8\u5b58\u50a8\u5176\u4ed6\u6570\u636e\u7c7b\u578b\uff0c\u4e0d\u5b58\u5728\u5d4c\u5957\u73b0\u8c61\u3002\u5982\u679c\u6570\u636e\u672a\u83b7\u53d6\u5230\uff0c\u5bf9\u5e94\u7684\u503c\u4e3a\uff08nil\uff09\u3002 (2\uff09\u6bcf\u4e2a hash \u53ef\u4ee5\u5b58\u50a8 2^32 - 1 \u4e2a\u952e\u503c\u5bf9 hash\u7c7b\u578b\u5341\u5206\u8d34\u8fd1\u5bf9\u8c61\u7684\u6570\u636e\u5b58\u50a8\u5f62\u5f0f\uff0c\u5e76\u4e14\u53ef\u4ee5\u7075\u6d3b\u6dfb\u52a0\u5220\u9664\u5bf9\u8c61\u5c5e\u6027\u3002\u4f46hash\u8bbe\u8ba1\u521d\u8877\u4e0d\u662f\u4e3a\u4e86\u5b58\u50a8\u5927\u91cf\u5bf9\u8c61\u800c\u8bbe\u8ba1 \u7684\uff0c\u5207\u8bb0\u4e0d\u53ef\u6ee5\u7528\uff0c\u66f4\u4e0d\u53ef\u4ee5\u5c06hash\u4f5c\u4e3a\u5bf9\u8c61\u5217\u8868\u4f7f\u7528\u3002 (3)hgetall \u64cd\u4f5c\u53ef\u4ee5\u83b7\u53d6\u5168\u90e8\u5c5e\u6027\uff0c\u5982\u679c\u5185\u90e8field\u8fc7\u591a\uff0c\u904d\u5386\u6574\u4f53\u6570\u636e\u6548\u7387\u5c31\u5f88\u4f1a\u4f4e\uff0c\u6709\u53ef\u80fd\u6210\u4e3a\u6570\u636e\u8bbf\u95ee\u74f6\u9888\u3002 2.7 hash\u5e94\u7528\u573a\u666f \u00b6 2.7.1 \u5e94\u7528\u573a\u666f \u00b6 \u53cc11\u6d3b\u52a8\u65e5\uff0c\u9500\u552e\u624b\u673a\u5145\u503c\u5361\u7684\u5546\u5bb6\u5bf9\u79fb\u52a8\u3001\u8054\u901a\u3001\u7535\u4fe1\u768430\u5143\u300150\u5143\u3001100\u5143\u5546\u54c1\u63a8\u51fa\u62a2\u8d2d\u6d3b\u52a8\uff0c\u6bcf\u79cd\u5546\u54c1\u62a2\u8d2d\u4e0a\u96501000 \u5f20\u3002 \u4e5f\u5c31\u662f\u5546\u5bb6\u6709\u4e86\uff0c\u5546\u54c1\u6709\u4e86\uff0c\u6570\u91cf\u6709\u4e86\u3002\u6700\u7ec8\u6211\u4eec\u7684\u7528\u6237\u4e70\u4e1c\u897f\u5c31\u662f\u5728\u6539\u53d8\u8fd9\u4e2a\u6570\u91cf\u3002\u90a3\u4f60\u8bf4\u8fd9\u4e2a\u7ed3\u6784\u5e94\u8be5\u600e\u4e48\u5b58\u5462\uff1f\u5bf9\u5e94\u7684\u5546\u5bb6\u7684ID\u4f5c\u4e3akey\uff0c\u7136\u540e\u8fd9\u4e9b\u5145\u503c\u5361\u7684ID\u4f5c\u4e3afield\uff0c\u6700\u540e\u8fd9\u4e9b\u6570\u91cf\u4f5c\u4e3avalue\u3002\u800c\u6211\u4eec\u6240\u8c13\u7684\u64cd\u4f5c\u662f\u5176\u5b9e\u5c31\u662fincrea\u8fd9\u4e2a\u64cd\u4f5c\uff0c\u53ea\u4e0d\u8fc7\u4f60\u4f20\u8d1f\u503c\u5c31\u884c\u4e86\u3002\u770b\u4e00\u770b\u5bf9\u5e94\u7684\u89e3\u51b3\u65b9\u6848\uff1a 2.7.2 \u89e3\u51b3\u65b9\u6848 \u00b6 \u4ee5\u5546\u5bb6id\u4f5c\u4e3akey \u5c06\u53c2\u4e0e\u62a2\u8d2d\u7684\u5546\u54c1id\u4f5c\u4e3afield \u5c06\u53c2\u4e0e\u62a2\u8d2d\u7684\u5546\u54c1\u6570\u91cf\u4f5c\u4e3a\u5bf9\u5e94\u7684value \u62a2\u8d2d\u65f6\u4f7f\u7528\u964d\u503c\u7684\u65b9\u5f0f\u63a7\u5236\u4ea7\u54c1\u6570\u91cf \u6ce8\u610f\uff1a\u5b9e\u9645\u4e1a\u52a1\u4e2d\u8fd8\u6709\u8d85\u5356\u7b49\u5b9e\u9645\u95ee\u9898\uff0c\u8fd9\u91cc\u4e0d\u505a\u8ba8\u8bba 2.8 list\u57fa\u672c\u64cd\u4f5c \u00b6 \u524d\u9762\u6211\u4eec\u5b58\u6570\u636e\u7684\u65f6\u5019\u5462\uff0c\u5355\u4e2a\u6570\u636e\u4e5f\u80fd\u5b58\uff0c\u591a\u4e2a\u6570\u636e\u4e5f\u80fd\u5b58\uff0c\u4f46\u662f\u8fd9\u91cc\u9762\u6709\u4e00\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u5b58\u591a\u4e2a\u6570\u636e\u7528hash\u7684\u65f6\u5019\u5b83\u662f\u6ca1\u6709\u987a\u5e8f\u7684\u3002\u6211\u4eec\u5e73\u65f6\u64cd\u4f5c\uff0c\u5b9e\u9645\u4e0a\u6570\u636e\u5f88\u591a\u60c5\u51b5\u4e0b\u90fd\u662f\u6709\u987a\u5e8f\u7684\uff0c\u90a3\u6709\u6ca1\u6709\u4e00\u79cd\u80fd\u591f\u7528\u6765\u5b58\u50a8\u5e26\u6709\u987a\u5e8f\u7684\u8fd9\u79cd\u6570\u636e\u6a21\u578b\u5462\uff0clist\u5c31\u4e13\u95e8\u6765\u5e72\u8fd9\u4e8b\u513f\u3002 2.8.1 list \u7c7b\u578b \u00b6 \u6570\u636e\u5b58\u50a8\u9700\u6c42\uff1a\u5b58\u50a8\u591a\u4e2a\u6570\u636e\uff0c\u5e76\u5bf9\u6570\u636e\u8fdb\u5165\u5b58\u50a8\u7a7a\u95f4\u7684\u987a\u5e8f\u8fdb\u884c\u533a\u5206 \u9700\u8981\u7684\u5b58\u50a8\u7ed3\u6784\uff1a\u4e00\u4e2a\u5b58\u50a8\u7a7a\u95f4\u4fdd\u5b58\u591a\u4e2a\u6570\u636e\uff0c\u4e14\u901a\u8fc7\u6570\u636e\u53ef\u4ee5\u4f53\u73b0\u8fdb\u5165\u987a\u5e8f list\u7c7b\u578b\uff1a\u4fdd\u5b58\u591a\u4e2a\u6570\u636e\uff0c\u5e95\u5c42\u4f7f\u7528\u53cc\u5411\u94fe\u8868\u5b58\u50a8\u7ed3\u6784\u5b9e\u73b0 \u5148\u6765\u901a\u8fc7\u4e00\u5f20\u56fe\uff0c\u56de\u5fc6\u4e00\u4e0b\u987a\u5e8f\u8868\u3001\u94fe\u8868\u3001\u53cc\u5411\u94fe\u8868\u3002 list\u5bf9\u5e94\u7684\u5b58\u50a8\u7ed3\u6784\u662f\u4ec0\u4e48\u5462\uff1f\u91cc\u8fb9\u5b58\u7684\u8fd9\u4e2a\u4e1c\u897f\u662f\u4e2a\u5217\u8868\uff0c\u4ed6\u6709\u4e00\u4e2a\u5bf9\u5e94\u7684\u540d\u79f0\u3002\u5c31\u662fkey\u5b58\u4e00\u4e2alist\u7684\u8fd9\u6837\u7ed3\u6784\u3002\u5bf9\u5e94\u7684\u57fa\u672c\u64cd\u4f5c\uff0c\u4f60\u5176\u5b9e\u662f\u53ef\u4ee5\u60f3\u5230\u7684\u3002 \u6765\u770b\u4e00\u4e0b\uff0c\u56e0\u4e3a\u5b83\u662f\u53cc\u5411\u7684\uff0c\u6240\u4ee5\u4ed6\u5de6\u8fb9\u53f3\u8fb9\u90fd\u80fd\u64cd\u4f5c\uff0c\u5b83\u5bf9\u5e94\u7684\u64cd\u4f5c\u7ed3\u6784\u4e24\u8fb9\u90fd\u80fd\u8fdb\u6570\u636e\u3002\u8fd9\u5c31\u662f\u94fe\u8868\u7684\u4e00\u4e2a\u5b58\u50a8\u7ed3\u6784\u3002\u5f80\u5916\u62ff\u6570\u636e\u7684\u65f6\u5019\u600e\u4e48\u62ff\u5462\uff1f\u901a\u5e38\u662f\u4ece\u4e00\u7aef\u62ff\uff0c\u5f53\u7136\u53e6\u4e00\u7aef\u4e5f\u80fd\u62ff\u3002\u5982\u679c\u4e24\u7aef\u90fd\u80fd\u62ff\u7684\u8bdd\uff0c\u8fd9\u5c31\u662f\u4e2a\u53cc\u7aef\u961f\u5217\uff0c\u4e24\u8fb9\u513f\u90fd\u80fd\u64cd\u4f5c\u3002\u5982\u679c\u53ea\u80fd\u4ece\u4e00\u7aef\u8fdb\u4e00\u7aef\u51fa\uff0c\u8fd9\u4e2a\u6a21\u578b\u54b1\u4eec\u524d\u9762\u4e86\u89e3\u8fc7\uff0c\u53eb\u505a\u6808\u3002 2.8.2 list \u7c7b\u578b\u6570\u636e\u57fa\u672c\u64cd\u4f5c \u00b6 \u6700\u540e\u770b\u4e00\u4e0b\u4ed6\u7684\u57fa\u672c\u64cd\u4f5c \u6dfb\u52a0/\u4fee\u6539\u6570\u636e lpush key value1 [ value2 ] \u2026\u2026 rpush key value1 [ value2 ] \u2026\u2026 \u83b7\u53d6\u6570\u636e lrange key start stop lindex key index llen key \u83b7\u53d6\u5e76\u79fb\u9664\u6570\u636e lpop key rpop key 2.9 list\u6269\u5c55\u64cd\u4f5c \u00b6 2.9.1 list \u7c7b\u578b\u6570\u636e\u6269\u5c55\u64cd\u4f5c \u00b6 \u79fb\u9664\u6307\u5b9a\u6570\u636e lrem key count value \u89c4\u5b9a\u65f6\u95f4\u5185\u83b7\u53d6\u5e76\u79fb\u9664\u6570\u636e blpop key1 [ key2 ] timeout brpop key1 [ key2 ] timeout brpoplpush source destination timeout 2.9.2 list \u7c7b\u578b\u6570\u636e\u64cd\u4f5c\u6ce8\u610f\u4e8b\u9879 \u00b6 \uff081\uff09list\u4e2d\u4fdd\u5b58\u7684\u6570\u636e\u90fd\u662fstring\u7c7b\u578b\u7684\uff0c\u6570\u636e\u603b\u5bb9\u91cf\u662f\u6709\u9650\u7684\uff0c\u6700\u591a2^32 - 1 \u4e2a\u5143\u7d20(4294967295)\u3002 \uff082\uff09list\u5177\u6709\u7d22\u5f15\u7684\u6982\u5ff5\uff0c\u4f46\u662f\u64cd\u4f5c\u6570\u636e\u65f6\u901a\u5e38\u4ee5\u961f\u5217\u7684\u5f62\u5f0f\u8fdb\u884c\u5165\u961f\u51fa\u961f\u64cd\u4f5c\uff0c\u6216\u4ee5\u6808\u7684\u5f62\u5f0f\u8fdb\u884c\u5165\u6808\u51fa\u6808\u64cd\u4f5c \uff083\uff09\u83b7\u53d6\u5168\u90e8\u6570\u636e\u64cd\u4f5c\u7ed3\u675f\u7d22\u5f15\u8bbe\u7f6e\u4e3a-1 \uff084\uff09list\u53ef\u4ee5\u5bf9\u6570\u636e\u8fdb\u884c\u5206\u9875\u64cd\u4f5c\uff0c\u901a\u5e38\u7b2c\u4e00\u9875\u7684\u4fe1\u606f\u6765\u81ea\u4e8elist\uff0c\u7b2c2\u9875\u53ca\u66f4\u591a\u7684\u4fe1\u606f\u901a\u8fc7\u6570\u636e\u5e93\u7684\u5f62\u5f0f\u52a0\u8f7d 2.10 list \u5e94\u7528\u573a\u666f \u00b6 2.10.1 \u5e94\u7528\u573a\u666f \u00b6 \u4f01\u4e1a\u8fd0\u8425\u8fc7\u7a0b\u4e2d\uff0c\u7cfb\u7edf\u5c06\u4ea7\u751f\u51fa\u5927\u91cf\u7684\u8fd0\u8425\u6570\u636e\uff0c\u5982\u4f55\u4fdd\u969c\u591a\u53f0\u670d\u52a1\u5668\u64cd\u4f5c\u65e5\u5fd7\u7684\u7edf\u4e00\u987a\u5e8f\u8f93\u51fa\uff1f \u5047\u5982\u73b0\u5728\u4f60\u6709\u591a\u53f0\u670d\u52a1\u5668\uff0c\u6bcf\u4e00\u53f0\u670d\u52a1\u5668\u90fd\u4f1a\u4ea7\u751f\u5b83\u7684\u65e5\u5fd7\uff0c\u5047\u8bbe\u4f60\u662f\u4e00\u4e2a\u8fd0\u7ef4\u4eba\u5458\uff0c\u4f60\u60f3\u770b\u5b83\u7684\u64cd\u4f5c\u65e5\u5fd7\uff0c\u4f60\u600e\u4e48\u770b\u5462\uff1f\u6253\u5f00A\u673a\u5668\u7684\u65e5\u5fd7\u770b\u4e00\u770b\uff0c\u6253\u5f00B\u673a\u5668\u7684\u65e5\u5fd7\u518d\u770b\u4e00\u770b\u5417\uff1f\u8fd9\u6837\u7684\u8bdd\u4f60\u4f1a\u53ef\u80fd\u4f1a\u75af\u6389\u7684\uff01\u56e0\u4e3a\u5de6\u8fb9\u770b\u7684\u6709\u53ef\u80fd\u5b83\u7684\u65f6\u95f4\u662f11:01\uff0c\u53f3\u8fb911:02\uff0c\u7136\u540e\u518d\u770b\u5de6\u8fb911:03\uff0c\u5b83\u4eec\u672c\u8eab\u662f\u8fde\u7eed\u7684\uff0c\u4f46\u662f\u4f60\u5728\u770b\u7684\u65f6\u5019\u5c31\u5206\u6210\u56db\u4e2a\u6587\u4ef6\u4e86\uff0c\u8fd9\u4e2a\u65f6\u5019\u4f60\u770b\u8d77\u6765\u5c31\u4f1a\u5f88\u9ebb\u70e6\u3002\u80fd\u4e0d\u80fd\u628a\u4ed6\u4eec\u5408\u5e76\u5462\uff1f\u7b54\u6848\u662f\u53ef\u4ee5\u7684\uff01\u600e\u4e48\u505a\u5462\uff1f\u5efa\u7acb\u8d77redis\u670d\u52a1\u5668\u3002\u5f53\u4ed6\u4eec\u9700\u8981\u8bb0\u65e5\u5fd7\u7684\u65f6\u5019\uff0c\u8bb0\u5728\u54ea\u513f,\u5168\u90e8\u53d1\u7ed9redis\u3002\u7b49\u5230\u4f60\u60f3\u770b\u7684\u65f6\u5019\uff0c\u901a\u8fc7\u670d\u52a1\u5668\u8bbf\u95eeredis\u83b7\u53d6\u65e5\u5fd7\u3002\u7136\u540e\u5f97\u5230\u4ee5\u540e\uff0c\u5c31\u4f1a\u5f97\u5230\u4e00\u4e2a\u5b8c\u6574\u7684\u65e5\u5fd7\u4fe1\u606f\u3002\u90a3\u4e48\u8fd9\u91cc\u9762\u5c31\u53ef\u4ee5\u83b7\u53d6\u5230\u5b8c\u6574\u7684\u65e5\u5fd7\u4e86\uff0c\u4f9d\u9760\u4ec0\u4e48\u6765\u5b9e\u73b0\u5462\uff1f\u5c31\u4f9d\u9760\u6211\u4eec\u7684list\u7684\u6a21\u578b\u7684\u987a\u5e8f\u6765\u5b9e\u73b0\u3002\u8fdb\u6765\u4e00\u7ec4\u6570\u636e\u5c31\u5f80\u91cc\u52a0\uff0c\u8c01\u5148\u8fdb\u6765\u8c01\u5148\u52a0\u8fdb\u53bb\uff0c\u5b83\u662f\u6709\u4e00\u5b9a\u7684\u987a\u5e8f\u7684\u3002 2.10.2 \u89e3\u51b3\u65b9\u6848 \u00b6 \u4f9d\u8d56list\u7684\u6570\u636e\u5177\u6709\u987a\u5e8f\u7684\u7279\u5f81\u5bf9\u4fe1\u606f\u8fdb\u884c\u7ba1\u7406 \u4f7f\u7528\u961f\u5217\u6a21\u578b\u89e3\u51b3\u591a\u8def\u4fe1\u606f\u6c47\u603b\u5408\u5e76\u7684\u95ee\u9898 \u4f7f\u7528\u6808\u6a21\u578b\u89e3\u51b3\u6700\u65b0\u6d88\u606f\u7684\u95ee\u9898 2.11 set \u57fa\u672c\u64cd\u4f5c \u00b6 2.11.1 set\u7c7b\u578b \u00b6 \u65b0\u7684\u5b58\u50a8\u9700\u6c42\uff1a\u5b58\u50a8\u5927\u91cf\u7684\u6570\u636e\uff0c\u5728\u67e5\u8be2\u65b9\u9762\u63d0\u4f9b\u66f4\u9ad8\u7684\u6548\u7387 \u9700\u8981\u7684\u5b58\u50a8\u7ed3\u6784\uff1a\u80fd\u591f\u4fdd\u5b58\u5927\u91cf\u7684\u6570\u636e\uff0c\u9ad8\u6548\u7684\u5185\u90e8\u5b58\u50a8\u673a\u5236\uff0c\u4fbf\u4e8e\u67e5\u8be2 set\u7c7b\u578b\uff1a\u4e0ehash\u5b58\u50a8\u7ed3\u6784\u5b8c\u5168\u76f8\u540c\uff0c\u4ec5\u5b58\u50a8\u952e\uff0c\u4e0d\u5b58\u50a8\u503c\uff08nil\uff09\uff0c\u5e76\u4e14\u503c\u662f\u4e0d\u5141\u8bb8\u91cd\u590d\u7684 \u901a\u8fc7\u8fd9\u4e2a\u540d\u79f0\uff0c\u5927\u5bb6\u4e5f\u57fa\u672c\u4e0a\u80fd\u591f\u8ba4\u8bc6\u5230\u548c\u6211\u4eecJava\u4e2d\u7684set\u5b8c\u5168\u4e00\u6837\u3002\u6211\u4eec\u73b0\u5728\u8981\u5b58\u50a8\u5927\u91cf\u7684\u6570\u636e\uff0c\u5e76\u4e14\u8981\u6c42\u63d0\u9ad8\u5b83\u7684\u67e5\u8be2\u6548\u7387\u3002\u7528list\u8fd9\u79cd\u94fe\u8868\u5f62\u5f0f\uff0c\u5b83\u7684\u67e5\u8be2\u6548\u7387\u662f\u4e0d\u9ad8\u7684\uff0c\u90a3\u600e\u4e48\u529e\u5462\uff1f\u8fd9\u65f6\u5019\u6211\u4eec\u5c31\u60f3\uff0c\u6709\u6ca1\u6709\u9ad8\u6548\u7684\u5b58\u50a8\u673a\u5236\u3002\u5176\u5b9e\u524d\u9762\u54b1\u8bb2Java\u7684\u65f6\u5019\u8bf4\u8fc7hash\u8868\u7684\u7ed3\u6784\u5c31\u975e\u5e38\u7684\u597d\uff0c\u4f46\u662f\u8fd9\u91cc\u8fb9\u6211\u4eec\u5df2\u7ecf\u6709hash\u4e86\uff0c\u4ed6\u505a\u4e86\u8fd9\u4e48\u4e00\u4e2a\u8bbe\u5b9a\uff0c\u5e72\u561b\u5462\uff0c\u4ed6\u628ahash\u7684\u5b58\u50a8\u7a7a\u95f4\u7ed9\u6539\u4e00\u4e0b\uff0c\u53f3\u8fb9\u4f60\u539f\u6765\u5b58\u6570\u636e\u6539\u6389,\u5168\u90e8\u5b58\u7a7a\uff0c\u90a3\u4f60\u8bf4\u6570\u636e\u653e\u54ea\u513f\u4e86\uff1f\u653e\u5230\u539f\u6765\u7684filed\u7684\u4f4d\u7f6e\uff0c\u4e5f\u5c31\u5728\u8fd9\u91cc\u8fb9\u5b58\u771f\u6b63\u7684\u503c\uff0c\u90a3\u4e48\u8fd9\u4e2a\u6a21\u578b\u5c31\u662f\u6211\u4eec\u7684set \u6a21\u578b\u3002 set\u7c7b\u578b\uff1a\u4e0ehash\u5b58\u50a8\u7ed3\u6784\u5b8c\u5168\u76f8\u540c\uff0c\u4ec5\u5b58\u50a8\u952e\uff0c\u4e0d\u5b58\u50a8\u503c\uff08nil\uff09\uff0c\u5e76\u4e14\u503c\u662f\u4e0d\u5141\u8bb8\u91cd\u590d\u7684\u3002 \u770b\u4e00\u4e0b\u5b83\u7684\u6574\u4e2a\u7ed3\u6784\uff1a 2.11.2 set\u7c7b\u578b\u6570\u636e\u7684\u57fa\u672c\u64cd\u4f5c \u00b6 \u6dfb\u52a0\u6570\u636e sadd key member1 [ member2 ] \u83b7\u53d6\u5168\u90e8\u6570\u636e smembers key \u5220\u9664\u6570\u636e srem key member1 [ member2 ] \u83b7\u53d6\u96c6\u5408\u6570\u636e\u603b\u91cf scard key \u5224\u65ad\u96c6\u5408\u4e2d\u662f\u5426\u5305\u542b\u6307\u5b9a\u6570\u636e sismember key member \u968f\u673a\u83b7\u53d6\u96c6\u5408\u4e2d\u6307\u5b9a\u6570\u91cf\u7684\u6570\u636e srandmember key [ count ] \u968f\u673a\u83b7\u53d6\u96c6\u4e2d\u7684\u67d0\u4e2a\u6570\u636e\u5e76\u5c06\u8be5\u6570\u636e\u79fb\u9664\u96c6\u5408 spop key [ count ] 2.12 set \u7c7b\u578b\u6570\u636e\u7684\u6269\u5c55\u64cd\u4f5c \u00b6 2.12.1 set \u7c7b\u578b\u6570\u636e\u7684\u6269\u5c55\u64cd\u4f5c \u00b6 \u6c42\u4e24\u4e2a\u96c6\u5408\u7684\u4ea4\u3001\u5e76\u3001\u5dee\u96c6 sinter key1 [key2 \u2026] sunion key1 [key2 \u2026] sdiff key1 [key2 \u2026] \u6c42\u4e24\u4e2a\u96c6\u5408\u7684\u4ea4\u3001\u5e76\u3001\u5dee\u96c6\u5e76\u5b58\u50a8\u5230\u6307\u5b9a\u96c6\u5408\u4e2d sinterstore destination key1 [key2 \u2026] sunionstore destination key1 [key2 \u2026] sdiffstore destination key1 [key2 \u2026] \u5c06\u6307\u5b9a\u6570\u636e\u4ece\u539f\u59cb\u96c6\u5408\u4e2d\u79fb\u52a8\u5230\u76ee\u6807\u96c6\u5408\u4e2d smove source destination member \u901a\u8fc7\u4e0b\u9762\u4e00\u5f20\u56fe\u56de\u5fc6\u4e00\u4e0b\u4ea4\u3001\u5e76\u3001\u5dee 2.12.2 set \u7c7b\u578b\u6570\u636e\u64cd\u4f5c\u7684\u6ce8\u610f\u4e8b\u9879 \u00b6 set \u7c7b\u578b\u4e0d\u5141\u8bb8\u6570\u636e\u91cd\u590d\uff0c\u5982\u679c\u6dfb\u52a0\u7684\u6570\u636e\u5728 set \u4e2d\u5df2\u7ecf\u5b58\u5728\uff0c\u5c06\u53ea\u4fdd\u7559\u4e00\u4efd\u3002 set \u867d\u7136\u4e0ehash\u7684\u5b58\u50a8\u7ed3\u6784\u76f8\u540c\uff0c\u4f46\u662f\u65e0\u6cd5\u542f\u7528hash\u4e2d\u5b58\u50a8\u503c\u7684\u7a7a\u95f4\u3002 2.13 set\u5e94\u7528\u573a\u666f \u00b6 2.13.1 set\u5e94\u7528\u573a\u666f \u00b6 \uff081\uff09\u9ed1\u540d\u5355 \u8d44\u8baf\u7c7b\u4fe1\u606f\u7c7b\u7f51\u7ad9\u8ffd\u6c42\u9ad8\u8bbf\u95ee\u91cf\uff0c\u4f46\u662f\u7531\u4e8e\u5176\u4fe1\u606f\u7684\u4ef7\u503c\uff0c\u5f80\u5f80\u5bb9\u6613\u88ab\u4e0d\u6cd5\u5206\u5b50\u5229\u7528\uff0c\u901a\u8fc7\u722c\u866b\u6280\u672f\uff0c \u5feb\u901f\u83b7\u53d6\u4fe1\u606f\uff0c\u4e2a\u522b\u7279\u79cd\u884c\u4e1a\u7f51\u7ad9\u4fe1\u606f\u901a\u8fc7\u722c\u866b\u83b7\u53d6\u5206\u6790\u540e\uff0c\u53ef\u4ee5\u8f6c\u6362\u6210\u5546\u4e1a\u673a\u5bc6\u8fdb\u884c\u51fa\u552e\u3002\u4f8b\u5982\u7b2c\u4e09\u65b9\u706b \u8f66\u7968\u3001\u673a\u7968\u3001\u9152\u5e97\u5237\u7968\u4ee3\u8d2d\u8f6f\u4ef6\uff0c\u7535\u5546\u5237\u8bc4\u8bba\u3001\u5237\u597d\u8bc4\u3002 \u540c\u65f6\u722c\u866b\u5e26\u6765\u7684\u4f2a\u6d41\u91cf\u4e5f\u4f1a\u7ed9\u7ecf\u8425\u8005\u5e26\u6765\u9519\u89c9\uff0c\u4ea7\u751f\u9519\u8bef\u7684\u51b3\u7b56\uff0c\u6709\u6548\u907f\u514d\u7f51\u7ad9\u88ab\u722c\u866b\u53cd\u590d\u722c\u53d6\u6210\u4e3a\u6bcf\u4e2a\u7f51\u7ad9\u90fd\u8981\u8003\u8651\u7684\u57fa\u672c\u95ee\u9898\u3002\u5728\u57fa\u4e8e\u6280\u672f\u5c42\u9762\u533a\u5206\u51fa\u722c\u866b\u7528\u6237\u540e\uff0c\u9700\u8981\u5c06\u6b64\u7c7b\u7528\u6237\u8fdb\u884c\u6709\u6548\u7684\u5c4f\u853d\uff0c\u8fd9\u5c31\u662f\u9ed1\u540d\u5355\u7684\u5178\u578b\u5e94\u7528\u3002 ps:\u4e0d\u662f\u8bf4\u722c\u866b\u4e00\u5b9a\u505a\u6467\u6bc1\u6027\u7684\u5de5\u4f5c\uff0c\u6709\u4e9b\u5c0f\u578b\u7f51\u7ad9\u9700\u8981\u722c\u866b\u4e3a\u5176\u5e26\u6765\u4e00\u4e9b\u6d41\u91cf\u3002 \uff082\uff09\u767d\u540d\u5355 \u5bf9\u4e8e\u5b89\u5168\u6027\u66f4\u9ad8\u7684\u5e94\u7528\u8bbf\u95ee\uff0c\u4ec5\u4ec5\u9760\u9ed1\u540d\u5355\u662f\u4e0d\u80fd\u89e3\u51b3\u5b89\u5168\u95ee\u9898\u7684\uff0c\u6b64\u65f6\u9700\u8981\u8bbe\u5b9a\u53ef\u8bbf\u95ee\u7684\u7528\u6237\u7fa4\u4f53\uff0c \u4f9d\u8d56\u767d\u540d\u5355\u505a\u66f4\u4e3a\u82db\u523b\u7684\u8bbf\u95ee\u9a8c\u8bc1\u3002 2.13.2 \u89e3\u51b3\u65b9\u6848 \u00b6 \u57fa\u4e8e\u7ecf\u8425\u6218\u7565\u8bbe\u5b9a\u95ee\u9898\u7528\u6237\u53d1\u73b0\u3001\u9274\u522b\u89c4\u5219 \u5468\u671f\u6027\u66f4\u65b0\u6ee1\u8db3\u89c4\u5219\u7684\u7528\u6237\u9ed1\u540d\u5355\uff0c\u52a0\u5165set\u96c6\u5408 \u7528\u6237\u884c\u4e3a\u4fe1\u606f\u8fbe\u5230\u540e\u4e0e\u9ed1\u540d\u5355\u8fdb\u884c\u6bd4\u5bf9\uff0c\u786e\u8ba4\u884c\u4e3a\u53bb\u5411 \u9ed1\u540d\u5355\u8fc7\u6ee4IP\u5730\u5740\uff1a\u5e94\u7528\u4e8e\u5f00\u653e\u6e38\u5ba2\u8bbf\u95ee\u6743\u9650\u7684\u4fe1\u606f\u6e90 \u9ed1\u540d\u5355\u8fc7\u6ee4\u8bbe\u5907\u4fe1\u606f\uff1a\u5e94\u7528\u4e8e\u9650\u5b9a\u8bbf\u95ee\u8bbe\u5907\u7684\u4fe1\u606f\u6e90 \u9ed1\u540d\u5355\u8fc7\u6ee4\u7528\u6237\uff1a\u5e94\u7528\u4e8e\u57fa\u4e8e\u8bbf\u95ee\u6743\u9650\u7684\u4fe1\u606f\u6e90 2.14 \u5b9e\u8df5\u6848\u4f8b \u00b6 2.14.1\u4e1a\u52a1\u573a\u666f \u00b6 \u4f7f\u7528\u5fae\u4fe1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5f53\u5fae\u4fe1\u63a5\u6536\u6d88\u606f\u540e\uff0c\u4f1a\u9ed8\u8ba4\u5c06\u6700\u8fd1\u63a5\u6536\u7684\u6d88\u606f\u7f6e\u9876\uff0c\u5f53\u591a\u4e2a\u597d\u53cb\u53ca\u5173\u6ce8\u7684\u8ba2\u9605\u53f7\u540c\u65f6\u53d1 \u9001\u6d88\u606f\u65f6\uff0c\u8be5\u6392\u5e8f\u4f1a\u4e0d\u505c\u7684\u8fdb\u884c\u4ea4\u66ff\u3002\u540c\u65f6\u8fd8\u53ef\u4ee5\u5c06\u91cd\u8981\u7684\u4f1a\u8bdd\u8bbe\u7f6e\u4e3a\u7f6e\u9876\u3002\u4e00\u65e6\u7528\u6237\u79bb\u7ebf\u540e\uff0c\u518d\u6b21\u6253\u5f00\u5fae\u4fe1\u65f6\uff0c\u6d88\u606f\u8be5\u6309\u7167\u4ec0\u4e48\u6837\u7684\u987a\u5e8f\u663e\u793a\u3002 \u6211\u4eec\u5206\u6790\u4e00\u4e0b\uff1a 100\u8fd9\u53f0\u624b\u673a\u4ee3\u8868\u4f60\u3002\u800c200\u3001300\u3001400\u8fd9\u4e09\u53f0\u4ee3\u8868\u4f60\u597d\u53cb\u7684\u624b\u673a\u3002\u5728\u8fd9\u91cc\u6709\u4e00\u4e9b\u4e1c\u897f\u9700\u8981\u4ea4\u4ee3\u4e00\u4e0b\uff0c\u56e0\u4e3a\u6211\u4eec\u6bcf\u4e2a\u4eba\u7684\u90fd\u4f1a\u5bf9\u81ea\u5df1\u7684\u5fae\u4fe1\u4e2d\u7684\u4e00\u4e9b\u6bd4\u8f83\u91cd\u8981\u7684\u4eba\u8bbe\u7f6e\u4f1a\u8bdd\u7f6e\u9876\uff0c\u5c06\u4ed6\u7684\u90a3\u6761\u5bf9\u8bdd\u653e\u5728\u6700\u4e0a\u9762\u3002\u6211\u4eec\u5047\u5b9a\u8fd9\u4e2a\u4eba\u6709\u4e24\u4e2a\u4f1a\u8bdd\u7f6e\u9876\u7684\u597d\u53cb\uff0c\u5206\u522b\u662f400\u548c500\uff0c\u800c\u8fd9\u91cc\u8fb9\u5c31\u5305\u542b400. \u4e0b\u9762\u5462\uff0c\u6211\u4eec\u5c31\u6765\u53d1\u8fd9\u4e2a\u6d88\u606f\uff0c\u7b2c\u4e00\u4e2a\u53d1\u6d88\u606f\u7684\u662f300\uff0c\u4ed6\u53d1\u4e86\u4e2a\u6d88\u606f\u7ed9100\u3002\u53d1\u5b8c\u4ee5\u540e\uff0c\u8fd9\u4e2a\u4e1c\u897f\u5e94\u8be5\u600e\u4e48\u5b58\u50a8\u5462\uff1f\u5728\u8fd9\u91cc\u9762\u4e00\u5b9a\u8981\u5206\u5f00\uff0c\u8bb0\u5f55\u7f6e\u9876\u7684\u8fd9\u4e9b\u4eba\u7684\u4f1a\u8bdd\uff0c\u5bf9\u5e94\u7684\u4f1a\u8bdd\u663e\u793a\u987a\u5e8f\u548c\u975e\u7f6e\u9876\u7684\u4e00\u5b9a\u8981\u5206\u4e24\u3002 \u8fd9\u91cc\u9762\u6211\u4eec\u521b\u5efa\u4e24\u4e2a\u6a21\u578b\uff0c\u4e00\u4e2a\u662f\u666e\u901a\u7684\uff0c\u4e00\u4e2a\u662f\u7f6e\u9876\u7684\uff0c\u800c\u4e0a\u9762\u7684\u8fd9\u4e2a\u7f6e\u9876\u7684\u7528\u6237\u5462\uff0c\u6211\u4eec\u7528set\u6765\u5b58\u50a8\uff0c\u56e0\u4e3a\u4e0d\u91cd\u590d\u3002\u800c\u4e0b\u9762\u8fd9\u4e9b\u56e0\u4e3a\u6709\u987a\u5e8f\uff0c\u5f88\u5bb9\u6613\u60f3\u5230\u7528list\u53bb\u5b58\u50a8,\u4e0d\u7136\u4f60\u600e\u4e48\u8868\u8fbe\u987a\u5e8f\u5462\uff1f \u90a3\u5f53300\u53d1\u7ed9\u6d88\u606f\u7ed9100\u4ee5\u540e\uff0c\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u5148\u5224\u5b9a\u4f60\u5728\u7f6e\u9876\u4eba\u7fa4\u4e2d\u5417\uff1f\u4e0d\u5728,\u90a3\u597d\uff0c300\u7684\u6d88\u606f\u5bf9\u5e94\u7684\u987a\u5e8f\u5c31\u5e94\u8be5\u653e\u5728\u666e\u901a\u7684\u5217\u8868\u91cc\u8fb9\u3002\u800c\u5728\u8fd9\u91cc\u8fb9\uff0c\u6211\u4eec\u628a300\u52a0\u8fdb\u53bb\u3002\u7b2c\u4e00\u4e2a\u6570\u636e\u4e5f\u5c31\u662f\u73b0\u5728300\u3002 \u63a5\u4e0b\u6765400\uff0c\u53d1\u4e86\u4e2a\u6d88\u606f\u3002\u5224\u65ad\u4e00\u4e0b\uff0c\u4ed6\u662f\u9700\u8981\u7f6e\u9876\u7684\uff0c\u6240\u4ee5400\u5c06\u8fdb\u5165list\u7684\u7f6e\u9876\u91cc\u8fb9\u653e\u7740\u3002\u5f53\u524d\u8fd8\u6ca1\u6709\u7279\u6b8a\u7684\u5730\u65b9\u3002 \u518d\u6765200\u53d1\u6d88\u606f\u4e86\uff0c\u548c\u521a\u624d\u7684\u5224\u5b9a\u65b9\u6cd5\u4e00\u6837\uff0c\u5148\u770b\u5728\u4e0d\u5728\u7f6e\u9876\u91cc\uff0c\u4e0d\u5728\u7684\u8bdd\u8fdb\u666e\u901a\uff0c\u7136\u540e\u5728\u666e\u901a\u91cc\u8fb9\u628a200\u52a0\u5165\u5c31\u884c\u4e86\uff0cOK\uff0c\u5230\u8fd9\u91cc\u76ee\u524d\u8fd8\u6ca1\u6709\u987a\u5e8f\u53d8\u5316\u3002 \u63a5\u4e0b\u6765200\u53c8\u53d1\u6d88\u606f\u8fc7\u6765\uff0c\u540c\u4e00\u4e2a\u4eba\u7ed9\u4f60\u8fde\u53d1\u4e86\u4e24\u6761\uff0c\u90a3\u8fd9\u4e2a\u65f6\u5019200\u7684\u6d88\u606f\u5230\u8fbe\u4ee5\u540e\uff0c\u5148\u5224\u65ad\u662f\u5426\u5728\u7f6e\u9876\u8303\u56f4\uff0c\u4e0d\u5728\uff0c\u63a5\u4e0b\u6765\u4ed6\u8981\u653e\u5728list\u666e\u901a\u4e2d\uff0c\u8fd9\u91cc\u4f60\u8981\u6ce8\u610f\u4e00\u70b9\uff0c\u56e0\u4e3a\u8fd9\u91cc\u8fb9\u5df2\u7ecf\u6709200\uff0c\u6240\u4ee5\u8fdb\u6765\u4ee5\u540e\u5148\u5e72\u4e00\u4ef6\u4e8b\u513f\uff0c\u628a200\u6740\u6389\uff0c\u6ca1\u6709200\uff0c\u7136\u540e\u518d\u628a200\u52a0\u8fdb\u6765\uff0c\u90a3\u4f60\u60f3\u4e00\u4e0b\uff0c\u73b0\u5728\u8fd9\u4e2a\u4f4d\u7f6e\u987a\u5e8f\u662f\u4ec0\u4e48\u5462\uff1f\u5c31\u662f\u65b0\u7684\u90fd\u5728\u53f3\u8fb9\uff0c\u5bf9\u4e0d\u5bf9\uff1f \u8fd8\u8bb0\u5f97\u6211\u4eec\u8bf4list\u6a21\u578b\uff0c\u5982\u679c\u662f\u4e00\u4e2a\u53cc\u7aef\u961f\u5217\uff0c\u5b83\u662f\u53ef\u4ee5\u4e24\u5934\u8fdb\u4e24\u5934\u51fa\u3002\u5f53\u7136\u6211\u4eec\u53cc\u7aef\u4ece\u4e00\u5934\u8fdb\u4e00\u5934\u51fa\uff0c\u8fd9\u5c31\u662f\u6808\u6a21\u578b\uff0c\u73b0\u5728\u54b1\u4eec\u8fd0\u7528\u7684\u5c31\u662flist\u6a21\u578b\u4e2d\u7684\u6808\u6a21\u578b\u3002 \u73b0\u5728300\u53d1\u6d88\u606f\uff0c\u5148\u5224\u5b9a\u4ed6\u5728\u4e0d\u5728\uff0c\u4e0d\u5728\uff0c\u7528\u666e\u901a\u7684\u961f\u5217\uff0c\u63a5\u4e0b\u6765\u6309\u7167\u521a\u624d\u7684\u64cd\u4f5c\uff0c\u4e0d\u7ba1\u4f60\u91cc\u8fb9\u539f\u6765\u6709\u6ca1\u6709300\uff0c\u6211\u5148\u628a300\u6740\u6389\uff0c\u6ca1\u4e86\uff0c200\u81ea\u7136\u5c31\u586b\u5230300\u7684\u4f4d\u7f6e\u4e86\uff0c\u4ed6\u73b0\u5728\u662flist\u91cc\u9762\u552f\u4e00\u4e00\u4e2a\uff0c\u7136\u540e\u8ba9300\u8fdb\u6765\uff0c\u6ce8\u610f\u662f\u4ece\u53f3\u4fa7\u8fdb\u6765\u7684\uff0c\u90a3\u4e48\u73b0\u5728300\u5c31\u662f\u6700\u65b0\u7684\u3002 \u90a3\u4e48\u5230\u8fd9\u91cc\u5462\uff0c\u6211\u4eec\u8ba9100\u6765\u8bfb\u53d6\u6d88\u606f\u3002\u4f60\u89c9\u5f97\u8fd9\u4e2a\u6d88\u606f\u987a\u5e8f\u5e94\u8be5\u662f\u4ec0\u4e48\u6837\u7684\uff1f\u9996\u5148\u7f6e\u9876\u7684400\u6709\u4e00\u4e2a\uff0c\u4ed6\u8dd1\u5728\u6700\u4e0a\u9762\uff0c\u7136\u540elist\u666e\u901a\u5982\u679c\u51fa\u6765\u7684\u8bdd\uff0c300\u662f\u6700\u65b0\u7684\u6d88\u606f\uff0c\u800c200\u5728\u4ed6\u540e\u9762\u7684\u3002\u7528\u8fd9\u79cd\u5f62\u5f0f\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u505a\u51fa\u6765\u4ed6\u7684\u6d88\u606f\u987a\u5e8f\u6765\u3002 2.14.2 \u89e3\u51b3\u65b9\u6848 \u00b6 \u770b\u4e00\u4e0b\u6700\u7ec8\u7684\u89e3\u51b3\u65b9\u6848\uff1a \u4f9d\u8d56list\u7684\u6570\u636e\u5177\u6709\u987a\u5e8f\u7684\u7279\u5f81\u5bf9\u6d88\u606f\u8fdb\u884c\u7ba1\u7406\uff0c\u5c06list\u7ed3\u6784\u4f5c\u4e3a\u6808\u4f7f\u7528 \u7f6e\u9876\u4e0e\u666e\u901a\u4f1a\u8bdd\u5206\u522b\u521b\u5efa\u72ec\u7acb\u7684list\u5206\u522b\u7ba1\u7406 \u5f53\u67d0\u4e2alist\u4e2d\u63a5\u6536\u5230\u7528\u6237\u6d88\u606f\u540e\uff0c\u5c06\u6d88\u606f\u53d1\u9001\u65b9\u7684id\u4ecelist\u7684\u4e00\u4fa7\u52a0\u5165list\uff08\u6b64\u5904\u8bbe\u5b9a\u5de6\u4fa7\uff09 \u591a\u4e2a\u76f8\u540cid\u53d1\u51fa\u7684\u6d88\u606f\u53cd\u590d\u5165\u6808\u4f1a\u51fa\u73b0\u95ee\u9898\uff0c\u5728\u5165\u6808\u4e4b\u524d\u65e0\u8bba\u662f\u5426\u5177\u6709\u5f53\u524did\u5bf9\u5e94\u7684\u6d88\u606f\uff0c\u5148\u5220\u9664\u5bf9\u5e94id \u63a8\u9001\u6d88\u606f\u65f6\u5148\u63a8\u9001\u7f6e\u9876\u4f1a\u8bddlist\uff0c\u518d\u63a8\u9001\u666e\u901a\u4f1a\u8bddlist\uff0c\u63a8\u9001\u5b8c\u6210\u7684list\u6e05\u9664\u6240\u6709\u6570\u636e \u6d88\u606f\u7684\u6570\u91cf\uff0c\u4e5f\u5c31\u662f\u5fae\u4fe1\u7528\u6237\u5bf9\u8bdd\u6570\u91cf\u91c7\u7528\u8ba1\u6570\u5668\u7684\u601d\u60f3\u53e6\u884c\u8bb0\u5f55\uff0c\u4f34\u968flist\u64cd\u4f5c\u540c\u6b65\u66f4\u65b0 2.14.3 \u6570\u636e\u7c7b\u578b\u603b\u7ed3 \u00b6 \u603b\u7ed3\u4e00\u4e0b\uff0c\u5728\u6574\u4e2a\u6570\u636e\u7c7b\u578b\u7684\u90e8\u5206\uff0c\u6211\u4eec\u4e3b\u8981\u4ecb\u7ecd\u4e86\u54ea\u4e9b\u5185\u5bb9\uff1a \u9996\u5148\u6211\u4eec\u4e86\u89e3\u4e86\u4e00\u4e0b\u6570\u636e\u7c7b\u578b\uff0c\u63a5\u4e0b\u6765\u9488\u5bf9\u7740\u6211\u4eec\u8981\u5b66\u4e60\u7684\u6570\u636e\u7c7b\u578b\uff0c\u8fdb\u884c\u9010\u4e00\u8bb2\u89e3\u4e86string\u3001hash\u3001list\u3001set\u7b49\uff0c\u6700\u540e\u901a\u8fc7\u4e00\u4e2a\u6848\u4f8b\u603b\u7ed3\u4e86\u4e00\u4e0b\u524d\u9762\u7684\u6570\u636e\u7c7b\u578b\u7684\u4f7f\u7528\u573a\u666f\u3002 3. \u5e38\u7528\u6307\u4ee4 \u00b6 \u5728\u8fd9\u90e8\u5206\u4e2d\u5462\uff0c\u6211\u4eec\u5bb6\u5b66\u4e60\u4e24\u4e2a\u77e5\u8bc6\uff0c\u7b2c\u4e00\u4e2a\u662fkey\u7684\u5e38\u7528\u6307\u4ee4\uff0c\u7b2c\u4e8c\u4e2a\u662f\u6570\u636e\u5e93\u7684\u5e38\u7528\u6307\u4ee4\u3002\u548c\u524d\u9762\u6211\u4eec\u5b66\u6570\u636e\u7c7b\u578b\u505a\u4e00\u4e0b\u533a\u5206\uff0c\u524d\u9762\u4f60\u5b66\u7684\u90a3\u4e9b\u6307\u4ee4\u5462\uff0c\u90fd\u662f\u9488\u5bf9\u67d0\u4e00\u4e2a\u6570\u636e\u7c7b\u578b\u64cd\u4f5c\u7684\uff0c\u73b0\u5728\u5b66\u7684\u90fd\u662f\u5bf9\u6240\u6709\u7684\u64cd\u4f5c\u7684\uff0c\u6765\u770b\u4e00\u4e0b\uff0c\u6211\u4eec\u5728\u5b66\u4e60Key\u7684\u64cd\u4f5c\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5148\u60f3\u4e00\u4e0b\u7684\u64cd\u4f5c\u6211\u4eec\u5e94\u8be5\u5b66\u54ea\u4e9b\u4e1c\u897f: 3.1 key \u64cd\u4f5c\u5206\u6790 \u00b6 3.1.1 key\u5e94\u8be5\u8bbe\u8ba1\u54ea\u4e9b\u64cd\u4f5c\uff1f \u00b6 key\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u901a\u8fc7key\u83b7\u53d6redis\u4e2d\u4fdd\u5b58\u7684\u6570\u636e \u5bf9\u4e8ekey\u81ea\u8eab\u72b6\u6001\u7684\u76f8\u5173\u64cd\u4f5c\uff0c\u4f8b\u5982\uff1a\u5220\u9664\uff0c\u5224\u5b9a\u5b58\u5728\uff0c\u83b7\u53d6\u7c7b\u578b\u7b49 \u5bf9\u4e8ekey\u6709\u6548\u6027\u63a7\u5236\u76f8\u5173\u64cd\u4f5c\uff0c\u4f8b\u5982\uff1a\u6709\u6548\u671f\u8bbe\u5b9a\uff0c\u5224\u5b9a\u662f\u5426\u6709\u6548\uff0c\u6709\u6548\u72b6\u6001\u7684\u5207\u6362\u7b49 \u5bf9\u4e8ekey\u5feb\u901f\u67e5\u8be2\u64cd\u4f5c\uff0c\u4f8b\u5982\uff1a\u6309\u6307\u5b9a\u7b56\u7565\u67e5\u8be2key 3.1.2 key \u57fa\u672c\u64cd\u4f5c \u00b6 \u5220\u9664\u6307\u5b9akey del key \u83b7\u53d6key\u662f\u5426\u5b58\u5728 exists key \u83b7\u53d6key\u7684\u7c7b\u578b type key 3.1.3 \u62d3\u5c55\u64cd\u4f5c \u6392\u5e8f sort \u6539\u540d rename key newkey renamenx key newkey 3.1.3 key \u6269\u5c55\u64cd\u4f5c\uff08\u65f6\u6548\u6027\u63a7\u5236\uff09 \u00b6 \u4e3a\u6307\u5b9akey\u8bbe\u7f6e\u6709\u6548\u671f expire key seconds pexpire key milliseconds expireat key timestamp pexpireat key milliseconds-timestamp \u83b7\u53d6key\u7684\u6709\u6548\u65f6\u95f4 ttl key pttl key \u5207\u6362key\u4ece\u65f6\u6548\u6027\u8f6c\u6362\u4e3a\u6c38\u4e45\u6027 persist key 3.1.4 key \u6269\u5c55\u64cd\u4f5c\uff08\u67e5\u8be2\u6a21\u5f0f\uff09 \u00b6 \u67e5\u8be2key keys pattern \u67e5\u8be2\u6a21\u5f0f\u89c4\u5219 *\u5339\u914d\u4efb\u610f\u6570\u91cf\u7684\u4efb\u610f\u7b26\u53f7 ? \u914d\u5408\u4e00\u4e2a\u4efb\u610f\u7b26\u53f7 [] \u5339\u914d\u4e00\u4e2a\u6307\u5b9a\u7b26\u53f7 keys * keys \u67e5\u8be2\u6240\u6709 it* keys \u67e5\u8be2\u6240\u6709\u4ee5it\u5f00\u5934 *heima \u67e5\u8be2\u6240\u6709\u4ee5heima\u7ed3\u5c3e keys ??heima \u67e5\u8be2\u6240\u6709\u524d\u9762\u4e24\u4e2a\u5b57\u7b26\u4efb\u610f\uff0c\u540e\u9762\u4ee5heima\u7ed3\u5c3e \u67e5\u8be2\u6240\u6709\u4ee5 keys user:? user:\u5f00\u5934\uff0c\u6700\u540e\u4e00\u4e2a\u5b57\u7b26\u4efb\u610f keys u [ st ] er:1 \u67e5\u8be2\u6240\u6709\u4ee5u\u5f00\u5934\uff0c\u4ee5er:1\u7ed3\u5c3e\uff0c\u4e2d\u95f4\u5305\u542b\u4e00\u4e2a\u5b57\u6bcd\uff0cs\u6216t 3.2 \u6570\u636e\u5e93\u6307\u4ee4 \u00b6 3.2.1 key \u7684\u91cd\u590d\u95ee\u9898 \u00b6 \u5728\u8fd9\u4e2a\u5730\u65b9\u6211\u4eec\u6765\u8bb2\u4e00\u4e0b\u6570\u636e\u5e93\u7684\u5e38\u7528\u6307\u4ee4\uff0c\u5728\u8bb2\u8fd9\u4e2a\u4e1c\u897f\u4e4b\u524d\uff0c\u6211\u4eec\u5148\u601d\u8003\u4e00\u4e2a\u95ee\u9898\uff1a \u5047\u5982\u8bf4\u4f60\u4eec\u5341\u4e2a\u4eba\u540c\u65f6\u64cd\u4f5credis\uff0c\u4f1a\u4e0d\u4f1a\u51fa\u73b0key\u540d\u5b57\u547d\u540d\u51b2\u7a81\u7684\u95ee\u9898\u3002 \u4e00\u5b9a\u4f1a\uff0c\u4e3a\u4ec0\u4e48?\u56e0\u4e3a\u4f60\u7684key\u662f\u7531\u7a0b\u5e8f\u800c\u5b9a\u4e49\u7684\u3002\u4f60\u60f3\u5199\u4ec0\u4e48\u5199\u4ec0\u4e48\uff0c\u90a3\u5728\u4f7f\u7528\u7684\u8fc7\u7a0b\u4e2d\u5927\u5bb6\u90fd\u5728\u4e0d\u505c\u7684\u52a0\uff0c\u65e9\u665a\u6709\u4e00\u5929\u4ed6\u4f1a\u51b2\u7a81\u7684\u3002 redis\u5728\u4f7f\u7528\u8fc7\u7a0b\u4e2d\uff0c\u4f34\u968f\u7740\u64cd\u4f5c\u6570\u636e\u91cf\u7684\u589e\u52a0\uff0c\u4f1a\u51fa\u73b0\u5927\u91cf\u7684\u6570\u636e\u4ee5\u53ca\u5bf9\u5e94\u7684key\u3002 \u90a3\u8fd9\u4e2a\u95ee\u9898\u6211\u4eec\u8981\u4e0d\u8981\u89e3\u51b3\uff1f\u8981\uff01\u600e\u4e48\u89e3\u51b3\u5462\uff1f\u6211\u4eec\u6700\u597d\u628a\u6570\u636e\u8fdb\u884c\u4e00\u4e2a\u5206\u7c7b\uff0c\u9664\u4e86\u547d\u540d\u89c4\u8303\u6211\u4eec\u505a\u7edf\u4e00\u4ee5\u5916\uff0c\u5982\u679c\u8fd8\u80fd\u628a\u5b83\u5206\u5f00\uff0c\u8fd9\u6837\u662f\u4e0d\u662f\u51b2\u7a81\u7684\u673a\u7387\u5c31\u4f1a\u5c0f\u4e00\u4e9b\u4e86\uff0c\u8fd9\u5c31\u662f\u54b1\u4eec\u4e0b\u9762\u8981\u8bf4\u7684\u89e3\u51b3\u65b9\u6848\uff01 3.2.2 \u89e3\u51b3\u65b9\u6848 \u00b6 redis\u4e3a\u6bcf\u4e2a\u670d\u52a1\u63d0\u4f9b\u670916\u4e2a\u6570\u636e\u5e93\uff0c\u7f16\u53f7\u4ece0\u523015 \u6bcf\u4e2a\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u6570\u636e\u76f8\u4e92\u72ec\u7acb \u5728\u5bf9\u5e94\u7684\u6570\u636e\u5e93\u4e2d\u5212\u51fa\u4e00\u5757\u533a\u57df\uff0c\u8bf4\u4ed6\u5c31\u662f\u51e0\uff0c\u4f60\u5c31\u7528\u51e0\u90a3\u5757\uff0c\u540c\u65f6\uff0c\u5176\u4ed6\u7684\u8fd9\u4e9b\u90fd\u53ef\u4ee5\u8fdb\u884c\u5b9a\u4e49\uff0c\u4e00\u5171\u662f16\u4e2a\uff0c\u8fd9\u91cc\u8fb9\u9700\u8981\u6ce8\u610f\u4e00\u70b9\uff0c\u4ed6\u4eec\u8fd916\u4e2a\u5171\u7528redis\u7684\u5185\u5b58\u3002\u6ca1\u6709\u8bf4\u8c01\u5927\u8c01\u5c0f\uff0c\u4e5f\u5c31\u662f\u8bf4\u6570\u5b57\u53ea\u662f\u4ee3\u8868\u4e86\u4e00\u5757\u513f\u533a\u57df\uff0c\u533a\u57df\u5177\u4f53\u591a\u5927\u672a\u77e5\u3002\u8fd9\u662f\u6570\u636e\u5e93\u7684\u4e00\u4e2a\u5206\u533a\u7684\u4e00\u4e2a\u7b56\u7565\uff01 3.2.3 \u6570\u636e\u5e93\u7684\u57fa\u672c\u64cd\u4f5c \u00b6 \u5207\u6362\u6570\u636e\u5e93 select index \u5176\u4ed6\u64cd\u4f5c ping 3.2.4 \u6570\u636e\u5e93\u6269\u5c55\u64cd\u4f5c \u00b6 \u6570\u636e\u79fb\u52a8 move key db \u6570\u636e\u603b\u91cf dbsize \u6570\u636e\u6e05\u9664 flushdb flushall 4. Jedis \u00b6 \u5728\u5b66\u4e60\u5b8credis\u540e\uff0c\u6211\u4eec\u73b0\u5728\u5c31\u8981\u7528Java\u6765\u8fde\u63a5redis\u4e86\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u7684\u8fd9\u4e00\u7ae0\u8981\u5b66\u7684Jedis\u4e86\u3002\u5728\u8fd9\u4e2a\u90e8\u5206\uff0c\u6211\u4eec\u4e3b\u8981\u8bb2\u89e3\u4ee5\u4e0b3\u4e2a\u5185\u5bb9\uff1a HelloWorld\uff08Jedis\u7248\uff09 Jedis\u7b80\u6613\u5de5\u5177\u7c7b\u5f00\u53d1 \u53ef\u89c6\u5316\u5ba2\u6237\u7aef 4.1 Jedis\u7b80\u4ecb \u00b6 4.1.1 \u7f16\u7a0b\u8bed\u8a00\u4e0eredis \u00b6 \u5bf9\u4e8e\u6211\u4eec\u73b0\u5728\u7684\u6570\u636e\u6765\u8bf4\uff0c\u5b83\u662f\u5728\u6211\u4eec\u7684redis\u4e2d\uff0c\u800c\u6700\u7ec8\u6211\u4eec\u662f\u8981\u505a\u7a0b\u5e8f\u3002\u90a3\u4e48\u7a0b\u5e8f\u5c31\u8981\u548c\u6211\u4eec\u7684redis\u8fdb\u884c\u8fde\u63a5\u3002\u5e72\u4ec0\u4e48\u4e8b\u60c5\u5462\uff1f\u4e24\u4ef6\u4e8b\uff1a\u7a0b\u5e8f\u4e2d\u6709\u6570\u636e\u7684\u65f6\u5019\uff0c\u6211\u4eec\u8981\u628a\u8fd9\u4e9b\u6570\u636e\u5168\u90e8\u4ea4\u7ed9redis\u7ba1\u7406\u3002\u540c\u65f6\uff0credis\u4e2d\u7684\u6570\u636e\u8fd8\u80fd\u53d6\u51fa\u6765\uff0c\u56de\u5230\u6211\u4eec\u7684\u5e94\u7528\u7a0b\u5e8f\u4e2d\u3002\u90a3\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u5728Java\u4e0eredis\u4e4b\u95f4\u6253\u4ea4\u9053\u7684\u8fd9\u4e2a\u4e1c\u897f\u5c31\u53eb\u505aJedis.\u7b80\u5355\u8bf4\uff0cJedis\u5c31\u662f\u63d0\u4f9b\u4e86Java\u4e0eredis\u7684\u8fde\u63a5\u670d\u52a1\u7684\uff0c\u91cc\u8fb9\u6709\u5404\u79cd\u5404\u6837\u7684API\u63a5\u53e3\uff0c\u4f60\u53ef\u4ee5\u53bb\u8c03\u7528\u5b83\u3002 \u9664\u4e86Jedis\u5916\uff0c\u8fd8\u6709\u6ca1\u6709\u5176\u4ed6\u7684\u8fd9\u79cd\u8fde\u63a5\u670d\u52a1\u5462\uff1f\u5176\u5b9e\u8fd8\u6709\u5f88\u591a\uff0c\u4e86\u89e3\u4e00\u4e0b\uff1a Java\u8bed\u8a00\u8fde\u63a5redis\u670d\u52a1 Jedis\uff08SpringData\u3001Redis \u3001 Lettuce\uff09 \u5176\u5b83\u8bed\u8a00\uff1aC \u3001C++ \u3001C# \u3001Erlang\u3001Lua \u3001Objective-C \u3001Perl \u3001PHP \u3001Python \u3001Ruby \u3001Scala 4.1.2 \u51c6\u5907\u5de5\u4f5c \u00b6 (1)jar\u5305\u5bfc\u5165 \u4e0b\u8f7d\u5730\u5740\uff1ahttps://mvnrepository.com/artifact/redis.clients/jedis \u57fa\u4e8emaven <dependency> <groupId> redis.clients </groupId> <artifactId> jedis </artifactId> <version> 2.9.0 </version> </dependency> (2)\u5ba2\u6237\u7aef\u8fde\u63a5redis \u8fde\u63a5redis Jedis jedis = new Jedis(\"localhost\", 6379); \u64cd\u4f5credis jedis.set(\"name\", \"itheima\"); jedis.get(\"name\"); \u5173\u95edredis\u8fde\u63a5 jedis.close(); API\u6587\u6863 http://xetorthio.github.io/jedis/ 4.1.3 \u4ee3\u7801\u5b9e\u73b0 \u00b6 \u521b\u5efa\uff1acom.itheima.JedisTest public class JedisTest { public static void main ( String [] args ) { //1.\u83b7\u53d6\u8fde\u63a5\u5bf9\u8c61 Jedis jedis = new Jedis ( \"192.168.40.130\" , 6379 ); //2.\u6267\u884c\u64cd\u4f5c jedis . set ( \"age\" , \"39\" ); String hello = jedis . get ( \"hello\" ); System . out . println ( hello ); jedis . lpush ( \"list1\" , \"a\" , \"b\" , \"c\" , \"d\" ); List < String > list1 = jedis . lrange ( \"list1\" , 0 , - 1 ); for ( String s : list1 ) { System . out . println ( s ); } jedis . sadd ( \"set1\" , \"abc\" , \"abc\" , \"def\" , \"poi\" , \"cba\" ); Long len = jedis . scard ( \"set1\" ); System . out . println ( len ); //3.\u5173\u95ed\u8fde\u63a5 jedis . close (); } } 4.2 Jedis\u7b80\u6613\u5de5\u5177\u7c7b\u5f00\u53d1 \u00b6 \u524d\u9762\u6211\u4eec\u505a\u7684\u7a0b\u5e8f\u8fd8\u662f\u6709\u70b9\u513f\u5c0f\u95ee\u9898\uff0c\u5c31\u662f\u6211\u4eec\u7684Jedis\u5bf9\u8c61\u7684\u7ba1\u7406\u662f\u6211\u4eec\u81ea\u5df1\u521b\u5efa\u7684\uff0c\u771f\u5b9e\u4f01\u4e1a\u5f00\u53d1\u4e2d\u662f\u4e0d\u53ef\u80fd\u8ba9\u4f60\u53bbnew\u4e00\u4e2a\u7684\uff0c\u90a3\u63a5\u4e0b\u6765\u54b1\u4eec\u5c31\u8981\u505a\u4e00\u4e2a\u5de5\u5177\u7c7b\uff0c\u7b80\u5355\u6765\u8bf4\uff0c\u5c31\u662f\u505a\u4e00\u4e2a\u521b\u5efaJedis\u7684\u8fd9\u6837\u7684\u4e00\u4e2a\u5de5\u5177\u3002 4.2.1 \u57fa\u4e8e\u8fde\u63a5\u6c60\u83b7\u53d6\u8fde\u63a5 \u00b6 JedisPool\uff1aJedis\u63d0\u4f9b\u7684\u8fde\u63a5\u6c60\u6280\u672f poolConfig:\u8fde\u63a5\u6c60\u914d\u7f6e\u5bf9\u8c61 host:redis\u670d\u52a1\u5730\u5740 port:redis\u670d\u52a1\u7aef\u53e3\u53f7 JedisPool\u7684\u6784\u9020\u5668\u5982\u4e0b\uff1a public JedisPool ( GenericObjectPoolConfig poolConfig , String host , int port ) { this ( poolConfig , host , port , 2000 , ( String ) null , 0 , ( String ) null ); } 4.2.2 \u5c01\u88c5\u8fde\u63a5\u53c2\u6570 \u00b6 \u521b\u5efajedis\u7684\u914d\u7f6e\u6587\u4ef6\uff1ajedis.properties jedis.host = 192.168.40.130 jedis.port = 6379 jedis.maxTotal = 50 jedis.maxIdle = 10 4.2.3 \u52a0\u8f7d\u914d\u7f6e\u4fe1\u606f \u00b6 \u521b\u5efaJedisUtils\uff1acom.itheima.util.JedisUtils\uff0c\u4f7f\u7528\u9759\u6001\u4ee3\u7801\u5757\u521d\u59cb\u5316\u8d44\u6e90 public class JedisUtils { private static int maxTotal ; private static int maxIdel ; private static String host ; private static int port ; private static JedisPoolConfig jpc ; private static JedisPool jp ; static { ResourceBundle bundle = ResourceBundle . getBundle ( \"redis\" ); maxTotal = Integer . parseInt ( bundle . getString ( \"redis.maxTotal\" )); maxIdel = Integer . parseInt ( bundle . getString ( \"redis.maxIdel\" )); host = bundle . getString ( \"redis.host\" ); port = Integer . parseInt ( bundle . getString ( \"redis.port\" )); //Jedis\u8fde\u63a5\u6c60\u914d\u7f6e jpc = new JedisPoolConfig (); jpc . setMaxTotal ( maxTotal ); jpc . setMaxIdle ( maxIdel ); jp = new JedisPool ( jpc , host , port ); } } 4.2.4 \u83b7\u53d6\u8fde\u63a5 \u00b6 \u5bf9\u5916\u8bbf\u95ee\u63a5\u53e3\uff0c\u63d0\u4f9bjedis\u8fde\u63a5\u5bf9\u8c61\uff0c\u8fde\u63a5\u4ece\u8fde\u63a5\u6c60\u83b7\u53d6\uff0c\u5728JedisUtils\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u83b7\u53d6jedis\u7684\u65b9\u6cd5\uff1agetJedis public static Jedis getJedis (){ Jedis jedis = jedisPool . getResource (); return jedis ; } 4.3 \u53ef\u89c6\u5316\u5ba2\u6237\u7aef \u00b6 4.3.1 Redis Desktop Manager 5. \u6301\u4e45\u5316 \u00b6 \u4e0b\u9762\u5462\uff0c\u8fdb\u5165\u5230\u6301\u4e45\u5316\u7684\u5b66\u4e60.\u8fd9\u90e8\u5206\u5185\u5bb9\u7406\u89e3\u7684\u4e1c\u897f\u591a\uff0c\u64cd\u4f5c\u7684\u4e1c\u897f\u5c11\u3002\u5728\u8fd9\u4e2a\u90e8\u5206\uff0c\u6211\u4eec\u5c06\u8bb2\u89e3\u56db\u4e2a\u4e1c\u897f\uff1a \u6301\u4e45\u5316\u7b80\u4ecb RDB AOF RDB\u4e0eAOF\u533a\u522b 5.1 \u6301\u4e45\u5316\u7b80\u4ecb \u00b6 5.1.1 \u573a\u666f-\u610f\u5916\u65ad\u7535 \u00b6 \u4e0d\u77e5\u9053\u5927\u5bb6\u6709\u6ca1\u6709\u9047\u89c1\u8fc7\uff0c\u5c31\u662f\u6b63\u5de5\u4f5c\u7684\u65f6\u5019\u505c\u7535\u4e86\uff0c\u5982\u679c\u4f60\u7528\u7684\u662f\u7b14\u8bb0\u672c\u7535\u8111\u8fd8\u597d\uff0c\u4f60\u6709\u7535\u6c60\uff0c\u4f46\u5982\u679c\u4f60\u7528\u7684\u662f\u53f0\u5f0f\u673a\u5462\uff0c\u90a3\u6050\u6015\u5c31\u6bd4\u8f83\u707e\u96be\u4e86\uff0c\u5047\u5982\u4f60\u73b0\u5728\u6b63\u5728\u5199\u4e00\u4e2a\u6bd4\u8f83\u91cd\u8981\u7684\u6587\u6863\uff0c\u5982\u679c\u4f60\u8981\u4f7f\u7528\u7684\u662fword\uff0c\u8fd9\u79cd\u529e\u516c\u81ea\u52a8\u5316\u8f6f\u4ef6\u7684\u8bdd\uff0c\u4ed6\u4e00\u65e6\u9047\u5230\u505c\u7535\uff0c\u5176\u5b9e\u4f60\u4e0d\u7528\u62c5\u5fc3\uff0c\u56e0\u4e3a\u5b83\u4f1a\u7ed9\u4f60\u751f\u6210\u4e00\u4e9b\u5176\u4ed6\u7684\u6587\u4ef6\u3002 \u5176\u5b9e\u4ed6\u4eec\u90fd\u5728\u505a\u4e00\u4ef6\u4e8b\u513f\uff0c\u5e2e\u4f60\u81ea\u52a8\u6062\u590d\uff0c\u6709\u4e86\u8fd9\u4e2a\u6587\u4ef6\uff0c\u4f60\u524d\u9762\u7684\u4e1c\u897f\u5c31\u4e0d\u518d\u4e22\u4e86\u3002\u90a3\u4ec0\u4e48\u662f\u81ea\u52a8\u6062\u590d\u5462\uff1f\u4f60\u8981\u5148\u4e86\u89e3\u4ed6\u7684\u6574\u4e2a\u8fc7\u7a0b\u3002 \u6211\u4eec\u8bf4\u81ea\u52a8\u6062\u590d\uff0c\u5176\u5b9e\u57fa\u4e8e\u7684\u4e00\u4e2a\u524d\u63d0\u5c31\u662f\u4ed6\u63d0\u524d\u628a\u4f60\u7684\u6570\u636e\u7ed9\u5b58\u8d77\u6765\u4e86\u3002\u4f60\u5e73\u5e38\u64cd\u4f5c\u7684\u6240\u6709\u4fe1\u606f\u90fd\u662f\u5728\u5185\u5b58\u4e2d\u7684\uff0c\u800c\u6211\u4eec\u771f\u6b63\u7684\u4fe1\u606f\u662f\u4fdd\u5b58\u5728\u786c\u76d8\u4e2d\u7684\uff0c\u5185\u5b58\u4e2d\u7684\u4fe1\u606f\u65ad\u7535\u4ee5\u540e\u5c31\u6d88\u5931\u4e86\uff0c\u786c\u76d8\u4e2d\u7684\u4fe1\u606f\u65ad\u7535\u4ee5\u540e\u8fd8\u53ef\u4ee5\u4fdd\u7559\u4e0b\u6765\uff01 \u6211\u4eec\u5c06\u6587\u4ef6\u7531\u5185\u5b58\u4e2d\u4fdd\u5b58\u5230\u786c\u76d8\u4e2d\u7684\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u6211\u4eec\u53eb\u505a\u6570\u636e\u4fdd\u5b58\uff0c\u4e5f\u5c31\u53eb\u505a\u6301\u4e45\u5316\u3002\u4f46\u662f\u628a\u5b83\u4fdd\u5b58\u4e0b\u6765\u4e0d\u662f\u4f60\u7684\u76ee\u7684\uff0c\u6700\u7ec8\u4f60\u8fd8\u8981\u628a\u5b83\u518d\u8bfb\u53d6\u51fa\u6765\uff0c\u5b83\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u6211\u4eec\u53eb\u505a\u6570\u636e\u6062\u590d\uff0c\u8fd9\u5c31\u662f\u6211\u4eec\u6240\u8bf4\u7684word\u4e3a\u4ec0\u4e48\u65ad\u7535\u4ee5\u540e\u8fd8\u80fd\u591f\u7ed9\u4f60\u4fdd\u7559\u6587\u4ef6\uff0c\u56e0\u4e3a\u5b83\u6267\u884c\u4e86\u4e00\u4e2a\u81ea\u52a8\u5907\u4efd\u7684\u8fc7\u7a0b\uff0c\u4e5f\u5c31\u662f\u901a\u8fc7\u81ea\u52a8\u7684\u5f62\u5f0f\uff0c\u628a\u4f60\u7684\u6570\u636e\u5b58\u50a8\u8d77\u6765\uff0c\u90a3\u4e48\u6709\u4e86\u8fd9\u79cd\u5f62\u5f0f\u4ee5\u540e\uff0c\u6211\u4eec\u7684\u6570\u636e\u5c31\u53ef\u4ee5\u7531\u5185\u5b58\u5230\u786c\u76d8\u4e0a\u5b9e\u73b0\u4fdd\u5b58\u3002 5.1.2 \u4ec0\u4e48\u662f\u6301\u4e45\u5316 \u00b6 (1)\u4ec0\u4e48\u662f\u6301\u4e45\u5316 \u5229\u7528\u6c38\u4e45\u6027\u5b58\u50a8\u4ecb\u8d28\u5c06\u6570\u636e\u8fdb\u884c\u4fdd\u5b58\uff0c\u5728\u7279\u5b9a\u7684\u65f6\u95f4\u5c06\u4fdd\u5b58\u7684\u6570\u636e\u8fdb\u884c\u6062\u590d\u7684\u5de5\u4f5c\u673a\u5236\u79f0\u4e3a\u6301\u4e45\u5316 \u3002 \u6301\u4e45\u5316\u7528\u4e8e\u9632\u6b62\u6570\u636e\u7684\u610f\u5916\u4e22\u5931\uff0c\u786e\u4fdd\u6570\u636e\u5b89\u5168\u6027\u3002 (2)\u6301\u4e45\u5316\u8fc7\u7a0b\u4fdd\u5b58\u4ec0\u4e48\uff1f \u6211\u4eec\u77e5\u9053\u4e00\u70b9\uff0c\u8ba1\u7b97\u673a\u4e2d\u7684\u6570\u636e\u5168\u90e8\u90fd\u662f\u4e8c\u8fdb\u5236\uff0c\u5982\u679c\u73b0\u5728\u6211\u8981\u4f60\u7ed9\u6211\u4fdd\u5b58\u4e00\u7ec4\u6570\u636e\u7684\u8bdd\uff0c\u4f60\u6709\u4ec0\u4e48\u6837\u7684\u65b9\u5f0f\u5462\uff0c\u5176\u5b9e\u6700\u7b80\u5355\u7684\u5c31\u662f\u73b0\u5728\u957f\u4ec0\u4e48\u6837\uff0c\u6211\u5c31\u8bb0\u4e0b\u6765\u5c31\u884c\u4e86\uff0c\u90a3\u4e48\u8fd9\u79cd\u662f\u8bb0\u5f55\u7eaf\u7cb9\u7684\u6570\u636e\uff0c\u4e5f\u53eb\u505a\u5feb\u7167\u5b58\u50a8\uff0c\u4e5f\u5c31\u662f\u5b83\u4fdd\u5b58\u7684\u662f\u67d0\u4e00\u65f6\u523b\u7684\u6570\u636e\u72b6\u6001\u3002 \u8fd8\u6709\u4e00\u79cd\u5f62\u5f0f\uff0c\u5b83\u4e0d\u8bb0\u5f55\u4f60\u7684\u6570\u636e\uff0c\u5b83\u8bb0\u5f55\u4f60\u6240\u6709\u7684\u64cd\u4f5c\u8fc7\u7a0b\uff0c\u6bd4\u5982\u8bf4\u5927\u5bb6\u7528idea\u7684\u65f6\u5019\uff0c\u6709\u6ca1\u6709\u9047\u5230\u8fc7\u5199\u9519\u4e86ctrl+z\u64a4\u9500\uff0c\u7136\u540ectrl+y\u8fd8\u80fd\u6062\u590d\uff0c\u8fd9\u4e2a\u5730\u65b9\u5b83\u4e5f\u662f\u5728\u8bb0\u5f55\uff0c\u4f46\u662f\u8bb0\u5f55\u7684\u662f\u4f60\u6240\u6709\u7684\u64cd\u4f5c\u8fc7\u7a0b\uff0c\u90a3\u6211\u60f3\u95ee\u4e00\u4e0b\uff0c\u64cd\u4f5c\u8fc7\u7a0b\uff0c\u6211\u90fd\u7ed9\u4f60\u7559\u4e0b\u6765\u4e86\uff0c\u4f60\u8bf4\u6570\u636e\u8fd8\u4f1a\u4e22\u5417\uff1f\u80af\u5b9a\u4e0d\u4f1a\u4e22\uff0c\u56e0\u4e3a\u4f60\u6240\u6709\u7684\u64cd\u4f5c\u8fc7\u7a0b\u6211\u90fd\u4fdd\u5b58\u4e86\u3002\u8fd9\u79cd\u4fdd\u5b58\u64cd\u4f5c\u8fc7\u7a0b\u7684\u5b58\u50a8\uff0c\u7528\u4e13\u4e1a\u672f\u8bed\u6765\u8bf4\u53ef\u4ee5\u8bf4\u662f\u65e5\u5fd7\uff0c\u8fd9\u662f\u4e24\u79cd\u4e0d\u540c\u7684\u4fdd\u5b58\u6570\u636e\u7684\u5f62\u5f0f\u554a\u3002 \u603b\u7ed3\u4e00\u4e0b\uff1a \u7b2c\u4e00\u79cd\uff1a\u5c06\u5f53\u524d\u6570\u636e\u72b6\u6001\u8fdb\u884c\u4fdd\u5b58\uff0c\u5feb\u7167\u5f62\u5f0f\uff0c\u5b58\u50a8\u6570\u636e\u7ed3\u679c\uff0c\u5b58\u50a8\u683c\u5f0f\u7b80\u5355\uff0c\u5173\u6ce8\u70b9\u5728\u6570\u636e\u3002 \u7b2c\u4e8c\u79cd\uff1a\u5c06\u6570\u636e\u7684\u64cd\u4f5c\u8fc7\u7a0b\u8fdb\u884c\u4fdd\u5b58\uff0c\u65e5\u5fd7\u5f62\u5f0f\uff0c\u5b58\u50a8\u64cd\u4f5c\u8fc7\u7a0b\uff0c\u5b58\u50a8\u683c\u5f0f\u590d\u6742\uff0c\u5173\u6ce8\u70b9\u5728\u6570\u636e\u7684\u64cd\u4f5c\u8fc7\u7a0b\u3002 5.2 RDB \u00b6 5.2.1 save\u6307\u4ee4 \u00b6 \u624b\u52a8\u6267\u884c\u4e00\u6b21\u4fdd\u5b58\u64cd\u4f5c save save\u6307\u4ee4\u76f8\u5173\u914d\u7f6e \u8bbe\u7f6e\u672c\u5730\u6570\u636e\u5e93\u6587\u4ef6\u540d\uff0c\u9ed8\u8ba4\u503c\u4e3a dump.rdb\uff0c\u901a\u5e38\u8bbe\u7f6e\u4e3adump-\u7aef\u53e3\u53f7.rdb dbfilename filename \u8bbe\u7f6e\u5b58\u50a8.rdb\u6587\u4ef6\u7684\u8def\u5f84\uff0c\u901a\u5e38\u8bbe\u7f6e\u6210\u5b58\u50a8\u7a7a\u95f4\u8f83\u5927\u7684\u76ee\u5f55\u4e2d\uff0c\u76ee\u5f55\u540d\u79f0data dir path \u8bbe\u7f6e\u5b58\u50a8\u81f3\u672c\u5730\u6570\u636e\u5e93\u65f6\u662f\u5426\u538b\u7f29\u6570\u636e\uff0c\u9ed8\u8ba4yes\uff0c\u8bbe\u7f6e\u4e3ano\uff0c\u8282\u7701 CPU \u8fd0\u884c\u65f6\u95f4\uff0c\u4f46\u5b58\u50a8\u6587\u4ef6\u53d8\u5927 rdbcompression yes|no \u8bbe\u7f6e\u8bfb\u5199\u6587\u4ef6\u8fc7\u7a0b\u662f\u5426\u8fdb\u884cRDB\u683c\u5f0f\u6821\u9a8c\uff0c\u9ed8\u8ba4yes\uff0c\u8bbe\u7f6e\u4e3ano\uff0c\u8282\u7ea6\u8bfb\u519910%\u65f6\u95f4\u6d88\u8017\uff0c\u5355\u5b58\u5728\u6570\u636e\u635f\u574f\u7684\u98ce\u9669 rdbchecksum yes|no save\u6307\u4ee4\u5de5\u4f5c\u539f\u7406 \u9700\u8981\u6ce8\u610f\u4e00\u4e2a\u95ee\u9898\uff0c\u6765\u770b\u4e00\u4e0b\uff0c\u73b0\u5728\u6709\u56db\u4e2a\u5ba2\u6237\u7aef\u5404\u81ea\u8981\u6267\u884c\u4e00\u4e2a\u6307\u4ee4\uff0c\u628a\u8fd9\u4e9b\u6307\u4ee4\u53d1\u9001\u5230redis\u670d\u52a1\u5668\u540e\uff0c\u4ed6\u4eec\u6267\u884c\u6709\u4e00\u4e2a\u5148\u540e\u987a\u5e8f\u95ee\u9898\uff0c\u5047\u5b9a\u5c31\u662f\u6309\u71671234\u7684\u987a\u5e8f\u653e\u8fc7\u53bb\u7684\u8bdd\uff0c\u90a3\u4f1a\u662f\u4ec0\u4e48\u6837\u7684\uff1f \u8bb0\u5f97redis\u662f\u4e2a\u5355\u7ebf\u7a0b\u7684\u5de5\u4f5c\u6a21\u5f0f\uff0c\u5b83\u4f1a\u521b\u5efa\u4e00\u4e2a\u4efb\u52a1\u961f\u5217\uff0c\u6240\u6709\u7684\u547d\u4ee4\u90fd\u4f1a\u8fdb\u5230\u8fd9\u4e2a\u961f\u5217\u91cc\u8fb9\uff0c\u5728\u8fd9\u513f\u6392\u961f\u6267\u884c\uff0c\u6267\u884c\u5b8c\u4e00\u4e2a\u6d88\u5931\u4e00\u4e2a\uff0c\u5f53\u6240\u6709\u7684\u547d\u4ee4\u90fd\u6267\u884c\u5b8c\u4e86\uff0cOK\uff0c\u7ed3\u679c\u8fbe\u5230\u4e86\u3002 \u4f46\u662f\u5982\u679c\u73b0\u5728\u6211\u4eec\u6267\u884c\u7684\u65f6\u5019save\u6307\u4ee4\u4fdd\u5b58\u7684\u6570\u636e\u91cf\u5f88\u5927\u4f1a\u662f\u4ec0\u4e48\u73b0\u8c61\u5462\uff1f \u4ed6\u4f1a\u975e\u5e38\u8017\u65f6\uff0c\u4ee5\u81f3\u4e8e\u5f71\u54cd\u5230\u5b83\u5728\u6267\u884c\u7684\u65f6\u5019\uff0c\u540e\u9762\u7684\u6307\u4ee4\u90fd\u8981\u7b49\uff0c\u6240\u4ee5\u8bf4\u8fd9\u79cd\u6a21\u5f0f\u662f\u4e0d\u53cb\u597d\u7684\uff0c\u8fd9\u662fsave\u6307\u4ee4\u5bf9\u5e94\u7684\u4e00\u4e2a\u95ee\u9898\uff0c\u5f53cpu\u6267\u884c\u7684\u65f6\u5019\u4f1a\u963b\u585eredis\u670d\u52a1\u5668\uff0c\u76f4\u5230\u4ed6\u6267\u884c\u5b8c\u6bd5\uff0c\u6240\u4ee5\u8bf4\u6211\u4eec\u4e0d\u5efa\u8bae\u5927\u5bb6\u5728\u7ebf\u4e0a\u73af\u5883\u7528save\u6307\u4ee4\u3002 5.2.2 bgsave\u6307\u4ee4 \u00b6 \u4e4b\u524d\u6211\u4eec\u8bb2\u5230\u4e86\u5f53save\u6307\u4ee4\u7684\u6570\u636e\u91cf\u8fc7\u5927\u65f6\uff0c\u5355\u7ebf\u7a0b\u6267\u884c\u65b9\u5f0f\u9020\u6210\u6548\u7387\u8fc7\u4f4e\uff0c\u90a3\u5e94\u8be5\u5982\u4f55\u5904\u7406\uff1f \u6b64\u65f6\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\uff1a bgsave \u6307\u4ee4\uff0cbg\u5176\u5b9e\u662fbackground\u7684\u610f\u601d\uff0c\u540e\u53f0\u6267\u884c\u7684\u610f\u601d \u624b\u52a8\u542f\u52a8\u540e\u53f0\u4fdd\u5b58\u64cd\u4f5c\uff0c\u4f46\u4e0d\u662f\u7acb\u5373\u6267\u884c bgsave bgsave\u6307\u4ee4\u76f8\u5173\u914d\u7f6e \u540e\u53f0\u5b58\u50a8\u8fc7\u7a0b\u4e2d\u5982\u679c\u51fa\u73b0\u9519\u8bef\u73b0\u8c61\uff0c\u662f\u5426\u505c\u6b62\u4fdd\u5b58\u64cd\u4f5c\uff0c\u9ed8\u8ba4yes stop-writes-on-bgsave-error yes|no \u5176 \u4ed6 dbfilename filename dir path rdbcompression yes|no rdbchecksum yes|no bgsave\u6307\u4ee4\u5de5\u4f5c\u539f\u7406 \u5f53\u6267\u884cbgsave\u7684\u65f6\u5019\uff0c\u5ba2\u6237\u7aef\u53d1\u51fabgsave\u6307\u4ee4\u7ed9\u5230redis\u670d\u52a1\u5668\u3002\u6ce8\u610f\uff0c\u8fd9\u4e2a\u65f6\u5019\u670d\u52a1\u5668\u9a6c\u4e0a\u56de\u4e00\u4e2a\u7ed3\u679c\u544a\u8bc9\u5ba2\u6237\u7aef\u540e\u53f0\u5df2\u7ecf\u5f00\u59cb\u4e86\uff0c\u4e0e\u6b64\u540c\u65f6\u5b83\u4f1a\u521b\u5efa\u4e00\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u4f7f\u7528Linux\u7684fork\u51fd\u6570\u521b\u5efa\u4e00\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u8ba9\u8fd9\u4e2a\u5b50\u8fdb\u7a0b\u53bb\u6267\u884csave\u76f8\u5173\u7684\u64cd\u4f5c\uff0c\u6b64\u65f6\u6211\u4eec\u53ef\u4ee5\u60f3\u4e00\u4e0b\uff0c\u6211\u4eec\u4e3b\u8fdb\u7a0b\u4e00\u76f4\u5728\u5904\u7406\u6307\u4ee4\uff0c\u800c\u5b50\u8fdb\u7a0b\u5728\u6267\u884c\u540e\u53f0\u7684\u4fdd\u5b58\uff0c\u5b83\u4f1a\u4e0d\u4f1a\u5e72\u6270\u5230\u4e3b\u8fdb\u7a0b\u7684\u6267\u884c\u5417\uff1f \u7b54\u6848\u662f\u4e0d\u4f1a\uff0c\u6240\u4ee5\u8bf4\u4ed6\u624d\u662f\u4e3b\u6d41\u65b9\u6848\u3002\u5b50\u8fdb\u7a0b\u5f00\u59cb\u6267\u884c\u4e4b\u540e\uff0c\u5b83\u5c31\u4f1a\u521b\u5efa\u554aRDB\u6587\u4ef6\u628a\u5b83\u5b58\u8d77\u6765\uff0c\u64cd\u4f5c\u5b8c\u4ee5\u540e\u4ed6\u4f1a\u628a\u8fd9\u4e2a\u7ed3\u679c\u8fd4\u56de\uff0c\u4e5f\u5c31\u662f\u8bf4bgsave\u7684\u8fc7\u7a0b\u5206\u6210\u4e24\u4e2a\u8fc7\u7a0b\uff0c\u7b2c\u4e00\u4e2a\u662f\u670d\u52a1\u7aef\u62ff\u5230\u6307\u4ee4\u76f4\u63a5\u544a\u8bc9\u5ba2\u6237\u7aef\u5f00\u59cb\u6267\u884c\u4e86\uff1b\u53e6\u5916\u4e00\u4e2a\u8fc7\u7a0b\u662f\u4e00\u4e2a\u5b50\u8fdb\u7a0b\u5728\u5b8c\u6210\u540e\u53f0\u7684\u4fdd\u5b58\u64cd\u4f5c\uff0c\u64cd\u4f5c\u5b8c\u4ee5\u540e\u56de\u4e00\u4e2a\u6d88\u606f\u3002 5.2.3 save\u914d\u7f6e\u81ea\u52a8\u6267\u884c \u00b6 \u8bbe\u7f6e\u81ea\u52a8\u6301\u4e45\u5316\u7684\u6761\u4ef6\uff0c\u6ee1\u8db3\u9650\u5b9a\u65f6\u95f4\u8303\u56f4\u5185key\u7684\u53d8\u5316\u6570\u91cf\u8fbe\u5230\u6307\u5b9a\u6570\u91cf\u5373\u8fdb\u884c\u6301\u4e45\u5316 save second changes \u53c2\u6570 second\uff1a\u76d1\u63a7\u65f6\u95f4\u8303\u56f4 changes\uff1a\u76d1\u63a7key\u7684\u53d8\u5316\u91cf \u8303\u4f8b\uff1a save 900 1 save 300 10 save 60 10000 \u5176\u4ed6\u76f8\u5173\u914d\u7f6e\uff1a dbfilename filename dir path rdbcompression yes|no rdbchecksum yes|no stop-writes-on-bgsave-error yes|no save\u914d\u7f6e\u5de5\u4f5c\u539f\u7406 5.2.4 RDB\u4e09\u79cd\u542f\u52a8\u65b9\u5f0f\u5bf9\u6bd4 \u00b6 \u65b9\u5f0f save\u6307\u4ee4 bgsave\u6307\u4ee4 \u8bfb\u5199 \u540c\u6b65 \u5f02\u6b65 \u963b\u585e\u5ba2\u6237\u7aef\u6307\u4ee4 \u662f \u5426 \u989d\u5916\u5185\u5b58\u6d88\u8017 \u5426 \u662f \u542f\u52a8\u65b0\u8fdb\u7a0b \u5426 \u662f RDB\u7279\u6b8a\u542f\u52a8\u5f62\u5f0f \u670d\u52a1\u5668\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u91cd\u542f debug reload \u5173\u95ed\u670d\u52a1\u5668\u65f6\u6307\u5b9a\u4fdd\u5b58\u6570\u636e shutdown save \u5168\u91cf\u590d\u5236\uff08\u5728\u4e3b\u4ece\u590d\u5236\u4e2d\u8be6\u7ec6\u8bb2\u89e3\uff09 RDB\u4f18\u70b9\uff1a RDB\u662f\u4e00\u4e2a\u7d27\u51d1\u538b\u7f29\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u5b58\u50a8\u6548\u7387\u8f83\u9ad8 RDB\u5185\u90e8\u5b58\u50a8\u7684\u662fredis\u5728\u67d0\u4e2a\u65f6\u95f4\u70b9\u7684\u6570\u636e\u5feb\u7167\uff0c\u975e\u5e38\u9002\u5408\u7528\u4e8e\u6570\u636e\u5907\u4efd\uff0c\u5168\u91cf\u590d\u5236\u7b49\u573a\u666f RDB\u6062\u590d\u6570\u636e\u7684\u901f\u5ea6\u8981\u6bd4AOF\u5feb\u5f88\u591a \u5e94\u7528\uff1a\u670d\u52a1\u5668\u4e2d\u6bcfX\u5c0f\u65f6\u6267\u884cbgsave\u5907\u4efd\uff0c\u5e76\u5c06RDB\u6587\u4ef6\u62f7\u8d1d\u5230\u8fdc\u7a0b\u673a\u5668\u4e2d\uff0c\u7528\u4e8e\u707e\u96be\u6062\u590d\u3002 RDB\u7f3a\u70b9 RDB\u65b9\u5f0f\u65e0\u8bba\u662f\u6267\u884c\u6307\u4ee4\u8fd8\u662f\u5229\u7528\u914d\u7f6e\uff0c\u65e0\u6cd5\u505a\u5230\u5b9e\u65f6\u6301\u4e45\u5316\uff0c\u5177\u6709\u8f83\u5927\u7684\u53ef\u80fd\u6027\u4e22\u5931\u6570\u636e bgsave\u6307\u4ee4\u6bcf\u6b21\u8fd0\u884c\u8981\u6267\u884cfork\u64cd\u4f5c\u521b\u5efa\u5b50\u8fdb\u7a0b\uff0c\u8981\u727a\u7272\u6389\u4e00\u4e9b\u6027\u80fd Redis\u7684\u4f17\u591a\u7248\u672c\u4e2d\u672a\u8fdb\u884cRDB\u6587\u4ef6\u683c\u5f0f\u7684\u7248\u672c\u7edf\u4e00\uff0c\u6709\u53ef\u80fd\u51fa\u73b0\u5404\u7248\u672c\u670d\u52a1\u4e4b\u95f4\u6570\u636e\u683c\u5f0f\u65e0\u6cd5\u517c\u5bb9\u73b0\u8c61 5.3 AOF \u00b6 \u4e3a\u4ec0\u4e48\u8981\u6709AOF,\u8fd9\u5f97\u4eceRDB\u7684\u5b58\u50a8\u7684\u5f0a\u7aef\u8bf4\u8d77\uff1a \u5b58\u50a8\u6570\u636e\u91cf\u8f83\u5927\uff0c\u6548\u7387\u8f83\u4f4e\uff0c\u57fa\u4e8e\u5feb\u7167\u601d\u60f3\uff0c\u6bcf\u6b21\u8bfb\u5199\u90fd\u662f\u5168\u90e8\u6570\u636e\uff0c\u5f53\u6570\u636e\u91cf\u5de8\u5927\u65f6\uff0c\u6548\u7387\u975e\u5e38\u4f4e \u5927\u6570\u636e\u91cf\u4e0b\u7684IO\u6027\u80fd\u8f83\u4f4e \u57fa\u4e8efork\u521b\u5efa\u5b50\u8fdb\u7a0b\uff0c\u5185\u5b58\u4ea7\u751f\u989d\u5916\u6d88\u8017 \u5b95\u673a\u5e26\u6765\u7684\u6570\u636e\u4e22\u5931\u98ce\u9669 \u90a3\u89e3\u51b3\u7684\u601d\u8def\u662f\u4ec0\u4e48\u5462\uff1f \u4e0d\u5199\u5168\u6570\u636e\uff0c\u4ec5\u8bb0\u5f55\u90e8\u5206\u6570\u636e \u964d\u4f4e\u533a\u5206\u6570\u636e\u662f\u5426\u6539\u53d8\u7684\u96be\u5ea6\uff0c\u6539\u8bb0\u5f55\u6570\u636e\u4e3a\u8bb0\u5f55\u64cd\u4f5c\u8fc7\u7a0b \u5bf9\u6240\u6709\u64cd\u4f5c\u5747\u8fdb\u884c\u8bb0\u5f55\uff0c\u6392\u9664\u4e22\u5931\u6570\u636e\u7684\u98ce\u9669 5.3.1 AOF\u6982\u5ff5 \u00b6 AOF (append only file)\u6301\u4e45\u5316\uff1a\u4ee5\u72ec\u7acb\u65e5\u5fd7\u7684\u65b9\u5f0f\u8bb0\u5f55\u6bcf\u6b21\u5199\u547d\u4ee4\uff0c\u91cd\u542f\u65f6\u518d\u91cd\u65b0\u6267\u884cAOF\u6587\u4ef6\u4e2d\u547d\u4ee4 \u8fbe\u5230\u6062\u590d\u6570\u636e\u7684\u76ee\u7684\u3002 \u4e0eRDB\u76f8\u6bd4\u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u4e3a\u7531\u8bb0\u5f55\u6570\u636e\u6539\u4e3a\u8bb0\u5f55\u6570\u636e\u4ea7\u751f\u7684\u53d8\u5316 AOF\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u89e3\u51b3\u4e86\u6570\u636e\u6301\u4e45\u5316\u7684\u5b9e\u65f6\u6027\uff0c\u76ee\u524d\u5df2\u7ecf\u662fRedis\u6301\u4e45\u5316\u7684\u4e3b\u6d41\u65b9\u5f0f AOF\u5199\u6570\u636e\u8fc7\u7a0b \u542f\u52a8AOF\u76f8\u5173\u914d\u7f6e \u5f00\u542fAOF\u6301\u4e45\u5316\u529f\u80fd\uff0c\u9ed8\u8ba4no\uff0c\u5373\u4e0d\u5f00\u542f\u72b6\u6001 appendonly yes|no AOF\u6301\u4e45\u5316\u6587\u4ef6\u540d\uff0c\u9ed8\u8ba4\u6587\u4ef6\u540d\u4e3aappendonly.aof\uff0c\u5efa\u8bae\u914d\u7f6e\u4e3aappendonly-\u7aef\u53e3\u53f7.aof appendfilename filename AOF\u6301\u4e45\u5316\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\uff0c\u4e0eRDB\u6301\u4e45\u5316\u6587\u4ef6\u4fdd\u6301\u4e00\u81f4\u5373\u53ef dir AOF\u5199\u6570\u636e\u7b56\u7565\uff0c\u9ed8\u8ba4\u4e3aeverysec appendfsync always|everysec|no 5.3.2 AOF\u6267\u884c\u7b56\u7565 \u00b6 AOF\u5199\u6570\u636e\u4e09\u79cd\u7b56\u7565(appendfsync) always (\u6bcf\u6b21\uff09\uff1a\u6bcf\u6b21\u5199\u5165\u64cd\u4f5c\u5747\u540c\u6b65\u5230AOF\u6587\u4ef6\u4e2d\u6570\u636e\u96f6\u8bef\u5dee\uff0c\u6027\u80fd\u8f83\u4f4e\uff0c\u4e0d\u5efa\u8bae\u4f7f\u7528\u3002 everysec \uff08\u6bcf\u79d2\uff09\uff1a\u6bcf\u79d2\u5c06\u7f13\u51b2\u533a\u4e2d\u7684\u6307\u4ee4\u540c\u6b65\u5230AOF\u6587\u4ef6\u4e2d\uff0c\u5728\u7cfb\u7edf\u7a81\u7136\u5b95\u673a\u7684\u60c5\u51b5\u4e0b\u4e22\u59311\u79d2\u5185\u7684\u6570\u636e \u6570\u636e\u51c6\u786e\u6027\u8f83\u9ad8\uff0c\u6027\u80fd\u8f83\u9ad8\uff0c\u5efa\u8bae\u4f7f\u7528\uff0c\u4e5f\u662f\u9ed8\u8ba4\u914d\u7f6e no \uff08\u7cfb\u7edf\u63a7\u5236\uff09\uff1a\u7531\u64cd\u4f5c\u7cfb\u7edf\u63a7\u5236\u6bcf\u6b21\u540c\u6b65\u5230AOF\u6587\u4ef6\u7684\u5468\u671f\uff0c\u6574\u4f53\u8fc7\u7a0b\u4e0d\u53ef\u63a7 5.3.3 AOF\u91cd\u5199 \u00b6 \u573a\u666f\uff1aAOF\u5199\u6570\u636e\u9047\u5230\u7684\u95ee\u9898\uff0c\u5982\u679c\u8fde\u7eed\u6267\u884c\u5982\u4e0b\u6307\u4ee4\u8be5\u5982\u4f55\u5904\u7406 \u4ec0\u4e48\u53ebAOF\u91cd\u5199\uff1f \u968f\u7740\u547d\u4ee4\u4e0d\u65ad\u5199\u5165AOF\uff0c\u6587\u4ef6\u4f1a\u8d8a\u6765\u8d8a\u5927\uff0c\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cRedis\u5f15\u5165\u4e86AOF\u91cd\u5199\u673a\u5236\u538b\u7f29\u6587\u4ef6\u4f53\u79ef\u3002AOF\u6587\u4ef6\u91cd \u5199\u662f\u5c06Redis\u8fdb\u7a0b\u5185\u7684\u6570\u636e\u8f6c\u5316\u4e3a\u5199\u547d\u4ee4\u540c\u6b65\u5230\u65b0AOF\u6587\u4ef6\u7684\u8fc7\u7a0b\u3002\u7b80\u5355\u8bf4\u5c31\u662f\u5c06\u5bf9\u540c\u4e00\u4e2a\u6570\u636e\u7684\u82e5\u5e72\u4e2a\u6761\u547d\u4ee4\u6267\u884c\u7ed3 \u679c\u8f6c\u5316\u6210\u6700\u7ec8\u7ed3\u679c\u6570\u636e\u5bf9\u5e94\u7684\u6307\u4ee4\u8fdb\u884c\u8bb0\u5f55\u3002 AOF\u91cd\u5199\u4f5c\u7528 \u964d\u4f4e\u78c1\u76d8\u5360\u7528\u91cf\uff0c\u63d0\u9ad8\u78c1\u76d8\u5229\u7528\u7387 \u63d0\u9ad8\u6301\u4e45\u5316\u6548\u7387\uff0c\u964d\u4f4e\u6301\u4e45\u5316\u5199\u65f6\u95f4\uff0c\u63d0\u9ad8IO\u6027\u80fd \u964d\u4f4e\u6570\u636e\u6062\u590d\u7528\u65f6\uff0c\u63d0\u9ad8\u6570\u636e\u6062\u590d\u6548\u7387 AOF\u91cd\u5199\u89c4\u5219 \u8fdb\u7a0b\u5185\u5177\u6709\u65f6\u6548\u6027\u7684\u6570\u636e\uff0c\u5e76\u4e14\u6570\u636e\u5df2\u8d85\u65f6\u5c06\u4e0d\u518d\u5199\u5165\u6587\u4ef6 \u975e\u5199\u5165\u7c7b\u7684\u65e0\u6548\u6307\u4ee4\u5c06\u88ab\u5ffd\u7565\uff0c\u53ea\u4fdd\u7559\u6700\u7ec8\u6570\u636e\u7684\u5199\u5165\u547d\u4ee4 \u5982del key1\u3001 hdel key2\u3001srem key3\u3001set key4 111\u3001set key4 222\u7b49 \u5982select\u6307\u4ee4\u867d\u7136\u4e0d\u66f4\u6539\u6570\u636e\uff0c\u4f46\u662f\u66f4\u6539\u4e86\u6570\u636e\u7684\u5b58\u50a8\u4f4d\u7f6e\uff0c\u6b64\u7c7b\u547d\u4ee4\u540c\u6837\u9700\u8981\u8bb0\u5f55 \u5bf9\u540c\u4e00\u6570\u636e\u7684\u591a\u6761\u5199\u547d\u4ee4\u5408\u5e76\u4e3a\u4e00\u6761\u547d\u4ee4 \u5982lpushlist1 a\u3001lpush list1 b\u3001lpush list1 c\u53ef\u4ee5\u8f6c\u5316\u4e3a\uff1alpush list1 a b c\u3002 \u4e3a\u9632\u6b62\u6570\u636e\u91cf\u8fc7\u5927\u9020\u6210\u5ba2\u6237\u7aef\u7f13\u51b2\u533a\u6ea2\u51fa\uff0c\u5bf9list\u3001set\u3001hash\u3001zset\u7b49\u7c7b\u578b\uff0c\u6bcf\u6761\u6307\u4ee4\u6700\u591a\u5199\u516564\u4e2a\u5143\u7d20 AOF\u91cd\u5199\u65b9\u5f0f \u624b\u52a8\u91cd\u5199 bgrewriteaof \u624b\u52a8\u91cd\u5199\u539f\u7406\u5206\u6790\uff1a \u81ea\u52a8\u91cd\u5199 auto-aof-rewrite-min-size size auto-aof-rewrite-percentage percentage \u81ea\u52a8\u91cd\u5199\u89e6\u53d1\u6761\u4ef6\u8bbe\u7f6e auto-aof-rewrite-min-size size auto-aof-rewrite-percentage percent \u81ea\u52a8\u91cd\u5199\u89e6\u53d1\u6bd4\u5bf9\u53c2\u6570\uff08 \u8fd0\u884c\u6307\u4ee4info Persistence\u83b7\u53d6\u5177\u4f53\u4fe1\u606f \uff09 aof_current_size aof_base_size \u81ea\u52a8\u91cd\u5199\u89e6\u53d1\u6761\u4ef6\u516c\u5f0f\uff1a 5.3.4 AOF\u5de5\u4f5c\u6d41\u7a0b\u53ca\u91cd\u5199\u6d41\u7a0b \u00b6 5.4 RDB\u4e0eAOF\u533a\u522b \u00b6 5.4.1 RDB\u4e0eAOF\u5bf9\u6bd4\uff08\u4f18\u7f3a\u70b9\uff09 \u00b6 \u6301\u4e45\u5316\u65b9\u5f0f RDB AOF \u5360\u7528\u5b58\u50a8\u7a7a\u95f4 \u5c0f\uff08\u6570\u636e\u7ea7\uff1a\u538b\u7f29\uff09 \u5927\uff08\u6307\u4ee4\u7ea7\uff1a\u91cd\u5199\uff09 \u5b58\u50a8\u901f\u5ea6 \u6162 \u5feb \u6062\u590d\u901f\u5ea6 \u5feb \u6162 \u6570\u636e\u5b89\u5168\u6027 \u4f1a\u4e22\u5931\u6570\u636e \u4f9d\u636e\u7b56\u7565\u51b3\u5b9a \u8d44\u6e90\u6d88\u8017 \u9ad8/\u91cd\u91cf\u7ea7 \u4f4e/\u8f7b\u91cf\u7ea7 \u542f\u52a8\u4f18\u5148\u7ea7 \u4f4e \u9ad8 5.4.2 RDB\u4e0eAOF\u5e94\u7528\u573a\u666f \u00b6 RDB\u4e0eAOF\u7684\u9009\u62e9\u4e4b\u60d1 \u5bf9\u6570\u636e\u975e\u5e38\u654f\u611f\uff0c\u5efa\u8bae\u4f7f\u7528\u9ed8\u8ba4\u7684AOF\u6301\u4e45\u5316\u65b9\u6848 AOF\u6301\u4e45\u5316\u7b56\u7565\u4f7f\u7528everysecond\uff0c\u6bcf\u79d2\u949ffsync\u4e00\u6b21\u3002\u8be5\u7b56\u7565redis\u4ecd\u53ef\u4ee5\u4fdd\u6301\u5f88\u597d\u7684\u5904\u7406\u6027\u80fd\uff0c\u5f53\u51fa \u73b0\u95ee\u9898\u65f6\uff0c\u6700\u591a\u4e22\u59310-1\u79d2\u5185\u7684\u6570\u636e\u3002 \u6ce8\u610f\uff1a\u7531\u4e8eAOF\u6587\u4ef6\u5b58\u50a8\u4f53\u79ef\u8f83\u5927\uff0c\u4e14\u6062\u590d\u901f\u5ea6\u8f83\u6162 \u6570\u636e\u5448\u73b0\u9636\u6bb5\u6709\u6548\u6027\uff0c\u5efa\u8bae\u4f7f\u7528RDB\u6301\u4e45\u5316\u65b9\u6848 \u6570\u636e\u53ef\u4ee5\u826f\u597d\u7684\u505a\u5230\u9636\u6bb5\u5185\u65e0\u4e22\u5931\uff08\u8be5\u9636\u6bb5\u662f\u5f00\u53d1\u8005\u6216\u8fd0\u7ef4\u4eba\u5458\u624b\u5de5\u7ef4\u62a4\u7684\uff09\uff0c\u4e14\u6062\u590d\u901f\u5ea6\u8f83\u5feb\uff0c\u9636\u6bb5 \u70b9\u6570\u636e\u6062\u590d\u901a\u5e38\u91c7\u7528RDB\u65b9\u6848 \u6ce8\u610f\uff1a\u5229\u7528RDB\u5b9e\u73b0\u7d27\u51d1\u7684\u6570\u636e\u6301\u4e45\u5316\u4f1a\u4f7fRedis\u964d\u7684\u5f88\u4f4e\uff0c\u614e\u91cd\u603b\u7ed3\uff1a \u7efc\u5408\u6bd4\u5bf9 RDB\u4e0eAOF\u7684\u9009\u62e9\u5b9e\u9645\u4e0a\u662f\u5728\u505a\u4e00\u79cd\u6743\u8861\uff0c\u6bcf\u79cd\u90fd\u6709\u5229\u6709\u5f0a \u5982\u4e0d\u80fd\u627f\u53d7\u6570\u5206\u949f\u4ee5\u5185\u7684\u6570\u636e\u4e22\u5931\uff0c\u5bf9\u4e1a\u52a1\u6570\u636e\u975e\u5e38\u654f\u611f\uff0c\u9009\u7528AOF \u5982\u80fd\u627f\u53d7\u6570\u5206\u949f\u4ee5\u5185\u7684\u6570\u636e\u4e22\u5931\uff0c\u4e14\u8ffd\u6c42\u5927\u6570\u636e\u96c6\u7684\u6062\u590d\u901f\u5ea6\uff0c\u9009\u7528RDB \u707e\u96be\u6062\u590d\u9009\u7528RDB \u53cc\u4fdd\u9669\u7b56\u7565\uff0c\u540c\u65f6\u5f00\u542f RDB\u548c AOF\uff0c\u91cd\u542f\u540e\uff0cRedis\u4f18\u5148\u4f7f\u7528 AOF \u6765\u6062\u590d\u6570\u636e\uff0c\u964d\u4f4e\u4e22\u5931\u6570\u636e\u7684\u91cf # \u5ba2\u6237\u7aef\u600e\u4e48\u8bbf\u95ee\u90fd\u884c bind 0 .0.0.0 port 6379 timeout 0 # \u540e\u53f0\u542f\u52a8 daemonize yes logfile \"log_6379.log\" dir /usr/local/redis/data # rdb \u65b9\u5f0f\u6587\u4ef6\u540d\u79f0 dbfilename \"dump6379.rdb\" # \u5b58\u50a8\u7b56\u7565 2s \u4e2d\u5185\u5982\u679c\u6709\u4e24\u4e2a \u4fee\u6539\u547d\u4ee4 \u5219\u6267\u884c\u5b58\u50a8 save 2 2 # aop \u914d\u7f6e appendonly yes appendfilename \"dump6379.aof\" appendfsync always # aof \u81ea\u52a8\u91cd\u5199 # \u6bcf4M \u6570\u636e \u91cd\u5199\u4e00\u6b21 auto-aof-rewrite-min-size 4mb # \u548c\u4e0a\u6b21\u5907\u4efd\u505a\u5bf9\u6bd4,\u5982\u679c \u8d85\u8fc7\u4e8610% \u5219\u91cd\u5199\u6587\u4ef6 auto-aof-rewrite-percentage 10 %","title":"day01"},{"location":"redis/day01/#1_redis","text":"","title":"1. Redis \u7b80\u4ecb"},{"location":"redis/day01/#redis","text":"\u672c\u8bfe\u7a0b\u6240\u793a\uff0c\u5747\u57fa\u4e8eCenter OS7\u5b89\u88c5Redis\u3002 0 ) \u5982\u679c wget \u547d\u4ee4\u627e\u4e0d\u5230 yum - y install wget 0 ) \u5982\u679cmake \u62a5\u9519 \u5b89\u88c5 c \u8bed\u8a00\u7f16\u8bd1\u73af\u5883 yum install gcc - c ++ (1)\u4e0b\u8f7dRedis \u4e0b\u8f7d\u5b89\u88c5\u5305\uff1a wget http://download.redis.io/releases/redis-5.0.0.tar.gz \u89e3\u538b\u5b89\u88c5\u5305\uff1a tar -xvf redis-5.0.0.tar.gz \u7f16\u8bd1\uff08\u5728\u89e3\u538b\u7684\u76ee\u5f55\u4e2d\u6267\u884c\uff09\uff1a make \u5b89\u88c5\uff08\u5728\u89e3\u538b\u7684\u76ee\u5f55\u4e2d\u6267\u884c\uff09\uff1a make install \uff082\uff09\u5b89\u88c5 Redis redis-server\uff0c\u670d\u52a1\u5668\u542f\u52a8\u547d\u4ee4 \u5ba2\u6237\u7aef\u542f\u52a8\u547d\u4ee4 redis-cli\uff0credis\u6838\u5fc3\u914d\u7f6e\u6587\u4ef6 redis.conf\uff0cRDB\u6587\u4ef6\u68c0\u67e5\u5de5\u5177\uff08\u5feb\u7167\u6301\u4e45\u5316\u6587\u4ef6\uff09 redis-check-dump\uff0cAOF\u6587\u4ef6\u4fee\u590d\u5de5\u5177 redis-check-aof","title":"Redis \u7684\u4e0b\u8f7d\u4e0e\u5b89\u88c5"},{"location":"redis/day01/#redis_1","text":"","title":"Redis\u670d\u52a1\u5668\u542f\u52a8"},{"location":"redis/day01/#redis_2","text":"\u542f\u52a8\u670d\u52a1\u5668\u2014\u2014\u53c2\u6570\u542f\u52a8 redis-server [ --port port ] \u8303\u4f8b redis-server --port 6379 \u542f\u52a8\u670d\u52a1\u5668\u2014\u2014\u914d\u7f6e\u6587\u4ef6\u542f\u52a8 redis-server config_file_name \u8303\u4f8b redis-server redis.conf","title":"Redis\u670d\u52a1\u5668\u542f\u52a8"},{"location":"redis/day01/#redis_3","text":"\u542f\u52a8\u5ba2\u6237\u7aef redis-cli [ -h host ] [ -p port ] \u8303 \u4f8b redis-cli -h 61 .129.65.248 -p 6384 \u6ce8\u610f\uff1a\u670d\u52a1\u5668\u542f\u52a8\u6307\u5b9a\u7aef\u53e3\u4f7f\u7528\u7684\u662f--port\uff0c\u5ba2\u6237\u7aef\u542f\u52a8\u6307\u5b9a\u7aef\u53e3\u4f7f\u7528\u7684\u662f-p\u3002-\u7684\u6570\u91cf\u4e0d\u540c\u3002","title":"Redis\u5ba2\u6237\u7aef\u542f\u52a8"},{"location":"redis/day01/#redis_4","text":"\u521b\u5efa\u914d\u7f6e\u6587\u4ef6\u5b58\u50a8\u76ee\u5f55 mkdir conf \u521b\u5efa\u670d\u52a1\u5668\u6587\u4ef6\u5b58\u50a8\u76ee\u5f55\uff08\u5305\u542b\u65e5\u5fd7\u3001\u6570\u636e\u3001\u4e34\u65f6\u914d\u7f6e\u6587\u4ef6\u7b49\uff09 mkdir data \u521b\u5efa\u5feb\u901f\u8bbf\u95ee\u94fe\u63a5 ln -s redis-5.0.0 redis","title":"Redis\u57fa\u7840\u73af\u5883\u8bbe\u7f6e\u7ea6\u5b9a"},{"location":"redis/day01/#_1","text":"# \u67e5\u770b\u914d\u7f6e\u547d\u4ee4 cat redis.conf | grep -v '#' | grep -v '^$' # \u90a3\u4e9bip \u80fd\u8bbf\u95eeredis #bind 127.0.0.1 # \u7aef\u53e3\u53f7 port 6379 # \u8d85\u65f6\u65f6\u95f4 #timeout 0 # \u662f\u5426\u540e\u53f0\u542f\u52a8 daemonize yes # \u65e5\u5fd7\u6587\u4ef6 logfile \"log_6379.log\" # \u6570\u636e\u6587\u4ef6\u4f4d\u7f6e dir /usr/local/redis/data","title":"\u914d\u7f6e\u6587\u4ef6\u542f\u52a8\u4e0e\u5e38\u7528\u914d\u7f6e"},{"location":"redis/day01/#_2","text":"\u8bbe\u7f6e\u670d\u52a1\u5668\u4ee5\u5b88\u62a4\u8fdb\u7a0b\u7684\u65b9\u5f0f\u8fd0\u884c\uff0c\u5f00\u542f\u540e\u670d\u52a1\u5668\u63a7\u5236\u53f0\u4e2d\u5c06\u6253\u5370\u670d\u52a1\u5668\u8fd0\u884c\u4fe1\u606f\uff08\u540c\u65e5\u5fd7\u5185\u5bb9\u76f8\u540c\uff09 daemonize yes | no \u7ed1\u5b9a\u4e3b\u673a\u5730\u5740 bind ip \u8bbe\u7f6e\u670d\u52a1\u5668\u7aef\u53e3 port port \u8bbe\u7f6e\u670d\u52a1\u5668\u6587\u4ef6\u4fdd\u5b58\u5730\u5740 dir path","title":"\u670d\u52a1\u5668\u7aef\u8bbe\u5b9a"},{"location":"redis/day01/#_3","text":"\u670d\u52a1\u5668\u5141\u8bb8\u5ba2\u6237\u7aef\u8fde\u63a5\u6700\u5927\u6570\u91cf\uff0c\u9ed8\u8ba40\uff0c\u8868\u793a\u65e0\u9650\u5236\u3002\u5f53\u5ba2\u6237\u7aef\u8fde\u63a5\u5230\u8fbe\u4e0a\u9650\u540e\uff0cRedis\u4f1a\u62d2\u7edd\u65b0\u7684\u8fde\u63a5 maxclients count \u5ba2\u6237\u7aef\u95f2\u7f6e\u7b49\u5f85\u6700\u5927\u65f6\u957f\uff0c\u8fbe\u5230\u6700\u5927\u503c\u540e\u5173\u95ed\u5bf9\u5e94\u8fde\u63a5\u3002\u5982\u9700\u5173\u95ed\u8be5\u529f\u80fd\uff0c\u8bbe\u7f6e\u4e3a 0 timeout seconds","title":"\u5ba2\u6237\u7aef\u914d\u7f6e"},{"location":"redis/day01/#_4","text":"\u8bbe\u7f6e\u670d\u52a1\u5668\u4ee5\u6307\u5b9a\u65e5\u5fd7\u8bb0\u5f55\u7ea7\u522b loglevel debug | verbose | notice | warning \u65e5\u5fd7\u8bb0\u5f55\u6587\u4ef6\u540d logfile filename \u6ce8\u610f\uff1a\u65e5\u5fd7\u7ea7\u522b\u5f00\u53d1\u671f\u8bbe\u7f6e\u4e3averbose\u5373\u53ef\uff0c\u751f\u4ea7\u73af\u5883\u4e2d\u914d\u7f6e\u4e3anotice\uff0c\u7b80\u5316\u65e5\u5fd7\u8f93\u51fa\u91cf\uff0c\u964d\u4f4e\u5199\u65e5\u5fd7IO\u7684\u9891\u5ea6\u3002","title":"\u65e5\u5fd7\u914d\u7f6e"},{"location":"redis/day01/#redis_5","text":"","title":"Redis\u57fa\u672c\u64cd\u4f5c"},{"location":"redis/day01/#_5","text":"\u529f\u80fd\u6027\u547d\u4ee4 \u5e2e\u52a9\u4fe1\u606f\u67e5\u9605 \u9000\u51fa\u6307\u4ee4 \u6e05\u9664\u5c4f\u5e55\u4fe1\u606f","title":"\u547d\u4ee4\u884c\u6a21\u5f0f\u5de5\u5177\u4f7f\u7528\u601d\u8003"},{"location":"redis/day01/#_6","text":"\u8bbe\u7f6e key\uff0cvalue \u6570\u636e set key value \u8303\u4f8b set name itheima \u6839\u636e key \u67e5\u8be2\u5bf9\u5e94\u7684 value\uff0c\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u8fd4\u56de\u7a7a\uff08nil\uff09 get key \u8303\u4f8b get name","title":"\u4fe1\u606f\u8bfb\u5199"},{"location":"redis/day01/#_7","text":"\u83b7\u53d6\u547d\u4ee4\u5e2e\u52a9\u6587\u6863 help [ command ] \u8303\u4f8b help set \u83b7\u53d6\u7ec4\u4e2d\u6240\u6709\u547d\u4ee4\u4fe1\u606f\u540d\u79f0 help [ @group-name ] \u8303\u4f8b help @string \u9000\u51fa\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\u6a21\u5f0f \u9000\u51fa\u5ba2\u6237\u7aef quit exit \u5feb\u6377\u952e Ctrl+C","title":"\u5e2e\u52a9\u4fe1\u606f"},{"location":"redis/day01/#164_redis","text":"\u5230\u8fd9\u91cc\uff0cRedis \u5165\u95e8\u7684\u76f8\u5173\u77e5\u8bc6\uff0c\u6211\u4eec\u5c31\u5168\u90e8\u5b66\u4e60\u5b8c\u4e86\uff0c\u518d\u6765\u56de\u987e\u4e00\u4e0b\uff0c\u8fd9\u4e2a\u90e8\u5206\u6211\u4eec\u4e3b\u8981\u8bb2\u89e3\u4e86\u54ea\u4e9b\u5185\u5bb9\u5462\uff1f \u9996\u5148\uff0c\u6211\u4eec\u5bf9Redis\u8fdb\u884c\u4e86\u4e00\u4e2a\u7b80\u5355\u4ecb\u7ecd\uff0c\u5305\u62ecNoSQL\u7684\u6982\u5ff5\u3001Redis\u7684\u6982\u5ff5\u7b49\u3002 \u7136\u540e\uff0c\u6211\u4eec\u4ecb\u7ecd\u4e86Redis \u7684\u4e0b\u8f7d\u4e0e\u5b89\u88c5\u3002\u5305\u62ec\u4e0b\u8f7d\u4e0e\u5b89\u88c5\u3001\u670d\u52a1\u5668\u4e0e\u5ba2\u6237\u7aef\u542f\u52a8\u3001\u4ee5\u53ca\u76f8\u5173\u914d\u7f6e\u6587\u4ef6\uff083\u7c7b\uff09\u3002 \u6700\u540e\uff0c\u6211\u4eec\u4ecb\u7ecd\u4e86Redis \u7684\u57fa\u672c\u64cd\u4f5c\u3002\u5305\u62ec\u6570\u636e\u8bfb\u5199\u3001\u9000\u51fa\u4e0e\u5e2e\u52a9\u4fe1\u606f\u83b7\u53d6\u3002","title":"1.6.4  redis\u5165\u95e8\u603b\u7ed3"},{"location":"redis/day01/#2","text":"","title":"2. \u6570\u636e\u7c7b\u578b"},{"location":"redis/day01/#21_redis_5","text":"\u57fa\u4e8e\u4ee5\u4e0a\u6570\u636e\u7279\u5f81\u6211\u4eec\u8fdb\u884c\u5206\u6790\uff0c\u6700\u7ec8\u5f97\u51fa\u6765\u6211\u4eec\u7684Redis\u4e2d\u8981\u8bbe\u8ba15\u79cd \u6570\u636e\u7c7b\u578b\uff1a string\u3001hash\u3001list\u3001set\u3001sorted_set/zset\uff08\u5e94\u7528\u6027\u8f83\u4f4e\uff09","title":"2.1  Redis \u6570\u636e\u7c7b\u578b(5\u79cd\u5e38\u7528)"},{"location":"redis/day01/#22_string","text":"\u5728\u5b66\u4e60\u7b2c\u4e00\u4e2a\u6570\u636e\u7c7b\u578b\u4e4b\u524d\uff0c\u5148\u7ed9\u5927\u5bb6\u4ecb\u7ecd\u4e00\u4e0b\uff0c\u5728\u968f\u540e\u8fd9\u90e8\u5206\u5185\u5bb9\u7684\u5b66\u4e60\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u6bcf\u4e00\u79cd\u6570\u636e\u7c7b\u578b\u90fd\u5206\u6210\u4e09\u5757\u6765\u8bb2\uff1a\u9996\u5148\u662f\u8bb2\u4e0b\u5b83\u7684\u57fa\u672c\u64cd\u4f5c\uff0c\u63a5\u4e0b\u6765\u8bb2\u4e00\u4e9b\u5b83\u7684\u6269\u5c55\u64cd\u4f5c\uff0c\u6700\u540e\u6211\u4eec\u4f1a\u53bb\u505a\u4e00\u4e2a\u5c0f\u7684\u6848\u4f8b\u5206\u6790\u3002","title":"2.2  string\u6570\u636e\u7c7b\u578b"},{"location":"redis/day01/#221redis","text":"\u5728\u5b66\u4e60string\u8fd9\u4e2a\u6570\u636e\u5f62\u5f0f\u4e4b\u524d\uff0c\u6211\u4eec\u5148\u8981\u660e\u767dstring\u5230\u5e95\u662f\u4fee\u9970\u4ec0\u4e48\u7684\u3002\u6211\u4eec\u77e5\u9053redis \u81ea\u8eab\u662f\u4e00\u4e2a Map\uff0c\u5176\u4e2d\u6240\u6709\u7684\u6570\u636e\u90fd\u662f\u91c7\u7528 key : value \u7684\u5f62\u5f0f\u5b58\u50a8\u3002 \u5bf9\u4e8e\u8fd9\u79cd\u7ed3\u6784\u6765\u8bf4\uff0c\u6211\u4eec\u7528\u6765\u5b58\u50a8\u6570\u636e\u4e00\u5b9a\u662f\u4e00\u4e2a\u503c\u524d\u9762\u5bf9\u5e94\u4e00\u4e2a\u540d\u79f0\u3002\u6211\u4eec\u901a\u8fc7\u540d\u79f0\u6765\u8bbf\u95ee\u540e\u9762\u7684\u503c\u3002\u6309\u7167\u8fd9\u79cd\u5f62\u52bf\uff0c\u6211\u4eec\u53ef\u4ee5\u5bf9\u51fa\u6765\u6211\u4eec\u7684\u5b58\u50a8\u683c\u5f0f\u3002\u524d\u9762\u8fd9\u4e00\u90e8\u5206\u6211\u4eec\u79f0\u4e3akey\u3002\u540e\u9762\u7684\u4e00\u90e8\u5206\u79f0\u4e3avalue\uff0c\u800c\u6211\u4eec\u7684\u6570\u636e\u7c7b\u578b\uff0c\u4ed6\u4e00\u5b9a\u662f\u4fee\u9970value\u7684\u3002 \u6570\u636e\u7c7b\u578b\u6307\u7684\u662f\u5b58\u50a8\u7684\u6570\u636e\u7684\u7c7b\u578b\uff0c\u4e5f\u5c31\u662f value \u90e8\u5206\u7684\u7c7b\u578b\uff0ckey \u90e8\u5206\u6c38\u8fdc\u90fd\u662f\u5b57\u7b26\u4e32\u3002","title":"2.2.1Redis \u6570\u636e\u5b58\u50a8\u683c\u5f0f"},{"location":"redis/day01/#222_string","text":"\uff081\uff09\u5b58\u50a8\u7684\u6570\u636e\uff1a\u5355\u4e2a\u6570\u636e\uff0c\u6700\u7b80\u5355\u7684\u6570\u636e\u5b58\u50a8\u7c7b\u578b\uff0c\u4e5f\u662f\u6700\u5e38\u7528\u7684\u6570\u636e\u5b58\u50a8\u7c7b\u578b\u3002 string\uff0c\u4ed6\u5c31\u662f\u5b58\u4e00\u4e2a\u5b57\u7b26\u4e32\u513f\uff0c\u6ce8\u610f\u662fvalue\u90a3\u4e00\u90e8\u5206\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5b83\u662fredis\u4e2d\u6700\u57fa\u672c\u3001\u6700\u7b80\u5355\u7684\u5b58\u50a8\u6570\u636e\u7684\u683c\u5f0f\u3002 \uff082\uff09\u5b58\u50a8\u6570\u636e\u7684\u683c\u5f0f\uff1a\u4e00\u4e2a\u5b58\u50a8\u7a7a\u95f4\u4fdd\u5b58\u4e00\u4e2a\u6570\u636e \u6bcf\u4e00\u4e2a\u7a7a\u95f4\u4e2d\u53ea\u80fd\u4fdd\u5b58\u4e00\u4e2a\u5b57\u7b26\u4e32\u4fe1\u606f\uff0c\u8fd9\u4e2a\u4fe1\u606f\u91cc\u8fb9\u5982\u679c\u662f\u5b58\u7684\u7eaf\u6570\u5b57\uff0c\u4ed6\u4e5f\u80fd\u5f53\u6570\u5b57\u4f7f\u7528\uff0c\u6211\u4eec\u6765\u770b\u4e00\u4e0b\uff0c\u8fd9\u662f\u6211\u4eec\u7684\u6570\u636e\u7684\u5b58\u50a8\u7a7a\u95f4\u3002 \uff083\uff09\u5b58\u50a8\u5185\u5bb9\uff1a\u901a\u5e38\u4f7f\u7528\u5b57\u7b26\u4e32\uff0c\u5982\u679c\u5b57\u7b26\u4e32\u4ee5\u6574\u6570\u7684\u5f62\u5f0f\u5c55\u793a\uff0c\u53ef\u4ee5\u4f5c\u4e3a\u6570\u5b57\u64cd\u4f5c\u4f7f\u7528. \u4e00\u4e2akey\u5bf9\u4e00\u4e2avalue\uff0c\u800c\u8fd9\u4e2aitheima\u5c31\u662f\u6211\u4eec\u6240\u8bf4\u7684string\u7c7b\u578b\uff0c\u5f53\u7136\u5b83\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u7eaf\u6570\u5b57\u7684\u683c\u5f0f\u3002","title":"2.2.2  string \u7c7b\u578b"},{"location":"redis/day01/#223_string","text":"\uff081\uff09\u57fa\u7840\u6307\u4ee4 \u6dfb\u52a0/\u4fee\u6539\u6570\u636e\u6dfb\u52a0/\u4fee\u6539\u6570\u636e set key value \u83b7\u53d6\u6570\u636e get key \u5220\u9664\u6570\u636e del key \u5224\u5b9a\u6027\u6dfb\u52a0\u6570\u636e setnx key value \u6dfb\u52a0/\u4fee\u6539\u591a\u4e2a\u6570\u636e mset key1 value1 key2 value2 \u2026 \u83b7\u53d6\u591a\u4e2a\u6570\u636e mget key1 key2 \u2026 \u83b7\u53d6\u6570\u636e\u5b57\u7b26\u4e2a\u6570\uff08\u5b57\u7b26\u4e32\u957f\u5ea6\uff09 strlen key \u8ffd\u52a0\u4fe1\u606f\u5230\u539f\u59cb\u4fe1\u606f\u540e\u90e8\uff08\u5982\u679c\u539f\u59cb\u4fe1\u606f\u5b58\u5728\u5c31\u8ffd\u52a0\uff0c\u5426\u5219\u65b0\u5efa\uff09 append key value \uff082\uff09\u5355\u6570\u636e\u64cd\u4f5c\u4e0e\u591a\u6570\u636e\u64cd\u4f5c\u7684\u9009\u62e9\u4e4b\u60d1 \u5373set \u4e0emset\u7684\u5173\u7cfb\u3002\u8fd9\u5bf9\u4e8e\u8fd9\u4e24\u4e2a\u64cd\u4f5c\u6765\u8bf4\uff0c\u6ca1\u6709\u4ec0\u4e48\u4f60\u5e94\u8be5\u9009\u54ea\u4e2a\uff0c\u800c\u662f\u4ed6\u4eec\u81ea\u5df1\u7684\u7279\u5f81\u662f\u4ec0\u4e48\uff0c\u4f60\u8981\u6839\u636e\u8fd9\u4e2a\u7279\u5f81\u53bb\u6bd4\u5bf9\u4f60\u7684\u4e1a\u52a1\uff0c\u770b\u770b\u7a76\u7adf\u9002\u7528\u4e8e\u54ea\u4e2a\u3002 \u5047\u5982\u8bf4\u8fd9\u662f\u6211\u4eec\u73b0\u5728\u7684\u670d\u52a1\u5668\uff0c\u4ed6\u8981\u5411redis\u8981\u6570\u636e\u7684\u8bdd\uff0c\u5b83\u4f1a\u53d1\u51fa\u4e00\u6761\u6307\u4ee4\u3002\u90a3\u4e48\u5f53\u8fd9\u6761\u6307\u4ee4\u53d1\u8fc7\u6765\u7684\u65f6\u5019\uff0c\u6bd4\u5982\u8bf4\u662f\u8fd9\u4e2aset\u6307\u4ee4\u8fc7\u6765\uff0c\u90a3\u4e48\u5b83\u4f1a\u628a\u8fd9\u4e2a\u7ed3\u679c\u8fd4\u56de\u7ed9\u4f60\uff0c\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u8981\u601d\u8003\u8fd9\u91cc\u8fb9\u4e00\u5171\u7ecf\u8fc7\u4e86\u591a\u957f\u65f6\u95f4\u3002 \u9996\u5148\uff0c\u53d1\u9001set\u6307\u4ee4\u8981\u65f6\u95f4\uff0c\u8fd9\u662f\u7f51\u7edc\u7684\u4e00\u4e2a\u65f6\u95f4\uff0c\u63a5\u4e0b\u6765redis\u8981\u53bb\u8fd0\u884c\u8fd9\u4e2a\u6307\u4ee4\u8981\u6d88\u8017\u65f6\u95f4\uff0c\u6700\u7ec8\u628a\u8fd9\u4e2a\u7ed3\u679c\u8fd4\u56de\u7ed9\u4f60\u53c8\u6709\u4e00\u4e2a\u65f6\u95f4\uff0c\u8fd9\u4e2a\u65f6\u95f4\u53c8\u662f\u4e00\u4e2a\u7f51\u7edc\u7684\u65f6\u95f4\uff0c\u90a3\u6211\u4eec\u53ef\u4ee5\u7406\u89e3\u4e3a\uff1a\u4e00\u4e2a\u6307\u4ee4\u53d1\u9001\u7684\u8fc7\u7a0b\u4e2d\u9700\u8981\u6d88\u8017\u8fd9\u6837\u7684\u65f6\u95f4. \u4f46\u662f\u5982\u679c\u8bf4\u73b0\u5728\u4e0d\u662f\u4e00\u6761\u6307\u4ee4\u4e86\uff0c\u4f60\u8981\u53d13\u4e2aset\u7684\u8bdd\uff0c\u8fd8\u8981\u591a\u957f\u65f6\u95f4\u5462\uff1f\u5bf9\u5e94\u7684\u53d1\u9001\u65f6\u95f4\u8981\u4e583\u4e86\uff0c\u56e0\u4e3a\u8fd9\u662f\u4e09\u4e2a\u5355\u6761\u6307\u4ee4,\u800c\u8fd0\u884c\u7684\u64cd\u4f5c\u65f6\u95f4\u5462\uff0c\u5b83\u4e5f\u8981\u4e583\u4e86\uff0c\u4f46\u6700\u7ec8\u8fd4\u56de\u7684\u4e5f\u8981\u53d13\u6b21\uff0c\u6240\u4ee5\u8fd9\u8fb9\u4e5f\u8981\u4e583\u3002 \u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u7ed3\u8bba\uff1a\u5355\u6307\u4ee4\u53d13\u6761\u5b83\u9700\u8981\u7684\u65f6\u95f4\uff0c\u5047\u5b9a\u4ed6\u4eec\u4e24\u4e2a\u4e00\u6837\uff0c\u662f6\u4e2a\u7f51\u7edc\u65f6\u95f4\u52a03\u4e2a\u5904\u7406\u65f6\u95f4\uff0c\u5982\u679c\u6211\u4eec\u628a\u5b83\u5408\u6210\u4e00\u4e2amset\u5462\uff0c\u6211\u4eec\u60f3\u4e00\u60f3\u3002 \u5047\u5982\u8bf4\u7528\u591a\u6307\u4ee4\u53d13\u4e2a\u6307\u4ee4\u7684\u8bdd\uff0c\u5176\u5b9e\u53ea\u9700\u8981\u53d1\u4e00\u6b21\u5c31\u884c\u4e86\u3002\u8fd9\u6837\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u7ed3\u8bba\uff0c\u591a\u6307\u4ee4\u53d13\u4e2a\u6307\u4ee4\u7684\u8bdd\uff0c\u5176\u5b9e\u5b83\u662f\u4e24\u4e2a\u7f51\u7edc\u65f6\u95f4\u52a0\u4e0a3\u4e2aredis\u7684\u64cd\u4f5c\u65f6\u95f4\uff0c\u4e3a\u4ec0\u4e48\u8fd9\u5199\u4e00\u4e2a\u5c0f\u52a0\u53f7\u5462\uff0c\u5c31\u662f\u56e0\u4e3a\u6bd5\u7adf\u53d1\u7684\u4fe1\u606f\u91cf\u53d8\u5927\u4e86\uff0c\u6240\u4ee5\u7f51\u7edc\u65f6\u95f4\u6709\u53ef\u80fd\u4f1a\u53d8\u957f\u3002 \u90a3\u4e48\u901a\u8fc7\u8fd9\u5f20\u56fe\uff0c\u4f60\u5c31\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u7ed3\u8bba\uff0c\u6211\u4eec\u5355\u6307\u4ee4\u548c\u591a\u6307\u4ee4\u4ed6\u4eec\u7684\u5dee\u522b\u5c31\u5728\u4e8e\u4f60\u53d1\u9001\u7684\u6b21\u6570\u662f\u591a\u8fd8\u662f\u5c11\u3002\u5f53\u4f60\u5f71\u54cd\u7684\u6570\u636e\u6bd4\u8f83\u5c11\u7684\u65f6\u5019\uff0c\u4f60\u53ef\u4ee5\u7528\u5355\u6307\u4ee4\uff0c\u4e5f\u53ef\u4ee5\u7528\u591a\u6307\u4ee4\u3002\u4f46\u662f\u4e00\u65e6\u8fd9\u4e2a\u91cf\u5927\u4e86\uff0c\u4f60\u5c31\u8981\u9009\u62e9\u591a\u6307\u4ee4\u4e86\uff0c\u4ed6\u7684\u6548\u7387\u4f1a\u9ad8\u4e00\u4e9b\u3002","title":"2.2.3  string \u7c7b\u578b\u6570\u636e\u7684\u57fa\u672c\u64cd\u4f5c"},{"location":"redis/day01/#23_string","text":"","title":"2.3  string \u7c7b\u578b\u6570\u636e\u7684\u6269\u5c55\u64cd\u4f5c"},{"location":"redis/day01/#231_string","text":"\u4e0b\u9762\u6211\u4eec\u6765\u770b\u4e00string\u7684\u6269\u5c55\u64cd\u4f5c\uff0c\u5206\u6210\u4e24\u5927\u5757\uff1a\u4e00\u5757\u662f\u5bf9\u6570\u5b57\u8fdb\u884c\u64cd\u4f5c\u7684\uff0c\u7b2c\u4e8c\u5757\u662f\u5bf9\u6211\u4eec\u7684key\u7684\u65f6\u95f4\u8fdb\u884c\u64cd\u4f5c\u7684\u3002 \u8bbe\u7f6e\u6570\u503c\u6570\u636e\u589e\u52a0\u6307\u5b9a\u8303\u56f4\u7684\u503c incr key incrby key increment incrbyfloat key increment \u8bbe\u7f6e\u6570\u503c\u6570\u636e\u51cf\u5c11\u6307\u5b9a\u8303\u56f4\u7684\u503c decr key decrby key increment \u8bbe\u7f6e\u6570\u636e\u5177\u6709\u6307\u5b9a\u7684\u751f\u547d\u5468\u671f setex key seconds value psetex key milliseconds value","title":"2.3.1  string \u7c7b\u578b\u6570\u636e\u7684\u6269\u5c55\u64cd\u4f5c"},{"location":"redis/day01/#232_string","text":"(1)\u6570\u636e\u64cd\u4f5c\u4e0d\u6210\u529f\u7684\u53cd\u9988\u4e0e\u6570\u636e\u6b63\u5e38\u64cd\u4f5c\u4e4b\u95f4\u7684\u5dee\u5f02 \u8868\u793a\u8fd0\u884c\u7ed3\u679c\u662f\u5426\u6210\u529f (integer) 0 \u2192 false \u5931\u8d25 (integer) 1 \u2192 true \u6210\u529f \u8868\u793a\u8fd0\u884c\u7ed3\u679c\u503c (integer) 3 \u2192 3 3\u4e2a (integer) 1 \u2192 1 1\u4e2a (2)\u6570\u636e\u672a\u83b7\u53d6\u5230\u65f6\uff0c\u5bf9\u5e94\u7684\u6570\u636e\u4e3a\uff08nil\uff09\uff0c\u7b49\u540c\u4e8enull (3)\u6570\u636e\u6700\u5927\u5b58\u50a8\u91cf\uff1a512MB (4)string\u5728redis\u5185\u90e8\u5b58\u50a8\u9ed8\u8ba4\u5c31\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5f53\u9047\u5230\u589e\u51cf\u7c7b\u64cd\u4f5cincr\uff0cdecr\u65f6\u4f1a\u8f6c\u6210\u6570\u503c\u578b\u8fdb\u884c\u8ba1\u7b97 (5)\u6309\u6570\u503c\u8fdb\u884c\u64cd\u4f5c\u7684\u6570\u636e\uff0c\u5982\u679c\u539f\u59cb\u6570\u636e\u4e0d\u80fd\u8f6c\u6210\u6570\u503c\uff0c\u6216\u8d85\u8d8a\u4e86redis \u6570\u503c\u4e0a\u9650\u8303\u56f4\uff0c\u5c06\u62a5\u9519 9223372036854775807\uff08java\u4e2dLong\u578b\u6570\u636e\u6700\u5927\u503c\uff0cLong.MAX_VALUE\uff09 (6)redis\u6240\u6709\u7684\u64cd\u4f5c\u90fd\u662f\u539f\u5b50\u6027\u7684\uff0c\u91c7\u7528\u5355\u7ebf\u7a0b\u5904\u7406\u6240\u6709\u4e1a\u52a1\uff0c\u547d\u4ee4\u662f\u4e00\u4e2a\u4e00\u4e2a\u6267\u884c\u7684\uff0c\u56e0\u6b64\u65e0\u9700\u8003\u8651\u5e76\u53d1\u5e26\u6765\u7684\u6570\u636e\u5f71\u54cd.","title":"2.3.2  string \u7c7b\u578b\u6570\u636e\u64cd\u4f5c\u7684\u6ce8\u610f\u4e8b\u9879"},{"location":"redis/day01/#24stringkey","text":"","title":"2.4string\u5e94\u7528\u573a\u666f\u4e0ekey\u547d\u540d\u7ea6\u5b9a"},{"location":"redis/day01/#241","text":"\u5b83\u7684\u5e94\u7528\u573a\u666f\u5728\u4e8e\uff1a\u4e3b\u9875\u9ad8\u9891\u8bbf\u95ee\u4fe1\u606f\u663e\u793a\u63a7\u5236\uff0c\u4f8b\u5982\u65b0\u6d6a\u5fae\u535a\u5927V\u4e3b\u9875\u663e\u793a\u7c89\u4e1d\u6570\u4e0e\u5fae\u535a\u6570\u91cf\u3002 \u6211\u4eec\u6765\u601d\u8003\u4e00\u4e0b\uff1a\u8fd9\u4e9b\u4fe1\u606f\u662f\u4e0d\u662f\u4f60\u8fdb\u5165\u5927V\u7684\u9875\u9762\u513f\u4ee5\u540e\u5c31\u8981\u8bfb\u53d6\u8fd9\u5199\u4fe1\u606f\u7684\u554a\uff0c\u90a3\u8fd9\u79cd\u4fe1\u606f\u4e00\u5b9a\u8981\u5b58\u50a8\u5230\u6211\u4eec\u7684redis\u4e2d\uff0c\u56e0\u4e3a\u4ed6\u7684\u8bbf\u95ee\u91cf\u592a\u9ad8\u4e86\uff01\u90a3\u8fd9\u79cd\u6570\u636e\u5e94\u8be5\u600e\u4e48\u5b58\u5462\uff1f\u6211\u4eec\u6765\u4e00\u5757\u513f\u770b\u4e00\u4e0b\u65b9\u6848\uff01","title":"2.4.1  \u5e94\u7528\u573a\u666f"},{"location":"redis/day01/#242","text":"\uff081\uff09\u5728redis\u4e2d\u4e3a\u5927V\u7528\u6237\u8bbe\u5b9a\u7528\u6237\u4fe1\u606f\uff0c\u4ee5\u7528\u6237\u4e3b\u952e\u548c\u5c5e\u6027\u503c\u4f5c\u4e3akey\uff0c\u540e\u53f0\u8bbe\u5b9a\u5b9a\u65f6\u5237\u65b0\u7b56\u7565\u5373\u53ef\u3002 eg: user:id:3506728370:fans \u2192 12210947 eg: user:id:3506728370:blogs \u2192 6164 eg: user:id:3506728370:focuses \u2192 83 \uff082\uff09\u4e5f\u53ef\u4ee5\u4f7f\u7528json\u683c\u5f0f\u4fdd\u5b58\u6570\u636e eg: user:id:3506728370 \u2192 {\u201cfans\u201d\uff1a12210947\uff0c\u201cblogs\u201d\uff1a6164\uff0c\u201c focuses \u201d\uff1a83 } \uff083\uff09 key \u7684\u8bbe\u7f6e\u7ea6\u5b9a \u6570\u636e\u5e93\u4e2d\u7684\u70ed\u70b9\u6570\u636ekey\u547d\u540d\u60ef\u4f8b \u8868\u540d \u4e3b\u952e\u540d \u4e3b\u952e\u503c \u5b57\u6bb5\u540d eg1\uff1a order id 29437595 name eg2\uff1a equip id 390472345 type eg3\uff1a news id 202004150 title","title":"2.4.2  \u89e3\u51b3\u65b9\u6848"},{"location":"redis/day01/#25_hash","text":"\u4e0b\u9762\u6211\u4eec\u6765\u5b66\u4e60\u7b2c\u4e8c\u4e2a\u6570\u636e\u7c7b\u578bhash\u3002","title":"2.5  hash\u7684\u57fa\u672c\u64cd\u4f5c"},{"location":"redis/day01/#251","text":"\u5bf9\u8c61\u7c7b\u6570\u636e\u7684\u5b58\u50a8\u5982\u679c\u5177\u6709\u8f83\u9891\u7e41\u7684\u66f4\u65b0\u9700\u6c42\u64cd\u4f5c\u4f1a\u663e\u5f97\u7b28\u91cd\uff01 \u5728\u6b63\u5f0f\u5b66\u4e60\u4e4b\u524d\uff0c\u6211\u4eec\u5148\u6765\u770b\u4e00\u4e2a\u5173\u4e8e\u6570\u636e\u5b58\u50a8\u7684\u56f0\u60d1\uff1a \u6bd4\u5982\u8bf4\u524d\u9762\u6211\u4eec\u7528\u4ee5\u4e0a\u5f62\u5f0f\u5b58\u4e86\u6570\u636e\uff0c\u5982\u679c\u6211\u4eec\u7528\u5355\u6761\u53bb\u5b58\u7684\u8bdd\uff0c\u5b83\u5b58\u7684\u6761\u6570\u4f1a\u5f88\u591a\u3002\u4f46\u5982\u679c\u6211\u4eec\u7528json\u683c\u5f0f\uff0c\u5b83\u5b58\u4e00\u6761\u6570\u636e\u5c31\u591f\u4e86\u3002\u95ee\u9898\u6765\u4e86\uff0c\u5047\u5982\u8bf4\u73b0\u5728\u7c89\u4e1d\u6570\u91cf\u53d1\u751f\u53d8\u5316\u4e86\uff0c\u4f60\u8981\u628a\u6574\u4e2a\u503c\u90fd\u6539\u4e86\u3002\u4f46\u662f\u7528\u5355\u6761\u5b58\u7684\u8bdd\u5c31\u4e0d\u5b58\u5728\u8fd9\u4e2a\u95ee\u9898\uff0c\u4f60\u53ea\u9700\u8981\u6539\u5176\u4e2d\u4e00\u4e2a\u5c31\u884c\u4e86\u3002\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u5c31\u60f3\uff0c\u6709\u6ca1\u6709\u4e00\u79cd\u65b0\u7684\u5b58\u50a8\u7ed3\u6784\uff0c\u80fd\u5e2e\u6211\u4eec\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u5462\u3002 \u6211\u4eec\u4e00\u5757\u513f\u6765\u5206\u6790\u4e00\u4e0b\uff1a \u5982\u4e0a\u56fe\u6240\u793a\uff1a\u5355\u6761\u7684\u8bdd\u662f\u5bf9\u5e94\u7684\u6570\u636e\u5728\u540e\u9762\u653e\u7740\u3002\u4ed4\u7ec6\u89c2\u5bdf\uff1a\u6211\u4eec\u770b\u5de6\u8fb9\u662f\u4e0d\u662f\u957f\u5f97\u90fd\u4e00\u6a21\u4e00\u6837\u554a\uff0c\u90fd\u662f\u5bf9\u5e94\u7684\u8868\u540d\u3001ID\u7b49\u7684\u4e00\u7cfb\u5217\u7684\u4e1c\u897f\u3002\u6211\u4eec\u53ef\u4ee5\u5c06\u53f3\u8fb9\u7ea2\u6846\u4e2d\u7684\u8fd9\u4e2a\u533a\u57df\u7ed9\u4ed6\u5c01\u8d77\u6765\u3002 \u90a3\u5982\u679c\u8981\u662f\u8fd9\u6837\u7684\u5f62\u5f0f\u7684\u8bdd\uff0c\u5982\u4e0b\u56fe\uff0c\u6211\u4eec\u628a\u5b83\u4e00\u5408\u5e76\uff0c\u5e76\u628a\u53f3\u8fb9\u7684\u4e1c\u897f\u7ed9\u4ed6\u53d8\u6210\u8fd9\u4e2a\u683c\u5f0f\uff0c\u8fd9\u4e0d\u5c31\u884c\u4e86\u5417\uff1f \u8fd9\u4e2a\u56fe\u5176\u5b9e\u5927\u5bb6\u5e76\u4e0d\u964c\u751f\uff0c\u7b2c\u4e00\uff0c\u4f60\u524d\u9762\u5b66\u8fc7\u4e00\u4e2a\u4e1c\u897f\u53ebhashmap\u4e0d\u5c31\u8fd9\u683c\u5f0f\u5417\uff1f\u7b2c\u4e8c\uff0credis\u81ea\u8eab\u4e0d\u4e5f\u662f\u8fd9\u683c\u5f0f\u5417\uff1f\u90a3\u662f\u4ec0\u4e48\u610f\u601d\u5462\uff1f\u6ce8\u610f\uff0c\u8fd9\u5c31\u662f\u6211\u4eec\u8981\u8bb2\u7684\u7b2c\u4e8c\u79cd\u683c\u5f0f\uff0chash\u3002 \u5728\u53f3\u8fb9\u5bf9\u5e94\u7684\u503c\uff0c\u6211\u4eec\u5c31\u5b58\u5177\u4f53\u7684\u503c\uff0c\u90a3\u5de6\u8fb9\u513f\u8fd9\u5c31\u662f\u6211\u4eec\u7684key\u3002\u95ee\u9898\u6765\u4e86\uff0c\u90a3\u4e2d\u95f4\u7684\u8fd9\u4e00\u5757\u53eb\u4ec0\u4e48\u5462\uff1f\u8fd9\u4e2a\u4e1c\u897f\u6211\u4eec\u7ed9\u4ed6\u8d77\u4e2a\u540d\u513f\uff0c\u53eb\u505afield\u5b57\u6bb5\u3002\u90a3\u4e48\u53f3\u8fb9\u513f\u6574\u4f53\u8fd9\u5757\u513f\u7a7a\u95f4\u6211\u4eec\u5c31\u79f0\u4e3ahash\uff0c\u4e5f\u5c31\u662f\u8bf4hash\u662f\u5b58\u4e86\u4e00\u4e2akey value\u7684\u5b58\u50a8\u7a7a\u95f4\u3002","title":"2.5.1  \u6570\u636e\u5b58\u50a8\u7684\u56f0\u60d1"},{"location":"redis/day01/#252_hash","text":"\u65b0\u7684\u5b58\u50a8\u9700\u6c42\uff1a\u5bf9\u4e00\u7cfb\u5217\u5b58\u50a8\u7684\u6570\u636e\u8fdb\u884c\u7f16\u7ec4\uff0c\u65b9\u4fbf\u7ba1\u7406\uff0c\u5178\u578b\u5e94\u7528\u5b58\u50a8\u5bf9\u8c61\u4fe1\u606f \u9700\u8981\u7684\u5b58\u50a8\u7ed3\u6784\uff1a\u4e00\u4e2a\u5b58\u50a8\u7a7a\u95f4\u4fdd\u5b58\u591a\u4e2a\u952e\u503c\u5bf9\u6570\u636e hash\u7c7b\u578b\uff1a\u5e95\u5c42\u4f7f\u7528\u54c8\u5e0c\u8868\u7ed3\u6784\u5b9e\u73b0\u6570\u636e\u5b58\u50a8 \u5982\u4e0a\u56fe\u6240\u793a\uff0c\u8fd9\u79cd\u7ed3\u6784\u53eb\u505ahash\uff0c\u5de6\u8fb9\u4e00\u4e2akey\uff0c\u5bf9\u53f3\u8fb9\u4e00\u4e2a\u5b58\u50a8\u7a7a\u95f4\u3002\u8fd9\u91cc\u8981\u660e\u786e\u4e00\u70b9\uff0c\u53f3\u8fb9\u8fd9\u5757\u513f\u5b58\u50a8\u7a7a\u95f4\u53ebhash\uff0c\u4e5f\u5c31\u662f\u8bf4hash\u662f\u6307\u7684\u4e00\u4e2a\u6570\u636e\u7c7b\u578b\uff0c\u4ed6\u6307\u7684\u4e0d\u662f\u4e00\u4e2a\u6570\u636e\uff0c\u662f\u8fd9\u91cc\u8fb9\u7684\u4e00\u5806\u6570\u636e\uff0c\u90a3\u4e48\u5b83\u5e95\u5c42\u5462\uff0c\u662f\u7528hash\u8868\u7684\u7ed3\u6784\u6765\u5b9e\u73b0\u7684\u3002 \u503c\u5f97\u6ce8\u610f\u7684\u662f\uff1a \u5982\u679cfield\u6570\u91cf\u8f83\u5c11\uff0c\u5b58\u50a8\u7ed3\u6784\u4f18\u5316\u4e3a\u7c7b\u6570\u7ec4\u7ed3\u6784 \u5982\u679cfield\u6570\u91cf\u8f83\u591a\uff0c\u5b58\u50a8\u7ed3\u6784\u4f7f\u7528HashMap\u7ed3\u6784","title":"2.5.2  hash \u7c7b\u578b"},{"location":"redis/day01/#253_hash","text":"\u6dfb\u52a0/\u4fee\u6539\u6570\u636e hset key field value \u83b7\u53d6\u6570\u636e hget key field hgetall key \u5220\u9664\u6570\u636e hdel key field1 [ field2 ] \u8bbe\u7f6efield\u7684\u503c\uff0c\u5982\u679c\u8be5field\u5b58\u5728\u5219\u4e0d\u505a\u4efb\u4f55\u64cd\u4f5c hsetnx key field value \u6dfb\u52a0/\u4fee\u6539\u591a\u4e2a\u6570\u636e hmset key field1 value1 field2 value2 \u2026 \u83b7\u53d6\u591a\u4e2a\u6570\u636e hmget key field1 field2 \u2026 \u83b7\u53d6\u54c8\u5e0c\u8868\u4e2d\u5b57\u6bb5\u7684\u6570\u91cf hlen key \u83b7\u53d6\u54c8\u5e0c\u8868\u4e2d\u662f\u5426\u5b58\u5728\u6307\u5b9a\u7684\u5b57\u6bb5 hexists key field","title":"2.5.3  hash \u7c7b\u578b\u6570\u636e\u7684\u57fa\u672c\u64cd\u4f5c"},{"location":"redis/day01/#26_hash","text":"\u5728\u770b\u5b8chash\u7684\u57fa\u672c\u64cd\u4f5c\u540e\uff0c\u6211\u4eec\u518d\u6765\u770b\u4ed6\u7684\u62d3\u5c55\u64cd\u4f5c\uff0c\u4ed6\u7684\u62d3\u5c55\u64cd\u4f5c\u76f8\u5bf9\u6bd4\u8f83\u7b80\u5355\uff1a","title":"2.6  hash\u7684\u62d3\u5c55\u64cd\u4f5c"},{"location":"redis/day01/#261_hash","text":"\u83b7\u53d6\u54c8\u5e0c\u8868\u4e2d\u6240\u6709\u7684\u5b57\u6bb5\u540d\u6216\u5b57\u6bb5\u503c hkeys key hvals key \u8bbe\u7f6e\u6307\u5b9a\u5b57\u6bb5\u7684\u6570\u503c\u6570\u636e\u589e\u52a0\u6307\u5b9a\u8303\u56f4\u7684\u503c hincrby key field increment hincrbyfloat key field increment","title":"2.6.1  hash \u7c7b\u578b\u6570\u636e\u6269\u5c55\u64cd\u4f5c"},{"location":"redis/day01/#262_hash","text":"(1)hash\u7c7b\u578b\u4e2dvalue\u53ea\u80fd\u5b58\u50a8\u5b57\u7b26\u4e32\uff0c\u4e0d\u5141\u8bb8\u5b58\u50a8\u5176\u4ed6\u6570\u636e\u7c7b\u578b\uff0c\u4e0d\u5b58\u5728\u5d4c\u5957\u73b0\u8c61\u3002\u5982\u679c\u6570\u636e\u672a\u83b7\u53d6\u5230\uff0c\u5bf9\u5e94\u7684\u503c\u4e3a\uff08nil\uff09\u3002 (2\uff09\u6bcf\u4e2a hash \u53ef\u4ee5\u5b58\u50a8 2^32 - 1 \u4e2a\u952e\u503c\u5bf9 hash\u7c7b\u578b\u5341\u5206\u8d34\u8fd1\u5bf9\u8c61\u7684\u6570\u636e\u5b58\u50a8\u5f62\u5f0f\uff0c\u5e76\u4e14\u53ef\u4ee5\u7075\u6d3b\u6dfb\u52a0\u5220\u9664\u5bf9\u8c61\u5c5e\u6027\u3002\u4f46hash\u8bbe\u8ba1\u521d\u8877\u4e0d\u662f\u4e3a\u4e86\u5b58\u50a8\u5927\u91cf\u5bf9\u8c61\u800c\u8bbe\u8ba1 \u7684\uff0c\u5207\u8bb0\u4e0d\u53ef\u6ee5\u7528\uff0c\u66f4\u4e0d\u53ef\u4ee5\u5c06hash\u4f5c\u4e3a\u5bf9\u8c61\u5217\u8868\u4f7f\u7528\u3002 (3)hgetall \u64cd\u4f5c\u53ef\u4ee5\u83b7\u53d6\u5168\u90e8\u5c5e\u6027\uff0c\u5982\u679c\u5185\u90e8field\u8fc7\u591a\uff0c\u904d\u5386\u6574\u4f53\u6570\u636e\u6548\u7387\u5c31\u5f88\u4f1a\u4f4e\uff0c\u6709\u53ef\u80fd\u6210\u4e3a\u6570\u636e\u8bbf\u95ee\u74f6\u9888\u3002","title":"2.6.2  hash\u7c7b\u578b\u6570\u636e\u64cd\u4f5c\u7684\u6ce8\u610f\u4e8b\u9879"},{"location":"redis/day01/#27_hash","text":"","title":"2.7  hash\u5e94\u7528\u573a\u666f"},{"location":"redis/day01/#271","text":"\u53cc11\u6d3b\u52a8\u65e5\uff0c\u9500\u552e\u624b\u673a\u5145\u503c\u5361\u7684\u5546\u5bb6\u5bf9\u79fb\u52a8\u3001\u8054\u901a\u3001\u7535\u4fe1\u768430\u5143\u300150\u5143\u3001100\u5143\u5546\u54c1\u63a8\u51fa\u62a2\u8d2d\u6d3b\u52a8\uff0c\u6bcf\u79cd\u5546\u54c1\u62a2\u8d2d\u4e0a\u96501000 \u5f20\u3002 \u4e5f\u5c31\u662f\u5546\u5bb6\u6709\u4e86\uff0c\u5546\u54c1\u6709\u4e86\uff0c\u6570\u91cf\u6709\u4e86\u3002\u6700\u7ec8\u6211\u4eec\u7684\u7528\u6237\u4e70\u4e1c\u897f\u5c31\u662f\u5728\u6539\u53d8\u8fd9\u4e2a\u6570\u91cf\u3002\u90a3\u4f60\u8bf4\u8fd9\u4e2a\u7ed3\u6784\u5e94\u8be5\u600e\u4e48\u5b58\u5462\uff1f\u5bf9\u5e94\u7684\u5546\u5bb6\u7684ID\u4f5c\u4e3akey\uff0c\u7136\u540e\u8fd9\u4e9b\u5145\u503c\u5361\u7684ID\u4f5c\u4e3afield\uff0c\u6700\u540e\u8fd9\u4e9b\u6570\u91cf\u4f5c\u4e3avalue\u3002\u800c\u6211\u4eec\u6240\u8c13\u7684\u64cd\u4f5c\u662f\u5176\u5b9e\u5c31\u662fincrea\u8fd9\u4e2a\u64cd\u4f5c\uff0c\u53ea\u4e0d\u8fc7\u4f60\u4f20\u8d1f\u503c\u5c31\u884c\u4e86\u3002\u770b\u4e00\u770b\u5bf9\u5e94\u7684\u89e3\u51b3\u65b9\u6848\uff1a","title":"2.7.1  \u5e94\u7528\u573a\u666f"},{"location":"redis/day01/#272","text":"\u4ee5\u5546\u5bb6id\u4f5c\u4e3akey \u5c06\u53c2\u4e0e\u62a2\u8d2d\u7684\u5546\u54c1id\u4f5c\u4e3afield \u5c06\u53c2\u4e0e\u62a2\u8d2d\u7684\u5546\u54c1\u6570\u91cf\u4f5c\u4e3a\u5bf9\u5e94\u7684value \u62a2\u8d2d\u65f6\u4f7f\u7528\u964d\u503c\u7684\u65b9\u5f0f\u63a7\u5236\u4ea7\u54c1\u6570\u91cf \u6ce8\u610f\uff1a\u5b9e\u9645\u4e1a\u52a1\u4e2d\u8fd8\u6709\u8d85\u5356\u7b49\u5b9e\u9645\u95ee\u9898\uff0c\u8fd9\u91cc\u4e0d\u505a\u8ba8\u8bba","title":"2.7.2  \u89e3\u51b3\u65b9\u6848"},{"location":"redis/day01/#28_list","text":"\u524d\u9762\u6211\u4eec\u5b58\u6570\u636e\u7684\u65f6\u5019\u5462\uff0c\u5355\u4e2a\u6570\u636e\u4e5f\u80fd\u5b58\uff0c\u591a\u4e2a\u6570\u636e\u4e5f\u80fd\u5b58\uff0c\u4f46\u662f\u8fd9\u91cc\u9762\u6709\u4e00\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u5b58\u591a\u4e2a\u6570\u636e\u7528hash\u7684\u65f6\u5019\u5b83\u662f\u6ca1\u6709\u987a\u5e8f\u7684\u3002\u6211\u4eec\u5e73\u65f6\u64cd\u4f5c\uff0c\u5b9e\u9645\u4e0a\u6570\u636e\u5f88\u591a\u60c5\u51b5\u4e0b\u90fd\u662f\u6709\u987a\u5e8f\u7684\uff0c\u90a3\u6709\u6ca1\u6709\u4e00\u79cd\u80fd\u591f\u7528\u6765\u5b58\u50a8\u5e26\u6709\u987a\u5e8f\u7684\u8fd9\u79cd\u6570\u636e\u6a21\u578b\u5462\uff0clist\u5c31\u4e13\u95e8\u6765\u5e72\u8fd9\u4e8b\u513f\u3002","title":"2.8  list\u57fa\u672c\u64cd\u4f5c"},{"location":"redis/day01/#281_list","text":"\u6570\u636e\u5b58\u50a8\u9700\u6c42\uff1a\u5b58\u50a8\u591a\u4e2a\u6570\u636e\uff0c\u5e76\u5bf9\u6570\u636e\u8fdb\u5165\u5b58\u50a8\u7a7a\u95f4\u7684\u987a\u5e8f\u8fdb\u884c\u533a\u5206 \u9700\u8981\u7684\u5b58\u50a8\u7ed3\u6784\uff1a\u4e00\u4e2a\u5b58\u50a8\u7a7a\u95f4\u4fdd\u5b58\u591a\u4e2a\u6570\u636e\uff0c\u4e14\u901a\u8fc7\u6570\u636e\u53ef\u4ee5\u4f53\u73b0\u8fdb\u5165\u987a\u5e8f list\u7c7b\u578b\uff1a\u4fdd\u5b58\u591a\u4e2a\u6570\u636e\uff0c\u5e95\u5c42\u4f7f\u7528\u53cc\u5411\u94fe\u8868\u5b58\u50a8\u7ed3\u6784\u5b9e\u73b0 \u5148\u6765\u901a\u8fc7\u4e00\u5f20\u56fe\uff0c\u56de\u5fc6\u4e00\u4e0b\u987a\u5e8f\u8868\u3001\u94fe\u8868\u3001\u53cc\u5411\u94fe\u8868\u3002 list\u5bf9\u5e94\u7684\u5b58\u50a8\u7ed3\u6784\u662f\u4ec0\u4e48\u5462\uff1f\u91cc\u8fb9\u5b58\u7684\u8fd9\u4e2a\u4e1c\u897f\u662f\u4e2a\u5217\u8868\uff0c\u4ed6\u6709\u4e00\u4e2a\u5bf9\u5e94\u7684\u540d\u79f0\u3002\u5c31\u662fkey\u5b58\u4e00\u4e2alist\u7684\u8fd9\u6837\u7ed3\u6784\u3002\u5bf9\u5e94\u7684\u57fa\u672c\u64cd\u4f5c\uff0c\u4f60\u5176\u5b9e\u662f\u53ef\u4ee5\u60f3\u5230\u7684\u3002 \u6765\u770b\u4e00\u4e0b\uff0c\u56e0\u4e3a\u5b83\u662f\u53cc\u5411\u7684\uff0c\u6240\u4ee5\u4ed6\u5de6\u8fb9\u53f3\u8fb9\u90fd\u80fd\u64cd\u4f5c\uff0c\u5b83\u5bf9\u5e94\u7684\u64cd\u4f5c\u7ed3\u6784\u4e24\u8fb9\u90fd\u80fd\u8fdb\u6570\u636e\u3002\u8fd9\u5c31\u662f\u94fe\u8868\u7684\u4e00\u4e2a\u5b58\u50a8\u7ed3\u6784\u3002\u5f80\u5916\u62ff\u6570\u636e\u7684\u65f6\u5019\u600e\u4e48\u62ff\u5462\uff1f\u901a\u5e38\u662f\u4ece\u4e00\u7aef\u62ff\uff0c\u5f53\u7136\u53e6\u4e00\u7aef\u4e5f\u80fd\u62ff\u3002\u5982\u679c\u4e24\u7aef\u90fd\u80fd\u62ff\u7684\u8bdd\uff0c\u8fd9\u5c31\u662f\u4e2a\u53cc\u7aef\u961f\u5217\uff0c\u4e24\u8fb9\u513f\u90fd\u80fd\u64cd\u4f5c\u3002\u5982\u679c\u53ea\u80fd\u4ece\u4e00\u7aef\u8fdb\u4e00\u7aef\u51fa\uff0c\u8fd9\u4e2a\u6a21\u578b\u54b1\u4eec\u524d\u9762\u4e86\u89e3\u8fc7\uff0c\u53eb\u505a\u6808\u3002","title":"2.8.1  list \u7c7b\u578b"},{"location":"redis/day01/#282_list","text":"\u6700\u540e\u770b\u4e00\u4e0b\u4ed6\u7684\u57fa\u672c\u64cd\u4f5c \u6dfb\u52a0/\u4fee\u6539\u6570\u636e lpush key value1 [ value2 ] \u2026\u2026 rpush key value1 [ value2 ] \u2026\u2026 \u83b7\u53d6\u6570\u636e lrange key start stop lindex key index llen key \u83b7\u53d6\u5e76\u79fb\u9664\u6570\u636e lpop key rpop key","title":"2.8.2 list \u7c7b\u578b\u6570\u636e\u57fa\u672c\u64cd\u4f5c"},{"location":"redis/day01/#29_list","text":"","title":"2.9  list\u6269\u5c55\u64cd\u4f5c"},{"location":"redis/day01/#291_list","text":"\u79fb\u9664\u6307\u5b9a\u6570\u636e lrem key count value \u89c4\u5b9a\u65f6\u95f4\u5185\u83b7\u53d6\u5e76\u79fb\u9664\u6570\u636e blpop key1 [ key2 ] timeout brpop key1 [ key2 ] timeout brpoplpush source destination timeout","title":"2.9.1  list \u7c7b\u578b\u6570\u636e\u6269\u5c55\u64cd\u4f5c"},{"location":"redis/day01/#292_list","text":"\uff081\uff09list\u4e2d\u4fdd\u5b58\u7684\u6570\u636e\u90fd\u662fstring\u7c7b\u578b\u7684\uff0c\u6570\u636e\u603b\u5bb9\u91cf\u662f\u6709\u9650\u7684\uff0c\u6700\u591a2^32 - 1 \u4e2a\u5143\u7d20(4294967295)\u3002 \uff082\uff09list\u5177\u6709\u7d22\u5f15\u7684\u6982\u5ff5\uff0c\u4f46\u662f\u64cd\u4f5c\u6570\u636e\u65f6\u901a\u5e38\u4ee5\u961f\u5217\u7684\u5f62\u5f0f\u8fdb\u884c\u5165\u961f\u51fa\u961f\u64cd\u4f5c\uff0c\u6216\u4ee5\u6808\u7684\u5f62\u5f0f\u8fdb\u884c\u5165\u6808\u51fa\u6808\u64cd\u4f5c \uff083\uff09\u83b7\u53d6\u5168\u90e8\u6570\u636e\u64cd\u4f5c\u7ed3\u675f\u7d22\u5f15\u8bbe\u7f6e\u4e3a-1 \uff084\uff09list\u53ef\u4ee5\u5bf9\u6570\u636e\u8fdb\u884c\u5206\u9875\u64cd\u4f5c\uff0c\u901a\u5e38\u7b2c\u4e00\u9875\u7684\u4fe1\u606f\u6765\u81ea\u4e8elist\uff0c\u7b2c2\u9875\u53ca\u66f4\u591a\u7684\u4fe1\u606f\u901a\u8fc7\u6570\u636e\u5e93\u7684\u5f62\u5f0f\u52a0\u8f7d","title":"2.9.2  list \u7c7b\u578b\u6570\u636e\u64cd\u4f5c\u6ce8\u610f\u4e8b\u9879"},{"location":"redis/day01/#210_list","text":"","title":"2.10 list \u5e94\u7528\u573a\u666f"},{"location":"redis/day01/#2101","text":"\u4f01\u4e1a\u8fd0\u8425\u8fc7\u7a0b\u4e2d\uff0c\u7cfb\u7edf\u5c06\u4ea7\u751f\u51fa\u5927\u91cf\u7684\u8fd0\u8425\u6570\u636e\uff0c\u5982\u4f55\u4fdd\u969c\u591a\u53f0\u670d\u52a1\u5668\u64cd\u4f5c\u65e5\u5fd7\u7684\u7edf\u4e00\u987a\u5e8f\u8f93\u51fa\uff1f \u5047\u5982\u73b0\u5728\u4f60\u6709\u591a\u53f0\u670d\u52a1\u5668\uff0c\u6bcf\u4e00\u53f0\u670d\u52a1\u5668\u90fd\u4f1a\u4ea7\u751f\u5b83\u7684\u65e5\u5fd7\uff0c\u5047\u8bbe\u4f60\u662f\u4e00\u4e2a\u8fd0\u7ef4\u4eba\u5458\uff0c\u4f60\u60f3\u770b\u5b83\u7684\u64cd\u4f5c\u65e5\u5fd7\uff0c\u4f60\u600e\u4e48\u770b\u5462\uff1f\u6253\u5f00A\u673a\u5668\u7684\u65e5\u5fd7\u770b\u4e00\u770b\uff0c\u6253\u5f00B\u673a\u5668\u7684\u65e5\u5fd7\u518d\u770b\u4e00\u770b\u5417\uff1f\u8fd9\u6837\u7684\u8bdd\u4f60\u4f1a\u53ef\u80fd\u4f1a\u75af\u6389\u7684\uff01\u56e0\u4e3a\u5de6\u8fb9\u770b\u7684\u6709\u53ef\u80fd\u5b83\u7684\u65f6\u95f4\u662f11:01\uff0c\u53f3\u8fb911:02\uff0c\u7136\u540e\u518d\u770b\u5de6\u8fb911:03\uff0c\u5b83\u4eec\u672c\u8eab\u662f\u8fde\u7eed\u7684\uff0c\u4f46\u662f\u4f60\u5728\u770b\u7684\u65f6\u5019\u5c31\u5206\u6210\u56db\u4e2a\u6587\u4ef6\u4e86\uff0c\u8fd9\u4e2a\u65f6\u5019\u4f60\u770b\u8d77\u6765\u5c31\u4f1a\u5f88\u9ebb\u70e6\u3002\u80fd\u4e0d\u80fd\u628a\u4ed6\u4eec\u5408\u5e76\u5462\uff1f\u7b54\u6848\u662f\u53ef\u4ee5\u7684\uff01\u600e\u4e48\u505a\u5462\uff1f\u5efa\u7acb\u8d77redis\u670d\u52a1\u5668\u3002\u5f53\u4ed6\u4eec\u9700\u8981\u8bb0\u65e5\u5fd7\u7684\u65f6\u5019\uff0c\u8bb0\u5728\u54ea\u513f,\u5168\u90e8\u53d1\u7ed9redis\u3002\u7b49\u5230\u4f60\u60f3\u770b\u7684\u65f6\u5019\uff0c\u901a\u8fc7\u670d\u52a1\u5668\u8bbf\u95eeredis\u83b7\u53d6\u65e5\u5fd7\u3002\u7136\u540e\u5f97\u5230\u4ee5\u540e\uff0c\u5c31\u4f1a\u5f97\u5230\u4e00\u4e2a\u5b8c\u6574\u7684\u65e5\u5fd7\u4fe1\u606f\u3002\u90a3\u4e48\u8fd9\u91cc\u9762\u5c31\u53ef\u4ee5\u83b7\u53d6\u5230\u5b8c\u6574\u7684\u65e5\u5fd7\u4e86\uff0c\u4f9d\u9760\u4ec0\u4e48\u6765\u5b9e\u73b0\u5462\uff1f\u5c31\u4f9d\u9760\u6211\u4eec\u7684list\u7684\u6a21\u578b\u7684\u987a\u5e8f\u6765\u5b9e\u73b0\u3002\u8fdb\u6765\u4e00\u7ec4\u6570\u636e\u5c31\u5f80\u91cc\u52a0\uff0c\u8c01\u5148\u8fdb\u6765\u8c01\u5148\u52a0\u8fdb\u53bb\uff0c\u5b83\u662f\u6709\u4e00\u5b9a\u7684\u987a\u5e8f\u7684\u3002","title":"2.10.1  \u5e94\u7528\u573a\u666f"},{"location":"redis/day01/#2102","text":"\u4f9d\u8d56list\u7684\u6570\u636e\u5177\u6709\u987a\u5e8f\u7684\u7279\u5f81\u5bf9\u4fe1\u606f\u8fdb\u884c\u7ba1\u7406 \u4f7f\u7528\u961f\u5217\u6a21\u578b\u89e3\u51b3\u591a\u8def\u4fe1\u606f\u6c47\u603b\u5408\u5e76\u7684\u95ee\u9898 \u4f7f\u7528\u6808\u6a21\u578b\u89e3\u51b3\u6700\u65b0\u6d88\u606f\u7684\u95ee\u9898","title":"2.10.2  \u89e3\u51b3\u65b9\u6848"},{"location":"redis/day01/#211_set","text":"","title":"2.11  set \u57fa\u672c\u64cd\u4f5c"},{"location":"redis/day01/#2111_set","text":"\u65b0\u7684\u5b58\u50a8\u9700\u6c42\uff1a\u5b58\u50a8\u5927\u91cf\u7684\u6570\u636e\uff0c\u5728\u67e5\u8be2\u65b9\u9762\u63d0\u4f9b\u66f4\u9ad8\u7684\u6548\u7387 \u9700\u8981\u7684\u5b58\u50a8\u7ed3\u6784\uff1a\u80fd\u591f\u4fdd\u5b58\u5927\u91cf\u7684\u6570\u636e\uff0c\u9ad8\u6548\u7684\u5185\u90e8\u5b58\u50a8\u673a\u5236\uff0c\u4fbf\u4e8e\u67e5\u8be2 set\u7c7b\u578b\uff1a\u4e0ehash\u5b58\u50a8\u7ed3\u6784\u5b8c\u5168\u76f8\u540c\uff0c\u4ec5\u5b58\u50a8\u952e\uff0c\u4e0d\u5b58\u50a8\u503c\uff08nil\uff09\uff0c\u5e76\u4e14\u503c\u662f\u4e0d\u5141\u8bb8\u91cd\u590d\u7684 \u901a\u8fc7\u8fd9\u4e2a\u540d\u79f0\uff0c\u5927\u5bb6\u4e5f\u57fa\u672c\u4e0a\u80fd\u591f\u8ba4\u8bc6\u5230\u548c\u6211\u4eecJava\u4e2d\u7684set\u5b8c\u5168\u4e00\u6837\u3002\u6211\u4eec\u73b0\u5728\u8981\u5b58\u50a8\u5927\u91cf\u7684\u6570\u636e\uff0c\u5e76\u4e14\u8981\u6c42\u63d0\u9ad8\u5b83\u7684\u67e5\u8be2\u6548\u7387\u3002\u7528list\u8fd9\u79cd\u94fe\u8868\u5f62\u5f0f\uff0c\u5b83\u7684\u67e5\u8be2\u6548\u7387\u662f\u4e0d\u9ad8\u7684\uff0c\u90a3\u600e\u4e48\u529e\u5462\uff1f\u8fd9\u65f6\u5019\u6211\u4eec\u5c31\u60f3\uff0c\u6709\u6ca1\u6709\u9ad8\u6548\u7684\u5b58\u50a8\u673a\u5236\u3002\u5176\u5b9e\u524d\u9762\u54b1\u8bb2Java\u7684\u65f6\u5019\u8bf4\u8fc7hash\u8868\u7684\u7ed3\u6784\u5c31\u975e\u5e38\u7684\u597d\uff0c\u4f46\u662f\u8fd9\u91cc\u8fb9\u6211\u4eec\u5df2\u7ecf\u6709hash\u4e86\uff0c\u4ed6\u505a\u4e86\u8fd9\u4e48\u4e00\u4e2a\u8bbe\u5b9a\uff0c\u5e72\u561b\u5462\uff0c\u4ed6\u628ahash\u7684\u5b58\u50a8\u7a7a\u95f4\u7ed9\u6539\u4e00\u4e0b\uff0c\u53f3\u8fb9\u4f60\u539f\u6765\u5b58\u6570\u636e\u6539\u6389,\u5168\u90e8\u5b58\u7a7a\uff0c\u90a3\u4f60\u8bf4\u6570\u636e\u653e\u54ea\u513f\u4e86\uff1f\u653e\u5230\u539f\u6765\u7684filed\u7684\u4f4d\u7f6e\uff0c\u4e5f\u5c31\u5728\u8fd9\u91cc\u8fb9\u5b58\u771f\u6b63\u7684\u503c\uff0c\u90a3\u4e48\u8fd9\u4e2a\u6a21\u578b\u5c31\u662f\u6211\u4eec\u7684set \u6a21\u578b\u3002 set\u7c7b\u578b\uff1a\u4e0ehash\u5b58\u50a8\u7ed3\u6784\u5b8c\u5168\u76f8\u540c\uff0c\u4ec5\u5b58\u50a8\u952e\uff0c\u4e0d\u5b58\u50a8\u503c\uff08nil\uff09\uff0c\u5e76\u4e14\u503c\u662f\u4e0d\u5141\u8bb8\u91cd\u590d\u7684\u3002 \u770b\u4e00\u4e0b\u5b83\u7684\u6574\u4e2a\u7ed3\u6784\uff1a","title":"2.11.1 set\u7c7b\u578b"},{"location":"redis/day01/#2112_set","text":"\u6dfb\u52a0\u6570\u636e sadd key member1 [ member2 ] \u83b7\u53d6\u5168\u90e8\u6570\u636e smembers key \u5220\u9664\u6570\u636e srem key member1 [ member2 ] \u83b7\u53d6\u96c6\u5408\u6570\u636e\u603b\u91cf scard key \u5224\u65ad\u96c6\u5408\u4e2d\u662f\u5426\u5305\u542b\u6307\u5b9a\u6570\u636e sismember key member \u968f\u673a\u83b7\u53d6\u96c6\u5408\u4e2d\u6307\u5b9a\u6570\u91cf\u7684\u6570\u636e srandmember key [ count ] \u968f\u673a\u83b7\u53d6\u96c6\u4e2d\u7684\u67d0\u4e2a\u6570\u636e\u5e76\u5c06\u8be5\u6570\u636e\u79fb\u9664\u96c6\u5408 spop key [ count ]","title":"2.11.2 set\u7c7b\u578b\u6570\u636e\u7684\u57fa\u672c\u64cd\u4f5c"},{"location":"redis/day01/#212_set","text":"","title":"2.12  set \u7c7b\u578b\u6570\u636e\u7684\u6269\u5c55\u64cd\u4f5c"},{"location":"redis/day01/#2121_set","text":"\u6c42\u4e24\u4e2a\u96c6\u5408\u7684\u4ea4\u3001\u5e76\u3001\u5dee\u96c6 sinter key1 [key2 \u2026] sunion key1 [key2 \u2026] sdiff key1 [key2 \u2026] \u6c42\u4e24\u4e2a\u96c6\u5408\u7684\u4ea4\u3001\u5e76\u3001\u5dee\u96c6\u5e76\u5b58\u50a8\u5230\u6307\u5b9a\u96c6\u5408\u4e2d sinterstore destination key1 [key2 \u2026] sunionstore destination key1 [key2 \u2026] sdiffstore destination key1 [key2 \u2026] \u5c06\u6307\u5b9a\u6570\u636e\u4ece\u539f\u59cb\u96c6\u5408\u4e2d\u79fb\u52a8\u5230\u76ee\u6807\u96c6\u5408\u4e2d smove source destination member \u901a\u8fc7\u4e0b\u9762\u4e00\u5f20\u56fe\u56de\u5fc6\u4e00\u4e0b\u4ea4\u3001\u5e76\u3001\u5dee","title":"2.12.1  set \u7c7b\u578b\u6570\u636e\u7684\u6269\u5c55\u64cd\u4f5c"},{"location":"redis/day01/#2122_set","text":"set \u7c7b\u578b\u4e0d\u5141\u8bb8\u6570\u636e\u91cd\u590d\uff0c\u5982\u679c\u6dfb\u52a0\u7684\u6570\u636e\u5728 set \u4e2d\u5df2\u7ecf\u5b58\u5728\uff0c\u5c06\u53ea\u4fdd\u7559\u4e00\u4efd\u3002 set \u867d\u7136\u4e0ehash\u7684\u5b58\u50a8\u7ed3\u6784\u76f8\u540c\uff0c\u4f46\u662f\u65e0\u6cd5\u542f\u7528hash\u4e2d\u5b58\u50a8\u503c\u7684\u7a7a\u95f4\u3002","title":"2.12.2  set \u7c7b\u578b\u6570\u636e\u64cd\u4f5c\u7684\u6ce8\u610f\u4e8b\u9879"},{"location":"redis/day01/#213_set","text":"","title":"2.13  set\u5e94\u7528\u573a\u666f"},{"location":"redis/day01/#2131_set","text":"\uff081\uff09\u9ed1\u540d\u5355 \u8d44\u8baf\u7c7b\u4fe1\u606f\u7c7b\u7f51\u7ad9\u8ffd\u6c42\u9ad8\u8bbf\u95ee\u91cf\uff0c\u4f46\u662f\u7531\u4e8e\u5176\u4fe1\u606f\u7684\u4ef7\u503c\uff0c\u5f80\u5f80\u5bb9\u6613\u88ab\u4e0d\u6cd5\u5206\u5b50\u5229\u7528\uff0c\u901a\u8fc7\u722c\u866b\u6280\u672f\uff0c \u5feb\u901f\u83b7\u53d6\u4fe1\u606f\uff0c\u4e2a\u522b\u7279\u79cd\u884c\u4e1a\u7f51\u7ad9\u4fe1\u606f\u901a\u8fc7\u722c\u866b\u83b7\u53d6\u5206\u6790\u540e\uff0c\u53ef\u4ee5\u8f6c\u6362\u6210\u5546\u4e1a\u673a\u5bc6\u8fdb\u884c\u51fa\u552e\u3002\u4f8b\u5982\u7b2c\u4e09\u65b9\u706b \u8f66\u7968\u3001\u673a\u7968\u3001\u9152\u5e97\u5237\u7968\u4ee3\u8d2d\u8f6f\u4ef6\uff0c\u7535\u5546\u5237\u8bc4\u8bba\u3001\u5237\u597d\u8bc4\u3002 \u540c\u65f6\u722c\u866b\u5e26\u6765\u7684\u4f2a\u6d41\u91cf\u4e5f\u4f1a\u7ed9\u7ecf\u8425\u8005\u5e26\u6765\u9519\u89c9\uff0c\u4ea7\u751f\u9519\u8bef\u7684\u51b3\u7b56\uff0c\u6709\u6548\u907f\u514d\u7f51\u7ad9\u88ab\u722c\u866b\u53cd\u590d\u722c\u53d6\u6210\u4e3a\u6bcf\u4e2a\u7f51\u7ad9\u90fd\u8981\u8003\u8651\u7684\u57fa\u672c\u95ee\u9898\u3002\u5728\u57fa\u4e8e\u6280\u672f\u5c42\u9762\u533a\u5206\u51fa\u722c\u866b\u7528\u6237\u540e\uff0c\u9700\u8981\u5c06\u6b64\u7c7b\u7528\u6237\u8fdb\u884c\u6709\u6548\u7684\u5c4f\u853d\uff0c\u8fd9\u5c31\u662f\u9ed1\u540d\u5355\u7684\u5178\u578b\u5e94\u7528\u3002 ps:\u4e0d\u662f\u8bf4\u722c\u866b\u4e00\u5b9a\u505a\u6467\u6bc1\u6027\u7684\u5de5\u4f5c\uff0c\u6709\u4e9b\u5c0f\u578b\u7f51\u7ad9\u9700\u8981\u722c\u866b\u4e3a\u5176\u5e26\u6765\u4e00\u4e9b\u6d41\u91cf\u3002 \uff082\uff09\u767d\u540d\u5355 \u5bf9\u4e8e\u5b89\u5168\u6027\u66f4\u9ad8\u7684\u5e94\u7528\u8bbf\u95ee\uff0c\u4ec5\u4ec5\u9760\u9ed1\u540d\u5355\u662f\u4e0d\u80fd\u89e3\u51b3\u5b89\u5168\u95ee\u9898\u7684\uff0c\u6b64\u65f6\u9700\u8981\u8bbe\u5b9a\u53ef\u8bbf\u95ee\u7684\u7528\u6237\u7fa4\u4f53\uff0c \u4f9d\u8d56\u767d\u540d\u5355\u505a\u66f4\u4e3a\u82db\u523b\u7684\u8bbf\u95ee\u9a8c\u8bc1\u3002","title":"2.13.1  set\u5e94\u7528\u573a\u666f"},{"location":"redis/day01/#2132","text":"\u57fa\u4e8e\u7ecf\u8425\u6218\u7565\u8bbe\u5b9a\u95ee\u9898\u7528\u6237\u53d1\u73b0\u3001\u9274\u522b\u89c4\u5219 \u5468\u671f\u6027\u66f4\u65b0\u6ee1\u8db3\u89c4\u5219\u7684\u7528\u6237\u9ed1\u540d\u5355\uff0c\u52a0\u5165set\u96c6\u5408 \u7528\u6237\u884c\u4e3a\u4fe1\u606f\u8fbe\u5230\u540e\u4e0e\u9ed1\u540d\u5355\u8fdb\u884c\u6bd4\u5bf9\uff0c\u786e\u8ba4\u884c\u4e3a\u53bb\u5411 \u9ed1\u540d\u5355\u8fc7\u6ee4IP\u5730\u5740\uff1a\u5e94\u7528\u4e8e\u5f00\u653e\u6e38\u5ba2\u8bbf\u95ee\u6743\u9650\u7684\u4fe1\u606f\u6e90 \u9ed1\u540d\u5355\u8fc7\u6ee4\u8bbe\u5907\u4fe1\u606f\uff1a\u5e94\u7528\u4e8e\u9650\u5b9a\u8bbf\u95ee\u8bbe\u5907\u7684\u4fe1\u606f\u6e90 \u9ed1\u540d\u5355\u8fc7\u6ee4\u7528\u6237\uff1a\u5e94\u7528\u4e8e\u57fa\u4e8e\u8bbf\u95ee\u6743\u9650\u7684\u4fe1\u606f\u6e90","title":"2.13.2  \u89e3\u51b3\u65b9\u6848"},{"location":"redis/day01/#214","text":"","title":"2.14  \u5b9e\u8df5\u6848\u4f8b"},{"location":"redis/day01/#2141","text":"\u4f7f\u7528\u5fae\u4fe1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5f53\u5fae\u4fe1\u63a5\u6536\u6d88\u606f\u540e\uff0c\u4f1a\u9ed8\u8ba4\u5c06\u6700\u8fd1\u63a5\u6536\u7684\u6d88\u606f\u7f6e\u9876\uff0c\u5f53\u591a\u4e2a\u597d\u53cb\u53ca\u5173\u6ce8\u7684\u8ba2\u9605\u53f7\u540c\u65f6\u53d1 \u9001\u6d88\u606f\u65f6\uff0c\u8be5\u6392\u5e8f\u4f1a\u4e0d\u505c\u7684\u8fdb\u884c\u4ea4\u66ff\u3002\u540c\u65f6\u8fd8\u53ef\u4ee5\u5c06\u91cd\u8981\u7684\u4f1a\u8bdd\u8bbe\u7f6e\u4e3a\u7f6e\u9876\u3002\u4e00\u65e6\u7528\u6237\u79bb\u7ebf\u540e\uff0c\u518d\u6b21\u6253\u5f00\u5fae\u4fe1\u65f6\uff0c\u6d88\u606f\u8be5\u6309\u7167\u4ec0\u4e48\u6837\u7684\u987a\u5e8f\u663e\u793a\u3002 \u6211\u4eec\u5206\u6790\u4e00\u4e0b\uff1a 100\u8fd9\u53f0\u624b\u673a\u4ee3\u8868\u4f60\u3002\u800c200\u3001300\u3001400\u8fd9\u4e09\u53f0\u4ee3\u8868\u4f60\u597d\u53cb\u7684\u624b\u673a\u3002\u5728\u8fd9\u91cc\u6709\u4e00\u4e9b\u4e1c\u897f\u9700\u8981\u4ea4\u4ee3\u4e00\u4e0b\uff0c\u56e0\u4e3a\u6211\u4eec\u6bcf\u4e2a\u4eba\u7684\u90fd\u4f1a\u5bf9\u81ea\u5df1\u7684\u5fae\u4fe1\u4e2d\u7684\u4e00\u4e9b\u6bd4\u8f83\u91cd\u8981\u7684\u4eba\u8bbe\u7f6e\u4f1a\u8bdd\u7f6e\u9876\uff0c\u5c06\u4ed6\u7684\u90a3\u6761\u5bf9\u8bdd\u653e\u5728\u6700\u4e0a\u9762\u3002\u6211\u4eec\u5047\u5b9a\u8fd9\u4e2a\u4eba\u6709\u4e24\u4e2a\u4f1a\u8bdd\u7f6e\u9876\u7684\u597d\u53cb\uff0c\u5206\u522b\u662f400\u548c500\uff0c\u800c\u8fd9\u91cc\u8fb9\u5c31\u5305\u542b400. \u4e0b\u9762\u5462\uff0c\u6211\u4eec\u5c31\u6765\u53d1\u8fd9\u4e2a\u6d88\u606f\uff0c\u7b2c\u4e00\u4e2a\u53d1\u6d88\u606f\u7684\u662f300\uff0c\u4ed6\u53d1\u4e86\u4e2a\u6d88\u606f\u7ed9100\u3002\u53d1\u5b8c\u4ee5\u540e\uff0c\u8fd9\u4e2a\u4e1c\u897f\u5e94\u8be5\u600e\u4e48\u5b58\u50a8\u5462\uff1f\u5728\u8fd9\u91cc\u9762\u4e00\u5b9a\u8981\u5206\u5f00\uff0c\u8bb0\u5f55\u7f6e\u9876\u7684\u8fd9\u4e9b\u4eba\u7684\u4f1a\u8bdd\uff0c\u5bf9\u5e94\u7684\u4f1a\u8bdd\u663e\u793a\u987a\u5e8f\u548c\u975e\u7f6e\u9876\u7684\u4e00\u5b9a\u8981\u5206\u4e24\u3002 \u8fd9\u91cc\u9762\u6211\u4eec\u521b\u5efa\u4e24\u4e2a\u6a21\u578b\uff0c\u4e00\u4e2a\u662f\u666e\u901a\u7684\uff0c\u4e00\u4e2a\u662f\u7f6e\u9876\u7684\uff0c\u800c\u4e0a\u9762\u7684\u8fd9\u4e2a\u7f6e\u9876\u7684\u7528\u6237\u5462\uff0c\u6211\u4eec\u7528set\u6765\u5b58\u50a8\uff0c\u56e0\u4e3a\u4e0d\u91cd\u590d\u3002\u800c\u4e0b\u9762\u8fd9\u4e9b\u56e0\u4e3a\u6709\u987a\u5e8f\uff0c\u5f88\u5bb9\u6613\u60f3\u5230\u7528list\u53bb\u5b58\u50a8,\u4e0d\u7136\u4f60\u600e\u4e48\u8868\u8fbe\u987a\u5e8f\u5462\uff1f \u90a3\u5f53300\u53d1\u7ed9\u6d88\u606f\u7ed9100\u4ee5\u540e\uff0c\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u5148\u5224\u5b9a\u4f60\u5728\u7f6e\u9876\u4eba\u7fa4\u4e2d\u5417\uff1f\u4e0d\u5728,\u90a3\u597d\uff0c300\u7684\u6d88\u606f\u5bf9\u5e94\u7684\u987a\u5e8f\u5c31\u5e94\u8be5\u653e\u5728\u666e\u901a\u7684\u5217\u8868\u91cc\u8fb9\u3002\u800c\u5728\u8fd9\u91cc\u8fb9\uff0c\u6211\u4eec\u628a300\u52a0\u8fdb\u53bb\u3002\u7b2c\u4e00\u4e2a\u6570\u636e\u4e5f\u5c31\u662f\u73b0\u5728300\u3002 \u63a5\u4e0b\u6765400\uff0c\u53d1\u4e86\u4e2a\u6d88\u606f\u3002\u5224\u65ad\u4e00\u4e0b\uff0c\u4ed6\u662f\u9700\u8981\u7f6e\u9876\u7684\uff0c\u6240\u4ee5400\u5c06\u8fdb\u5165list\u7684\u7f6e\u9876\u91cc\u8fb9\u653e\u7740\u3002\u5f53\u524d\u8fd8\u6ca1\u6709\u7279\u6b8a\u7684\u5730\u65b9\u3002 \u518d\u6765200\u53d1\u6d88\u606f\u4e86\uff0c\u548c\u521a\u624d\u7684\u5224\u5b9a\u65b9\u6cd5\u4e00\u6837\uff0c\u5148\u770b\u5728\u4e0d\u5728\u7f6e\u9876\u91cc\uff0c\u4e0d\u5728\u7684\u8bdd\u8fdb\u666e\u901a\uff0c\u7136\u540e\u5728\u666e\u901a\u91cc\u8fb9\u628a200\u52a0\u5165\u5c31\u884c\u4e86\uff0cOK\uff0c\u5230\u8fd9\u91cc\u76ee\u524d\u8fd8\u6ca1\u6709\u987a\u5e8f\u53d8\u5316\u3002 \u63a5\u4e0b\u6765200\u53c8\u53d1\u6d88\u606f\u8fc7\u6765\uff0c\u540c\u4e00\u4e2a\u4eba\u7ed9\u4f60\u8fde\u53d1\u4e86\u4e24\u6761\uff0c\u90a3\u8fd9\u4e2a\u65f6\u5019200\u7684\u6d88\u606f\u5230\u8fbe\u4ee5\u540e\uff0c\u5148\u5224\u65ad\u662f\u5426\u5728\u7f6e\u9876\u8303\u56f4\uff0c\u4e0d\u5728\uff0c\u63a5\u4e0b\u6765\u4ed6\u8981\u653e\u5728list\u666e\u901a\u4e2d\uff0c\u8fd9\u91cc\u4f60\u8981\u6ce8\u610f\u4e00\u70b9\uff0c\u56e0\u4e3a\u8fd9\u91cc\u8fb9\u5df2\u7ecf\u6709200\uff0c\u6240\u4ee5\u8fdb\u6765\u4ee5\u540e\u5148\u5e72\u4e00\u4ef6\u4e8b\u513f\uff0c\u628a200\u6740\u6389\uff0c\u6ca1\u6709200\uff0c\u7136\u540e\u518d\u628a200\u52a0\u8fdb\u6765\uff0c\u90a3\u4f60\u60f3\u4e00\u4e0b\uff0c\u73b0\u5728\u8fd9\u4e2a\u4f4d\u7f6e\u987a\u5e8f\u662f\u4ec0\u4e48\u5462\uff1f\u5c31\u662f\u65b0\u7684\u90fd\u5728\u53f3\u8fb9\uff0c\u5bf9\u4e0d\u5bf9\uff1f \u8fd8\u8bb0\u5f97\u6211\u4eec\u8bf4list\u6a21\u578b\uff0c\u5982\u679c\u662f\u4e00\u4e2a\u53cc\u7aef\u961f\u5217\uff0c\u5b83\u662f\u53ef\u4ee5\u4e24\u5934\u8fdb\u4e24\u5934\u51fa\u3002\u5f53\u7136\u6211\u4eec\u53cc\u7aef\u4ece\u4e00\u5934\u8fdb\u4e00\u5934\u51fa\uff0c\u8fd9\u5c31\u662f\u6808\u6a21\u578b\uff0c\u73b0\u5728\u54b1\u4eec\u8fd0\u7528\u7684\u5c31\u662flist\u6a21\u578b\u4e2d\u7684\u6808\u6a21\u578b\u3002 \u73b0\u5728300\u53d1\u6d88\u606f\uff0c\u5148\u5224\u5b9a\u4ed6\u5728\u4e0d\u5728\uff0c\u4e0d\u5728\uff0c\u7528\u666e\u901a\u7684\u961f\u5217\uff0c\u63a5\u4e0b\u6765\u6309\u7167\u521a\u624d\u7684\u64cd\u4f5c\uff0c\u4e0d\u7ba1\u4f60\u91cc\u8fb9\u539f\u6765\u6709\u6ca1\u6709300\uff0c\u6211\u5148\u628a300\u6740\u6389\uff0c\u6ca1\u4e86\uff0c200\u81ea\u7136\u5c31\u586b\u5230300\u7684\u4f4d\u7f6e\u4e86\uff0c\u4ed6\u73b0\u5728\u662flist\u91cc\u9762\u552f\u4e00\u4e00\u4e2a\uff0c\u7136\u540e\u8ba9300\u8fdb\u6765\uff0c\u6ce8\u610f\u662f\u4ece\u53f3\u4fa7\u8fdb\u6765\u7684\uff0c\u90a3\u4e48\u73b0\u5728300\u5c31\u662f\u6700\u65b0\u7684\u3002 \u90a3\u4e48\u5230\u8fd9\u91cc\u5462\uff0c\u6211\u4eec\u8ba9100\u6765\u8bfb\u53d6\u6d88\u606f\u3002\u4f60\u89c9\u5f97\u8fd9\u4e2a\u6d88\u606f\u987a\u5e8f\u5e94\u8be5\u662f\u4ec0\u4e48\u6837\u7684\uff1f\u9996\u5148\u7f6e\u9876\u7684400\u6709\u4e00\u4e2a\uff0c\u4ed6\u8dd1\u5728\u6700\u4e0a\u9762\uff0c\u7136\u540elist\u666e\u901a\u5982\u679c\u51fa\u6765\u7684\u8bdd\uff0c300\u662f\u6700\u65b0\u7684\u6d88\u606f\uff0c\u800c200\u5728\u4ed6\u540e\u9762\u7684\u3002\u7528\u8fd9\u79cd\u5f62\u5f0f\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u505a\u51fa\u6765\u4ed6\u7684\u6d88\u606f\u987a\u5e8f\u6765\u3002","title":"2.14.1\u4e1a\u52a1\u573a\u666f"},{"location":"redis/day01/#2142","text":"\u770b\u4e00\u4e0b\u6700\u7ec8\u7684\u89e3\u51b3\u65b9\u6848\uff1a \u4f9d\u8d56list\u7684\u6570\u636e\u5177\u6709\u987a\u5e8f\u7684\u7279\u5f81\u5bf9\u6d88\u606f\u8fdb\u884c\u7ba1\u7406\uff0c\u5c06list\u7ed3\u6784\u4f5c\u4e3a\u6808\u4f7f\u7528 \u7f6e\u9876\u4e0e\u666e\u901a\u4f1a\u8bdd\u5206\u522b\u521b\u5efa\u72ec\u7acb\u7684list\u5206\u522b\u7ba1\u7406 \u5f53\u67d0\u4e2alist\u4e2d\u63a5\u6536\u5230\u7528\u6237\u6d88\u606f\u540e\uff0c\u5c06\u6d88\u606f\u53d1\u9001\u65b9\u7684id\u4ecelist\u7684\u4e00\u4fa7\u52a0\u5165list\uff08\u6b64\u5904\u8bbe\u5b9a\u5de6\u4fa7\uff09 \u591a\u4e2a\u76f8\u540cid\u53d1\u51fa\u7684\u6d88\u606f\u53cd\u590d\u5165\u6808\u4f1a\u51fa\u73b0\u95ee\u9898\uff0c\u5728\u5165\u6808\u4e4b\u524d\u65e0\u8bba\u662f\u5426\u5177\u6709\u5f53\u524did\u5bf9\u5e94\u7684\u6d88\u606f\uff0c\u5148\u5220\u9664\u5bf9\u5e94id \u63a8\u9001\u6d88\u606f\u65f6\u5148\u63a8\u9001\u7f6e\u9876\u4f1a\u8bddlist\uff0c\u518d\u63a8\u9001\u666e\u901a\u4f1a\u8bddlist\uff0c\u63a8\u9001\u5b8c\u6210\u7684list\u6e05\u9664\u6240\u6709\u6570\u636e \u6d88\u606f\u7684\u6570\u91cf\uff0c\u4e5f\u5c31\u662f\u5fae\u4fe1\u7528\u6237\u5bf9\u8bdd\u6570\u91cf\u91c7\u7528\u8ba1\u6570\u5668\u7684\u601d\u60f3\u53e6\u884c\u8bb0\u5f55\uff0c\u4f34\u968flist\u64cd\u4f5c\u540c\u6b65\u66f4\u65b0","title":"2.14.2  \u89e3\u51b3\u65b9\u6848"},{"location":"redis/day01/#2143","text":"\u603b\u7ed3\u4e00\u4e0b\uff0c\u5728\u6574\u4e2a\u6570\u636e\u7c7b\u578b\u7684\u90e8\u5206\uff0c\u6211\u4eec\u4e3b\u8981\u4ecb\u7ecd\u4e86\u54ea\u4e9b\u5185\u5bb9\uff1a \u9996\u5148\u6211\u4eec\u4e86\u89e3\u4e86\u4e00\u4e0b\u6570\u636e\u7c7b\u578b\uff0c\u63a5\u4e0b\u6765\u9488\u5bf9\u7740\u6211\u4eec\u8981\u5b66\u4e60\u7684\u6570\u636e\u7c7b\u578b\uff0c\u8fdb\u884c\u9010\u4e00\u8bb2\u89e3\u4e86string\u3001hash\u3001list\u3001set\u7b49\uff0c\u6700\u540e\u901a\u8fc7\u4e00\u4e2a\u6848\u4f8b\u603b\u7ed3\u4e86\u4e00\u4e0b\u524d\u9762\u7684\u6570\u636e\u7c7b\u578b\u7684\u4f7f\u7528\u573a\u666f\u3002","title":"2.14.3  \u6570\u636e\u7c7b\u578b\u603b\u7ed3"},{"location":"redis/day01/#3","text":"\u5728\u8fd9\u90e8\u5206\u4e2d\u5462\uff0c\u6211\u4eec\u5bb6\u5b66\u4e60\u4e24\u4e2a\u77e5\u8bc6\uff0c\u7b2c\u4e00\u4e2a\u662fkey\u7684\u5e38\u7528\u6307\u4ee4\uff0c\u7b2c\u4e8c\u4e2a\u662f\u6570\u636e\u5e93\u7684\u5e38\u7528\u6307\u4ee4\u3002\u548c\u524d\u9762\u6211\u4eec\u5b66\u6570\u636e\u7c7b\u578b\u505a\u4e00\u4e0b\u533a\u5206\uff0c\u524d\u9762\u4f60\u5b66\u7684\u90a3\u4e9b\u6307\u4ee4\u5462\uff0c\u90fd\u662f\u9488\u5bf9\u67d0\u4e00\u4e2a\u6570\u636e\u7c7b\u578b\u64cd\u4f5c\u7684\uff0c\u73b0\u5728\u5b66\u7684\u90fd\u662f\u5bf9\u6240\u6709\u7684\u64cd\u4f5c\u7684\uff0c\u6765\u770b\u4e00\u4e0b\uff0c\u6211\u4eec\u5728\u5b66\u4e60Key\u7684\u64cd\u4f5c\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5148\u60f3\u4e00\u4e0b\u7684\u64cd\u4f5c\u6211\u4eec\u5e94\u8be5\u5b66\u54ea\u4e9b\u4e1c\u897f:","title":"3. \u5e38\u7528\u6307\u4ee4"},{"location":"redis/day01/#31_key","text":"","title":"3.1  key \u64cd\u4f5c\u5206\u6790"},{"location":"redis/day01/#311_key","text":"key\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u901a\u8fc7key\u83b7\u53d6redis\u4e2d\u4fdd\u5b58\u7684\u6570\u636e \u5bf9\u4e8ekey\u81ea\u8eab\u72b6\u6001\u7684\u76f8\u5173\u64cd\u4f5c\uff0c\u4f8b\u5982\uff1a\u5220\u9664\uff0c\u5224\u5b9a\u5b58\u5728\uff0c\u83b7\u53d6\u7c7b\u578b\u7b49 \u5bf9\u4e8ekey\u6709\u6548\u6027\u63a7\u5236\u76f8\u5173\u64cd\u4f5c\uff0c\u4f8b\u5982\uff1a\u6709\u6548\u671f\u8bbe\u5b9a\uff0c\u5224\u5b9a\u662f\u5426\u6709\u6548\uff0c\u6709\u6548\u72b6\u6001\u7684\u5207\u6362\u7b49 \u5bf9\u4e8ekey\u5feb\u901f\u67e5\u8be2\u64cd\u4f5c\uff0c\u4f8b\u5982\uff1a\u6309\u6307\u5b9a\u7b56\u7565\u67e5\u8be2key","title":"3.1.1  key\u5e94\u8be5\u8bbe\u8ba1\u54ea\u4e9b\u64cd\u4f5c\uff1f"},{"location":"redis/day01/#312_key","text":"\u5220\u9664\u6307\u5b9akey del key \u83b7\u53d6key\u662f\u5426\u5b58\u5728 exists key \u83b7\u53d6key\u7684\u7c7b\u578b type key 3.1.3 \u62d3\u5c55\u64cd\u4f5c \u6392\u5e8f sort \u6539\u540d rename key newkey renamenx key newkey","title":"3.1.2  key \u57fa\u672c\u64cd\u4f5c"},{"location":"redis/day01/#313_key","text":"\u4e3a\u6307\u5b9akey\u8bbe\u7f6e\u6709\u6548\u671f expire key seconds pexpire key milliseconds expireat key timestamp pexpireat key milliseconds-timestamp \u83b7\u53d6key\u7684\u6709\u6548\u65f6\u95f4 ttl key pttl key \u5207\u6362key\u4ece\u65f6\u6548\u6027\u8f6c\u6362\u4e3a\u6c38\u4e45\u6027 persist key","title":"3.1.3  key \u6269\u5c55\u64cd\u4f5c\uff08\u65f6\u6548\u6027\u63a7\u5236\uff09"},{"location":"redis/day01/#314_key","text":"\u67e5\u8be2key keys pattern \u67e5\u8be2\u6a21\u5f0f\u89c4\u5219 *\u5339\u914d\u4efb\u610f\u6570\u91cf\u7684\u4efb\u610f\u7b26\u53f7 ? \u914d\u5408\u4e00\u4e2a\u4efb\u610f\u7b26\u53f7 [] \u5339\u914d\u4e00\u4e2a\u6307\u5b9a\u7b26\u53f7 keys * keys \u67e5\u8be2\u6240\u6709 it* keys \u67e5\u8be2\u6240\u6709\u4ee5it\u5f00\u5934 *heima \u67e5\u8be2\u6240\u6709\u4ee5heima\u7ed3\u5c3e keys ??heima \u67e5\u8be2\u6240\u6709\u524d\u9762\u4e24\u4e2a\u5b57\u7b26\u4efb\u610f\uff0c\u540e\u9762\u4ee5heima\u7ed3\u5c3e \u67e5\u8be2\u6240\u6709\u4ee5 keys user:? user:\u5f00\u5934\uff0c\u6700\u540e\u4e00\u4e2a\u5b57\u7b26\u4efb\u610f keys u [ st ] er:1 \u67e5\u8be2\u6240\u6709\u4ee5u\u5f00\u5934\uff0c\u4ee5er:1\u7ed3\u5c3e\uff0c\u4e2d\u95f4\u5305\u542b\u4e00\u4e2a\u5b57\u6bcd\uff0cs\u6216t","title":"3.1.4  key \u6269\u5c55\u64cd\u4f5c\uff08\u67e5\u8be2\u6a21\u5f0f\uff09"},{"location":"redis/day01/#32","text":"","title":"3.2  \u6570\u636e\u5e93\u6307\u4ee4"},{"location":"redis/day01/#321_key","text":"\u5728\u8fd9\u4e2a\u5730\u65b9\u6211\u4eec\u6765\u8bb2\u4e00\u4e0b\u6570\u636e\u5e93\u7684\u5e38\u7528\u6307\u4ee4\uff0c\u5728\u8bb2\u8fd9\u4e2a\u4e1c\u897f\u4e4b\u524d\uff0c\u6211\u4eec\u5148\u601d\u8003\u4e00\u4e2a\u95ee\u9898\uff1a \u5047\u5982\u8bf4\u4f60\u4eec\u5341\u4e2a\u4eba\u540c\u65f6\u64cd\u4f5credis\uff0c\u4f1a\u4e0d\u4f1a\u51fa\u73b0key\u540d\u5b57\u547d\u540d\u51b2\u7a81\u7684\u95ee\u9898\u3002 \u4e00\u5b9a\u4f1a\uff0c\u4e3a\u4ec0\u4e48?\u56e0\u4e3a\u4f60\u7684key\u662f\u7531\u7a0b\u5e8f\u800c\u5b9a\u4e49\u7684\u3002\u4f60\u60f3\u5199\u4ec0\u4e48\u5199\u4ec0\u4e48\uff0c\u90a3\u5728\u4f7f\u7528\u7684\u8fc7\u7a0b\u4e2d\u5927\u5bb6\u90fd\u5728\u4e0d\u505c\u7684\u52a0\uff0c\u65e9\u665a\u6709\u4e00\u5929\u4ed6\u4f1a\u51b2\u7a81\u7684\u3002 redis\u5728\u4f7f\u7528\u8fc7\u7a0b\u4e2d\uff0c\u4f34\u968f\u7740\u64cd\u4f5c\u6570\u636e\u91cf\u7684\u589e\u52a0\uff0c\u4f1a\u51fa\u73b0\u5927\u91cf\u7684\u6570\u636e\u4ee5\u53ca\u5bf9\u5e94\u7684key\u3002 \u90a3\u8fd9\u4e2a\u95ee\u9898\u6211\u4eec\u8981\u4e0d\u8981\u89e3\u51b3\uff1f\u8981\uff01\u600e\u4e48\u89e3\u51b3\u5462\uff1f\u6211\u4eec\u6700\u597d\u628a\u6570\u636e\u8fdb\u884c\u4e00\u4e2a\u5206\u7c7b\uff0c\u9664\u4e86\u547d\u540d\u89c4\u8303\u6211\u4eec\u505a\u7edf\u4e00\u4ee5\u5916\uff0c\u5982\u679c\u8fd8\u80fd\u628a\u5b83\u5206\u5f00\uff0c\u8fd9\u6837\u662f\u4e0d\u662f\u51b2\u7a81\u7684\u673a\u7387\u5c31\u4f1a\u5c0f\u4e00\u4e9b\u4e86\uff0c\u8fd9\u5c31\u662f\u54b1\u4eec\u4e0b\u9762\u8981\u8bf4\u7684\u89e3\u51b3\u65b9\u6848\uff01","title":"3.2.1  key \u7684\u91cd\u590d\u95ee\u9898"},{"location":"redis/day01/#322","text":"redis\u4e3a\u6bcf\u4e2a\u670d\u52a1\u63d0\u4f9b\u670916\u4e2a\u6570\u636e\u5e93\uff0c\u7f16\u53f7\u4ece0\u523015 \u6bcf\u4e2a\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u6570\u636e\u76f8\u4e92\u72ec\u7acb \u5728\u5bf9\u5e94\u7684\u6570\u636e\u5e93\u4e2d\u5212\u51fa\u4e00\u5757\u533a\u57df\uff0c\u8bf4\u4ed6\u5c31\u662f\u51e0\uff0c\u4f60\u5c31\u7528\u51e0\u90a3\u5757\uff0c\u540c\u65f6\uff0c\u5176\u4ed6\u7684\u8fd9\u4e9b\u90fd\u53ef\u4ee5\u8fdb\u884c\u5b9a\u4e49\uff0c\u4e00\u5171\u662f16\u4e2a\uff0c\u8fd9\u91cc\u8fb9\u9700\u8981\u6ce8\u610f\u4e00\u70b9\uff0c\u4ed6\u4eec\u8fd916\u4e2a\u5171\u7528redis\u7684\u5185\u5b58\u3002\u6ca1\u6709\u8bf4\u8c01\u5927\u8c01\u5c0f\uff0c\u4e5f\u5c31\u662f\u8bf4\u6570\u5b57\u53ea\u662f\u4ee3\u8868\u4e86\u4e00\u5757\u513f\u533a\u57df\uff0c\u533a\u57df\u5177\u4f53\u591a\u5927\u672a\u77e5\u3002\u8fd9\u662f\u6570\u636e\u5e93\u7684\u4e00\u4e2a\u5206\u533a\u7684\u4e00\u4e2a\u7b56\u7565\uff01","title":"3.2.2  \u89e3\u51b3\u65b9\u6848"},{"location":"redis/day01/#323","text":"\u5207\u6362\u6570\u636e\u5e93 select index \u5176\u4ed6\u64cd\u4f5c ping","title":"3.2.3   \u6570\u636e\u5e93\u7684\u57fa\u672c\u64cd\u4f5c"},{"location":"redis/day01/#324","text":"\u6570\u636e\u79fb\u52a8 move key db \u6570\u636e\u603b\u91cf dbsize \u6570\u636e\u6e05\u9664 flushdb flushall","title":"3.2.4  \u6570\u636e\u5e93\u6269\u5c55\u64cd\u4f5c"},{"location":"redis/day01/#4_jedis","text":"\u5728\u5b66\u4e60\u5b8credis\u540e\uff0c\u6211\u4eec\u73b0\u5728\u5c31\u8981\u7528Java\u6765\u8fde\u63a5redis\u4e86\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u7684\u8fd9\u4e00\u7ae0\u8981\u5b66\u7684Jedis\u4e86\u3002\u5728\u8fd9\u4e2a\u90e8\u5206\uff0c\u6211\u4eec\u4e3b\u8981\u8bb2\u89e3\u4ee5\u4e0b3\u4e2a\u5185\u5bb9\uff1a HelloWorld\uff08Jedis\u7248\uff09 Jedis\u7b80\u6613\u5de5\u5177\u7c7b\u5f00\u53d1 \u53ef\u89c6\u5316\u5ba2\u6237\u7aef","title":"4. Jedis"},{"location":"redis/day01/#41_jedis","text":"","title":"4.1  Jedis\u7b80\u4ecb"},{"location":"redis/day01/#411_redis","text":"\u5bf9\u4e8e\u6211\u4eec\u73b0\u5728\u7684\u6570\u636e\u6765\u8bf4\uff0c\u5b83\u662f\u5728\u6211\u4eec\u7684redis\u4e2d\uff0c\u800c\u6700\u7ec8\u6211\u4eec\u662f\u8981\u505a\u7a0b\u5e8f\u3002\u90a3\u4e48\u7a0b\u5e8f\u5c31\u8981\u548c\u6211\u4eec\u7684redis\u8fdb\u884c\u8fde\u63a5\u3002\u5e72\u4ec0\u4e48\u4e8b\u60c5\u5462\uff1f\u4e24\u4ef6\u4e8b\uff1a\u7a0b\u5e8f\u4e2d\u6709\u6570\u636e\u7684\u65f6\u5019\uff0c\u6211\u4eec\u8981\u628a\u8fd9\u4e9b\u6570\u636e\u5168\u90e8\u4ea4\u7ed9redis\u7ba1\u7406\u3002\u540c\u65f6\uff0credis\u4e2d\u7684\u6570\u636e\u8fd8\u80fd\u53d6\u51fa\u6765\uff0c\u56de\u5230\u6211\u4eec\u7684\u5e94\u7528\u7a0b\u5e8f\u4e2d\u3002\u90a3\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u5728Java\u4e0eredis\u4e4b\u95f4\u6253\u4ea4\u9053\u7684\u8fd9\u4e2a\u4e1c\u897f\u5c31\u53eb\u505aJedis.\u7b80\u5355\u8bf4\uff0cJedis\u5c31\u662f\u63d0\u4f9b\u4e86Java\u4e0eredis\u7684\u8fde\u63a5\u670d\u52a1\u7684\uff0c\u91cc\u8fb9\u6709\u5404\u79cd\u5404\u6837\u7684API\u63a5\u53e3\uff0c\u4f60\u53ef\u4ee5\u53bb\u8c03\u7528\u5b83\u3002 \u9664\u4e86Jedis\u5916\uff0c\u8fd8\u6709\u6ca1\u6709\u5176\u4ed6\u7684\u8fd9\u79cd\u8fde\u63a5\u670d\u52a1\u5462\uff1f\u5176\u5b9e\u8fd8\u6709\u5f88\u591a\uff0c\u4e86\u89e3\u4e00\u4e0b\uff1a Java\u8bed\u8a00\u8fde\u63a5redis\u670d\u52a1 Jedis\uff08SpringData\u3001Redis \u3001 Lettuce\uff09 \u5176\u5b83\u8bed\u8a00\uff1aC \u3001C++ \u3001C# \u3001Erlang\u3001Lua \u3001Objective-C \u3001Perl \u3001PHP \u3001Python \u3001Ruby \u3001Scala","title":"4.1.1  \u7f16\u7a0b\u8bed\u8a00\u4e0eredis"},{"location":"redis/day01/#412","text":"(1)jar\u5305\u5bfc\u5165 \u4e0b\u8f7d\u5730\u5740\uff1ahttps://mvnrepository.com/artifact/redis.clients/jedis \u57fa\u4e8emaven <dependency> <groupId> redis.clients </groupId> <artifactId> jedis </artifactId> <version> 2.9.0 </version> </dependency> (2)\u5ba2\u6237\u7aef\u8fde\u63a5redis \u8fde\u63a5redis Jedis jedis = new Jedis(\"localhost\", 6379); \u64cd\u4f5credis jedis.set(\"name\", \"itheima\"); jedis.get(\"name\"); \u5173\u95edredis\u8fde\u63a5 jedis.close(); API\u6587\u6863 http://xetorthio.github.io/jedis/","title":"4.1.2  \u51c6\u5907\u5de5\u4f5c"},{"location":"redis/day01/#413","text":"\u521b\u5efa\uff1acom.itheima.JedisTest public class JedisTest { public static void main ( String [] args ) { //1.\u83b7\u53d6\u8fde\u63a5\u5bf9\u8c61 Jedis jedis = new Jedis ( \"192.168.40.130\" , 6379 ); //2.\u6267\u884c\u64cd\u4f5c jedis . set ( \"age\" , \"39\" ); String hello = jedis . get ( \"hello\" ); System . out . println ( hello ); jedis . lpush ( \"list1\" , \"a\" , \"b\" , \"c\" , \"d\" ); List < String > list1 = jedis . lrange ( \"list1\" , 0 , - 1 ); for ( String s : list1 ) { System . out . println ( s ); } jedis . sadd ( \"set1\" , \"abc\" , \"abc\" , \"def\" , \"poi\" , \"cba\" ); Long len = jedis . scard ( \"set1\" ); System . out . println ( len ); //3.\u5173\u95ed\u8fde\u63a5 jedis . close (); } }","title":"4.1.3 \u4ee3\u7801\u5b9e\u73b0"},{"location":"redis/day01/#42_jedis","text":"\u524d\u9762\u6211\u4eec\u505a\u7684\u7a0b\u5e8f\u8fd8\u662f\u6709\u70b9\u513f\u5c0f\u95ee\u9898\uff0c\u5c31\u662f\u6211\u4eec\u7684Jedis\u5bf9\u8c61\u7684\u7ba1\u7406\u662f\u6211\u4eec\u81ea\u5df1\u521b\u5efa\u7684\uff0c\u771f\u5b9e\u4f01\u4e1a\u5f00\u53d1\u4e2d\u662f\u4e0d\u53ef\u80fd\u8ba9\u4f60\u53bbnew\u4e00\u4e2a\u7684\uff0c\u90a3\u63a5\u4e0b\u6765\u54b1\u4eec\u5c31\u8981\u505a\u4e00\u4e2a\u5de5\u5177\u7c7b\uff0c\u7b80\u5355\u6765\u8bf4\uff0c\u5c31\u662f\u505a\u4e00\u4e2a\u521b\u5efaJedis\u7684\u8fd9\u6837\u7684\u4e00\u4e2a\u5de5\u5177\u3002","title":"4.2  Jedis\u7b80\u6613\u5de5\u5177\u7c7b\u5f00\u53d1"},{"location":"redis/day01/#421","text":"JedisPool\uff1aJedis\u63d0\u4f9b\u7684\u8fde\u63a5\u6c60\u6280\u672f poolConfig:\u8fde\u63a5\u6c60\u914d\u7f6e\u5bf9\u8c61 host:redis\u670d\u52a1\u5730\u5740 port:redis\u670d\u52a1\u7aef\u53e3\u53f7 JedisPool\u7684\u6784\u9020\u5668\u5982\u4e0b\uff1a public JedisPool ( GenericObjectPoolConfig poolConfig , String host , int port ) { this ( poolConfig , host , port , 2000 , ( String ) null , 0 , ( String ) null ); }","title":"4.2.1  \u57fa\u4e8e\u8fde\u63a5\u6c60\u83b7\u53d6\u8fde\u63a5"},{"location":"redis/day01/#422","text":"\u521b\u5efajedis\u7684\u914d\u7f6e\u6587\u4ef6\uff1ajedis.properties jedis.host = 192.168.40.130 jedis.port = 6379 jedis.maxTotal = 50 jedis.maxIdle = 10","title":"4.2.2  \u5c01\u88c5\u8fde\u63a5\u53c2\u6570"},{"location":"redis/day01/#423","text":"\u521b\u5efaJedisUtils\uff1acom.itheima.util.JedisUtils\uff0c\u4f7f\u7528\u9759\u6001\u4ee3\u7801\u5757\u521d\u59cb\u5316\u8d44\u6e90 public class JedisUtils { private static int maxTotal ; private static int maxIdel ; private static String host ; private static int port ; private static JedisPoolConfig jpc ; private static JedisPool jp ; static { ResourceBundle bundle = ResourceBundle . getBundle ( \"redis\" ); maxTotal = Integer . parseInt ( bundle . getString ( \"redis.maxTotal\" )); maxIdel = Integer . parseInt ( bundle . getString ( \"redis.maxIdel\" )); host = bundle . getString ( \"redis.host\" ); port = Integer . parseInt ( bundle . getString ( \"redis.port\" )); //Jedis\u8fde\u63a5\u6c60\u914d\u7f6e jpc = new JedisPoolConfig (); jpc . setMaxTotal ( maxTotal ); jpc . setMaxIdle ( maxIdel ); jp = new JedisPool ( jpc , host , port ); } }","title":"4.2.3  \u52a0\u8f7d\u914d\u7f6e\u4fe1\u606f"},{"location":"redis/day01/#424","text":"\u5bf9\u5916\u8bbf\u95ee\u63a5\u53e3\uff0c\u63d0\u4f9bjedis\u8fde\u63a5\u5bf9\u8c61\uff0c\u8fde\u63a5\u4ece\u8fde\u63a5\u6c60\u83b7\u53d6\uff0c\u5728JedisUtils\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u83b7\u53d6jedis\u7684\u65b9\u6cd5\uff1agetJedis public static Jedis getJedis (){ Jedis jedis = jedisPool . getResource (); return jedis ; }","title":"4.2.4  \u83b7\u53d6\u8fde\u63a5"},{"location":"redis/day01/#43","text":"4.3.1 Redis Desktop Manager","title":"4.3  \u53ef\u89c6\u5316\u5ba2\u6237\u7aef"},{"location":"redis/day01/#5","text":"\u4e0b\u9762\u5462\uff0c\u8fdb\u5165\u5230\u6301\u4e45\u5316\u7684\u5b66\u4e60.\u8fd9\u90e8\u5206\u5185\u5bb9\u7406\u89e3\u7684\u4e1c\u897f\u591a\uff0c\u64cd\u4f5c\u7684\u4e1c\u897f\u5c11\u3002\u5728\u8fd9\u4e2a\u90e8\u5206\uff0c\u6211\u4eec\u5c06\u8bb2\u89e3\u56db\u4e2a\u4e1c\u897f\uff1a \u6301\u4e45\u5316\u7b80\u4ecb RDB AOF RDB\u4e0eAOF\u533a\u522b","title":"5. \u6301\u4e45\u5316"},{"location":"redis/day01/#51","text":"","title":"5.1  \u6301\u4e45\u5316\u7b80\u4ecb"},{"location":"redis/day01/#511_-","text":"\u4e0d\u77e5\u9053\u5927\u5bb6\u6709\u6ca1\u6709\u9047\u89c1\u8fc7\uff0c\u5c31\u662f\u6b63\u5de5\u4f5c\u7684\u65f6\u5019\u505c\u7535\u4e86\uff0c\u5982\u679c\u4f60\u7528\u7684\u662f\u7b14\u8bb0\u672c\u7535\u8111\u8fd8\u597d\uff0c\u4f60\u6709\u7535\u6c60\uff0c\u4f46\u5982\u679c\u4f60\u7528\u7684\u662f\u53f0\u5f0f\u673a\u5462\uff0c\u90a3\u6050\u6015\u5c31\u6bd4\u8f83\u707e\u96be\u4e86\uff0c\u5047\u5982\u4f60\u73b0\u5728\u6b63\u5728\u5199\u4e00\u4e2a\u6bd4\u8f83\u91cd\u8981\u7684\u6587\u6863\uff0c\u5982\u679c\u4f60\u8981\u4f7f\u7528\u7684\u662fword\uff0c\u8fd9\u79cd\u529e\u516c\u81ea\u52a8\u5316\u8f6f\u4ef6\u7684\u8bdd\uff0c\u4ed6\u4e00\u65e6\u9047\u5230\u505c\u7535\uff0c\u5176\u5b9e\u4f60\u4e0d\u7528\u62c5\u5fc3\uff0c\u56e0\u4e3a\u5b83\u4f1a\u7ed9\u4f60\u751f\u6210\u4e00\u4e9b\u5176\u4ed6\u7684\u6587\u4ef6\u3002 \u5176\u5b9e\u4ed6\u4eec\u90fd\u5728\u505a\u4e00\u4ef6\u4e8b\u513f\uff0c\u5e2e\u4f60\u81ea\u52a8\u6062\u590d\uff0c\u6709\u4e86\u8fd9\u4e2a\u6587\u4ef6\uff0c\u4f60\u524d\u9762\u7684\u4e1c\u897f\u5c31\u4e0d\u518d\u4e22\u4e86\u3002\u90a3\u4ec0\u4e48\u662f\u81ea\u52a8\u6062\u590d\u5462\uff1f\u4f60\u8981\u5148\u4e86\u89e3\u4ed6\u7684\u6574\u4e2a\u8fc7\u7a0b\u3002 \u6211\u4eec\u8bf4\u81ea\u52a8\u6062\u590d\uff0c\u5176\u5b9e\u57fa\u4e8e\u7684\u4e00\u4e2a\u524d\u63d0\u5c31\u662f\u4ed6\u63d0\u524d\u628a\u4f60\u7684\u6570\u636e\u7ed9\u5b58\u8d77\u6765\u4e86\u3002\u4f60\u5e73\u5e38\u64cd\u4f5c\u7684\u6240\u6709\u4fe1\u606f\u90fd\u662f\u5728\u5185\u5b58\u4e2d\u7684\uff0c\u800c\u6211\u4eec\u771f\u6b63\u7684\u4fe1\u606f\u662f\u4fdd\u5b58\u5728\u786c\u76d8\u4e2d\u7684\uff0c\u5185\u5b58\u4e2d\u7684\u4fe1\u606f\u65ad\u7535\u4ee5\u540e\u5c31\u6d88\u5931\u4e86\uff0c\u786c\u76d8\u4e2d\u7684\u4fe1\u606f\u65ad\u7535\u4ee5\u540e\u8fd8\u53ef\u4ee5\u4fdd\u7559\u4e0b\u6765\uff01 \u6211\u4eec\u5c06\u6587\u4ef6\u7531\u5185\u5b58\u4e2d\u4fdd\u5b58\u5230\u786c\u76d8\u4e2d\u7684\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u6211\u4eec\u53eb\u505a\u6570\u636e\u4fdd\u5b58\uff0c\u4e5f\u5c31\u53eb\u505a\u6301\u4e45\u5316\u3002\u4f46\u662f\u628a\u5b83\u4fdd\u5b58\u4e0b\u6765\u4e0d\u662f\u4f60\u7684\u76ee\u7684\uff0c\u6700\u7ec8\u4f60\u8fd8\u8981\u628a\u5b83\u518d\u8bfb\u53d6\u51fa\u6765\uff0c\u5b83\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u6211\u4eec\u53eb\u505a\u6570\u636e\u6062\u590d\uff0c\u8fd9\u5c31\u662f\u6211\u4eec\u6240\u8bf4\u7684word\u4e3a\u4ec0\u4e48\u65ad\u7535\u4ee5\u540e\u8fd8\u80fd\u591f\u7ed9\u4f60\u4fdd\u7559\u6587\u4ef6\uff0c\u56e0\u4e3a\u5b83\u6267\u884c\u4e86\u4e00\u4e2a\u81ea\u52a8\u5907\u4efd\u7684\u8fc7\u7a0b\uff0c\u4e5f\u5c31\u662f\u901a\u8fc7\u81ea\u52a8\u7684\u5f62\u5f0f\uff0c\u628a\u4f60\u7684\u6570\u636e\u5b58\u50a8\u8d77\u6765\uff0c\u90a3\u4e48\u6709\u4e86\u8fd9\u79cd\u5f62\u5f0f\u4ee5\u540e\uff0c\u6211\u4eec\u7684\u6570\u636e\u5c31\u53ef\u4ee5\u7531\u5185\u5b58\u5230\u786c\u76d8\u4e0a\u5b9e\u73b0\u4fdd\u5b58\u3002","title":"5.1.1  \u573a\u666f-\u610f\u5916\u65ad\u7535"},{"location":"redis/day01/#512","text":"(1)\u4ec0\u4e48\u662f\u6301\u4e45\u5316 \u5229\u7528\u6c38\u4e45\u6027\u5b58\u50a8\u4ecb\u8d28\u5c06\u6570\u636e\u8fdb\u884c\u4fdd\u5b58\uff0c\u5728\u7279\u5b9a\u7684\u65f6\u95f4\u5c06\u4fdd\u5b58\u7684\u6570\u636e\u8fdb\u884c\u6062\u590d\u7684\u5de5\u4f5c\u673a\u5236\u79f0\u4e3a\u6301\u4e45\u5316 \u3002 \u6301\u4e45\u5316\u7528\u4e8e\u9632\u6b62\u6570\u636e\u7684\u610f\u5916\u4e22\u5931\uff0c\u786e\u4fdd\u6570\u636e\u5b89\u5168\u6027\u3002 (2)\u6301\u4e45\u5316\u8fc7\u7a0b\u4fdd\u5b58\u4ec0\u4e48\uff1f \u6211\u4eec\u77e5\u9053\u4e00\u70b9\uff0c\u8ba1\u7b97\u673a\u4e2d\u7684\u6570\u636e\u5168\u90e8\u90fd\u662f\u4e8c\u8fdb\u5236\uff0c\u5982\u679c\u73b0\u5728\u6211\u8981\u4f60\u7ed9\u6211\u4fdd\u5b58\u4e00\u7ec4\u6570\u636e\u7684\u8bdd\uff0c\u4f60\u6709\u4ec0\u4e48\u6837\u7684\u65b9\u5f0f\u5462\uff0c\u5176\u5b9e\u6700\u7b80\u5355\u7684\u5c31\u662f\u73b0\u5728\u957f\u4ec0\u4e48\u6837\uff0c\u6211\u5c31\u8bb0\u4e0b\u6765\u5c31\u884c\u4e86\uff0c\u90a3\u4e48\u8fd9\u79cd\u662f\u8bb0\u5f55\u7eaf\u7cb9\u7684\u6570\u636e\uff0c\u4e5f\u53eb\u505a\u5feb\u7167\u5b58\u50a8\uff0c\u4e5f\u5c31\u662f\u5b83\u4fdd\u5b58\u7684\u662f\u67d0\u4e00\u65f6\u523b\u7684\u6570\u636e\u72b6\u6001\u3002 \u8fd8\u6709\u4e00\u79cd\u5f62\u5f0f\uff0c\u5b83\u4e0d\u8bb0\u5f55\u4f60\u7684\u6570\u636e\uff0c\u5b83\u8bb0\u5f55\u4f60\u6240\u6709\u7684\u64cd\u4f5c\u8fc7\u7a0b\uff0c\u6bd4\u5982\u8bf4\u5927\u5bb6\u7528idea\u7684\u65f6\u5019\uff0c\u6709\u6ca1\u6709\u9047\u5230\u8fc7\u5199\u9519\u4e86ctrl+z\u64a4\u9500\uff0c\u7136\u540ectrl+y\u8fd8\u80fd\u6062\u590d\uff0c\u8fd9\u4e2a\u5730\u65b9\u5b83\u4e5f\u662f\u5728\u8bb0\u5f55\uff0c\u4f46\u662f\u8bb0\u5f55\u7684\u662f\u4f60\u6240\u6709\u7684\u64cd\u4f5c\u8fc7\u7a0b\uff0c\u90a3\u6211\u60f3\u95ee\u4e00\u4e0b\uff0c\u64cd\u4f5c\u8fc7\u7a0b\uff0c\u6211\u90fd\u7ed9\u4f60\u7559\u4e0b\u6765\u4e86\uff0c\u4f60\u8bf4\u6570\u636e\u8fd8\u4f1a\u4e22\u5417\uff1f\u80af\u5b9a\u4e0d\u4f1a\u4e22\uff0c\u56e0\u4e3a\u4f60\u6240\u6709\u7684\u64cd\u4f5c\u8fc7\u7a0b\u6211\u90fd\u4fdd\u5b58\u4e86\u3002\u8fd9\u79cd\u4fdd\u5b58\u64cd\u4f5c\u8fc7\u7a0b\u7684\u5b58\u50a8\uff0c\u7528\u4e13\u4e1a\u672f\u8bed\u6765\u8bf4\u53ef\u4ee5\u8bf4\u662f\u65e5\u5fd7\uff0c\u8fd9\u662f\u4e24\u79cd\u4e0d\u540c\u7684\u4fdd\u5b58\u6570\u636e\u7684\u5f62\u5f0f\u554a\u3002 \u603b\u7ed3\u4e00\u4e0b\uff1a \u7b2c\u4e00\u79cd\uff1a\u5c06\u5f53\u524d\u6570\u636e\u72b6\u6001\u8fdb\u884c\u4fdd\u5b58\uff0c\u5feb\u7167\u5f62\u5f0f\uff0c\u5b58\u50a8\u6570\u636e\u7ed3\u679c\uff0c\u5b58\u50a8\u683c\u5f0f\u7b80\u5355\uff0c\u5173\u6ce8\u70b9\u5728\u6570\u636e\u3002 \u7b2c\u4e8c\u79cd\uff1a\u5c06\u6570\u636e\u7684\u64cd\u4f5c\u8fc7\u7a0b\u8fdb\u884c\u4fdd\u5b58\uff0c\u65e5\u5fd7\u5f62\u5f0f\uff0c\u5b58\u50a8\u64cd\u4f5c\u8fc7\u7a0b\uff0c\u5b58\u50a8\u683c\u5f0f\u590d\u6742\uff0c\u5173\u6ce8\u70b9\u5728\u6570\u636e\u7684\u64cd\u4f5c\u8fc7\u7a0b\u3002","title":"5.1.2  \u4ec0\u4e48\u662f\u6301\u4e45\u5316"},{"location":"redis/day01/#52_rdb","text":"","title":"5.2  RDB"},{"location":"redis/day01/#521_save","text":"\u624b\u52a8\u6267\u884c\u4e00\u6b21\u4fdd\u5b58\u64cd\u4f5c save save\u6307\u4ee4\u76f8\u5173\u914d\u7f6e \u8bbe\u7f6e\u672c\u5730\u6570\u636e\u5e93\u6587\u4ef6\u540d\uff0c\u9ed8\u8ba4\u503c\u4e3a dump.rdb\uff0c\u901a\u5e38\u8bbe\u7f6e\u4e3adump-\u7aef\u53e3\u53f7.rdb dbfilename filename \u8bbe\u7f6e\u5b58\u50a8.rdb\u6587\u4ef6\u7684\u8def\u5f84\uff0c\u901a\u5e38\u8bbe\u7f6e\u6210\u5b58\u50a8\u7a7a\u95f4\u8f83\u5927\u7684\u76ee\u5f55\u4e2d\uff0c\u76ee\u5f55\u540d\u79f0data dir path \u8bbe\u7f6e\u5b58\u50a8\u81f3\u672c\u5730\u6570\u636e\u5e93\u65f6\u662f\u5426\u538b\u7f29\u6570\u636e\uff0c\u9ed8\u8ba4yes\uff0c\u8bbe\u7f6e\u4e3ano\uff0c\u8282\u7701 CPU \u8fd0\u884c\u65f6\u95f4\uff0c\u4f46\u5b58\u50a8\u6587\u4ef6\u53d8\u5927 rdbcompression yes|no \u8bbe\u7f6e\u8bfb\u5199\u6587\u4ef6\u8fc7\u7a0b\u662f\u5426\u8fdb\u884cRDB\u683c\u5f0f\u6821\u9a8c\uff0c\u9ed8\u8ba4yes\uff0c\u8bbe\u7f6e\u4e3ano\uff0c\u8282\u7ea6\u8bfb\u519910%\u65f6\u95f4\u6d88\u8017\uff0c\u5355\u5b58\u5728\u6570\u636e\u635f\u574f\u7684\u98ce\u9669 rdbchecksum yes|no save\u6307\u4ee4\u5de5\u4f5c\u539f\u7406 \u9700\u8981\u6ce8\u610f\u4e00\u4e2a\u95ee\u9898\uff0c\u6765\u770b\u4e00\u4e0b\uff0c\u73b0\u5728\u6709\u56db\u4e2a\u5ba2\u6237\u7aef\u5404\u81ea\u8981\u6267\u884c\u4e00\u4e2a\u6307\u4ee4\uff0c\u628a\u8fd9\u4e9b\u6307\u4ee4\u53d1\u9001\u5230redis\u670d\u52a1\u5668\u540e\uff0c\u4ed6\u4eec\u6267\u884c\u6709\u4e00\u4e2a\u5148\u540e\u987a\u5e8f\u95ee\u9898\uff0c\u5047\u5b9a\u5c31\u662f\u6309\u71671234\u7684\u987a\u5e8f\u653e\u8fc7\u53bb\u7684\u8bdd\uff0c\u90a3\u4f1a\u662f\u4ec0\u4e48\u6837\u7684\uff1f \u8bb0\u5f97redis\u662f\u4e2a\u5355\u7ebf\u7a0b\u7684\u5de5\u4f5c\u6a21\u5f0f\uff0c\u5b83\u4f1a\u521b\u5efa\u4e00\u4e2a\u4efb\u52a1\u961f\u5217\uff0c\u6240\u6709\u7684\u547d\u4ee4\u90fd\u4f1a\u8fdb\u5230\u8fd9\u4e2a\u961f\u5217\u91cc\u8fb9\uff0c\u5728\u8fd9\u513f\u6392\u961f\u6267\u884c\uff0c\u6267\u884c\u5b8c\u4e00\u4e2a\u6d88\u5931\u4e00\u4e2a\uff0c\u5f53\u6240\u6709\u7684\u547d\u4ee4\u90fd\u6267\u884c\u5b8c\u4e86\uff0cOK\uff0c\u7ed3\u679c\u8fbe\u5230\u4e86\u3002 \u4f46\u662f\u5982\u679c\u73b0\u5728\u6211\u4eec\u6267\u884c\u7684\u65f6\u5019save\u6307\u4ee4\u4fdd\u5b58\u7684\u6570\u636e\u91cf\u5f88\u5927\u4f1a\u662f\u4ec0\u4e48\u73b0\u8c61\u5462\uff1f \u4ed6\u4f1a\u975e\u5e38\u8017\u65f6\uff0c\u4ee5\u81f3\u4e8e\u5f71\u54cd\u5230\u5b83\u5728\u6267\u884c\u7684\u65f6\u5019\uff0c\u540e\u9762\u7684\u6307\u4ee4\u90fd\u8981\u7b49\uff0c\u6240\u4ee5\u8bf4\u8fd9\u79cd\u6a21\u5f0f\u662f\u4e0d\u53cb\u597d\u7684\uff0c\u8fd9\u662fsave\u6307\u4ee4\u5bf9\u5e94\u7684\u4e00\u4e2a\u95ee\u9898\uff0c\u5f53cpu\u6267\u884c\u7684\u65f6\u5019\u4f1a\u963b\u585eredis\u670d\u52a1\u5668\uff0c\u76f4\u5230\u4ed6\u6267\u884c\u5b8c\u6bd5\uff0c\u6240\u4ee5\u8bf4\u6211\u4eec\u4e0d\u5efa\u8bae\u5927\u5bb6\u5728\u7ebf\u4e0a\u73af\u5883\u7528save\u6307\u4ee4\u3002","title":"5.2.1  save\u6307\u4ee4"},{"location":"redis/day01/#522_bgsave","text":"\u4e4b\u524d\u6211\u4eec\u8bb2\u5230\u4e86\u5f53save\u6307\u4ee4\u7684\u6570\u636e\u91cf\u8fc7\u5927\u65f6\uff0c\u5355\u7ebf\u7a0b\u6267\u884c\u65b9\u5f0f\u9020\u6210\u6548\u7387\u8fc7\u4f4e\uff0c\u90a3\u5e94\u8be5\u5982\u4f55\u5904\u7406\uff1f \u6b64\u65f6\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\uff1a bgsave \u6307\u4ee4\uff0cbg\u5176\u5b9e\u662fbackground\u7684\u610f\u601d\uff0c\u540e\u53f0\u6267\u884c\u7684\u610f\u601d \u624b\u52a8\u542f\u52a8\u540e\u53f0\u4fdd\u5b58\u64cd\u4f5c\uff0c\u4f46\u4e0d\u662f\u7acb\u5373\u6267\u884c bgsave bgsave\u6307\u4ee4\u76f8\u5173\u914d\u7f6e \u540e\u53f0\u5b58\u50a8\u8fc7\u7a0b\u4e2d\u5982\u679c\u51fa\u73b0\u9519\u8bef\u73b0\u8c61\uff0c\u662f\u5426\u505c\u6b62\u4fdd\u5b58\u64cd\u4f5c\uff0c\u9ed8\u8ba4yes stop-writes-on-bgsave-error yes|no \u5176 \u4ed6 dbfilename filename dir path rdbcompression yes|no rdbchecksum yes|no bgsave\u6307\u4ee4\u5de5\u4f5c\u539f\u7406 \u5f53\u6267\u884cbgsave\u7684\u65f6\u5019\uff0c\u5ba2\u6237\u7aef\u53d1\u51fabgsave\u6307\u4ee4\u7ed9\u5230redis\u670d\u52a1\u5668\u3002\u6ce8\u610f\uff0c\u8fd9\u4e2a\u65f6\u5019\u670d\u52a1\u5668\u9a6c\u4e0a\u56de\u4e00\u4e2a\u7ed3\u679c\u544a\u8bc9\u5ba2\u6237\u7aef\u540e\u53f0\u5df2\u7ecf\u5f00\u59cb\u4e86\uff0c\u4e0e\u6b64\u540c\u65f6\u5b83\u4f1a\u521b\u5efa\u4e00\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u4f7f\u7528Linux\u7684fork\u51fd\u6570\u521b\u5efa\u4e00\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u8ba9\u8fd9\u4e2a\u5b50\u8fdb\u7a0b\u53bb\u6267\u884csave\u76f8\u5173\u7684\u64cd\u4f5c\uff0c\u6b64\u65f6\u6211\u4eec\u53ef\u4ee5\u60f3\u4e00\u4e0b\uff0c\u6211\u4eec\u4e3b\u8fdb\u7a0b\u4e00\u76f4\u5728\u5904\u7406\u6307\u4ee4\uff0c\u800c\u5b50\u8fdb\u7a0b\u5728\u6267\u884c\u540e\u53f0\u7684\u4fdd\u5b58\uff0c\u5b83\u4f1a\u4e0d\u4f1a\u5e72\u6270\u5230\u4e3b\u8fdb\u7a0b\u7684\u6267\u884c\u5417\uff1f \u7b54\u6848\u662f\u4e0d\u4f1a\uff0c\u6240\u4ee5\u8bf4\u4ed6\u624d\u662f\u4e3b\u6d41\u65b9\u6848\u3002\u5b50\u8fdb\u7a0b\u5f00\u59cb\u6267\u884c\u4e4b\u540e\uff0c\u5b83\u5c31\u4f1a\u521b\u5efa\u554aRDB\u6587\u4ef6\u628a\u5b83\u5b58\u8d77\u6765\uff0c\u64cd\u4f5c\u5b8c\u4ee5\u540e\u4ed6\u4f1a\u628a\u8fd9\u4e2a\u7ed3\u679c\u8fd4\u56de\uff0c\u4e5f\u5c31\u662f\u8bf4bgsave\u7684\u8fc7\u7a0b\u5206\u6210\u4e24\u4e2a\u8fc7\u7a0b\uff0c\u7b2c\u4e00\u4e2a\u662f\u670d\u52a1\u7aef\u62ff\u5230\u6307\u4ee4\u76f4\u63a5\u544a\u8bc9\u5ba2\u6237\u7aef\u5f00\u59cb\u6267\u884c\u4e86\uff1b\u53e6\u5916\u4e00\u4e2a\u8fc7\u7a0b\u662f\u4e00\u4e2a\u5b50\u8fdb\u7a0b\u5728\u5b8c\u6210\u540e\u53f0\u7684\u4fdd\u5b58\u64cd\u4f5c\uff0c\u64cd\u4f5c\u5b8c\u4ee5\u540e\u56de\u4e00\u4e2a\u6d88\u606f\u3002","title":"5.2.2  bgsave\u6307\u4ee4"},{"location":"redis/day01/#523_save","text":"\u8bbe\u7f6e\u81ea\u52a8\u6301\u4e45\u5316\u7684\u6761\u4ef6\uff0c\u6ee1\u8db3\u9650\u5b9a\u65f6\u95f4\u8303\u56f4\u5185key\u7684\u53d8\u5316\u6570\u91cf\u8fbe\u5230\u6307\u5b9a\u6570\u91cf\u5373\u8fdb\u884c\u6301\u4e45\u5316 save second changes \u53c2\u6570 second\uff1a\u76d1\u63a7\u65f6\u95f4\u8303\u56f4 changes\uff1a\u76d1\u63a7key\u7684\u53d8\u5316\u91cf \u8303\u4f8b\uff1a save 900 1 save 300 10 save 60 10000 \u5176\u4ed6\u76f8\u5173\u914d\u7f6e\uff1a dbfilename filename dir path rdbcompression yes|no rdbchecksum yes|no stop-writes-on-bgsave-error yes|no save\u914d\u7f6e\u5de5\u4f5c\u539f\u7406","title":"5.2.3 save\u914d\u7f6e\u81ea\u52a8\u6267\u884c"},{"location":"redis/day01/#524_rdb","text":"\u65b9\u5f0f save\u6307\u4ee4 bgsave\u6307\u4ee4 \u8bfb\u5199 \u540c\u6b65 \u5f02\u6b65 \u963b\u585e\u5ba2\u6237\u7aef\u6307\u4ee4 \u662f \u5426 \u989d\u5916\u5185\u5b58\u6d88\u8017 \u5426 \u662f \u542f\u52a8\u65b0\u8fdb\u7a0b \u5426 \u662f RDB\u7279\u6b8a\u542f\u52a8\u5f62\u5f0f \u670d\u52a1\u5668\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u91cd\u542f debug reload \u5173\u95ed\u670d\u52a1\u5668\u65f6\u6307\u5b9a\u4fdd\u5b58\u6570\u636e shutdown save \u5168\u91cf\u590d\u5236\uff08\u5728\u4e3b\u4ece\u590d\u5236\u4e2d\u8be6\u7ec6\u8bb2\u89e3\uff09 RDB\u4f18\u70b9\uff1a RDB\u662f\u4e00\u4e2a\u7d27\u51d1\u538b\u7f29\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u5b58\u50a8\u6548\u7387\u8f83\u9ad8 RDB\u5185\u90e8\u5b58\u50a8\u7684\u662fredis\u5728\u67d0\u4e2a\u65f6\u95f4\u70b9\u7684\u6570\u636e\u5feb\u7167\uff0c\u975e\u5e38\u9002\u5408\u7528\u4e8e\u6570\u636e\u5907\u4efd\uff0c\u5168\u91cf\u590d\u5236\u7b49\u573a\u666f RDB\u6062\u590d\u6570\u636e\u7684\u901f\u5ea6\u8981\u6bd4AOF\u5feb\u5f88\u591a \u5e94\u7528\uff1a\u670d\u52a1\u5668\u4e2d\u6bcfX\u5c0f\u65f6\u6267\u884cbgsave\u5907\u4efd\uff0c\u5e76\u5c06RDB\u6587\u4ef6\u62f7\u8d1d\u5230\u8fdc\u7a0b\u673a\u5668\u4e2d\uff0c\u7528\u4e8e\u707e\u96be\u6062\u590d\u3002 RDB\u7f3a\u70b9 RDB\u65b9\u5f0f\u65e0\u8bba\u662f\u6267\u884c\u6307\u4ee4\u8fd8\u662f\u5229\u7528\u914d\u7f6e\uff0c\u65e0\u6cd5\u505a\u5230\u5b9e\u65f6\u6301\u4e45\u5316\uff0c\u5177\u6709\u8f83\u5927\u7684\u53ef\u80fd\u6027\u4e22\u5931\u6570\u636e bgsave\u6307\u4ee4\u6bcf\u6b21\u8fd0\u884c\u8981\u6267\u884cfork\u64cd\u4f5c\u521b\u5efa\u5b50\u8fdb\u7a0b\uff0c\u8981\u727a\u7272\u6389\u4e00\u4e9b\u6027\u80fd Redis\u7684\u4f17\u591a\u7248\u672c\u4e2d\u672a\u8fdb\u884cRDB\u6587\u4ef6\u683c\u5f0f\u7684\u7248\u672c\u7edf\u4e00\uff0c\u6709\u53ef\u80fd\u51fa\u73b0\u5404\u7248\u672c\u670d\u52a1\u4e4b\u95f4\u6570\u636e\u683c\u5f0f\u65e0\u6cd5\u517c\u5bb9\u73b0\u8c61","title":"5.2.4 RDB\u4e09\u79cd\u542f\u52a8\u65b9\u5f0f\u5bf9\u6bd4"},{"location":"redis/day01/#53_aof","text":"\u4e3a\u4ec0\u4e48\u8981\u6709AOF,\u8fd9\u5f97\u4eceRDB\u7684\u5b58\u50a8\u7684\u5f0a\u7aef\u8bf4\u8d77\uff1a \u5b58\u50a8\u6570\u636e\u91cf\u8f83\u5927\uff0c\u6548\u7387\u8f83\u4f4e\uff0c\u57fa\u4e8e\u5feb\u7167\u601d\u60f3\uff0c\u6bcf\u6b21\u8bfb\u5199\u90fd\u662f\u5168\u90e8\u6570\u636e\uff0c\u5f53\u6570\u636e\u91cf\u5de8\u5927\u65f6\uff0c\u6548\u7387\u975e\u5e38\u4f4e \u5927\u6570\u636e\u91cf\u4e0b\u7684IO\u6027\u80fd\u8f83\u4f4e \u57fa\u4e8efork\u521b\u5efa\u5b50\u8fdb\u7a0b\uff0c\u5185\u5b58\u4ea7\u751f\u989d\u5916\u6d88\u8017 \u5b95\u673a\u5e26\u6765\u7684\u6570\u636e\u4e22\u5931\u98ce\u9669 \u90a3\u89e3\u51b3\u7684\u601d\u8def\u662f\u4ec0\u4e48\u5462\uff1f \u4e0d\u5199\u5168\u6570\u636e\uff0c\u4ec5\u8bb0\u5f55\u90e8\u5206\u6570\u636e \u964d\u4f4e\u533a\u5206\u6570\u636e\u662f\u5426\u6539\u53d8\u7684\u96be\u5ea6\uff0c\u6539\u8bb0\u5f55\u6570\u636e\u4e3a\u8bb0\u5f55\u64cd\u4f5c\u8fc7\u7a0b \u5bf9\u6240\u6709\u64cd\u4f5c\u5747\u8fdb\u884c\u8bb0\u5f55\uff0c\u6392\u9664\u4e22\u5931\u6570\u636e\u7684\u98ce\u9669","title":"5.3  AOF"},{"location":"redis/day01/#531_aof","text":"AOF (append only file)\u6301\u4e45\u5316\uff1a\u4ee5\u72ec\u7acb\u65e5\u5fd7\u7684\u65b9\u5f0f\u8bb0\u5f55\u6bcf\u6b21\u5199\u547d\u4ee4\uff0c\u91cd\u542f\u65f6\u518d\u91cd\u65b0\u6267\u884cAOF\u6587\u4ef6\u4e2d\u547d\u4ee4 \u8fbe\u5230\u6062\u590d\u6570\u636e\u7684\u76ee\u7684\u3002 \u4e0eRDB\u76f8\u6bd4\u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u4e3a\u7531\u8bb0\u5f55\u6570\u636e\u6539\u4e3a\u8bb0\u5f55\u6570\u636e\u4ea7\u751f\u7684\u53d8\u5316 AOF\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u89e3\u51b3\u4e86\u6570\u636e\u6301\u4e45\u5316\u7684\u5b9e\u65f6\u6027\uff0c\u76ee\u524d\u5df2\u7ecf\u662fRedis\u6301\u4e45\u5316\u7684\u4e3b\u6d41\u65b9\u5f0f AOF\u5199\u6570\u636e\u8fc7\u7a0b \u542f\u52a8AOF\u76f8\u5173\u914d\u7f6e \u5f00\u542fAOF\u6301\u4e45\u5316\u529f\u80fd\uff0c\u9ed8\u8ba4no\uff0c\u5373\u4e0d\u5f00\u542f\u72b6\u6001 appendonly yes|no AOF\u6301\u4e45\u5316\u6587\u4ef6\u540d\uff0c\u9ed8\u8ba4\u6587\u4ef6\u540d\u4e3aappendonly.aof\uff0c\u5efa\u8bae\u914d\u7f6e\u4e3aappendonly-\u7aef\u53e3\u53f7.aof appendfilename filename AOF\u6301\u4e45\u5316\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\uff0c\u4e0eRDB\u6301\u4e45\u5316\u6587\u4ef6\u4fdd\u6301\u4e00\u81f4\u5373\u53ef dir AOF\u5199\u6570\u636e\u7b56\u7565\uff0c\u9ed8\u8ba4\u4e3aeverysec appendfsync always|everysec|no","title":"5.3.1 AOF\u6982\u5ff5"},{"location":"redis/day01/#532_aof","text":"AOF\u5199\u6570\u636e\u4e09\u79cd\u7b56\u7565(appendfsync) always (\u6bcf\u6b21\uff09\uff1a\u6bcf\u6b21\u5199\u5165\u64cd\u4f5c\u5747\u540c\u6b65\u5230AOF\u6587\u4ef6\u4e2d\u6570\u636e\u96f6\u8bef\u5dee\uff0c\u6027\u80fd\u8f83\u4f4e\uff0c\u4e0d\u5efa\u8bae\u4f7f\u7528\u3002 everysec \uff08\u6bcf\u79d2\uff09\uff1a\u6bcf\u79d2\u5c06\u7f13\u51b2\u533a\u4e2d\u7684\u6307\u4ee4\u540c\u6b65\u5230AOF\u6587\u4ef6\u4e2d\uff0c\u5728\u7cfb\u7edf\u7a81\u7136\u5b95\u673a\u7684\u60c5\u51b5\u4e0b\u4e22\u59311\u79d2\u5185\u7684\u6570\u636e \u6570\u636e\u51c6\u786e\u6027\u8f83\u9ad8\uff0c\u6027\u80fd\u8f83\u9ad8\uff0c\u5efa\u8bae\u4f7f\u7528\uff0c\u4e5f\u662f\u9ed8\u8ba4\u914d\u7f6e no \uff08\u7cfb\u7edf\u63a7\u5236\uff09\uff1a\u7531\u64cd\u4f5c\u7cfb\u7edf\u63a7\u5236\u6bcf\u6b21\u540c\u6b65\u5230AOF\u6587\u4ef6\u7684\u5468\u671f\uff0c\u6574\u4f53\u8fc7\u7a0b\u4e0d\u53ef\u63a7","title":"5.3.2 AOF\u6267\u884c\u7b56\u7565"},{"location":"redis/day01/#533_aof","text":"\u573a\u666f\uff1aAOF\u5199\u6570\u636e\u9047\u5230\u7684\u95ee\u9898\uff0c\u5982\u679c\u8fde\u7eed\u6267\u884c\u5982\u4e0b\u6307\u4ee4\u8be5\u5982\u4f55\u5904\u7406 \u4ec0\u4e48\u53ebAOF\u91cd\u5199\uff1f \u968f\u7740\u547d\u4ee4\u4e0d\u65ad\u5199\u5165AOF\uff0c\u6587\u4ef6\u4f1a\u8d8a\u6765\u8d8a\u5927\uff0c\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cRedis\u5f15\u5165\u4e86AOF\u91cd\u5199\u673a\u5236\u538b\u7f29\u6587\u4ef6\u4f53\u79ef\u3002AOF\u6587\u4ef6\u91cd \u5199\u662f\u5c06Redis\u8fdb\u7a0b\u5185\u7684\u6570\u636e\u8f6c\u5316\u4e3a\u5199\u547d\u4ee4\u540c\u6b65\u5230\u65b0AOF\u6587\u4ef6\u7684\u8fc7\u7a0b\u3002\u7b80\u5355\u8bf4\u5c31\u662f\u5c06\u5bf9\u540c\u4e00\u4e2a\u6570\u636e\u7684\u82e5\u5e72\u4e2a\u6761\u547d\u4ee4\u6267\u884c\u7ed3 \u679c\u8f6c\u5316\u6210\u6700\u7ec8\u7ed3\u679c\u6570\u636e\u5bf9\u5e94\u7684\u6307\u4ee4\u8fdb\u884c\u8bb0\u5f55\u3002 AOF\u91cd\u5199\u4f5c\u7528 \u964d\u4f4e\u78c1\u76d8\u5360\u7528\u91cf\uff0c\u63d0\u9ad8\u78c1\u76d8\u5229\u7528\u7387 \u63d0\u9ad8\u6301\u4e45\u5316\u6548\u7387\uff0c\u964d\u4f4e\u6301\u4e45\u5316\u5199\u65f6\u95f4\uff0c\u63d0\u9ad8IO\u6027\u80fd \u964d\u4f4e\u6570\u636e\u6062\u590d\u7528\u65f6\uff0c\u63d0\u9ad8\u6570\u636e\u6062\u590d\u6548\u7387 AOF\u91cd\u5199\u89c4\u5219 \u8fdb\u7a0b\u5185\u5177\u6709\u65f6\u6548\u6027\u7684\u6570\u636e\uff0c\u5e76\u4e14\u6570\u636e\u5df2\u8d85\u65f6\u5c06\u4e0d\u518d\u5199\u5165\u6587\u4ef6 \u975e\u5199\u5165\u7c7b\u7684\u65e0\u6548\u6307\u4ee4\u5c06\u88ab\u5ffd\u7565\uff0c\u53ea\u4fdd\u7559\u6700\u7ec8\u6570\u636e\u7684\u5199\u5165\u547d\u4ee4 \u5982del key1\u3001 hdel key2\u3001srem key3\u3001set key4 111\u3001set key4 222\u7b49 \u5982select\u6307\u4ee4\u867d\u7136\u4e0d\u66f4\u6539\u6570\u636e\uff0c\u4f46\u662f\u66f4\u6539\u4e86\u6570\u636e\u7684\u5b58\u50a8\u4f4d\u7f6e\uff0c\u6b64\u7c7b\u547d\u4ee4\u540c\u6837\u9700\u8981\u8bb0\u5f55 \u5bf9\u540c\u4e00\u6570\u636e\u7684\u591a\u6761\u5199\u547d\u4ee4\u5408\u5e76\u4e3a\u4e00\u6761\u547d\u4ee4 \u5982lpushlist1 a\u3001lpush list1 b\u3001lpush list1 c\u53ef\u4ee5\u8f6c\u5316\u4e3a\uff1alpush list1 a b c\u3002 \u4e3a\u9632\u6b62\u6570\u636e\u91cf\u8fc7\u5927\u9020\u6210\u5ba2\u6237\u7aef\u7f13\u51b2\u533a\u6ea2\u51fa\uff0c\u5bf9list\u3001set\u3001hash\u3001zset\u7b49\u7c7b\u578b\uff0c\u6bcf\u6761\u6307\u4ee4\u6700\u591a\u5199\u516564\u4e2a\u5143\u7d20 AOF\u91cd\u5199\u65b9\u5f0f \u624b\u52a8\u91cd\u5199 bgrewriteaof \u624b\u52a8\u91cd\u5199\u539f\u7406\u5206\u6790\uff1a \u81ea\u52a8\u91cd\u5199 auto-aof-rewrite-min-size size auto-aof-rewrite-percentage percentage \u81ea\u52a8\u91cd\u5199\u89e6\u53d1\u6761\u4ef6\u8bbe\u7f6e auto-aof-rewrite-min-size size auto-aof-rewrite-percentage percent \u81ea\u52a8\u91cd\u5199\u89e6\u53d1\u6bd4\u5bf9\u53c2\u6570\uff08 \u8fd0\u884c\u6307\u4ee4info Persistence\u83b7\u53d6\u5177\u4f53\u4fe1\u606f \uff09 aof_current_size aof_base_size \u81ea\u52a8\u91cd\u5199\u89e6\u53d1\u6761\u4ef6\u516c\u5f0f\uff1a","title":"5.3.3 AOF\u91cd\u5199"},{"location":"redis/day01/#534_aof","text":"","title":"5.3.4 AOF\u5de5\u4f5c\u6d41\u7a0b\u53ca\u91cd\u5199\u6d41\u7a0b"},{"location":"redis/day01/#54_rdbaof","text":"","title":"5.4  RDB\u4e0eAOF\u533a\u522b"},{"location":"redis/day01/#541_rdbaof","text":"\u6301\u4e45\u5316\u65b9\u5f0f RDB AOF \u5360\u7528\u5b58\u50a8\u7a7a\u95f4 \u5c0f\uff08\u6570\u636e\u7ea7\uff1a\u538b\u7f29\uff09 \u5927\uff08\u6307\u4ee4\u7ea7\uff1a\u91cd\u5199\uff09 \u5b58\u50a8\u901f\u5ea6 \u6162 \u5feb \u6062\u590d\u901f\u5ea6 \u5feb \u6162 \u6570\u636e\u5b89\u5168\u6027 \u4f1a\u4e22\u5931\u6570\u636e \u4f9d\u636e\u7b56\u7565\u51b3\u5b9a \u8d44\u6e90\u6d88\u8017 \u9ad8/\u91cd\u91cf\u7ea7 \u4f4e/\u8f7b\u91cf\u7ea7 \u542f\u52a8\u4f18\u5148\u7ea7 \u4f4e \u9ad8","title":"5.4.1 RDB\u4e0eAOF\u5bf9\u6bd4\uff08\u4f18\u7f3a\u70b9\uff09"},{"location":"redis/day01/#542_rdbaof","text":"RDB\u4e0eAOF\u7684\u9009\u62e9\u4e4b\u60d1 \u5bf9\u6570\u636e\u975e\u5e38\u654f\u611f\uff0c\u5efa\u8bae\u4f7f\u7528\u9ed8\u8ba4\u7684AOF\u6301\u4e45\u5316\u65b9\u6848 AOF\u6301\u4e45\u5316\u7b56\u7565\u4f7f\u7528everysecond\uff0c\u6bcf\u79d2\u949ffsync\u4e00\u6b21\u3002\u8be5\u7b56\u7565redis\u4ecd\u53ef\u4ee5\u4fdd\u6301\u5f88\u597d\u7684\u5904\u7406\u6027\u80fd\uff0c\u5f53\u51fa \u73b0\u95ee\u9898\u65f6\uff0c\u6700\u591a\u4e22\u59310-1\u79d2\u5185\u7684\u6570\u636e\u3002 \u6ce8\u610f\uff1a\u7531\u4e8eAOF\u6587\u4ef6\u5b58\u50a8\u4f53\u79ef\u8f83\u5927\uff0c\u4e14\u6062\u590d\u901f\u5ea6\u8f83\u6162 \u6570\u636e\u5448\u73b0\u9636\u6bb5\u6709\u6548\u6027\uff0c\u5efa\u8bae\u4f7f\u7528RDB\u6301\u4e45\u5316\u65b9\u6848 \u6570\u636e\u53ef\u4ee5\u826f\u597d\u7684\u505a\u5230\u9636\u6bb5\u5185\u65e0\u4e22\u5931\uff08\u8be5\u9636\u6bb5\u662f\u5f00\u53d1\u8005\u6216\u8fd0\u7ef4\u4eba\u5458\u624b\u5de5\u7ef4\u62a4\u7684\uff09\uff0c\u4e14\u6062\u590d\u901f\u5ea6\u8f83\u5feb\uff0c\u9636\u6bb5 \u70b9\u6570\u636e\u6062\u590d\u901a\u5e38\u91c7\u7528RDB\u65b9\u6848 \u6ce8\u610f\uff1a\u5229\u7528RDB\u5b9e\u73b0\u7d27\u51d1\u7684\u6570\u636e\u6301\u4e45\u5316\u4f1a\u4f7fRedis\u964d\u7684\u5f88\u4f4e\uff0c\u614e\u91cd\u603b\u7ed3\uff1a \u7efc\u5408\u6bd4\u5bf9 RDB\u4e0eAOF\u7684\u9009\u62e9\u5b9e\u9645\u4e0a\u662f\u5728\u505a\u4e00\u79cd\u6743\u8861\uff0c\u6bcf\u79cd\u90fd\u6709\u5229\u6709\u5f0a \u5982\u4e0d\u80fd\u627f\u53d7\u6570\u5206\u949f\u4ee5\u5185\u7684\u6570\u636e\u4e22\u5931\uff0c\u5bf9\u4e1a\u52a1\u6570\u636e\u975e\u5e38\u654f\u611f\uff0c\u9009\u7528AOF \u5982\u80fd\u627f\u53d7\u6570\u5206\u949f\u4ee5\u5185\u7684\u6570\u636e\u4e22\u5931\uff0c\u4e14\u8ffd\u6c42\u5927\u6570\u636e\u96c6\u7684\u6062\u590d\u901f\u5ea6\uff0c\u9009\u7528RDB \u707e\u96be\u6062\u590d\u9009\u7528RDB \u53cc\u4fdd\u9669\u7b56\u7565\uff0c\u540c\u65f6\u5f00\u542f RDB\u548c AOF\uff0c\u91cd\u542f\u540e\uff0cRedis\u4f18\u5148\u4f7f\u7528 AOF \u6765\u6062\u590d\u6570\u636e\uff0c\u964d\u4f4e\u4e22\u5931\u6570\u636e\u7684\u91cf # \u5ba2\u6237\u7aef\u600e\u4e48\u8bbf\u95ee\u90fd\u884c bind 0 .0.0.0 port 6379 timeout 0 # \u540e\u53f0\u542f\u52a8 daemonize yes logfile \"log_6379.log\" dir /usr/local/redis/data # rdb \u65b9\u5f0f\u6587\u4ef6\u540d\u79f0 dbfilename \"dump6379.rdb\" # \u5b58\u50a8\u7b56\u7565 2s \u4e2d\u5185\u5982\u679c\u6709\u4e24\u4e2a \u4fee\u6539\u547d\u4ee4 \u5219\u6267\u884c\u5b58\u50a8 save 2 2 # aop \u914d\u7f6e appendonly yes appendfilename \"dump6379.aof\" appendfsync always # aof \u81ea\u52a8\u91cd\u5199 # \u6bcf4M \u6570\u636e \u91cd\u5199\u4e00\u6b21 auto-aof-rewrite-min-size 4mb # \u548c\u4e0a\u6b21\u5907\u4efd\u505a\u5bf9\u6bd4,\u5982\u679c \u8d85\u8fc7\u4e8610% \u5219\u91cd\u5199\u6587\u4ef6 auto-aof-rewrite-percentage 10 %","title":"5.4.2 RDB\u4e0eAOF\u5e94\u7528\u573a\u666f"},{"location":"redis/day02/","text":"\u5b66\u4e60\u76ee\u6807 \u00b6 \u76ee\u68071\uff1a\u80fd\u591f\u8bf4\u51faredis\u4e2d\u7684\u6570\u636e\u5220\u9664\u7b56\u4e0e\u7565\u6dd8\u6c70\u7b56\u7565 \u76ee\u68072\uff1a\u80fd\u591f\u8bf4\u51fa\u4e3b\u4ece\u590d\u5236\u7684\u6982\u5ff5\uff0c\u5de5\u4f5c\u6d41\u7a0b\u4ee5\u53ca\u573a\u666f\u95ee\u9898\u53ca\u89e3\u51b3\u65b9\u6848 \u76ee\u68073\uff1a\u80fd\u591f\u8bf4\u51fa\u54e8\u5175\u7684\u4f5c\u7528\u4ee5\u53ca\u5de5\u4f5c\u539f\u7406\uff0c\u4ee5\u53ca\u5982\u4f55\u542f\u7528\u54e8\u5175 \u76ee\u68074\uff1a\u80fd\u591f\u8bf4\u51fa\u96c6\u7fa4\u7684\u67b6\u6784\u8bbe\u8ba1\uff0c\u5b8c\u6210\u96c6\u7fa4\u7684\u642d\u5efa \u76ee\u68075\uff1a\u80fd\u591f\u8bf4\u51fa\u7f13\u5b58\u9884\u70ed\uff0c\u96ea\u5d29\uff0c\u51fb\u7a7f\uff0c\u7a7f\u900f\u7684\u6982\u5ff5\uff0c\u80fd\u8bf4\u51faredis\u7684\u76f8\u5173\u76d1\u63a7\u6307\u6807 1.\u6570\u636e\u5220\u9664\u4e0e\u6dd8\u6c70\u7b56\u7565 \u00b6 1.1 \u8fc7\u671f\u6570\u636e \u00b6 1.1.1 Redis\u4e2d\u7684\u6570\u636e\u7279\u5f81 \u00b6 Redis\u662f\u4e00\u79cd\u5185\u5b58\u7ea7\u6570\u636e\u5e93\uff0c\u6240\u6709\u6570\u636e\u5747\u5b58\u653e\u5728\u5185\u5b58\u4e2d\uff0c\u5185\u5b58\u4e2d\u7684\u6570\u636e\u53ef\u4ee5\u901a\u8fc7TTL\u6307\u4ee4\u83b7\u53d6\u5176\u72b6\u6001 TTL\u8fd4\u56de\u7684\u503c\u6709\u4e09\u79cd\u60c5\u51b5\uff1a\u6b63\u6570\uff0c-1\uff0c-2 \u6b63\u6570 \uff1a\u4ee3\u8868\u8be5\u6570\u636e\u5728\u5185\u5b58\u4e2d\u8fd8\u80fd\u5b58\u6d3b\u7684\u65f6\u95f4 -1 \uff1a\u6c38\u4e45\u6709\u6548\u7684\u6570\u636e 2 \uff1a\u5df2\u7ecf\u8fc7\u671f\u7684\u6570\u636e \u6216\u88ab\u5220\u9664\u7684\u6570\u636e \u6216 \u672a\u5b9a\u4e49\u7684\u6570\u636e \u5220\u9664\u7b56\u7565\u5c31\u662f\u9488\u5bf9\u5df2\u8fc7\u671f\u6570\u636e\u7684\u5904\u7406\u7b56\u7565 \uff0c\u5df2\u8fc7\u671f\u7684\u6570\u636e\u662f\u771f\u7684\u5c31\u7acb\u5373\u5220\u9664\u4e86\u5417\uff1f\u5176\u5b9e\u4e5f\u4e0d\u662f\uff0c\u6211\u4eec\u4f1a\u6709\u591a\u79cd\u5220\u9664\u7b56\u7565\uff0c\u662f\u5206\u60c5\u51b5\u7684\uff0c\u5728\u4e0d\u540c\u7684\u573a\u666f\u4e0b\u4f7f\u7528\u4e0d\u540c\u7684\u5220\u9664\u65b9\u5f0f\u4f1a\u6709\u4e0d\u540c\u6548\u679c\uff0c\u8fd9\u4e5f\u6b63\u662f\u6211\u4eec\u8981\u5c06\u7684\u6570\u636e\u7684\u5220\u9664\u7b56\u7565\u7684\u95ee\u9898 1.1.2 \u65f6\u6548\u6027\u6570\u636e\u7684\u5b58\u50a8\u7ed3\u6784 \u00b6 \u5728Redis\u4e2d\uff0c\u5982\u4f55\u7ed9\u6570\u636e\u8bbe\u7f6e\u5b83\u7684\u5931\u6548\u5468\u671f\u5462\uff1f\u6570\u636e\u7684\u65f6\u6548\u5728redis\u4e2d\u5982\u4f55\u5b58\u50a8\u5462\uff1f \u8fc7\u671f\u6570\u636e\u662f\u4e00\u5757\u72ec\u7acb\u7684\u5b58\u50a8\u7a7a\u95f4\uff0cHash\u7ed3\u6784\uff0cfield\u662f\u5185\u5b58\u5730\u5740\uff0cvalue\u662f\u8fc7\u671f\u65f6\u95f4\uff0c\u4fdd\u5b58\u4e86\u6240\u6709key\u7684\u8fc7\u671f\u63cf\u8ff0\uff0c\u5728\u6700\u7ec8\u8fdb\u884c\u8fc7\u671f\u5904\u7406\u7684\u65f6\u5019\uff0c\u5bf9\u8be5\u7a7a\u95f4\u7684\u6570\u636e\u8fdb\u884c\u68c0\u6d4b\uff0c \u5f53\u65f6\u95f4\u5230\u671f\u4e4b\u540e\u901a\u8fc7field\u627e\u5230\u5185\u5b58\u8be5\u5730\u5740\u5904\u7684\u6570\u636e\uff0c\u7136\u540e\u8fdb\u884c\u76f8\u5173\u64cd\u4f5c\u3002 1.2 \u6570\u636e\u5220\u9664\u7b56\u7565 \u00b6 1.2.1 \u6570\u636e\u5220\u9664\u7b56\u7565\u7684\u76ee\u6807 \u00b6 \u5728\u5185\u5b58\u5360\u7528\u4e0eCPU\u5360\u7528\u4e4b\u95f4\u5bfb\u627e\u4e00\u79cd\u5e73\u8861\uff0c\u987e\u6b64\u5931\u5f7c\u90fd\u4f1a\u9020\u6210\u6574\u4f53redis\u6027\u80fd\u7684\u4e0b\u964d\uff0c\u751a\u81f3\u5f15\u53d1\u670d\u52a1\u5668\u5b95\u673a\u6216 \u5185\u5b58\u6cc4\u9732 \u9488\u5bf9\u8fc7\u671f\u6570\u636e\u8981\u8fdb\u884c\u5220\u9664\u7684\u65f6\u5019\u90fd\u6709\u54ea\u4e9b\u5220\u9664\u7b56\u7565\u5462\uff1f 1.\u5b9a\u65f6\u5220\u9664 2.\u60f0\u6027\u5220\u9664 3.\u5b9a\u671f\u5220\u9664 1.2.2 \u5b9a\u65f6\u5220\u9664 \u00b6 \u521b\u5efa\u4e00\u4e2a\u5b9a\u65f6\u5668\uff0c\u5f53key\u8bbe\u7f6e\u6709\u8fc7\u671f\u65f6\u95f4\uff0c\u4e14\u8fc7\u671f\u65f6\u95f4\u5230\u8fbe\u65f6\uff0c\u7531\u5b9a\u65f6\u5668\u4efb\u52a1\u7acb\u5373\u6267\u884c\u5bf9\u952e\u7684\u5220\u9664\u64cd\u4f5c \u4f18\u70b9 \uff1a\u8282\u7ea6\u5185\u5b58\uff0c\u5230\u65f6\u5c31\u5220\u9664\uff0c\u5feb\u901f\u91ca\u653e\u6389\u4e0d\u5fc5\u8981\u7684\u5185\u5b58\u5360\u7528 \u7f3a\u70b9 \uff1aCPU\u538b\u529b\u5f88\u5927\uff0c\u65e0\u8bbaCPU\u6b64\u65f6\u8d1f\u8f7d\u91cf\u591a\u9ad8\uff0c\u5747\u5360\u7528CPU\uff0c\u4f1a\u5f71\u54cdredis\u670d\u52a1\u5668\u54cd\u5e94\u65f6\u95f4\u548c\u6307\u4ee4\u541e\u5410\u91cf \u603b\u7ed3 \uff1a\u7528\u5904\u7406\u5668\u6027\u80fd\u6362\u53d6\u5b58\u50a8\u7a7a\u95f4\uff08\u62ff\u65f6\u95f4\u6362\u7a7a\u95f4\uff09 1.2.3 \u60f0\u6027\u5220\u9664 \u00b6 \u6570\u636e\u5230\u8fbe\u8fc7\u671f\u65f6\u95f4\uff0c\u4e0d\u505a\u5904\u7406\u3002\u7b49\u4e0b\u6b21\u8bbf\u95ee\u8be5\u6570\u636e\u65f6\uff0c\u6211\u4eec\u9700\u8981\u5224\u65ad \u5982\u679c\u672a\u8fc7\u671f\uff0c\u8fd4\u56de\u6570\u636e \u53d1\u73b0\u5df2\u8fc7\u671f\uff0c\u5220\u9664\uff0c\u8fd4\u56de\u4e0d\u5b58\u5728 \u4f18\u70b9 \uff1a\u8282\u7ea6CPU\u6027\u80fd\uff0c\u53d1\u73b0\u5fc5\u987b\u5220\u9664\u7684\u65f6\u5019\u624d\u5220\u9664 \u7f3a\u70b9 \uff1a\u5185\u5b58\u538b\u529b\u5f88\u5927\uff0c\u51fa\u73b0\u957f\u671f\u5360\u7528\u5185\u5b58\u7684\u6570\u636e \u603b\u7ed3 \uff1a\u7528\u5b58\u50a8\u7a7a\u95f4\u6362\u53d6\u5904\u7406\u5668\u6027\u80fd\uff08\u62ff\u65f6\u95f4\u6362\u7a7a\u95f4\uff09 1.2.4 \u5b9a\u671f\u5220\u9664 \u00b6 \u5b9a\u65f6\u5220\u9664\u548c\u60f0\u6027\u5220\u9664\u8fd9\u4e24\u79cd\u65b9\u6848\u90fd\u662f\u8d70\u7684\u6781\u7aef\uff0c\u90a3\u6709\u6ca1\u6709\u6298\u4e2d\u65b9\u6848\uff1f \u6211\u4eec\u6765\u8bb2redis\u7684\u5b9a\u671f\u5220\u9664\u65b9\u6848\uff1a Redis\u542f\u52a8\u670d\u52a1\u5668\u521d\u59cb\u5316\u65f6\uff0c\u8bfb\u53d6\u914d\u7f6eserver.hz\u7684\u503c\uff0c\u9ed8\u8ba4\u4e3a10 \u6bcf\u79d2\u949f\u6267\u884cserver.hz\u6b21 serverCron() --------> databasesCron() ---------> activeExpireCycle() activeExpireCycle() \u5bf9\u6bcf\u4e2aexpires[*]\u9010\u4e00\u8fdb\u884c\u68c0\u6d4b\uff0c\u6bcf\u6b21\u6267\u884c\u8017\u65f6\uff1a250ms/server.hz \u5bf9\u67d0\u4e2aexpires[*]\u68c0\u6d4b\u65f6\uff0c\u968f\u673a\u6311\u9009W\u4e2akey\u68c0\u6d4b \u5982\u679ckey\u8d85\u65f6\uff0c\u5220\u9664key \u5982\u679c\u4e00\u8f6e\u4e2d\u5220\u9664\u7684key\u7684\u6570\u91cf>W*25%\uff0c\u5faa\u73af\u8be5\u8fc7\u7a0b \u5982\u679c\u4e00\u8f6e\u4e2d\u5220\u9664\u7684key\u7684\u6570\u91cf\u2264W*25%\uff0c\u68c0\u67e5\u4e0b\u4e00\u4e2aexpires[*]\uff0c0-15\u5faa\u73af W\u53d6\u503c=ACTIVE_EXPIRE_CYCLE_LOOKUPS_PER_LOOP\u5c5e\u6027\u503c \u53c2\u6570current_db\u7528\u4e8e\u8bb0\u5f55 activeExpireCycle() \u8fdb\u5165\u54ea\u4e2aexpires[*] \u6267\u884c \u5982\u679cactiveExpireCycle()\u6267\u884c\u65f6\u95f4\u5230\u671f\uff0c\u4e0b\u6b21\u4ececurrent_db\u7ee7\u7eed\u5411\u4e0b\u6267\u884c \u603b\u7684\u6765\u8bf4\uff1a\u5b9a\u671f\u5220\u9664\u5c31\u662f\u5468\u671f\u6027\u8f6e\u8be2redis\u5e93\u4e2d\u7684\u65f6\u6548\u6027\u6570\u636e\uff0c\u91c7\u7528\u968f\u673a\u62bd\u53d6\u7684\u7b56\u7565\uff0c\u5229\u7528\u8fc7\u671f\u6570\u636e\u5360\u6bd4\u7684\u65b9\u5f0f\u63a7\u5236\u5220\u9664\u9891\u5ea6 \u7279\u70b91 \uff1aCPU\u6027\u80fd\u5360\u7528\u8bbe\u7f6e\u6709\u5cf0\u503c\uff0c\u68c0\u6d4b\u9891\u5ea6\u53ef\u81ea\u5b9a\u4e49\u8bbe\u7f6e \u7279\u70b92 \uff1a\u5185\u5b58\u538b\u529b\u4e0d\u662f\u5f88\u5927\uff0c\u957f\u671f\u5360\u7528\u5185\u5b58\u7684\u51b7\u6570\u636e\u4f1a\u88ab\u6301\u7eed\u6e05\u7406 \u603b\u7ed3 \uff1a\u5468\u671f\u6027\u62bd\u67e5\u5b58\u50a8\u7a7a\u95f4\uff08\u968f\u673a\u62bd\u67e5\uff0c\u91cd\u70b9\u62bd\u67e5\uff09 1.2.5 \u5220\u9664\u7b56\u7565\u5bf9\u6bd4 \u00b6 1\uff1a\u5b9a\u65f6\u5220\u9664\uff1a \u8282\u7ea6\u5185\u5b58\uff0c\u65e0\u5360\u7528, \u4e0d\u5206\u65f6\u6bb5\u5360\u7528CPU\u8d44\u6e90\uff0c\u9891\u5ea6\u9ad8, \u62ff\u65f6\u95f4\u6362\u7a7a\u95f4 2\uff1a\u60f0\u6027\u5220\u9664\uff1a \u5185\u5b58\u5360\u7528\u4e25\u91cd \u5ef6\u65f6\u6267\u884c\uff0cCPU\u5229\u7528\u7387\u9ad8 \u62ff\u7a7a\u95f4\u6362\u65f6\u95f4 3\uff1a\u5b9a\u671f\u5220\u9664\uff1a \u5185\u5b58\u5b9a\u671f\u968f\u673a\u6e05\u7406 \u6bcf\u79d2\u82b1\u8d39\u56fa\u5b9a\u7684CPU\u8d44\u6e90\u7ef4\u62a4\u5185\u5b58 \u968f\u673a\u62bd\u67e5\uff0c\u91cd\u70b9\u62bd\u67e5 1.3 \u6570\u636e\u6dd8\u6c70\u7b56\u7565\uff08\u9010\u51fa\u7b97\u6cd5\uff09 \u00b6 1.3.1 \u6dd8\u6c70\u7b56\u7565\u6982\u8ff0 \u00b6 \u4ec0\u4e48\u53eb\u6570\u636e\u6dd8\u6c70\u7b56\u7565\uff1f\u4ec0\u4e48\u6837\u7684\u5e94\u7528\u573a\u666f\u9700\u8981\u7528\u5230\u6570\u636e\u6dd8\u6c70\u7b56\u7565\uff1f \u5f53\u65b0\u6570\u636e\u8fdb\u5165redis\u65f6\uff0c\u5982\u679c\u5185\u5b58\u4e0d\u8db3\u600e\u4e48\u529e\uff1f\u5728\u6267\u884c\u6bcf\u4e00\u4e2a\u547d\u4ee4\u524d\uff0c\u4f1a\u8c03\u7528 freeMemoryIfNeeded() \u68c0\u6d4b\u5185\u5b58\u662f\u5426\u5145\u8db3\u3002\u5982\u679c\u5185\u5b58\u4e0d\u6ee1\u8db3\u65b0 \u52a0\u5165\u6570\u636e\u7684\u6700\u4f4e\u5b58\u50a8\u8981\u6c42\uff0credis\u8981\u4e34\u65f6\u5220\u9664\u4e00\u4e9b\u6570\u636e\u4e3a\u5f53\u524d\u6307\u4ee4\u6e05\u7406\u5b58\u50a8\u7a7a\u95f4\u3002\u6e05\u7406\u6570\u636e\u7684\u7b56\u7565\u79f0\u4e3a\u9010\u51fa\u7b97\u6cd5\u3002 \u6ce8\u610f\uff1a\u9010\u51fa\u6570\u636e\u7684\u8fc7\u7a0b\u4e0d\u662f100%\u80fd\u591f\u6e05\u7406\u51fa\u8db3\u591f\u7684\u53ef\u4f7f\u7528\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u5982\u679c\u4e0d\u6210\u529f\u5219\u53cd\u590d\u6267\u884c\u3002\u5f53\u5bf9\u6240\u6709\u6570\u636e\u5c1d\u8bd5\u5b8c\u6bd5\uff0c \u5982\u4e0d\u80fd\u8fbe\u5230\u5185\u5b58\u6e05\u7406\u7684\u8981\u6c42\uff0c\u5c06\u51fa\u73b0\u9519\u8bef\u4fe1\u606f\u5982\u4e0b ( error ) OOM command not allowed when used memory > 'maxmemory' 1.3.2 \u7b56\u7565\u914d\u7f6e \u00b6 \u5f71\u54cd\u6570\u636e\u6dd8\u6c70\u7684\u76f8\u5173\u914d\u7f6e\u5982\u4e0b\uff1a 1\uff1a\u6700\u5927\u53ef\u4f7f\u7528\u5185\u5b58\uff0c\u5373\u5360\u7528\u7269\u7406\u5185\u5b58\u7684\u6bd4\u4f8b\uff0c\u9ed8\u8ba4\u503c\u4e3a0\uff0c\u8868\u793a\u4e0d\u9650\u5236\u3002\u751f\u4ea7\u73af\u5883\u4e2d\u6839\u636e\u9700\u6c42\u8bbe\u5b9a\uff0c\u901a\u5e38\u8bbe\u7f6e\u572850%\u4ee5\u4e0a maxmemory ?mb 2\uff1a\u6bcf\u6b21\u9009\u53d6\u5f85\u5220\u9664\u6570\u636e\u7684\u4e2a\u6570\uff0c\u91c7\u7528\u968f\u673a\u83b7\u53d6\u6570\u636e\u7684\u65b9\u5f0f\u4f5c\u4e3a\u5f85\u68c0\u6d4b\u5220\u9664\u6570\u636e maxmemory-samples count 3\uff1a\u5bf9\u6570\u636e\u8fdb\u884c\u5220\u9664\u7684\u9009\u62e9\u7b56\u7565 maxmemory-policy policy \u90a3\u6570\u636e\u5220\u9664\u7684\u7b56\u7565policy\u5230\u5e95\u6709\u51e0\u79cd\u5462\uff1f\u4e00\u5171\u662f 3\u7c7b8\u79cd \u7b2c\u4e00\u7c7b \uff1a\u68c0\u6d4b\u6613\u5931\u6570\u636e\uff08\u53ef\u80fd\u4f1a\u8fc7\u671f\u7684\u6570\u636e\u96c6server.db[i].expires \uff09 volatile-lru\uff1a\u6311\u9009\u6700\u8fd1\u6700\u5c11\u4f7f\u7528\u7684\u6570\u636e\u6dd8\u6c70 volatile-lfu\uff1a\u6311\u9009\u6700\u8fd1\u4f7f\u7528\u6b21\u6570\u6700\u5c11\u7684\u6570\u636e\u6dd8\u6c70 volatile-ttl\uff1a\u6311\u9009\u5c06\u8981\u8fc7\u671f\u7684\u6570\u636e\u6dd8\u6c70 volatile-random\uff1a\u4efb\u610f\u9009\u62e9\u6570\u636e\u6dd8\u6c70 \u7b2c\u4e8c\u7c7b \uff1a\u68c0\u6d4b\u5168\u5e93\u6570\u636e\uff08\u6240\u6709\u6570\u636e\u96c6server.db[i].dict \uff09 allkeys-lru\uff1a\u6311\u9009\u6700\u8fd1\u6700\u5c11\u4f7f\u7528\u7684\u6570\u636e\u6dd8\u6c70 allkeLyRs-lfu\uff1a\uff1a\u6311\u9009\u6700\u8fd1\u4f7f\u7528\u6b21\u6570\u6700\u5c11\u7684\u6570\u636e\u6dd8\u6c70 allkeys-random\uff1a\u4efb\u610f\u9009\u62e9\u6570\u636e\u6dd8\u6c70\uff0c\u76f8\u5f53\u4e8e\u968f\u673a \u7b2c\u4e09\u7c7b \uff1a\u653e\u5f03\u6570\u636e\u9a71\u9010 no-enviction\uff08\u9a71\u9010\uff09\uff1a\u7981\u6b62\u9a71\u9010\u6570\u636e(redis4.0\u4e2d\u9ed8\u8ba4\u7b56\u7565)\uff0c\u4f1a\u5f15\u53d1OOM(Out Of Memory) \u6ce8\u610f\uff1a\u8fd9\u4e9b\u7b56\u7565\u662f\u914d\u7f6e\u5230\u54ea\u4e2a\u5c5e\u6027\u4e0a\uff1f\u600e\u4e48\u914d\u7f6e\uff1f\u5982\u4e0b\u6240\u793a maxmemory-policy volatile-lru \u6570\u636e\u6dd8\u6c70\u7b56\u7565\u914d\u7f6e\u4f9d\u636e \u4f7f\u7528INFO\u547d\u4ee4\u8f93\u51fa\u76d1\u63a7\u4fe1\u606f\uff0c\u67e5\u8be2\u7f13\u5b58 hit \u548c miss \u7684\u6b21\u6570\uff0c\u6839\u636e\u4e1a\u52a1\u9700\u6c42\u8c03\u4f18Redis\u914d\u7f6e 2.\u4e3b\u4ece\u590d\u5236 \u00b6 2.1 \u4e3b\u4ece\u590d\u5236\u7b80\u4ecb \u00b6 2.1.1 \u9ad8\u53ef\u7528 \u00b6 \u9996\u5148\u6211\u4eec\u8981\u7406\u89e3\u4e92\u8054\u7f51\u5e94\u7528\u56e0\u4e3a\u5176\u72ec\u6709\u7684\u7279\u6027\u6211\u4eec\u6f14\u5316\u51fa\u7684 \u4e09\u9ad8 \u67b6\u6784 \u9ad8\u5e76\u53d1 \u5e94\u7528\u8981\u63d0\u4f9b\u67d0\u4e00\u4e1a\u52a1\u8981\u80fd\u652f\u6301\u5f88\u591a\u5ba2\u6237\u7aef\u540c\u65f6\u8bbf\u95ee\u7684\u80fd\u529b\uff0c\u6211\u4eec\u79f0\u4e3a\u5e76\u53d1\uff0c\u9ad8\u5e76\u53d1\u610f\u601d\u5c31\u5f88\u660e\u786e\u4e86 \u9ad8\u6027\u80fd \u6027\u80fd\u5e26\u7ed9\u6211\u4eec\u6700\u76f4\u89c2\u7684\u611f\u53d7\u5c31\u662f\uff1a\u901f\u5ea6\u5feb\uff0c\u65f6\u95f4\u77ed \u9ad8\u53ef\u7528 \u53ef\u7528\u6027 \uff1a\u4e00\u5e74\u4e2d\u5e94\u7528\u670d\u52a1\u6b63\u5e38\u8fd0\u884c\u7684\u65f6\u95f4\u5360\u5168\u5e74\u65f6\u95f4\u7684\u767e\u5206\u6bd4\uff0c\u5982\u4e0b\u56fe\uff1a\u8868\u793a\u4e86\u5e94\u7528\u670d\u52a1\u5728\u5168\u5e74\u5b95\u673a\u7684\u65f6\u95f4 \u6211\u4eec\u628a\u8fd9\u4e9b\u65f6\u95f4\u52a0\u5728\u4e00\u8d77\u5c31\u662f\u5168\u5e74\u5e94\u7528\u670d\u52a1\u4e0d\u53ef\u7528\u7684\u65f6\u95f4\uff0c\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u5e94\u7528\u670d\u52a1\u5168\u5e74\u53ef\u7528\u7684\u65f6\u95f4 4\u5c0f\u65f627\u520615\u79d2+11\u520636\u79d2+2\u520616\u79d2=4\u5c0f\u65f641\u52067\u79d2=16867\u79d2 1\u5e74=365 24 60*60=31536000\u79d2 \u53ef\u7528\u6027=\uff0831536000-16867\uff09/31536000*100%=99.9465151% \u4e1a\u754c\u53ef\u7528\u6027\u76ee\u6807 5\u4e2a9\uff0c\u537399.999% \uff0c\u5373\u670d\u52a1\u5668\u5e74\u5b95\u673a\u65f6\u957f\u4f4e\u4e8e315\u79d2\uff0c\u7ea65.25\u5206\u949f 2.1.2 \u4e3b\u4ece\u590d\u5236\u6982\u5ff5 \u00b6 \u77e5\u9053\u4e86\u4e09\u9ad8\u7684\u6982\u5ff5\u4e4b\u540e\uff0c\u6211\u4eec\u60f3\uff1a\u4f60\u7684\u201cRedis\u201d\u662f\u5426\u9ad8\u53ef\u7528\uff1f\u90a3\u6211\u4eec\u8981\u6765\u5206\u6790\u5355\u673aredis\u7684\u98ce\u9669\u4e0e\u95ee\u9898 \u95ee\u98981.\u673a\u5668\u6545\u969c \u73b0\u8c61\uff1a\u786c\u76d8\u6545\u969c\u3001\u7cfb\u7edf\u5d29\u6e83 \u672c\u8d28\uff1a\u6570\u636e\u4e22\u5931\uff0c\u5f88\u53ef\u80fd\u5bf9\u4e1a\u52a1\u9020\u6210\u707e\u96be\u6027\u6253\u51fb \u7ed3\u8bba\uff1a\u57fa\u672c\u4e0a\u4f1a\u653e\u5f03\u4f7f\u7528redis. \u95ee\u98982.\u5bb9\u91cf\u74f6\u9888 \u73b0\u8c61\uff1a\u5185\u5b58\u4e0d\u8db3\uff0c\u4ece16G\u5347\u7ea7\u523064G\uff0c\u4ece64G\u5347\u7ea7\u5230128G\uff0c\u65e0\u9650\u5347\u7ea7\u5185\u5b58 \u672c\u8d28\uff1a\u7a77\uff0c\u786c\u4ef6\u6761\u4ef6\u8ddf\u4e0d\u4e0a \u7ed3\u8bba\uff1a\u653e\u5f03\u4f7f\u7528redis \u7ed3\u8bba\uff1a \u4e3a\u4e86\u907f\u514d\u5355\u70b9Redis\u670d\u52a1\u5668\u6545\u969c\uff0c\u51c6\u5907\u591a\u53f0\u670d\u52a1\u5668\uff0c\u4e92\u76f8\u8fde\u901a\u3002\u5c06\u6570\u636e\u590d\u5236\u591a\u4e2a\u526f\u672c\u4fdd\u5b58\u5728\u4e0d\u540c\u7684\u670d\u52a1\u5668\u4e0a\uff0c\u8fde\u63a5\u5728\u4e00\u8d77\uff0c\u5e76\u4fdd\u8bc1\u6570\u636e\u662f\u540c\u6b65\u7684\u3002\u5373\u4f7f\u6709\u5176\u4e2d\u4e00\u53f0\u670d\u52a1\u5668\u5b95\u673a\uff0c\u5176\u4ed6\u670d\u52a1\u5668\u4f9d\u7136\u53ef\u4ee5\u7ee7\u7eed\u63d0\u4f9b\u670d\u52a1\uff0c\u5b9e\u73b0Redis\u7684\u9ad8\u53ef\u7528\uff0c\u540c\u65f6\u5b9e\u73b0\u6570\u636e\u5197\u4f59\u5907\u4efd\u3002 \u591a\u53f0\u670d\u52a1\u5668\u8fde\u63a5\u65b9\u6848\uff1a \u63d0\u4f9b\u6570\u636e\u65b9\uff1a master \u4e3b\u670d\u52a1\u5668\uff0c\u4e3b\u8282\u70b9\uff0c\u4e3b\u5e93\u4e3b\u5ba2\u6237\u7aef \u63a5\u6536\u6570\u636e\u65b9\uff1a slave \u4ece\u670d\u52a1\u5668\uff0c\u4ece\u8282\u70b9\uff0c\u4ece\u5e93 \u4ece\u5ba2\u6237\u7aef \u9700\u8981\u89e3\u51b3\u7684\u95ee\u9898\uff1a \u6570\u636e\u540c\u6b65\uff08master\u7684\u6570\u636e\u590d\u5236\u5230slave\u4e2d\uff09 \u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u6765\u89e3\u91ca\u4e3b\u4ece\u590d\u5236\u7684\u6982\u5ff5\uff1a \u6982\u5ff5\uff1a\u4e3b\u4ece\u590d\u5236\u5373\u5c06master\u4e2d\u7684\u6570\u636e\u5373\u65f6\u3001\u6709\u6548\u7684\u590d\u5236\u5230slave\u4e2d \u7279\u5f81 \uff1a\u4e00\u4e2amaster\u53ef\u4ee5\u62e5\u6709\u591a\u4e2aslave\uff0c\u4e00\u4e2aslave\u53ea\u5bf9\u5e94\u4e00\u4e2amaster \u804c\u8d23 \uff1amaster\u548cslave\u5404\u81ea\u7684\u804c\u8d23\u4e0d\u4e00\u6837 master: \u5199\u6570\u636e \u6267\u884c\u5199\u64cd\u4f5c\u65f6\uff0c\u5c06\u51fa\u73b0\u53d8\u5316\u7684\u6570\u636e\u81ea\u52a8\u540c\u6b65\u5230slave \u8bfb\u6570\u636e\uff08\u53ef\u5ffd\u7565\uff09 slave: \u8bfb\u6570\u636e \u5199\u6570\u636e\uff08\u7981\u6b62\uff09 2.1.3 \u4e3b\u4ece\u590d\u5236\u7684\u4f5c\u7528 \u00b6 \u8bfb\u5199\u5206\u79bb\uff1amaster\u5199\u3001slave\u8bfb\uff0c\u63d0\u9ad8\u670d\u52a1\u5668\u7684\u8bfb\u5199\u8d1f\u8f7d\u80fd\u529b \u8d1f\u8f7d\u5747\u8861\uff1a\u57fa\u4e8e\u4e3b\u4ece\u7ed3\u6784\uff0c\u914d\u5408\u8bfb\u5199\u5206\u79bb\uff0c\u7531slave\u5206\u62c5master\u8d1f\u8f7d\uff0c\u5e76\u6839\u636e\u9700\u6c42\u7684\u53d8\u5316\uff0c\u6539\u53d8slave\u7684\u6570 \u91cf\uff0c\u901a\u8fc7\u591a\u4e2a\u4ece\u8282\u70b9\u5206\u62c5\u6570\u636e\u8bfb\u53d6\u8d1f\u8f7d\uff0c\u5927\u5927\u63d0\u9ad8Redis\u670d\u52a1\u5668\u5e76\u53d1\u91cf\u4e0e\u6570\u636e\u541e\u5410\u91cf \u6545\u969c\u6062\u590d\uff1a\u5f53master\u51fa\u73b0\u95ee\u9898\u65f6\uff0c\u7531slave\u63d0\u4f9b\u670d\u52a1\uff0c\u5b9e\u73b0\u5feb\u901f\u7684\u6545\u969c\u6062\u590d \u6570\u636e\u5197\u4f59\uff1a\u5b9e\u73b0\u6570\u636e\u70ed\u5907\u4efd\uff0c\u662f\u6301\u4e45\u5316\u4e4b\u5916\u7684\u4e00\u79cd\u6570\u636e\u5197\u4f59\u65b9\u5f0f \u9ad8\u53ef\u7528\u57fa\u77f3\uff1a\u57fa\u4e8e\u4e3b\u4ece\u590d\u5236\uff0c\u6784\u5efa\u54e8\u5175\u6a21\u5f0f\u4e0e\u96c6\u7fa4\uff0c\u5b9e\u73b0Redis\u7684\u9ad8\u53ef\u7528\u65b9\u6848 2.2 \u4e3b\u4ece\u590d\u5236\u5de5\u4f5c\u6d41\u7a0b \u00b6 \u4e3b\u4ece\u590d\u5236\u8fc7\u7a0b\u5927\u4f53\u53ef\u4ee5\u5206\u4e3a3\u4e2a\u9636\u6bb5 \u5efa\u7acb\u8fde\u63a5\u9636\u6bb5\uff08\u5373\u51c6\u5907\u9636\u6bb5\uff09 \u6570\u636e\u540c\u6b65\u9636\u6bb5 \u547d\u4ee4\u4f20\u64ad\u9636\u6bb5\uff08\u53cd\u590d\u540c\u6b65\uff09 \u800c\u547d\u4ee4\u7684\u4f20\u64ad\u5176\u5b9e\u67094\u79cd\uff0c\u5206\u522b\u5982\u4e0b\uff1a 2.2.1 \u4e3b\u4ece\u590d\u5236\u7684\u5de5\u4f5c\u6d41\u7a0b\uff08\u4e09\u4e2a\u9636\u6bb5\uff09 \u00b6 2.2.1.1 \u9636\u6bb5\u4e00\uff1a\u5efa\u7acb\u8fde\u63a5 \u00b6 \u5efa\u7acbslave\u5230master\u7684\u8fde\u63a5\uff0c\u4f7fmaster\u80fd\u591f\u8bc6\u522bslave\uff0c\u5e76\u4fdd\u5b58slave\u7aef\u53e3\u53f7 \u6d41\u7a0b\u5982\u4e0b\uff1a \u6b65\u9aa41\uff1a\u8bbe\u7f6emaster\u7684\u5730\u5740\u548c\u7aef\u53e3\uff0c\u4fdd\u5b58master\u4fe1\u606f \u6b65\u9aa42\uff1a\u5efa\u7acbsocket\u8fde\u63a5 \u6b65\u9aa43\uff1a\u53d1\u9001ping\u547d\u4ee4\uff08\u5b9a\u65f6\u5668\u4efb\u52a1\uff09 \u6b65\u9aa44\uff1a\u8eab\u4efd\u9a8c\u8bc1 \u6b65\u9aa45\uff1a\u53d1\u9001slave\u7aef\u53e3\u4fe1\u606f \u81f3\u6b64\uff0c\u4e3b\u4ece\u8fde\u63a5\u6210\u529f\uff01 \u5f53\u524d\u72b6\u6001\uff1a slave\uff1a\u4fdd\u5b58master\u7684\u5730\u5740\u4e0e\u7aef\u53e3 master\uff1a\u4fdd\u5b58slave\u7684\u7aef\u53e3 \u603b\u4f53\uff1a\u4e4b\u95f4\u521b\u5efa\u4e86\u8fde\u63a5\u7684socket master\u548cslave\u4e92\u8054 \u63a5\u4e0b\u6765\u5c31\u8981\u901a\u8fc7\u67d0\u79cd\u65b9\u5f0f\u5c06master\u548cslave\u8fde\u63a5\u5230\u4e00\u8d77 \u65b9\u5f0f\u4e00\uff1a\u5ba2\u6237\u7aef\u53d1\u9001\u547d\u4ee4 slaveof masterip masterport \u65b9\u5f0f\u4e8c\uff1a\u542f\u52a8\u670d\u52a1\u5668\u53c2\u6570 redis-server --slaveof masterip masterport \u65b9\u5f0f\u4e09\uff1a\u670d\u52a1\u5668\u914d\u7f6e\uff08 \u4e3b\u6d41\u65b9\u5f0f \uff09 slaveof masterip masterport slave\u7cfb\u7edf\u4fe1\u606f master_link_down_since_seconds masterhost & masterport master\u7cfb\u7edf\u4fe1\u606f uslave_listening_port(\u591a\u4e2a) \u4e3b\u4ece\u65ad\u5f00\u8fde\u63a5 \u65ad\u5f00slave\u4e0emaster\u7684\u8fde\u63a5\uff0cslave\u65ad\u5f00\u8fde\u63a5\u540e\uff0c\u4e0d\u4f1a\u5220\u9664\u5df2\u6709\u6570\u636e\uff0c\u53ea\u662f\u4e0d\u518d\u63a5\u53d7master\u53d1\u9001\u7684\u6570\u636e slaveof no one \u6388\u6743\u8bbf\u95ee master\u5ba2\u6237\u7aef\u53d1\u9001\u547d\u4ee4\u8bbe\u7f6e\u5bc6\u7801 requirepass password master\u914d\u7f6e\u6587\u4ef6\u8bbe\u7f6e\u5bc6\u7801 config set requirepass password config get requirepass slave\u5ba2\u6237\u7aef\u53d1\u9001\u547d\u4ee4\u8bbe\u7f6e\u5bc6\u7801 auth password slave\u914d\u7f6e\u6587\u4ef6\u8bbe\u7f6e\u5bc6\u7801 masterauth password slave\u542f\u52a8\u670d\u52a1\u5668\u8bbe\u7f6e\u5bc6\u7801 redis-server \u2013a password 2.2.1.2 \u9636\u6bb5\u4e8c\uff1a\u6570\u636e\u540c\u6b65 \u00b6 \u5728slave\u521d\u6b21\u8fde\u63a5master\u540e\uff0c\u590d\u5236master\u4e2d\u7684\u6240\u6709\u6570\u636e\u5230slave \u5c06slave\u7684\u6570\u636e\u5e93\u72b6\u6001\u66f4\u65b0\u6210master\u5f53\u524d\u7684\u6570\u636e\u5e93\u72b6\u6001 \u540c\u6b65\u8fc7\u7a0b\u5982\u4e0b\uff1a \u6b65\u9aa41\uff1a\u8bf7\u6c42\u540c\u6b65\u6570\u636e \u6b65\u9aa42\uff1a\u521b\u5efaRDB\u540c\u6b65\u6570\u636e \u6b65\u9aa43\uff1a\u6062\u590dRDB\u540c\u6b65\u6570\u636e \u6b65\u9aa44\uff1a\u8bf7\u6c42\u90e8\u5206\u540c\u6b65\u6570\u636e \u6b65\u9aa45\uff1a\u6062\u590d\u90e8\u5206\u540c\u6b65\u6570\u636e \u81f3\u6b64\uff0c\u6570\u636e\u540c\u6b65\u5de5\u4f5c\u5b8c\u6210\uff01 \u5f53\u524d\u72b6\u6001\uff1a slave\uff1a\u5177\u6709master\u7aef\u5168\u90e8\u6570\u636e\uff0c\u5305\u542bRDB\u8fc7\u7a0b\u63a5\u6536\u7684\u6570\u636e master\uff1a\u4fdd\u5b58slave\u5f53\u524d\u6570\u636e\u540c\u6b65\u7684\u4f4d\u7f6e \u603b\u4f53\uff1a\u4e4b\u95f4\u5b8c\u6210\u4e86\u6570\u636e\u514b\u9686 \u6570\u636e\u540c\u6b65\u9636\u6bb5master\u8bf4\u660e 1\uff1a\u5982\u679cmaster\u6570\u636e\u91cf\u5de8\u5927\uff0c\u6570\u636e\u540c\u6b65\u9636\u6bb5\u5e94\u907f\u5f00\u6d41\u91cf\u9ad8\u5cf0\u671f\uff0c\u907f\u514d\u9020\u6210master\u963b\u585e\uff0c\u5f71\u54cd\u4e1a\u52a1\u6b63\u5e38\u6267\u884c 2\uff1a\u590d\u5236\u7f13\u51b2\u533a\u5927\u5c0f\u8bbe\u5b9a\u4e0d\u5408\u7406\uff0c\u4f1a\u5bfc\u81f4\u6570\u636e\u6ea2\u51fa\u3002\u5982\u8fdb\u884c\u5168\u91cf\u590d\u5236\u5468\u671f\u592a\u957f\uff0c\u8fdb\u884c\u90e8\u5206\u590d\u5236\u65f6\u53d1\u73b0\u6570\u636e\u5df2\u7ecf\u5b58\u5728\u4e22\u5931\u7684\u60c5\u51b5\uff0c\u5fc5\u987b\u8fdb\u884c\u7b2c\u4e8c\u6b21\u5168\u91cf\u590d\u5236\uff0c\u81f4\u4f7fslave\u9677\u5165\u6b7b\u5faa\u73af\u72b6\u6001\u3002 repl-backlog-size ?mb master\u5355\u673a\u5185\u5b58\u5360\u7528\u4e3b\u673a\u5185\u5b58\u7684\u6bd4\u4f8b\u4e0d\u5e94\u8fc7\u5927\uff0c\u5efa\u8bae\u4f7f\u752850%-70%\u7684\u5185\u5b58\uff0c\u7559\u4e0b30%-50%\u7684\u5185\u5b58\u7528\u4e8e\u6267 \u884cbgsave\u547d\u4ee4\u548c\u521b\u5efa\u590d\u5236\u7f13\u51b2\u533a \u6570\u636e\u540c\u6b65\u9636\u6bb5slave\u8bf4\u660e \u4e3a\u907f\u514dslave\u8fdb\u884c\u5168\u91cf\u590d\u5236\u3001\u90e8\u5206\u590d\u5236\u65f6\u670d\u52a1\u5668\u54cd\u5e94\u963b\u585e\u6216\u6570\u636e\u4e0d\u540c\u6b65\uff0c\u5efa\u8bae\u5173\u95ed\u6b64\u671f\u95f4\u7684\u5bf9\u5916\u670d\u52a1 slave-serve-stale-data yes|no \u6570\u636e\u540c\u6b65\u9636\u6bb5\uff0cmaster\u53d1\u9001\u7ed9slave\u4fe1\u606f\u53ef\u4ee5\u7406\u89e3master\u662fslave\u7684\u4e00\u4e2a\u5ba2\u6237\u7aef\uff0c\u4e3b\u52a8\u5411slave\u53d1\u9001\u547d\u4ee4 \u591a\u4e2aslave\u540c\u65f6\u5bf9master\u8bf7\u6c42\u6570\u636e\u540c\u6b65\uff0cmaster\u53d1\u9001\u7684RDB\u6587\u4ef6\u589e\u591a\uff0c\u4f1a\u5bf9\u5e26\u5bbd\u9020\u6210\u5de8\u5927\u51b2\u51fb\uff0c\u5982\u679cmaster\u5e26\u5bbd\u4e0d\u8db3\uff0c\u56e0\u6b64\u6570\u636e\u540c\u6b65\u9700\u8981\u6839\u636e\u4e1a\u52a1\u9700\u6c42\uff0c\u9002\u91cf\u9519\u5cf0 slave\u8fc7\u591a\u65f6\uff0c\u5efa\u8bae\u8c03\u6574\u62d3\u6251\u7ed3\u6784\uff0c\u7531\u4e00\u4e3b\u591a\u4ece\u7ed3\u6784\u53d8\u4e3a\u6811\u72b6\u7ed3\u6784\uff0c\u4e2d\u95f4\u7684\u8282\u70b9\u65e2\u662fmaster\uff0c\u4e5f\u662f slave\u3002\u6ce8\u610f\u4f7f\u7528\u6811\u72b6\u7ed3\u6784\u65f6\uff0c\u7531\u4e8e\u5c42\u7ea7\u6df1\u5ea6\uff0c\u5bfc\u81f4\u6df1\u5ea6\u8d8a\u9ad8\u7684slave\u4e0e\u6700\u9876\u5c42master\u95f4\u6570\u636e\u540c\u6b65\u5ef6\u8fdf \u8f83\u5927\uff0c\u6570\u636e\u4e00\u81f4\u6027\u53d8\u5dee\uff0c\u5e94\u8c28\u614e\u9009\u62e9 2.2.1.3 \u9636\u6bb5\u4e09\uff1a\u547d\u4ee4\u4f20\u64ad \u00b6 \u5f53master\u6570\u636e\u5e93\u72b6\u6001\u88ab\u4fee\u6539\u540e\uff0c\u5bfc\u81f4\u4e3b\u4ece\u670d\u52a1\u5668\u6570\u636e\u5e93\u72b6\u6001\u4e0d\u4e00\u81f4\uff0c\u6b64\u65f6\u9700\u8981\u8ba9\u4e3b\u4ece\u6570\u636e\u540c\u6b65\u5230\u4e00\u81f4\u7684\u72b6\u6001\uff0c\u540c\u6b65\u7684\u52a8\u4f5c\u79f0\u4e3a\u547d\u4ee4\u4f20\u64ad master\u5c06\u63a5\u6536\u5230\u7684\u6570\u636e\u53d8\u66f4\u547d\u4ee4\u53d1\u9001\u7ed9slave\uff0cslave\u63a5\u6536\u547d\u4ee4\u540e\u6267\u884c\u547d\u4ee4 \u547d\u4ee4\u4f20\u64ad\u9636\u6bb5\u7684\u90e8\u5206\u590d\u5236 \u547d\u4ee4\u4f20\u64ad\u9636\u6bb5\u51fa\u73b0\u4e86\u65ad\u7f51\u73b0\u8c61\uff1a \u7f51\u7edc\u95ea\u65ad\u95ea\u8fde\uff1a\u5ffd\u7565 \u77ed\u65f6\u95f4\u7f51\u7edc\u4e2d\u65ad\uff1a\u90e8\u5206\u590d\u5236 \u957f\u65f6\u95f4\u7f51\u7edc\u4e2d\u65ad\uff1a\u5168\u91cf\u590d\u5236 \u8fd9\u91cc\u6211\u4eec\u4e3b\u8981\u6765\u770b\u90e8\u5206\u590d\u5236\uff0c\u90e8\u5206\u590d\u5236\u7684\u4e09\u4e2a\u6838\u5fc3\u8981\u7d20 \u670d\u52a1\u5668\u7684\u8fd0\u884c id\uff08run id\uff09 \u4e3b\u670d\u52a1\u5668\u7684\u590d\u5236\u79ef\u538b\u7f13\u51b2\u533a \u4e3b\u4ece\u670d\u52a1\u5668\u7684\u590d\u5236\u504f\u79fb\u91cf \u670d\u52a1\u5668\u8fd0\u884cID\uff08runid\uff09 \u6982\u5ff5\uff1a\u670d\u52a1\u5668\u8fd0\u884cID\u662f\u6bcf\u4e00\u53f0\u670d\u52a1\u5668\u6bcf\u6b21\u8fd0\u884c\u7684\u8eab\u4efd\u8bc6\u522b\u7801\uff0c\u4e00\u53f0\u670d\u52a1\u5668\u591a\u6b21\u8fd0\u884c\u53ef\u4ee5\u751f\u6210\u591a\u4e2a\u8fd0\u884cid \u7ec4\u6210\uff1a\u8fd0\u884cid\u753140\u4f4d\u5b57\u7b26\u7ec4\u6210\uff0c\u662f\u4e00\u4e2a\u968f\u673a\u7684\u5341\u516d\u8fdb\u5236\u5b57\u7b26 \u4f8b\u5982\uff1afdc9ff13b9bbaab28db42b3d50f852bb5e3fcdce \u4f5c\u7528\uff1a\u8fd0\u884cid\u88ab\u7528\u4e8e\u5728\u670d\u52a1\u5668\u95f4\u8fdb\u884c\u4f20\u8f93\uff0c\u8bc6\u522b\u8eab\u4efd \u5982\u679c\u60f3\u4e24\u6b21\u64cd\u4f5c\u5747\u5bf9\u540c\u4e00\u53f0\u670d\u52a1\u5668\u8fdb\u884c\uff0c\u5fc5\u987b\u6bcf\u6b21\u64cd\u4f5c\u643a\u5e26\u5bf9\u5e94\u7684\u8fd0\u884cid\uff0c\u7528\u4e8e\u5bf9\u65b9\u8bc6\u522b \u5b9e\u73b0\u65b9\u5f0f\uff1a\u8fd0\u884cid\u5728\u6bcf\u53f0\u670d\u52a1\u5668\u542f\u52a8\u65f6\u81ea\u52a8\u751f\u6210\u7684\uff0cmaster\u5728\u9996\u6b21\u8fde\u63a5slave\u65f6\uff0c\u4f1a\u5c06\u81ea\u5df1\u7684\u8fd0\u884cID\u53d1\u9001\u7ed9slave\uff0c slave\u4fdd\u5b58\u6b64ID\uff0c\u901a\u8fc7info Server\u547d\u4ee4\uff0c\u53ef\u4ee5\u67e5\u770b\u8282\u70b9\u7684runid \u590d\u5236\u7f13\u51b2\u533a \u6982\u5ff5\uff1a\u590d\u5236\u7f13\u51b2\u533a\uff0c\u53c8\u540d\u590d\u5236\u79ef\u538b\u7f13\u51b2\u533a\uff0c\u662f\u4e00\u4e2a\u5148\u8fdb\u5148\u51fa\uff08FIFO\uff09\u7684\u961f\u5217\uff0c\u7528\u4e8e\u5b58\u50a8\u670d\u52a1\u5668\u6267\u884c\u8fc7\u7684\u547d\u4ee4\uff0c\u6bcf\u6b21\u4f20\u64ad\u547d\u4ee4\uff0cmaster\u90fd\u4f1a\u5c06\u4f20\u64ad\u7684\u547d\u4ee4\u8bb0\u5f55\u4e0b\u6765\uff0c\u5e76\u5b58\u50a8\u5728\u590d\u5236\u7f13\u51b2\u533a \u590d\u5236\u7f13\u51b2\u533a\u9ed8\u8ba4\u6570\u636e\u5b58\u50a8\u7a7a\u95f4\u5927\u5c0f\u662f1M \u5f53\u5165\u961f\u5143\u7d20\u7684\u6570\u91cf\u5927\u4e8e\u961f\u5217\u957f\u5ea6\u65f6\uff0c\u6700\u5148\u5165\u961f\u7684\u5143\u7d20\u4f1a\u88ab\u5f39\u51fa\uff0c\u800c\u65b0\u5143\u7d20\u4f1a\u88ab\u653e\u5165\u961f\u5217 \u4f5c\u7528\uff1a\u7528\u4e8e\u4fdd\u5b58master\u6536\u5230\u7684\u6240\u6709\u6307\u4ee4\uff08\u4ec5\u5f71\u54cd\u6570\u636e\u53d8\u66f4\u7684\u6307\u4ee4\uff0c\u4f8b\u5982set\uff0cselect\uff09 \u6570\u636e\u6765\u6e90\uff1a\u5f53master\u63a5\u6536\u5230\u4e3b\u5ba2\u6237\u7aef\u7684\u6307\u4ee4\u65f6\uff0c\u9664\u4e86\u5c06\u6307\u4ee4\u6267\u884c\uff0c\u4f1a\u5c06\u8be5\u6307\u4ee4\u5b58\u50a8\u5230\u7f13\u51b2\u533a\u4e2d \u590d\u5236\u7f13\u51b2\u533a\u5185\u90e8\u5de5\u4f5c\u539f\u7406\uff1a \u7ec4\u6210 \u504f\u79fb\u91cf \u6982\u5ff5\uff1a\u4e00\u4e2a\u6570\u5b57\uff0c\u63cf\u8ff0\u590d\u5236\u7f13\u51b2\u533a\u4e2d\u7684\u6307\u4ee4\u5b57\u8282\u4f4d\u7f6e \u5206\u7c7b\uff1a master\u590d\u5236\u504f\u79fb\u91cf\uff1a\u8bb0\u5f55\u53d1\u9001\u7ed9\u6240\u6709slave\u7684\u6307\u4ee4\u5b57\u8282\u5bf9\u5e94\u7684\u4f4d\u7f6e\uff08\u591a\u4e2a\uff09 slave\u590d\u5236\u504f\u79fb\u91cf\uff1a\u8bb0\u5f55slave\u63a5\u6536master\u53d1\u9001\u8fc7\u6765\u7684\u6307\u4ee4\u5b57\u8282\u5bf9\u5e94\u7684\u4f4d\u7f6e\uff08\u4e00\u4e2a\uff09 \u4f5c\u7528\uff1a\u540c\u6b65\u4fe1\u606f\uff0c\u6bd4\u5bf9master\u4e0eslave\u7684\u5dee\u5f02\uff0c\u5f53slave\u65ad\u7ebf\u540e\uff0c\u6062\u590d\u6570\u636e\u4f7f\u7528 \u6570\u636e\u6765\u6e90\uff1a master\u7aef\uff1a\u53d1\u9001\u4e00\u6b21\u8bb0\u5f55\u4e00\u6b21 slave\u7aef\uff1a\u63a5\u6536\u4e00\u6b21\u8bb0\u5f55\u4e00\u6b21 \u5b57\u8282\u503c \u5de5\u4f5c\u539f\u7406 \u901a\u8fc7offset\u533a\u5206\u4e0d\u540c\u7684slave\u5f53\u524d\u6570\u636e\u4f20\u64ad\u7684\u5dee\u5f02 master\u8bb0\u5f55\u5df2\u53d1\u9001\u7684\u4fe1\u606f\u5bf9\u5e94\u7684offset slave\u8bb0\u5f55\u5df2\u63a5\u6536\u7684\u4fe1\u606f\u5bf9\u5e94\u7684offset 2.2.2 \u6d41\u7a0b\u66f4\u65b0(\u5168\u91cf\u590d\u5236/\u90e8\u5206\u590d\u5236) \u00b6 \u6211\u4eec\u518d\u6b21\u7684\u603b\u7ed3\u4e00\u4e0b\u4e3b\u4ece\u590d\u5236\u7684\u4e09\u4e2a\u9636\u6bb5\u7684\u5de5\u4f5c\u6d41\u7a0b\uff1a 2.2.3 \u5fc3\u8df3\u673a\u5236 \u00b6 \u4ec0\u4e48\u662f\u5fc3\u8df3\u673a\u5236\uff1f \u8fdb\u5165\u547d\u4ee4\u4f20\u64ad\u9636\u6bb5\u5019\uff0cmaster\u4e0eslave\u95f4\u9700\u8981\u8fdb\u884c\u4fe1\u606f\u4ea4\u6362\uff0c\u4f7f\u7528\u5fc3\u8df3\u673a\u5236\u8fdb\u884c\u7ef4\u62a4\uff0c\u5b9e\u73b0\u53cc\u65b9\u8fde\u63a5\u4fdd\u6301\u5728\u7ebf master\u5fc3\u8df3\uff1a \u5185\u90e8\u6307\u4ee4\uff1aPING \u5468\u671f\uff1a\u7531repl-ping-slave-period\u51b3\u5b9a\uff0c\u9ed8\u8ba410\u79d2 \u4f5c\u7528\uff1a\u5224\u65adslave\u662f\u5426\u5728\u7ebf \u67e5\u8be2\uff1aINFO replication \u83b7\u53d6slave\u6700\u540e\u4e00\u6b21\u8fde\u63a5\u65f6\u95f4\u95f4\u9694\uff0clag\u9879\u7ef4\u6301\u57280\u62161\u89c6\u4e3a\u6b63\u5e38 slave\u5fc3\u8df3\u4efb\u52a1 \u5185\u90e8\u6307\u4ee4\uff1aREPLCONF ACK {offset} \u5468\u671f\uff1a1\u79d2 \u4f5c\u75281\uff1a\u6c47\u62a5slave\u81ea\u5df1\u7684\u590d\u5236\u504f\u79fb\u91cf\uff0c\u83b7\u53d6\u6700\u65b0\u7684\u6570\u636e\u53d8\u66f4\u6307\u4ee4 \u4f5c\u75282\uff1a\u5224\u65admaster\u662f\u5426\u5728\u7ebf \u5fc3\u8df3\u9636\u6bb5\u6ce8\u610f\u4e8b\u9879\uff1a \u5f53slave\u591a\u6570\u6389\u7ebf\uff0c\u6216\u5ef6\u8fdf\u8fc7\u9ad8\u65f6\uff0cmaster\u4e3a\u4fdd\u969c\u6570\u636e\u7a33\u5b9a\u6027\uff0c\u5c06\u62d2\u7edd\u6240\u6709\u4fe1\u606f\u540c\u6b65 min-slaves-to-write 2 min-slaves-max-lag 8 slave\u6570\u91cf\u5c11\u4e8e2\u4e2a\uff0c\u6216\u8005\u6240\u6709slave\u7684\u5ef6\u8fdf\u90fd\u5927\u4e8e\u7b49\u4e8e8\u79d2\u65f6\uff0c\u5f3a\u5236\u5173\u95edmaster\u5199\u529f\u80fd\uff0c\u505c\u6b62\u6570\u636e\u540c\u6b65 slave\u6570\u91cf\u7531slave\u53d1\u9001REPLCONF ACK\u547d\u4ee4\u505a\u786e\u8ba4 slave\u5ef6\u8fdf\u7531slave\u53d1\u9001REPLCONF ACK\u547d\u4ee4\u505a\u786e\u8ba4 \u81f3\u6b64\uff1a\u6211\u4eec\u53ef\u4ee5\u603b\u7ed3\u51fa\u5b8c\u6574\u7684\u4e3b\u4ece\u590d\u5236\u6d41\u7a0b\uff1a 2.3 \u4e3b\u4ece\u590d\u5236\u5e38\u89c1\u95ee\u9898 \u00b6 2.3.1 \u9891\u7e41\u7684\u5168\u91cf\u590d\u5236 \u00b6 \u4f34\u968f\u7740\u7cfb\u7edf\u7684\u8fd0\u884c\uff0cmaster\u7684\u6570\u636e\u91cf\u4f1a\u8d8a\u6765\u8d8a\u5927\uff0c\u4e00\u65e6master\u91cd\u542f\uff0crunid\u5c06\u53d1\u751f\u53d8\u5316\uff0c\u4f1a\u5bfc\u81f4\u5168\u90e8slave\u7684\u5168\u91cf\u590d\u5236\u64cd\u4f5c \u5185\u90e8\u4f18\u5316\u8c03\u6574\u65b9\u6848\uff1a 1\uff1amaster\u5185\u90e8\u521b\u5efamaster_replid\u53d8\u91cf\uff0c\u4f7f\u7528runid\u76f8\u540c\u7684\u7b56\u7565\u751f\u6210\uff0c\u957f\u5ea641\u4f4d\uff0c\u5e76\u53d1\u9001\u7ed9\u6240\u6709slave 2\uff1a\u5728master\u5173\u95ed\u65f6\u6267\u884c\u547d\u4ee4shutdown save\uff0c\u8fdb\u884cRDB\u6301\u4e45\u5316,\u5c06runid\u4e0eoffset\u4fdd\u5b58\u5230RDB\u6587\u4ef6\u4e2d repl-id repl-offset \u901a\u8fc7redis-check-rdb\u547d\u4ee4\u53ef\u4ee5\u67e5\u770b\u8be5\u4fe1\u606f 3\uff1amaster\u91cd\u542f\u540e\u52a0\u8f7dRDB\u6587\u4ef6\uff0c\u6062\u590d\u6570\u636e\uff0c\u91cd\u542f\u540e\uff0c\u5c06RDB\u6587\u4ef6\u4e2d\u4fdd\u5b58\u7684repl-id\u4e0erepl-offset\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d master_repl_id=repl master_repl_offset =repl-offset \u901a\u8fc7info\u547d\u4ee4\u53ef\u4ee5\u67e5\u770b\u8be5\u4fe1\u606f \u4f5c\u7528\uff1a\u672c\u673a\u4fdd\u5b58\u4e0a\u6b21runid\uff0c\u91cd\u542f\u540e\u6062\u590d\u8be5\u503c\uff0c\u4f7f\u6240\u6709slave\u8ba4\u4e3a\u8fd8\u662f\u4e4b\u524d\u7684master \u7b2c\u4e8c\u79cd\u51fa\u73b0\u9891\u7e41\u5168\u91cf\u590d\u5236\u7684\u95ee\u9898\u73b0\u8c61\uff1a\u7f51\u7edc\u73af\u5883\u4e0d\u4f73\uff0c\u51fa\u73b0\u7f51\u7edc\u4e2d\u65ad\uff0cslave\u4e0d\u63d0\u4f9b\u670d\u52a1 \u95ee\u9898\u539f\u56e0\uff1a\u590d\u5236\u7f13\u51b2\u533a\u8fc7\u5c0f\uff0c\u65ad\u7f51\u540eslave\u7684offset\u8d8a\u754c\uff0c\u89e6\u53d1\u5168\u91cf\u590d\u5236 \u6700\u7ec8\u7ed3\u679c\uff1aslave\u53cd\u590d\u8fdb\u884c\u5168\u91cf\u590d\u5236 \u89e3\u51b3\u65b9\u6848\uff1a\u4fee\u6539\u590d\u5236\u7f13\u51b2\u533a\u5927\u5c0f repl-backlog-size ?mb \u5efa\u8bae\u8bbe\u7f6e\u5982\u4e0b\uff1a 1.\u6d4b\u7b97\u4ecemaster\u5230slave\u7684\u91cd\u8fde\u5e73\u5747\u65f6\u957fsecond 2.\u83b7\u53d6master\u5e73\u5747\u6bcf\u79d2\u4ea7\u751f\u5199\u547d\u4ee4\u6570\u636e\u603b\u91cfwrite_size_per_second 3.\u6700\u4f18\u590d\u5236\u7f13\u51b2\u533a\u7a7a\u95f4 = 2 * second * write_size_per_second 2.3.2 \u9891\u7e41\u7684\u7f51\u7edc\u4e2d\u65ad \u00b6 \u95ee\u9898\u73b0\u8c61\uff1amaster\u7684CPU\u5360\u7528\u8fc7\u9ad8 \u6216 slave\u9891\u7e41\u65ad\u5f00\u8fde\u63a5 \u95ee\u9898\u539f\u56e0 slave\u6bcf1\u79d2\u53d1\u9001REPLCONFACK\u547d\u4ee4\u5230master \u5f53slave\u63a5\u5230\u4e86\u6162\u67e5\u8be2\u65f6\uff08keys * \uff0chgetall\u7b49\uff09\uff0c\u4f1a\u5927\u91cf\u5360\u7528CPU\u6027\u80fd master\u6bcf1\u79d2\u8c03\u7528\u590d\u5236\u5b9a\u65f6\u51fd\u6570replicationCron()\uff0c\u6bd4\u5bf9slave\u53d1\u73b0\u957f\u65f6\u95f4\u6ca1\u6709\u8fdb\u884c\u54cd\u5e94 \u6700\u7ec8\u7ed3\u679c\uff1amaster\u5404\u79cd\u8d44\u6e90\uff08\u8f93\u51fa\u7f13\u51b2\u533a\u3001\u5e26\u5bbd\u3001\u8fde\u63a5\u7b49\uff09\u88ab\u4e25\u91cd\u5360\u7528 \u89e3\u51b3\u65b9\u6848\uff1a\u901a\u8fc7\u8bbe\u7f6e\u5408\u7406\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u786e\u8ba4\u662f\u5426\u91ca\u653eslave repl-timeout seconds \u8be5\u53c2\u6570\u5b9a\u4e49\u4e86\u8d85\u65f6\u65f6\u95f4\u7684\u9608\u503c\uff08\u9ed8\u8ba460\u79d2\uff09\uff0c\u8d85\u8fc7\u8be5\u503c\uff0c\u91ca\u653eslave \u95ee\u9898\u73b0\u8c61\uff1aslave\u4e0emaster\u8fde\u63a5\u65ad\u5f00 \u95ee\u9898\u539f\u56e0 master\u53d1\u9001ping\u6307\u4ee4\u9891\u5ea6\u8f83\u4f4e master\u8bbe\u5b9a\u8d85\u65f6\u65f6\u95f4\u8f83\u77ed ping\u6307\u4ee4\u5728\u7f51\u7edc\u4e2d\u5b58\u5728\u4e22\u5305 \u89e3\u51b3\u65b9\u6848\uff1a\u63d0\u9ad8ping\u6307\u4ee4\u53d1\u9001\u7684\u9891\u5ea6 repl-ping-slave-period seconds \u8d85\u65f6\u65f6\u95f4repl-time\u7684\u65f6\u95f4\u81f3\u5c11\u662fping\u6307\u4ee4\u9891\u5ea6\u76845\u523010\u500d\uff0c\u5426\u5219slave\u5f88\u5bb9\u6613\u5224\u5b9a\u8d85\u65f6 2.3.3 \u6570\u636e\u4e0d\u4e00\u81f4 \u00b6 \u95ee\u9898\u73b0\u8c61\uff1a\u591a\u4e2aslave\u83b7\u53d6\u76f8\u540c\u6570\u636e\u4e0d\u540c\u6b65 \u95ee\u9898\u539f\u56e0\uff1a\u7f51\u7edc\u4fe1\u606f\u4e0d\u540c\u6b65\uff0c\u6570\u636e\u53d1\u9001\u6709\u5ef6\u8fdf \u89e3\u51b3\u65b9\u6848 \u4f18\u5316\u4e3b\u4ece\u95f4\u7684\u7f51\u7edc\u73af\u5883\uff0c\u901a\u5e38\u653e\u7f6e\u5728\u540c\u4e00\u4e2a\u673a\u623f\u90e8\u7f72\uff0c\u5982\u4f7f\u7528\u963f\u91cc\u4e91\u7b49\u4e91\u670d\u52a1\u5668\u65f6\u8981\u6ce8\u610f\u6b64\u73b0\u8c61 \u76d1\u63a7\u4e3b\u4ece\u8282\u70b9\u5ef6\u8fdf\uff08\u901a\u8fc7offset\uff09\u5224\u65ad\uff0c\u5982\u679cslave\u5ef6\u8fdf\u8fc7\u5927\uff0c\u6682\u65f6\u5c4f\u853d\u7a0b\u5e8f\u5bf9\u8be5slave\u7684\u6570\u636e\u8bbf\u95ee slave-serve-stale-data yes|no \u5f00\u542f\u540e\u4ec5\u54cd\u5e94info\u3001slaveof\u7b49\u5c11\u6570\u547d\u4ee4\uff08\u614e\u7528\uff0c\u9664\u975e\u5bf9\u6570\u636e\u4e00\u81f4\u6027\u8981\u6c42\u5f88\u9ad8\uff09 3.\u54e8\u5175\u6a21\u5f0f \u00b6 3.1 \u54e8\u5175\u7b80\u4ecb \u00b6 3.1.1 \u54e8\u5175\u6982\u5ff5 \u00b6 \u9996\u5148\u6211\u4eec\u6765\u770b\u4e00\u4e2a\u4e1a\u52a1\u573a\u666f\uff1a\u5982\u679credis\u7684master\u5b95\u673a\u4e86\uff0c\u6b64\u65f6\u5e94\u8be5\u600e\u4e48\u529e\uff1f \u90a3\u6b64\u65f6\u6211\u4eec\u53ef\u80fd\u9700\u8981\u4ece\u4e00\u5806\u7684slave\u4e2d\u91cd\u65b0\u9009\u4e3e\u51fa\u4e00\u4e2a\u65b0\u7684master\uff0c\u90a3\u8fd9\u4e2a\u64cd\u4f5c\u8fc7\u7a0b\u662f\u4ec0\u4e48\u6837\u7684\u5462\uff1f\u8fd9\u91cc\u9762\u4f1a\u6709\u4ec0\u4e48\u95ee\u9898\u51fa\u73b0\u5462\uff1f \u8981\u5b9e\u73b0\u8fd9\u4e9b\u529f\u80fd\uff0c\u6211\u4eec\u5c31\u9700\u8981redis\u7684\u54e8\u5175\uff0c\u90a3\u54e8\u5175\u662f\u4ec0\u4e48\u5462\uff1f \u54e8\u5175 \u54e8\u5175(sentinel) \u662f\u4e00\u4e2a\u5206\u5e03\u5f0f\u7cfb\u7edf\uff0c\u7528\u4e8e\u5bf9\u4e3b\u4ece\u7ed3\u6784\u4e2d\u7684\u6bcf\u53f0\u670d\u52a1\u5668\u8fdb\u884c \u76d1\u63a7 \uff0c\u5f53\u51fa\u73b0\u6545\u969c\u65f6\u901a\u8fc7 \u6295\u7968 \u673a\u5236 \u9009\u62e9 \u65b0\u7684master\u5e76\u5c06\u6240\u6709slave\u8fde\u63a5\u5230\u65b0\u7684master\u3002 3.1.2 \u54e8\u5175\u4f5c\u7528 \u00b6 \u54e8\u5175\u7684\u4f5c\u7528\uff1a \u76d1\u63a7\uff1a\u76d1\u63a7master\u548cslave \u4e0d\u65ad\u7684\u68c0\u67e5master\u548cslave\u662f\u5426\u6b63\u5e38\u8fd0\u884c master\u5b58\u6d3b\u68c0\u6d4b\u3001master\u4e0eslave\u8fd0\u884c\u60c5\u51b5\u68c0\u6d4b \u901a\u77e5\uff08\u63d0\u9192\uff09\uff1a\u5f53\u88ab\u76d1\u63a7\u7684\u670d\u52a1\u5668\u51fa\u73b0\u95ee\u9898\u65f6\uff0c\u5411\u5176\u4ed6\uff08\u54e8\u5175\u95f4\uff0c\u5ba2\u6237\u7aef\uff09\u53d1\u9001\u901a\u77e5 \u81ea\u52a8\u6545\u969c\u8f6c\u79fb\uff1a\u65ad\u5f00master\u4e0eslave\u8fde\u63a5\uff0c\u9009\u53d6\u4e00\u4e2aslave\u4f5c\u4e3amaster\uff0c\u5c06\u5176\u4ed6slave\u8fde\u63a5\u65b0\u7684master\uff0c\u5e76\u544a\u77e5\u5ba2\u6237\u7aef\u65b0\u7684\u670d\u52a1\u5668\u5730\u5740 \u6ce8\u610f\uff1a\u54e8\u5175\u4e5f\u662f\u4e00\u53f0redis\u670d\u52a1\u5668\uff0c\u53ea\u662f\u4e0d\u63d0\u4f9b\u6570\u636e\u76f8\u5173\u670d\u52a1\uff0c\u901a\u5e38\u54e8\u5175\u7684\u6570\u91cf\u914d\u7f6e\u4e3a\u5355\u6570 3.2 \u542f\u7528\u54e8\u5175 \u00b6 \u914d\u7f6e\u54e8\u5175 \u914d\u7f6e\u4e00\u62d6\u4e8c\u7684\u4e3b\u4ece\u7ed3\u6784\uff08\u5229\u7528\u4e4b\u524d\u7684\u65b9\u5f0f\u542f\u52a8\u5373\u53ef\uff09 \u914d\u7f6e\u4e09\u4e2a\u54e8\u5175\uff08\u914d\u7f6e\u76f8\u540c\uff0c\u7aef\u53e3\u4e0d\u540c\uff09\uff0c\u53c2\u770bsentinel.conf 1\uff1a\u8bbe\u7f6e\u54e8\u5175\u76d1\u542c\u7684\u4e3b\u670d\u52a1\u5668\u4fe1\u606f\uff0c sentinel_number\u8868\u793a\u53c2\u4e0e\u6295\u7968\u7684\u54e8\u5175\u6570\u91cf sentinel monitor master_name master_host master_port sentinel_number 2\uff1a\u8bbe\u7f6e\u5224\u5b9a\u670d\u52a1\u5668\u5b95\u673a\u65f6\u957f\uff0c\u8be5\u8bbe\u7f6e\u63a7\u5236\u662f\u5426\u8fdb\u884c\u4e3b\u4ece\u5207\u6362 sentinel down-after-milliseconds master_name million_seconds 3\uff1a\u8bbe\u7f6e\u6545\u969c\u5207\u6362\u7684\u6700\u5927\u8d85\u65f6\u65f6 sentinel failover-timeout master_name million_seconds 4\uff1a\u8bbe\u7f6e\u4e3b\u4ece\u5207\u6362\u540e\uff0c\u540c\u65f6\u8fdb\u884c\u6570\u636e\u540c\u6b65\u7684slave\u6570\u91cf\uff0c\u6570\u503c\u8d8a\u5927\uff0c\u8981\u6c42\u7f51\u7edc\u8d44\u6e90\u8d8a\u9ad8\uff0c\u6570\u503c\u8d8a\u5c0f\uff0c\u540c\u6b65\u65f6\u95f4\u8d8a\u957f sentinel parallel-syncs master_name sync_slave_number \u542f\u52a8\u54e8\u5175 redis-sentinel filename 3.3 \u54e8\u5175\u5de5\u4f5c\u539f\u7406 \u00b6 \u54e8\u5175\u5728\u8fdb\u884c\u4e3b\u4ece\u5207\u6362\u8fc7\u7a0b\u4e2d\u7ecf\u5386\u4e09\u4e2a\u9636\u6bb5 \u76d1\u63a7 \u901a\u77e5 \u6545\u969c\u8f6c\u79fb 3.3.1 \u76d1\u63a7 \u00b6 \u7528\u4e8e\u540c\u6b65\u5404\u4e2a\u8282\u70b9\u7684\u72b6\u6001\u4fe1\u606f \u83b7\u53d6\u5404\u4e2asentinel\u7684\u72b6\u6001\uff08\u662f\u5426\u5728\u7ebf\uff09 \u83b7\u53d6master\u7684\u72b6\u6001 master\u5c5e\u6027 prunid prole\uff1amaster \u5404\u4e2aslave\u7684\u8be6\u7ec6\u4fe1\u606f \u83b7\u53d6\u6240\u6709slave\u7684\u72b6\u6001\uff08\u6839\u636emaster\u4e2d\u7684slave\u4fe1\u606f\uff09 slave\u5c5e\u6027 prunid prole\uff1aslave pmaster_host\u3001master_port poffset \u5176\u5185\u90e8\u7684\u5de5\u4f5c\u539f\u7406\u5177\u4f53\u5982\u4e0b\uff1a 3.3.2 \u901a\u77e5 \u00b6 sentinel\u5728\u901a\u77e5\u9636\u6bb5\u8981\u4e0d\u65ad\u7684\u53bb\u83b7\u53d6master/slave\u7684\u4fe1\u606f\uff0c\u7136\u540e\u5728\u5404\u4e2asentinel\u4e4b\u95f4\u8fdb\u884c\u5171\u4eab\uff0c\u5177\u4f53\u7684\u6d41\u7a0b\u5982\u4e0b\uff1a 3.3.3 \u6545\u969c\u8f6c\u79fb \u00b6 \u5f53master\u5b95\u673a\u540esentinel\u662f\u5982\u4f55\u77e5\u6653\u5e76\u5224\u65ad\u51famaster\u662f\u771f\u7684\u5b95\u673a\u4e86\u5462\uff1f\u6211\u4eec\u6765\u770b\u5177\u4f53\u7684\u64cd\u4f5c\u6d41\u7a0b \u5f53sentinel\u8ba4\u5b9amaster\u4e0b\u7ebf\u4e4b\u540e\uff0c\u6b64\u65f6\u9700\u8981\u51b3\u5b9a\u66f4\u6362master\uff0c\u90a3\u8fd9\u4ef6\u4e8b\u7531\u54ea\u4e2asentinel\u6765\u505a\u5462\uff1f\u8fd9\u65f6\u5019sentinel\u4e4b\u95f4\u8981\u8fdb\u884c\u9009\u4e3e\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5728\u9009\u4e3e\u7684\u65f6\u5019\u6bcf\u4e00\u4e2a\u4eba\u624b\u91cc\u90fd\u6709\u4e00\u7968\uff0c\u800c\u6bcf\u4e00\u4e2a\u4eba\u7684\u53c8\u90fd\u60f3\u5f53\u8fd9\u4e2a\u5904\u7406\u4e8b\u6545\u7684\u4eba\uff0c\u90a3\u600e\u4e48\u529e\uff1f\u5927\u5bb6\u5c31\u5f00\u59cb\u62a2\uff0c\u4e8e\u662f\u6bcf\u4e2a\u4eba\u90fd\u4f1a\u53d1\u51fa\u4e00\u4e2a\u6307\u4ee4\uff0c\u5728\u5185\u7f51\u91cc\u8fb9\u544a\u8bc9\u5927\u5bb6\u6211\u8981\u5f53\u9009\u4e3e\u4eba\uff0c\u6bd4\u5982\u8bf4\u73b0\u5728\u7684sentinel1\u548csentinel4\u53d1\u51fa\u8fd9\u4e2a\u9009\u4e3e\u6307\u4ee4\u4e86\uff0c\u90a3\u4e48sentinel2\u65e2\u80fd\u63a5\u5230sentinel1\u7684\u4e5f\u80fd\u63a5\u5230sentinel4\u7684\uff0c\u63a5\u5230\u4e86\u4ed6\u4eec\u7684\u7533\u8bf7\u4ee5\u540e\u5462\uff0csentinel2\u4ed6\u5c31\u4f1a\u628a\u4ed6\u7684\u4e00\u7968\u6295\u7ed9\u5176\u4e2d\u4e00\u65b9\uff0c\u6295\u7ed9\u8c01\u5462\uff1f\u8c01\u5148\u8fc7\u6765\u6211\u6295\u7ed9\u8c01\uff0c\u5047\u8bbesentinel1\u5148\u8fc7\u6765\uff0c\u6240\u4ee5\u8fd9\u4e2a\u7968\u5c31\u7ed9\u5230\u4e86sentinel1\u3002\u90a3\u4e48\u7ed9\u8fc7\u53bb\u4ee5\u540e\u5462\uff0c\u73b0\u5728sentinel1\u5c31\u62ff\u5230\u4e86\u4e00\u7968\uff0c\u6309\u7167\u8fd9\u6837\u7684\u4e00\u79cd\u5f62\u5f0f\uff0c\u6700\u7ec8\u4f1a\u6709\u4e00\u4e2a\u9009\u4e3e\u7ed3\u679c\u3002\u5bf9\u5e94\u7684\u9009\u4e3e\u6700\u7ec8\u5f97\u7968\u591a\u7684\uff0c\u90a3\u81ea\u7136\u5c31\u6210\u4e3a\u4e86\u5904\u7406\u4e8b\u6545\u7684\u4eba\u3002\u9700\u8981\u6ce8\u610f\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u6709\u53ef\u80fd\u4f1a\u5b58\u5728\u5931\u8d25\u7684\u73b0\u8c61\uff0c\u5c31\u662f\u4e00\u8f6e\u9009\u4e3e\u5b8c\u6ca1\u6709\u9009\u53d6\uff0c\u90a3\u5c31\u4f1a\u63a5\u7740\u8fdb\u884c\u7b2c\u4e8c\u8f6e\u7b2c\u4e09\u8f6e\u76f4\u5230\u5b8c\u6210\u9009\u4e3e\u3002 \u63a5\u4e0b\u6765\u5c31\u662f\u7531\u9009\u4e3e\u80dc\u51fa\u7684sentinel\u53bb\u4eceslave\u4e2d\u9009\u4e00\u4e2a\u65b0\u7684master\u51fa\u6765\u7684\u5de5\u4f5c\uff0c\u8fd9\u4e2a\u6d41\u7a0b\u662f\u4ec0\u4e48\u6837\u7684\u5462\uff1f \u9996\u5148\u5b83\u6709\u4e00\u4e2a\u5728\u670d\u52a1\u5668\u5217\u8868\u4e2d\u6311\u9009\u5907\u9009master\u7684\u539f\u5219 \u4e0d\u5728\u7ebf\u7684OUT \u54cd\u5e94\u6162\u7684OUT \u4e0e\u539fmaster\u65ad\u5f00\u65f6\u95f4\u4e45\u7684OUT \u4f18\u5148\u539f\u5219 \u4f18\u5148\u7ea7 offset runid \u9009\u51fa\u65b0\u7684master\u4e4b\u540e\uff0c\u53d1\u9001\u6307\u4ee4\uff08 sentinel \uff09\u7ed9\u5176\u4ed6\u7684slave\uff1a \u5411\u65b0\u7684master\u53d1\u9001slaveof no one \u5411\u5176\u4ed6slave\u53d1\u9001slaveof \u65b0masterIP\u7aef\u53e3 \u603b\u7ed3 \uff1a\u6545\u969c\u8f6c\u79fb\u9636\u6bb5 \u53d1\u73b0\u95ee\u9898\uff0c\u4e3b\u89c2\u4e0b\u7ebf\u4e0e\u5ba2\u89c2\u4e0b\u7ebf \u7ade\u9009\u8d1f\u8d23\u4eba \u4f18\u9009\u65b0master \u65b0master\u4e0a\u4efb\uff0c\u5176\u4ed6slave\u5207\u6362master\uff0c\u539fmaster\u4f5c\u4e3aslave\u6545\u969c\u6062\u590d\u540e\u8fde\u63a5 4.\u96c6\u7fa4cluster \u00b6 \u73b0\u72b6\u95ee\u9898\uff1a\u4e1a\u52a1\u53d1\u5c55\u8fc7\u7a0b\u4e2d\u9047\u5230\u7684\u5cf0\u503c\u74f6\u9888 redis\u63d0\u4f9b\u7684\u670d\u52a1OPS\u53ef\u4ee5\u8fbe\u523010\u4e07/\u79d2\uff0c\u5f53\u524d\u4e1a\u52a1OPS\u5df2\u7ecf\u8fbe\u523010\u4e07/\u79d2 \u5185\u5b58\u5355\u673a\u5bb9\u91cf\u8fbe\u5230256G\uff0c\u5f53\u524d\u4e1a\u52a1\u9700\u6c42\u5185\u5b58\u5bb9\u91cf1T \u4f7f\u7528\u96c6\u7fa4\u7684\u65b9\u5f0f\u53ef\u4ee5\u5feb\u901f\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898 4.1 \u96c6\u7fa4\u7b80\u4ecb \u00b6 \u96c6\u7fa4\u5c31\u662f\u4f7f\u7528\u7f51\u7edc\u5c06\u82e5\u5e72\u53f0\u8ba1\u7b97\u673a\u8054\u901a\u8d77\u6765\uff0c\u5e76\u63d0\u4f9b\u7edf\u4e00\u7684\u7ba1\u7406\u65b9\u5f0f\uff0c\u4f7f\u5176\u5bf9\u5916\u5448\u73b0\u5355\u673a\u7684\u670d\u52a1\u6548\u679c \u96c6\u7fa4\u4f5c\u7528\uff1a \u5206\u6563\u5355\u53f0\u670d\u52a1\u5668\u7684\u8bbf\u95ee\u538b\u529b\uff0c\u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861 \u5206\u6563\u5355\u53f0\u670d\u52a1\u5668\u7684\u5b58\u50a8\u538b\u529b\uff0c\u5b9e\u73b0\u53ef\u6269\u5c55\u6027 \u964d\u4f4e\u5355\u53f0\u670d\u52a1\u5668\u5b95\u673a\u5e26\u6765\u7684\u4e1a\u52a1\u707e\u96be 4.2 Cluster\u96c6\u7fa4\u7ed3\u6784\u8bbe\u8ba1 \u00b6 \u6570\u636e\u5b58\u50a8\u8bbe\u8ba1\uff1a \u901a\u8fc7\u7b97\u6cd5\u8bbe\u8ba1\uff0c\u8ba1\u7b97\u51fakey\u5e94\u8be5\u4fdd\u5b58\u7684\u4f4d\u7f6e \u5c06\u6240\u6709\u7684\u5b58\u50a8\u7a7a\u95f4\u8ba1\u5212\u5207\u5272\u621016384\u4efd\uff0c\u6bcf\u53f0\u4e3b\u673a\u4fdd\u5b58\u4e00\u90e8\u5206 \u6ce8\u610f\uff1a\u6bcf\u4efd\u4ee3\u8868\u7684\u662f\u4e00\u4e2a\u5b58\u50a8\u7a7a\u95f4\uff0c\u4e0d\u662f\u4e00\u4e2akey\u7684\u4fdd\u5b58\u7a7a\u95f4 \u5c06key\u6309\u7167\u8ba1\u7b97\u51fa\u7684\u7ed3\u679c\u653e\u5230\u5bf9\u5e94\u7684\u5b58\u50a8\u7a7a\u95f4 \u90a3redis\u7684\u96c6\u7fa4\u662f\u5982\u4f55\u589e\u5f3a\u53ef\u6269\u5c55\u6027\u7684\u5462\uff1f\u8b6c\u5982\u6211\u4eec\u8981\u589e\u52a0\u4e00\u4e2a\u96c6\u7fa4\u8282\u70b9 \u5f53\u6211\u4eec\u67e5\u627e\u6570\u636e\u65f6\uff0c\u96c6\u7fa4\u662f\u5982\u4f55\u64cd\u4f5c\u7684\u5462\uff1f \u5404\u4e2a\u6570\u636e\u5e93\u76f8\u4e92\u901a\u4fe1\uff0c\u4fdd\u5b58\u5404\u4e2a\u5e93\u4e2d\u69fd\u7684\u7f16\u53f7\u6570\u636e \u4e00\u6b21\u547d\u4e2d\uff0c\u76f4\u63a5\u8fd4\u56de \u4e00\u6b21\u672a\u547d\u4e2d\uff0c\u544a\u77e5\u5177\u4f53\u4f4d\u7f6e 4.3 Cluster\u96c6\u7fa4\u7ed3\u6784\u642d\u5efa \u00b6 \u9996\u5148\u8981\u660e\u786e\u7684\u51e0\u4e2a\u8981\u70b9\uff1a \u914d\u7f6e\u670d\u52a1\u5668\uff083\u4e3b3\u4ece\uff09 \u5efa\u7acb\u901a\u4fe1\uff08Meet\uff09 \u5206\u69fd\uff08Slot\uff09 \u642d\u5efa\u4e3b\u4ece\uff08master-slave\uff09 Cluster\u914d\u7f6e \u662f\u5426\u542f\u7528cluster\uff0c\u52a0\u5165cluster\u8282\u70b9 cluster-enabled yes|no cluster\u914d\u7f6e\u6587\u4ef6\u540d\uff0c\u8be5\u6587\u4ef6\u5c5e\u4e8e\u81ea\u52a8\u751f\u6210\uff0c\u4ec5\u7528\u4e8e\u5feb\u901f\u67e5\u627e\u6587\u4ef6\u5e76\u67e5\u8be2\u6587\u4ef6\u5185\u5bb9 cluster-config-file filename \u8282\u70b9\u670d\u52a1\u54cd\u5e94\u8d85\u65f6\u65f6\u95f4\uff0c\u7528\u4e8e\u5224\u5b9a\u8be5\u8282\u70b9\u662f\u5426\u4e0b\u7ebf\u6216\u5207\u6362\u4e3a\u4ece\u8282\u70b9 cluster-node-timeout milliseconds master\u8fde\u63a5\u7684slave\u6700\u5c0f\u6570\u91cf cluster-migration-barrier min_slave_number Cluster\u8282\u70b9\u64cd\u4f5c\u547d\u4ee4 \u67e5\u770b\u96c6\u7fa4\u8282\u70b9\u4fe1\u606f cluster nodes \u66f4\u6539slave\u6307\u5411\u65b0\u7684master cluster replicate master-id \u53d1\u73b0\u4e00\u4e2a\u65b0\u8282\u70b9\uff0c\u65b0\u589emaster cluster meet ip : port \u5ffd\u7565\u4e00\u4e2a\u6ca1\u6709solt\u7684\u8282\u70b9 cluster forget server_id \u624b\u52a8\u6545\u969c\u8f6c\u79fb cluster failover \u96c6\u7fa4\u64cd\u4f5c\u547d\u4ee4\uff1a \u521b\u5efa\u96c6\u7fa4 redis-cli \u2013-cluster create masterhost1 : masterport1 masterhost2:masterport2 masterhost3:masterport3 [masterhostn:masterportn \u2026] slavehost1:slaveport1 slavehost2:slaveport2 slavehost3:slaveport3 -\u2013cluster-replicas n \u6ce8\u610f\uff1amaster\u4e0eslave\u7684\u6570\u91cf\u8981\u5339\u914d\uff0c\u4e00\u4e2amaster\u5bf9\u5e94n\u4e2aslave\uff0c\u7531\u6700\u540e\u7684\u53c2\u6570n\u51b3\u5b9a master\u4e0eslave\u7684\u5339\u914d\u987a\u5e8f\u4e3a\u7b2c\u4e00\u4e2amaster\u4e0e\u524dn\u4e2aslave\u5206\u4e3a\u4e00\u7ec4\uff0c\u5f62\u6210\u4e3b\u4ece\u7ed3\u6784 \u6dfb\u52a0master\u5230\u5f53\u524d\u96c6\u7fa4\u4e2d\uff0c\u8fde\u63a5\u65f6\u53ef\u4ee5\u6307\u5b9a\u4efb\u610f\u73b0\u6709\u8282\u70b9\u5730\u5740\u4e0e\u7aef\u53e3 redis-cli --cluster add-node new-master-host : new-master-port now-host:now-port \u6dfb\u52a0slave redis-cli --cluster add-node new-slave-host : new-slave-port master-host:master-port --cluster-slave --cluster-master-id masterid \u5220\u9664\u8282\u70b9\uff0c\u5982\u679c\u5220\u9664\u7684\u8282\u70b9\u662fmaster\uff0c\u5fc5\u987b\u4fdd\u969c\u5176\u4e2d\u6ca1\u6709\u69fdslot redis-cli --cluster del-node del-slave-host : del-slave-port del-slave-id \u91cd\u65b0\u5206\u69fd\uff0c\u5206\u69fd\u662f\u4ece\u5177\u6709\u69fd\u7684master\u4e2d\u5212\u5206\u4e00\u90e8\u5206\u7ed9\u5176\u4ed6master\uff0c\u8fc7\u7a0b\u4e2d\u4e0d\u521b\u5efa\u65b0\u7684\u69fd redis-cli --cluster reshard new-master-host : new-master:port --cluster-from src- master-id1, src-master-id2, src-master-idn --cluster-to target-master-id -- cluster-slots slots \u6ce8\u610f\uff1a\u5c06\u9700\u8981\u53c2\u4e0e\u5206\u69fd\u7684\u6240\u6709masterid\u4e0d\u5206\u5148\u540e\u987a\u5e8f\u6dfb\u52a0\u5230\u53c2\u6570\u4e2d\uff0c\u4f7f\u7528\uff0c\u5206\u9694 \u6307\u5b9a\u76ee\u6807\u5f97\u5230\u7684\u69fd\u7684\u6570\u91cf\uff0c\u6240\u6709\u7684\u69fd\u5c06\u5e73\u5747\u4ece\u6bcf\u4e2a\u6765\u6e90\u7684master\u5904\u83b7\u53d6 \u91cd\u65b0\u5206\u914d\u69fd\uff0c\u4ece\u5177\u6709\u69fd\u7684master\u4e2d\u5206\u914d\u6307\u5b9a\u6570\u91cf\u7684\u69fd\u5230\u53e6\u4e00\u4e2amaster\u4e2d\uff0c\u5e38\u7528\u4e8e\u6e05\u7a7a\u6307\u5b9amaster\u4e2d\u7684\u69fd redis-cli --cluster reshard src-master-host : src-master-port --cluster-from src- master-id --cluster-to target-master-id --cluster-slots slots --cluster-yes 5.\u4f01\u4e1a\u7ea7\u89e3\u51b3\u65b9\u6848 \u00b6 5.1 \u7f13\u5b58\u9884\u70ed \u00b6 \u573a\u666f \uff1a\u201c\u5b95\u673a\u201d \u670d\u52a1\u5668\u542f\u52a8\u540e\u8fc5\u901f\u5b95\u673a \u95ee\u9898\u6392\u67e5 \uff1a 1.\u8bf7\u6c42\u6570\u91cf\u8f83\u9ad8\uff0c\u5927\u91cf\u7684\u8bf7\u6c42\u8fc7\u6765\u4e4b\u540e\u90fd\u9700\u8981\u53bb\u4ece\u7f13\u5b58\u4e2d\u83b7\u53d6\u6570\u636e\uff0c\u4f46\u662f\u7f13\u5b58\u4e2d\u53c8\u6ca1\u6709\uff0c\u6b64\u65f6\u4ece\u6570\u636e\u5e93\u4e2d\u67e5\u627e\u6570\u636e\u7136\u540e\u5c06\u6570\u636e\u518d\u5b58\u5165\u7f13\u5b58\uff0c\u9020\u6210\u4e86\u77ed\u671f\u5185\u5bf9redis\u7684\u9ad8\u5f3a\u5ea6\u64cd\u4f5c\u4ece\u800c\u5bfc\u81f4\u95ee\u9898 2.\u4e3b\u4ece\u4e4b\u95f4\u6570\u636e\u541e\u5410\u91cf\u8f83\u5927\uff0c\u6570\u636e\u540c\u6b65\u64cd\u4f5c\u9891\u5ea6\u8f83\u9ad8 \u89e3\u51b3\u65b9\u6848\uff1a \u524d\u7f6e\u51c6\u5907\u5de5\u4f5c\uff1a 1.\u65e5\u5e38\u4f8b\u884c\u7edf\u8ba1\u6570\u636e\u8bbf\u95ee\u8bb0\u5f55\uff0c\u7edf\u8ba1\u8bbf\u95ee\u9891\u5ea6\u8f83\u9ad8\u7684\u70ed\u70b9\u6570\u636e 2.\u5229\u7528LRU\u6570\u636e\u5220\u9664\u7b56\u7565\uff0c\u6784\u5efa\u6570\u636e\u7559\u5b58\u961f\u5217\u4f8b\u5982\uff1astorm\u4e0ekafka\u914d\u5408 \u51c6\u5907\u5de5\u4f5c\uff1a 1.\u5c06\u7edf\u8ba1\u7ed3\u679c\u4e2d\u7684\u6570\u636e\u5206\u7c7b\uff0c\u6839\u636e\u7ea7\u522b\uff0credis\u4f18\u5148\u52a0\u8f7d\u7ea7\u522b\u8f83\u9ad8\u7684\u70ed\u70b9\u6570\u636e 2.\u5229\u7528\u5206\u5e03\u5f0f\u591a\u670d\u52a1\u5668\u540c\u65f6\u8fdb\u884c\u6570\u636e\u8bfb\u53d6\uff0c\u63d0\u901f\u6570\u636e\u52a0\u8f7d\u8fc7\u7a0b 3.\u70ed\u70b9\u6570\u636e\u4e3b\u4ece\u540c\u65f6\u9884\u70ed \u5b9e\u65bd\uff1a 4.\u4f7f\u7528\u811a\u672c\u7a0b\u5e8f\u56fa\u5b9a\u89e6\u53d1\u6570\u636e\u9884\u70ed\u8fc7\u7a0b 5.\u5982\u679c\u6761\u4ef6\u5141\u8bb8\uff0c\u4f7f\u7528\u4e86CDN\uff08\u5185\u5bb9\u5206\u53d1\u7f51\u7edc\uff09\uff0c\u6548\u679c\u4f1a\u66f4\u597d \u603b\u7684\u6765\u8bf4 \uff1a\u7f13\u5b58\u9884\u70ed\u5c31\u662f\u7cfb\u7edf\u542f\u52a8\u524d\uff0c\u63d0\u524d\u5c06\u76f8\u5173\u7684\u7f13\u5b58\u6570\u636e\u76f4\u63a5\u52a0\u8f7d\u5230\u7f13\u5b58\u7cfb\u7edf\u3002\u907f\u514d\u5728\u7528\u6237\u8bf7\u6c42\u7684\u65f6\u5019\uff0c\u5148\u67e5\u8be2\u6570\u636e\u5e93\uff0c\u7136\u540e\u518d\u5c06\u6570\u636e\u7f13\u5b58\u7684\u95ee\u9898\uff01\u7528\u6237\u76f4\u63a5\u67e5\u8be2\u4e8b\u5148\u88ab\u9884\u70ed\u7684\u7f13\u5b58\u6570\u636e\uff01 5.2 \u7f13\u5b58\u96ea\u5d29 \u00b6 \u573a\u666f \uff1a\u6570\u636e\u5e93\u670d\u52a1\u5668\u5d29\u6e83\uff0c\u4e00\u8fde\u4e32\u7684\u573a\u666f\u4f1a\u968f\u4e4b\u513f\u6765 1.\u7cfb\u7edf\u5e73\u7a33\u8fd0\u884c\u8fc7\u7a0b\u4e2d\uff0c\u5ffd\u7136\u6570\u636e\u5e93\u8fde\u63a5\u91cf\u6fc0\u589e 2.\u5e94\u7528\u670d\u52a1\u5668\u65e0\u6cd5\u53ca\u65f6\u5904\u7406\u8bf7\u6c42 3.\u5927\u91cf408\uff0c500\u9519\u8bef\u9875\u9762\u51fa\u73b0 4.\u5ba2\u6237\u53cd\u590d\u5237\u65b0\u9875\u9762\u83b7\u53d6\u6570\u636e 5.\u6570\u636e\u5e93\u5d29\u6e83 6.\u5e94\u7528\u670d\u52a1\u5668\u5d29\u6e83 7.\u91cd\u542f\u5e94\u7528\u670d\u52a1\u5668\u65e0\u6548 8.Redis\u670d\u52a1\u5668\u5d29\u6e83 9.Redis\u96c6\u7fa4\u5d29\u6e83 10.\u91cd\u542f\u6570\u636e\u5e93\u540e\u518d\u6b21\u88ab\u77ac\u95f4\u6d41\u91cf\u653e\u5012 \u95ee\u9898\u6392\u67e5 \uff1a 1.\u5728\u4e00\u4e2a\u8f83\u77ed\u7684\u65f6\u95f4\u5185\uff0c\u7f13\u5b58\u4e2d\u8f83\u591a\u7684key\u96c6\u4e2d\u8fc7\u671f 2.\u6b64\u5468\u671f\u5185\u8bf7\u6c42\u8bbf\u95ee\u8fc7\u671f\u7684\u6570\u636e\uff0credis\u672a\u547d\u4e2d\uff0credis\u5411\u6570\u636e\u5e93\u83b7\u53d6\u6570\u636e 3.\u6570\u636e\u5e93\u540c\u65f6\u63a5\u6536\u5230\u5927\u91cf\u7684\u8bf7\u6c42\u65e0\u6cd5\u53ca\u65f6\u5904\u7406 4.Redis\u5927\u91cf\u8bf7\u6c42\u88ab\u79ef\u538b\uff0c\u5f00\u59cb\u51fa\u73b0\u8d85\u65f6\u73b0\u8c61 5.\u6570\u636e\u5e93\u6d41\u91cf\u6fc0\u589e\uff0c\u6570\u636e\u5e93\u5d29\u6e83 6.\u91cd\u542f\u540e\u4ecd\u7136\u9762\u5bf9\u7f13\u5b58\u4e2d\u65e0\u6570\u636e\u53ef\u7528 7.Redis\u670d\u52a1\u5668\u8d44\u6e90\u88ab\u4e25\u91cd\u5360\u7528\uff0cRedis\u670d\u52a1\u5668\u5d29\u6e83 8.Redis\u96c6\u7fa4\u5448\u73b0\u5d29\u584c\uff0c\u96c6\u7fa4\u74e6\u89e3 9.\u5e94\u7528\u670d\u52a1\u5668\u65e0\u6cd5\u53ca\u65f6\u5f97\u5230\u6570\u636e\u54cd\u5e94\u8bf7\u6c42\uff0c\u6765\u81ea\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u6570\u91cf\u8d8a\u6765\u8d8a\u591a\uff0c\u5e94\u7528\u670d\u52a1\u5668\u5d29\u6e83 10.\u5e94\u7528\u670d\u52a1\u5668\uff0credis\uff0c\u6570\u636e\u5e93\u5168\u90e8\u91cd\u542f\uff0c\u6548\u679c\u4e0d\u7406\u60f3 \u603b\u800c\u8a00\u4e4b\u5c31\u4e24\u70b9\uff1a\u77ed\u65f6\u95f4\u8303\u56f4\u5185\uff0c\u5927\u91cfkey\u96c6\u4e2d\u8fc7\u671f \u89e3\u51b3\u65b9\u6848 \u601d\u8def\uff1a 1.\u66f4\u591a\u7684\u9875\u9762\u9759\u6001\u5316\u5904\u7406 2.\u6784\u5efa\u591a\u7ea7\u7f13\u5b58\u67b6\u6784 Nginx\u7f13\u5b58+redis\u7f13\u5b58+ehcache\u7f13\u5b58 3.\u68c0\u6d4bMysql\u4e25\u91cd\u8017\u65f6\u4e1a\u52a1\u8fdb\u884c\u4f18\u5316 \u5bf9\u6570\u636e\u5e93\u7684\u74f6\u9888\u6392\u67e5\uff1a\u4f8b\u5982\u8d85\u65f6\u67e5\u8be2\u3001\u8017\u65f6\u8f83\u9ad8\u4e8b\u52a1\u7b49 4.\u707e\u96be\u9884\u8b66\u673a\u5236 \u76d1\u63a7redis\u670d\u52a1\u5668\u6027\u80fd\u6307\u6807 CPU\u5360\u7528\u3001CPU\u4f7f\u7528\u7387 \u5185\u5b58\u5bb9\u91cf \u67e5\u8be2\u5e73\u5747\u54cd\u5e94\u65f6\u95f4 \u7ebf\u7a0b\u6570 5.\u9650\u6d41\u3001\u964d\u7ea7 \u77ed\u65f6\u95f4\u8303\u56f4\u5185\u727a\u7272\u4e00\u4e9b\u5ba2\u6237\u4f53\u9a8c\uff0c\u9650\u5236\u4e00\u90e8\u5206\u8bf7\u6c42\u8bbf\u95ee\uff0c\u964d\u4f4e\u5e94\u7528\u670d\u52a1\u5668\u538b\u529b\uff0c\u5f85\u4e1a\u52a1\u4f4e\u901f\u8fd0\u8f6c\u540e\u518d\u9010\u6b65\u653e\u5f00\u8bbf\u95ee \u843d\u5730\u5b9e\u8df5\uff1a 1.LRU\u4e0eLFU\u5207\u6362 2.\u6570\u636e\u6709\u6548\u671f\u7b56\u7565\u8c03\u6574 \u6839\u636e\u4e1a\u52a1\u6570\u636e\u6709\u6548\u671f\u8fdb\u884c\u5206\u7c7b\u9519\u5cf0\uff0cA\u7c7b90\u5206\u949f\uff0cB\u7c7b80\u5206\u949f\uff0cC\u7c7b70\u5206\u949f \u8fc7\u671f\u65f6\u95f4\u4f7f\u7528\u56fa\u5b9a\u65f6\u95f4+\u968f\u673a\u503c\u7684\u5f62\u5f0f\uff0c\u7a00\u91ca\u96c6\u4e2d\u5230\u671f\u7684key\u7684\u6570\u91cf 3.\u8d85\u70ed\u6570\u636e\u4f7f\u7528\u6c38\u4e45key 4.\u5b9a\u671f\u7ef4\u62a4\uff08\u81ea\u52a8+\u4eba\u5de5\uff09 \u5bf9\u5373\u5c06\u8fc7\u671f\u6570\u636e\u505a\u8bbf\u95ee\u91cf\u5206\u6790\uff0c\u786e\u8ba4\u662f\u5426\u5ef6\u65f6\uff0c\u914d\u5408\u8bbf\u95ee\u91cf\u7edf\u8ba1\uff0c\u505a\u70ed\u70b9\u6570\u636e\u7684\u5ef6\u65f6 5.\u52a0\u9501\uff1a\u614e\u7528\uff01 \u603b\u7684\u6765\u8bf4 \uff1a\u7f13\u5b58\u96ea\u5d29\u5c31\u662f\u77ac\u95f4\u8fc7\u671f\u6570\u636e\u91cf\u592a\u5927\uff0c\u5bfc\u81f4\u5bf9\u6570\u636e\u5e93\u670d\u52a1\u5668\u9020\u6210\u538b\u529b\u3002\u5982\u80fd\u591f\u6709\u6548\u907f\u514d\u8fc7\u671f\u65f6\u95f4\u96c6\u4e2d\uff0c\u53ef\u4ee5\u6709\u6548\u89e3\u51b3\u96ea\u5d29\u73b0\u8c61\u7684 \u51fa\u73b0\uff08\u7ea640%\uff09\uff0c\u914d\u5408\u5176\u4ed6\u7b56\u7565\u4e00\u8d77\u4f7f\u7528\uff0c\u5e76\u76d1\u63a7\u670d\u52a1\u5668\u7684\u8fd0\u884c\u6570\u636e\uff0c\u6839\u636e\u8fd0\u884c\u8bb0\u5f55\u505a\u5feb\u901f\u8c03\u6574\u3002 5.3 \u7f13\u5b58\u51fb\u7a7f \u00b6 \u573a\u666f \uff1a\u8fd8\u662f\u6570\u636e\u5e93\u670d\u52a1\u5668\u5d29\u6e83\uff0c\u4f46\u662f\u8ddf\u4e4b\u524d\u7684\u573a\u666f\u6709\u70b9\u4e0d\u592a\u4e00\u6837 1.\u7cfb\u7edf\u5e73\u7a33\u8fd0\u884c\u8fc7\u7a0b\u4e2d 2.\u6570\u636e\u5e93\u8fde\u63a5\u91cf\u77ac\u95f4\u6fc0\u589e 3.Redis\u670d\u52a1\u5668\u65e0\u5927\u91cfkey\u8fc7\u671f 4.Redis\u5185\u5b58\u5e73\u7a33\uff0c\u65e0\u6ce2\u52a8 5.Redis\u670d\u52a1\u5668CPU\u6b63\u5e38 6.\u6570\u636e\u5e93\u5d29\u6e83 \u95ee\u9898\u6392\u67e5\uff1a 1.Redis\u4e2d\u67d0\u4e2akey\u8fc7\u671f\uff0c\u8be5key\u8bbf\u95ee\u91cf\u5de8\u5927 2.\u591a\u4e2a\u6570\u636e\u8bf7\u6c42\u4ece\u670d\u52a1\u5668\u76f4\u63a5\u538b\u5230Redis\u540e\uff0c\u5747\u672a\u547d\u4e2d 3.Redis\u5728\u77ed\u65f6\u95f4\u5185\u53d1\u8d77\u4e86\u5927\u91cf\u5bf9\u6570\u636e\u5e93\u4e2d\u540c\u4e00\u6570\u636e\u7684\u8bbf\u95ee \u603b\u800c\u8a00\u4e4b\u5c31\u4e24\u70b9\uff1a\u5355\u4e2akey\u9ad8\u70ed\u6570\u636e\uff0ckey\u8fc7\u671f \u89e3\u51b3\u65b9\u6848 \uff1a 1.\u9884\u5148\u8bbe\u5b9a \u4ee5\u7535\u5546\u4e3a\u4f8b\uff0c\u6bcf\u4e2a\u5546\u5bb6\u6839\u636e\u5e97\u94fa\u7b49\u7ea7\uff0c\u6307\u5b9a\u82e5\u5e72\u6b3e\u4e3b\u6253\u5546\u54c1\uff0c\u5728\u8d2d\u7269\u8282\u671f\u95f4\uff0c\u52a0\u5927\u6b64\u7c7b\u4fe1\u606fkey\u7684\u8fc7\u671f\u65f6\u957f \u6ce8\u610f\uff1a\u8d2d\u7269\u8282\u4e0d\u4ec5\u4ec5\u6307\u5f53\u5929\uff0c\u4ee5\u53ca\u540e\u7eed\u82e5\u5e72\u5929\uff0c\u8bbf\u95ee\u5cf0\u503c\u5448\u73b0\u9010\u6e10\u964d\u4f4e\u7684\u8d8b\u52bf 2.\u73b0\u573a\u8c03\u6574 \u76d1\u63a7\u8bbf\u95ee\u91cf\uff0c\u5bf9\u81ea\u7136\u6d41\u91cf\u6fc0\u589e\u7684\u6570\u636e\u5ef6\u957f\u8fc7\u671f\u65f6\u95f4\u6216\u8bbe\u7f6e\u4e3a\u6c38\u4e45\u6027key 3.\u540e\u53f0\u5237\u65b0\u6570\u636e \u542f\u52a8\u5b9a\u65f6\u4efb\u52a1\uff0c\u9ad8\u5cf0\u671f\u6765\u4e34\u4e4b\u524d\uff0c\u5237\u65b0\u6570\u636e\u6709\u6548\u671f\uff0c\u786e\u4fdd\u4e0d\u4e22\u5931 4.\u4e8c\u7ea7\u7f13\u5b58 \u8bbe\u7f6e\u4e0d\u540c\u7684\u5931\u6548\u65f6\u95f4\uff0c\u4fdd\u969c\u4e0d\u4f1a\u88ab\u540c\u65f6\u6dd8\u6c70\u5c31\u884c 5.\u52a0\u9501 \u5206\u5e03\u5f0f\u9501\uff0c\u9632\u6b62\u88ab\u51fb\u7a7f\uff0c\u4f46\u662f\u8981\u6ce8\u610f\u4e5f\u662f\u6027\u80fd\u74f6\u9888\uff0c\u614e\u91cd\uff01 \u603b\u7684\u6765\u8bf4 \uff1a\u7f13\u5b58\u51fb\u7a7f\u5c31\u662f\u5355\u4e2a\u9ad8\u70ed\u6570\u636e\u8fc7\u671f\u7684\u77ac\u95f4\uff0c\u6570\u636e\u8bbf\u95ee\u91cf\u8f83\u5927\uff0c\u672a\u547d\u4e2dredis\u540e\uff0c\u53d1\u8d77\u4e86\u5927\u91cf\u5bf9\u540c\u4e00\u6570\u636e\u7684\u6570\u636e\u5e93\u8bbf\u95ee\uff0c\u5bfc\u81f4\u5bf9\u6570 \u636e\u5e93\u670d\u52a1\u5668\u9020\u6210\u538b\u529b\u3002\u5e94\u5bf9\u7b56\u7565\u5e94\u8be5\u5728\u4e1a\u52a1\u6570\u636e\u5206\u6790\u4e0e\u9884\u9632\u65b9\u9762\u8fdb\u884c\uff0c\u914d\u5408\u8fd0\u884c\u76d1\u63a7\u6d4b\u8bd5\u4e0e\u5373\u65f6\u8c03\u6574\u7b56\u7565\uff0c\u6bd5\u7adf\u5355\u4e2akey\u7684\u8fc7 \u671f\u76d1\u63a7\u96be\u5ea6\u8f83\u9ad8\uff0c\u914d\u5408\u96ea\u5d29\u5904\u7406\u7b56\u7565\u5373\u53ef\u3002 5.4 \u7f13\u5b58\u7a7f\u900f \u00b6 \u573a\u666f \uff1a\u6570\u636e\u5e93\u670d\u52a1\u5668\u53c8\u5d29\u6e83\u4e86\uff0c\u8ddf\u4e4b\u524d\u7684\u4e00\u6837\u5417\uff1f 1.\u7cfb\u7edf\u5e73\u7a33\u8fd0\u884c\u8fc7\u7a0b\u4e2d 2.\u5e94\u7528\u670d\u52a1\u5668\u6d41\u91cf\u968f\u65f6\u95f4\u589e\u91cf\u8f83\u5927 3.Redis\u670d\u52a1\u5668\u547d\u4e2d\u7387\u968f\u65f6\u95f4\u9010\u6b65\u964d\u4f4e 4.Redis\u5185\u5b58\u5e73\u7a33\uff0c\u5185\u5b58\u65e0\u538b\u529b 5.Redis\u670d\u52a1\u5668CPU\u5360\u7528\u6fc0\u589e 6.\u6570\u636e\u5e93\u670d\u52a1\u5668\u538b\u529b\u6fc0\u589e 7.\u6570\u636e\u5e93\u5d29\u6e83 \u95ee\u9898\u6392\u67e5\uff1a 1.Redis\u4e2d\u5927\u9762\u79ef\u51fa\u73b0\u672a\u547d\u4e2d 2.\u51fa\u73b0\u975e\u6b63\u5e38URL\u8bbf\u95ee \u95ee\u9898\u5206\u6790 \uff1a \u83b7\u53d6\u7684\u6570\u636e\u5728\u6570\u636e\u5e93\u4e2d\u4e5f\u4e0d\u5b58\u5728\uff0c\u6570\u636e\u5e93\u67e5\u8be2\u672a\u5f97\u5230\u5bf9\u5e94\u6570\u636e Redis\u83b7\u53d6\u5230null\u6570\u636e\u672a\u8fdb\u884c\u6301\u4e45\u5316\uff0c\u76f4\u63a5\u8fd4\u56de \u4e0b\u6b21\u6b64\u7c7b\u6570\u636e\u5230\u8fbe\u91cd\u590d\u4e0a\u8ff0\u8fc7\u7a0b \u51fa\u73b0\u9ed1\u5ba2\u653b\u51fb\u670d\u52a1\u5668 \u89e3\u51b3\u65b9\u6848 \uff1a 1.\u7f13\u5b58null \u5bf9\u67e5\u8be2\u7ed3\u679c\u4e3anull\u7684\u6570\u636e\u8fdb\u884c\u7f13\u5b58\uff08\u957f\u671f\u4f7f\u7528\uff0c\u5b9a\u671f\u6e05\u7406\uff09\uff0c\u8bbe\u5b9a\u77ed\u65f6\u9650\uff0c\u4f8b\u598230-60\u79d2\uff0c\u6700\u9ad85\u5206\u949f 2.\u767d\u540d\u5355\u7b56\u7565 \u63d0\u524d\u9884\u70ed\u5404\u79cd\u5206\u7c7b\u6570\u636eid\u5bf9\u5e94\u7684bitmaps\uff0cid\u4f5c\u4e3abitmaps\u7684offset\uff0c\u76f8\u5f53\u4e8e\u8bbe\u7f6e\u4e86\u6570\u636e\u767d\u540d\u5355\u3002\u5f53\u52a0\u8f7d\u6b63\u5e38\u6570\u636e\u65f6\u653e\u884c\uff0c\u52a0\u8f7d\u5f02\u5e38\u6570\u636e\u65f6\u76f4\u63a5\u62e6\u622a\uff08\u6548\u7387\u504f\u4f4e\uff09 \u4f7f\u7528\u5e03\u9686\u8fc7\u6ee4\u5668\uff08\u6709\u5173\u5e03\u9686\u8fc7\u6ee4\u5668\u7684\u547d\u4e2d\u95ee\u9898\u5bf9\u5f53\u524d\u72b6\u51b5\u53ef\u4ee5\u5ffd\u7565\uff09 2.\u5b9e\u65bd\u76d1\u63a7 \u5b9e\u65f6\u76d1\u63a7redis\u547d\u4e2d\u7387\uff08\u4e1a\u52a1\u6b63\u5e38\u8303\u56f4\u65f6\uff0c\u901a\u5e38\u4f1a\u6709\u4e00\u4e2a\u6ce2\u52a8\u503c\uff09\u4e0enull\u6570\u636e\u7684\u5360\u6bd4 \u975e\u6d3b\u52a8\u65f6\u6bb5\u6ce2\u52a8\uff1a\u901a\u5e38\u68c0\u6d4b3-5\u500d\uff0c\u8d85\u8fc75\u500d\u7eb3\u5165\u91cd\u70b9\u6392\u67e5\u5bf9\u8c61 \u6d3b\u52a8\u65f6\u6bb5\u6ce2\u52a8\uff1a\u901a\u5e38\u68c0\u6d4b10-50\u500d\uff0c\u8d85\u8fc750\u500d\u7eb3\u5165\u91cd\u70b9\u6392\u67e5\u5bf9\u8c61 \u6839\u636e\u500d\u6570\u4e0d\u540c\uff0c\u542f\u52a8\u4e0d\u540c\u7684\u6392\u67e5\u6d41\u7a0b\u3002\u7136\u540e\u4f7f\u7528\u9ed1\u540d\u5355\u8fdb\u884c\u9632\u63a7\uff08\u8fd0\u8425\uff09 4.key\u52a0\u5bc6 \u95ee\u9898\u51fa\u73b0\u540e\uff0c\u4e34\u65f6\u542f\u52a8\u9632\u707e\u4e1a\u52a1key\uff0c\u5bf9key\u8fdb\u884c\u4e1a\u52a1\u5c42\u4f20\u8f93\u52a0\u5bc6\u670d\u52a1\uff0c\u8bbe\u5b9a\u6821\u9a8c\u7a0b\u5e8f\uff0c\u8fc7\u6765\u7684key\u6821\u9a8c \u4f8b\u5982\u6bcf\u5929\u968f\u673a\u5206\u914d60\u4e2a\u52a0\u5bc6\u4e32\uff0c\u6311\u90092\u52303\u4e2a\uff0c\u6df7\u6dc6\u5230\u9875\u9762\u6570\u636eid\u4e2d\uff0c\u53d1\u73b0\u8bbf\u95eekey\u4e0d\u6ee1\u8db3\u89c4\u5219\uff0c\u9a73\u56de\u6570\u636e\u8bbf\u95ee \u603b\u7684\u6765\u8bf4 \uff1a\u7f13\u5b58\u51fb\u7a7f\u662f\u6307\u8bbf\u95ee\u4e86\u4e0d\u5b58\u5728\u7684\u6570\u636e\uff0c\u8df3\u8fc7\u4e86\u5408\u6cd5\u6570\u636e\u7684redis\u6570\u636e\u7f13\u5b58\u9636\u6bb5\uff0c\u6bcf\u6b21\u8bbf\u95ee\u6570\u636e\u5e93\uff0c\u5bfc\u81f4\u5bf9\u6570\u636e\u5e93\u670d\u52a1\u5668\u9020\u6210\u538b\u529b\u3002\u901a\u5e38\u6b64\u7c7b\u6570\u636e\u7684\u51fa\u73b0\u91cf\u662f\u4e00\u4e2a\u8f83\u4f4e\u7684\u503c\uff0c\u5f53\u51fa\u73b0\u6b64\u7c7b\u60c5\u51b5\u4ee5\u6bd2\u653b\u6bd2\uff0c\u5e76\u53ca\u65f6\u62a5\u8b66\u3002\u5e94\u5bf9\u7b56\u7565\u5e94\u8be5\u5728\u4e34\u65f6\u9884\u6848\u9632\u8303\u65b9\u9762\u591a\u505a\u6587\u7ae0\u3002 \u65e0\u8bba\u662f\u9ed1\u540d\u5355\u8fd8\u662f\u767d\u540d\u5355\uff0c\u90fd\u662f\u5bf9\u6574\u4f53\u7cfb\u7edf\u7684\u538b\u529b\uff0c\u8b66\u62a5\u89e3\u9664\u540e\u5c3d\u5feb\u79fb\u9664\u3002 5.5 \u6027\u80fd\u6307\u6807\u76d1\u63a7 \u00b6 redis\u4e2d\u7684\u76d1\u63a7\u6307\u6807\u5982\u4e0b\uff1a \u6027\u80fd\u6307\u6807\uff1aPerformance \u54cd\u5e94\u8bf7\u6c42\u7684\u5e73\u5747\u65f6\u95f4: properties latency \u5e73\u5747\u6bcf\u79d2\u5904\u7406\u8bf7\u6c42\u603b\u6570 properties instantaneous_ops_per_sec \u7f13\u5b58\u67e5\u8be2\u547d\u4e2d\u7387\uff08\u901a\u8fc7\u67e5\u8be2\u603b\u6b21\u6570\u4e0e\u67e5\u8be2\u5f97\u5230\u975enil\u6570\u636e\u603b\u6b21\u6570\u8ba1\u7b97\u800c\u6765\uff09 ```properties hit_rate(calculated) ``` \u5185\u5b58\u6307\u6807\uff1aMemory \u5f53\u524d\u5185\u5b58\u4f7f\u7528\u91cf properties used_memory \u5185\u5b58\u788e\u7247\u7387\uff08\u5173\u7cfb\u5230\u662f\u5426\u8fdb\u884c\u788e\u7247\u6574\u7406\uff09 properties mem_fragmentation_ratio \u4e3a\u907f\u514d\u5185\u5b58\u6ea2\u51fa\u5220\u9664\u7684key\u7684\u603b\u6570\u91cf properties evicted_keys \u57fa\u4e8e\u963b\u585e\u64cd\u4f5c\uff08BLPOP\u7b49\uff09\u5f71\u54cd\u7684\u5ba2\u6237\u7aef\u6570\u91cf properties blocked_clients \u57fa\u672c\u6d3b\u52a8\u6307\u6807\uff1aBasic_activity \u5f53\u524d\u5ba2\u6237\u7aef\u8fde\u63a5\u603b\u6570 properties connected_clients \u5f53\u524d\u8fde\u63a5slave\u603b\u6570 properties connected_slaves \u6700\u540e\u4e00\u6b21\u4e3b\u4ece\u4fe1\u606f\u4ea4\u6362\u8ddd\u73b0\u5728\u7684\u79d2 properties master_last_io_seconds_ago key\u7684\u603b\u6570 properties keyspace \u6301\u4e45\u6027\u6307\u6807\uff1aPersistence \u5f53\u524d\u670d\u52a1\u5668\u6700\u540e\u4e00\u6b21RDB\u6301\u4e45\u5316\u7684\u65f6\u95f4 properties rdb_last_save_time \u5f53\u524d\u670d\u52a1\u5668\u6700\u540e\u4e00\u6b21RDB\u6301\u4e45\u5316\u540e\u6570\u636e\u53d8\u5316\u603b\u91cf properties rdb_changes_since_last_save \u9519\u8bef\u6307\u6807\uff1aError \u88ab\u62d2\u7edd\u8fde\u63a5\u7684\u5ba2\u6237\u7aef\u603b\u6570\uff08\u57fa\u4e8e\u8fbe\u5230\u6700\u5927\u8fde\u63a5\u503c\u7684\u56e0\u7d20\uff09 properties rejected_connections key\u672a\u547d\u4e2d\u7684\u603b\u6b21\u6570 properties keyspace_misses \u4e3b\u4ece\u65ad\u5f00\u7684\u79d2\u6570 properties master_link_down_since_seconds \u8981\u5bf9redis\u7684\u76f8\u5173\u6307\u6807\u8fdb\u884c\u76d1\u63a7\uff0c\u6211\u4eec\u53ef\u4ee5\u91c7\u7528\u4e00\u4e9b\u7528\u5177\uff1a CloudInsight Redis Prometheus Redis-stat Redis-faina RedisLive zabbix \u4e5f\u6709\u4e00\u4e9b\u547d\u4ee4\u5de5\u5177\uff1a benchmark \u6d4b\u8bd5\u5f53\u524d\u670d\u52a1\u5668\u7684\u5e76\u53d1\u6027\u80fd properties redis-benchmark [-h ] [-p ] [-c ] [-n <requests]> [-k ] \u8303\u4f8b1\uff1a50\u4e2a\u8fde\u63a5\uff0c10000\u6b21\u8bf7\u6c42\u5bf9\u5e94\u7684\u6027\u80fd properties redis-benchmark \u8303\u4f8b2\uff1a100\u4e2a\u8fde\u63a5\uff0c5000\u6b21\u8bf7\u6c42\u5bf9\u5e94\u7684\u6027\u80fd properties redis-benchmark -c 100 -n 5000 redis-cli monitor\uff1a\u542f\u52a8\u670d\u52a1\u5668\u8c03\u8bd5\u4fe1\u606f properties monitor slowlog\uff1a\u6162\u65e5\u5fd7 \u83b7\u53d6\u6162\u67e5\u8be2\u65e5\u5fd7 properties slowlog [operator] get \uff1a\u83b7\u53d6\u6162\u67e5\u8be2\u65e5\u5fd7\u4fe1\u606f len \uff1a\u83b7\u53d6\u6162\u67e5\u8be2\u65e5\u5fd7\u6761\u76ee\u6570 reset \uff1a\u91cd\u7f6e\u6162\u67e5\u8be2\u65e5\u5fd7 \u76f8\u5173\u914d\u7f6e properties slowlog-log-slower-than 1000 #\u8bbe\u7f6e\u6162\u67e5\u8be2\u7684\u65f6\u95f4\u4e0b\u7ebf\uff0c\u5355\u4f4d\uff1a\u5fae\u5999 slowlog-max-len 100 #\u8bbe\u7f6e\u6162\u67e5\u8be2\u547d\u4ee4\u5bf9\u5e94\u7684\u65e5\u5fd7\u663e\u793a\u957f\u5ea6\uff0c\u5355\u4f4d\uff1a\u547d\u4ee4\u6570","title":"day02"},{"location":"redis/day02/#_1","text":"\u76ee\u68071\uff1a\u80fd\u591f\u8bf4\u51faredis\u4e2d\u7684\u6570\u636e\u5220\u9664\u7b56\u4e0e\u7565\u6dd8\u6c70\u7b56\u7565 \u76ee\u68072\uff1a\u80fd\u591f\u8bf4\u51fa\u4e3b\u4ece\u590d\u5236\u7684\u6982\u5ff5\uff0c\u5de5\u4f5c\u6d41\u7a0b\u4ee5\u53ca\u573a\u666f\u95ee\u9898\u53ca\u89e3\u51b3\u65b9\u6848 \u76ee\u68073\uff1a\u80fd\u591f\u8bf4\u51fa\u54e8\u5175\u7684\u4f5c\u7528\u4ee5\u53ca\u5de5\u4f5c\u539f\u7406\uff0c\u4ee5\u53ca\u5982\u4f55\u542f\u7528\u54e8\u5175 \u76ee\u68074\uff1a\u80fd\u591f\u8bf4\u51fa\u96c6\u7fa4\u7684\u67b6\u6784\u8bbe\u8ba1\uff0c\u5b8c\u6210\u96c6\u7fa4\u7684\u642d\u5efa \u76ee\u68075\uff1a\u80fd\u591f\u8bf4\u51fa\u7f13\u5b58\u9884\u70ed\uff0c\u96ea\u5d29\uff0c\u51fb\u7a7f\uff0c\u7a7f\u900f\u7684\u6982\u5ff5\uff0c\u80fd\u8bf4\u51faredis\u7684\u76f8\u5173\u76d1\u63a7\u6307\u6807","title":"\u5b66\u4e60\u76ee\u6807"},{"location":"redis/day02/#1","text":"","title":"1.\u6570\u636e\u5220\u9664\u4e0e\u6dd8\u6c70\u7b56\u7565"},{"location":"redis/day02/#11","text":"","title":"1.1 \u8fc7\u671f\u6570\u636e"},{"location":"redis/day02/#111_redis","text":"Redis\u662f\u4e00\u79cd\u5185\u5b58\u7ea7\u6570\u636e\u5e93\uff0c\u6240\u6709\u6570\u636e\u5747\u5b58\u653e\u5728\u5185\u5b58\u4e2d\uff0c\u5185\u5b58\u4e2d\u7684\u6570\u636e\u53ef\u4ee5\u901a\u8fc7TTL\u6307\u4ee4\u83b7\u53d6\u5176\u72b6\u6001 TTL\u8fd4\u56de\u7684\u503c\u6709\u4e09\u79cd\u60c5\u51b5\uff1a\u6b63\u6570\uff0c-1\uff0c-2 \u6b63\u6570 \uff1a\u4ee3\u8868\u8be5\u6570\u636e\u5728\u5185\u5b58\u4e2d\u8fd8\u80fd\u5b58\u6d3b\u7684\u65f6\u95f4 -1 \uff1a\u6c38\u4e45\u6709\u6548\u7684\u6570\u636e 2 \uff1a\u5df2\u7ecf\u8fc7\u671f\u7684\u6570\u636e \u6216\u88ab\u5220\u9664\u7684\u6570\u636e \u6216 \u672a\u5b9a\u4e49\u7684\u6570\u636e \u5220\u9664\u7b56\u7565\u5c31\u662f\u9488\u5bf9\u5df2\u8fc7\u671f\u6570\u636e\u7684\u5904\u7406\u7b56\u7565 \uff0c\u5df2\u8fc7\u671f\u7684\u6570\u636e\u662f\u771f\u7684\u5c31\u7acb\u5373\u5220\u9664\u4e86\u5417\uff1f\u5176\u5b9e\u4e5f\u4e0d\u662f\uff0c\u6211\u4eec\u4f1a\u6709\u591a\u79cd\u5220\u9664\u7b56\u7565\uff0c\u662f\u5206\u60c5\u51b5\u7684\uff0c\u5728\u4e0d\u540c\u7684\u573a\u666f\u4e0b\u4f7f\u7528\u4e0d\u540c\u7684\u5220\u9664\u65b9\u5f0f\u4f1a\u6709\u4e0d\u540c\u6548\u679c\uff0c\u8fd9\u4e5f\u6b63\u662f\u6211\u4eec\u8981\u5c06\u7684\u6570\u636e\u7684\u5220\u9664\u7b56\u7565\u7684\u95ee\u9898","title":"1.1.1 Redis\u4e2d\u7684\u6570\u636e\u7279\u5f81"},{"location":"redis/day02/#112","text":"\u5728Redis\u4e2d\uff0c\u5982\u4f55\u7ed9\u6570\u636e\u8bbe\u7f6e\u5b83\u7684\u5931\u6548\u5468\u671f\u5462\uff1f\u6570\u636e\u7684\u65f6\u6548\u5728redis\u4e2d\u5982\u4f55\u5b58\u50a8\u5462\uff1f \u8fc7\u671f\u6570\u636e\u662f\u4e00\u5757\u72ec\u7acb\u7684\u5b58\u50a8\u7a7a\u95f4\uff0cHash\u7ed3\u6784\uff0cfield\u662f\u5185\u5b58\u5730\u5740\uff0cvalue\u662f\u8fc7\u671f\u65f6\u95f4\uff0c\u4fdd\u5b58\u4e86\u6240\u6709key\u7684\u8fc7\u671f\u63cf\u8ff0\uff0c\u5728\u6700\u7ec8\u8fdb\u884c\u8fc7\u671f\u5904\u7406\u7684\u65f6\u5019\uff0c\u5bf9\u8be5\u7a7a\u95f4\u7684\u6570\u636e\u8fdb\u884c\u68c0\u6d4b\uff0c \u5f53\u65f6\u95f4\u5230\u671f\u4e4b\u540e\u901a\u8fc7field\u627e\u5230\u5185\u5b58\u8be5\u5730\u5740\u5904\u7684\u6570\u636e\uff0c\u7136\u540e\u8fdb\u884c\u76f8\u5173\u64cd\u4f5c\u3002","title":"1.1.2 \u65f6\u6548\u6027\u6570\u636e\u7684\u5b58\u50a8\u7ed3\u6784"},{"location":"redis/day02/#12","text":"","title":"1.2 \u6570\u636e\u5220\u9664\u7b56\u7565"},{"location":"redis/day02/#121","text":"\u5728\u5185\u5b58\u5360\u7528\u4e0eCPU\u5360\u7528\u4e4b\u95f4\u5bfb\u627e\u4e00\u79cd\u5e73\u8861\uff0c\u987e\u6b64\u5931\u5f7c\u90fd\u4f1a\u9020\u6210\u6574\u4f53redis\u6027\u80fd\u7684\u4e0b\u964d\uff0c\u751a\u81f3\u5f15\u53d1\u670d\u52a1\u5668\u5b95\u673a\u6216 \u5185\u5b58\u6cc4\u9732 \u9488\u5bf9\u8fc7\u671f\u6570\u636e\u8981\u8fdb\u884c\u5220\u9664\u7684\u65f6\u5019\u90fd\u6709\u54ea\u4e9b\u5220\u9664\u7b56\u7565\u5462\uff1f 1.\u5b9a\u65f6\u5220\u9664 2.\u60f0\u6027\u5220\u9664 3.\u5b9a\u671f\u5220\u9664","title":"1.2.1 \u6570\u636e\u5220\u9664\u7b56\u7565\u7684\u76ee\u6807"},{"location":"redis/day02/#122","text":"\u521b\u5efa\u4e00\u4e2a\u5b9a\u65f6\u5668\uff0c\u5f53key\u8bbe\u7f6e\u6709\u8fc7\u671f\u65f6\u95f4\uff0c\u4e14\u8fc7\u671f\u65f6\u95f4\u5230\u8fbe\u65f6\uff0c\u7531\u5b9a\u65f6\u5668\u4efb\u52a1\u7acb\u5373\u6267\u884c\u5bf9\u952e\u7684\u5220\u9664\u64cd\u4f5c \u4f18\u70b9 \uff1a\u8282\u7ea6\u5185\u5b58\uff0c\u5230\u65f6\u5c31\u5220\u9664\uff0c\u5feb\u901f\u91ca\u653e\u6389\u4e0d\u5fc5\u8981\u7684\u5185\u5b58\u5360\u7528 \u7f3a\u70b9 \uff1aCPU\u538b\u529b\u5f88\u5927\uff0c\u65e0\u8bbaCPU\u6b64\u65f6\u8d1f\u8f7d\u91cf\u591a\u9ad8\uff0c\u5747\u5360\u7528CPU\uff0c\u4f1a\u5f71\u54cdredis\u670d\u52a1\u5668\u54cd\u5e94\u65f6\u95f4\u548c\u6307\u4ee4\u541e\u5410\u91cf \u603b\u7ed3 \uff1a\u7528\u5904\u7406\u5668\u6027\u80fd\u6362\u53d6\u5b58\u50a8\u7a7a\u95f4\uff08\u62ff\u65f6\u95f4\u6362\u7a7a\u95f4\uff09","title":"1.2.2 \u5b9a\u65f6\u5220\u9664"},{"location":"redis/day02/#123","text":"\u6570\u636e\u5230\u8fbe\u8fc7\u671f\u65f6\u95f4\uff0c\u4e0d\u505a\u5904\u7406\u3002\u7b49\u4e0b\u6b21\u8bbf\u95ee\u8be5\u6570\u636e\u65f6\uff0c\u6211\u4eec\u9700\u8981\u5224\u65ad \u5982\u679c\u672a\u8fc7\u671f\uff0c\u8fd4\u56de\u6570\u636e \u53d1\u73b0\u5df2\u8fc7\u671f\uff0c\u5220\u9664\uff0c\u8fd4\u56de\u4e0d\u5b58\u5728 \u4f18\u70b9 \uff1a\u8282\u7ea6CPU\u6027\u80fd\uff0c\u53d1\u73b0\u5fc5\u987b\u5220\u9664\u7684\u65f6\u5019\u624d\u5220\u9664 \u7f3a\u70b9 \uff1a\u5185\u5b58\u538b\u529b\u5f88\u5927\uff0c\u51fa\u73b0\u957f\u671f\u5360\u7528\u5185\u5b58\u7684\u6570\u636e \u603b\u7ed3 \uff1a\u7528\u5b58\u50a8\u7a7a\u95f4\u6362\u53d6\u5904\u7406\u5668\u6027\u80fd\uff08\u62ff\u65f6\u95f4\u6362\u7a7a\u95f4\uff09","title":"1.2.3 \u60f0\u6027\u5220\u9664"},{"location":"redis/day02/#124","text":"\u5b9a\u65f6\u5220\u9664\u548c\u60f0\u6027\u5220\u9664\u8fd9\u4e24\u79cd\u65b9\u6848\u90fd\u662f\u8d70\u7684\u6781\u7aef\uff0c\u90a3\u6709\u6ca1\u6709\u6298\u4e2d\u65b9\u6848\uff1f \u6211\u4eec\u6765\u8bb2redis\u7684\u5b9a\u671f\u5220\u9664\u65b9\u6848\uff1a Redis\u542f\u52a8\u670d\u52a1\u5668\u521d\u59cb\u5316\u65f6\uff0c\u8bfb\u53d6\u914d\u7f6eserver.hz\u7684\u503c\uff0c\u9ed8\u8ba4\u4e3a10 \u6bcf\u79d2\u949f\u6267\u884cserver.hz\u6b21 serverCron() --------> databasesCron() ---------> activeExpireCycle() activeExpireCycle() \u5bf9\u6bcf\u4e2aexpires[*]\u9010\u4e00\u8fdb\u884c\u68c0\u6d4b\uff0c\u6bcf\u6b21\u6267\u884c\u8017\u65f6\uff1a250ms/server.hz \u5bf9\u67d0\u4e2aexpires[*]\u68c0\u6d4b\u65f6\uff0c\u968f\u673a\u6311\u9009W\u4e2akey\u68c0\u6d4b \u5982\u679ckey\u8d85\u65f6\uff0c\u5220\u9664key \u5982\u679c\u4e00\u8f6e\u4e2d\u5220\u9664\u7684key\u7684\u6570\u91cf>W*25%\uff0c\u5faa\u73af\u8be5\u8fc7\u7a0b \u5982\u679c\u4e00\u8f6e\u4e2d\u5220\u9664\u7684key\u7684\u6570\u91cf\u2264W*25%\uff0c\u68c0\u67e5\u4e0b\u4e00\u4e2aexpires[*]\uff0c0-15\u5faa\u73af W\u53d6\u503c=ACTIVE_EXPIRE_CYCLE_LOOKUPS_PER_LOOP\u5c5e\u6027\u503c \u53c2\u6570current_db\u7528\u4e8e\u8bb0\u5f55 activeExpireCycle() \u8fdb\u5165\u54ea\u4e2aexpires[*] \u6267\u884c \u5982\u679cactiveExpireCycle()\u6267\u884c\u65f6\u95f4\u5230\u671f\uff0c\u4e0b\u6b21\u4ececurrent_db\u7ee7\u7eed\u5411\u4e0b\u6267\u884c \u603b\u7684\u6765\u8bf4\uff1a\u5b9a\u671f\u5220\u9664\u5c31\u662f\u5468\u671f\u6027\u8f6e\u8be2redis\u5e93\u4e2d\u7684\u65f6\u6548\u6027\u6570\u636e\uff0c\u91c7\u7528\u968f\u673a\u62bd\u53d6\u7684\u7b56\u7565\uff0c\u5229\u7528\u8fc7\u671f\u6570\u636e\u5360\u6bd4\u7684\u65b9\u5f0f\u63a7\u5236\u5220\u9664\u9891\u5ea6 \u7279\u70b91 \uff1aCPU\u6027\u80fd\u5360\u7528\u8bbe\u7f6e\u6709\u5cf0\u503c\uff0c\u68c0\u6d4b\u9891\u5ea6\u53ef\u81ea\u5b9a\u4e49\u8bbe\u7f6e \u7279\u70b92 \uff1a\u5185\u5b58\u538b\u529b\u4e0d\u662f\u5f88\u5927\uff0c\u957f\u671f\u5360\u7528\u5185\u5b58\u7684\u51b7\u6570\u636e\u4f1a\u88ab\u6301\u7eed\u6e05\u7406 \u603b\u7ed3 \uff1a\u5468\u671f\u6027\u62bd\u67e5\u5b58\u50a8\u7a7a\u95f4\uff08\u968f\u673a\u62bd\u67e5\uff0c\u91cd\u70b9\u62bd\u67e5\uff09","title":"1.2.4 \u5b9a\u671f\u5220\u9664"},{"location":"redis/day02/#125","text":"1\uff1a\u5b9a\u65f6\u5220\u9664\uff1a \u8282\u7ea6\u5185\u5b58\uff0c\u65e0\u5360\u7528, \u4e0d\u5206\u65f6\u6bb5\u5360\u7528CPU\u8d44\u6e90\uff0c\u9891\u5ea6\u9ad8, \u62ff\u65f6\u95f4\u6362\u7a7a\u95f4 2\uff1a\u60f0\u6027\u5220\u9664\uff1a \u5185\u5b58\u5360\u7528\u4e25\u91cd \u5ef6\u65f6\u6267\u884c\uff0cCPU\u5229\u7528\u7387\u9ad8 \u62ff\u7a7a\u95f4\u6362\u65f6\u95f4 3\uff1a\u5b9a\u671f\u5220\u9664\uff1a \u5185\u5b58\u5b9a\u671f\u968f\u673a\u6e05\u7406 \u6bcf\u79d2\u82b1\u8d39\u56fa\u5b9a\u7684CPU\u8d44\u6e90\u7ef4\u62a4\u5185\u5b58 \u968f\u673a\u62bd\u67e5\uff0c\u91cd\u70b9\u62bd\u67e5","title":"1.2.5 \u5220\u9664\u7b56\u7565\u5bf9\u6bd4"},{"location":"redis/day02/#13","text":"","title":"1.3 \u6570\u636e\u6dd8\u6c70\u7b56\u7565\uff08\u9010\u51fa\u7b97\u6cd5\uff09"},{"location":"redis/day02/#131","text":"\u4ec0\u4e48\u53eb\u6570\u636e\u6dd8\u6c70\u7b56\u7565\uff1f\u4ec0\u4e48\u6837\u7684\u5e94\u7528\u573a\u666f\u9700\u8981\u7528\u5230\u6570\u636e\u6dd8\u6c70\u7b56\u7565\uff1f \u5f53\u65b0\u6570\u636e\u8fdb\u5165redis\u65f6\uff0c\u5982\u679c\u5185\u5b58\u4e0d\u8db3\u600e\u4e48\u529e\uff1f\u5728\u6267\u884c\u6bcf\u4e00\u4e2a\u547d\u4ee4\u524d\uff0c\u4f1a\u8c03\u7528 freeMemoryIfNeeded() \u68c0\u6d4b\u5185\u5b58\u662f\u5426\u5145\u8db3\u3002\u5982\u679c\u5185\u5b58\u4e0d\u6ee1\u8db3\u65b0 \u52a0\u5165\u6570\u636e\u7684\u6700\u4f4e\u5b58\u50a8\u8981\u6c42\uff0credis\u8981\u4e34\u65f6\u5220\u9664\u4e00\u4e9b\u6570\u636e\u4e3a\u5f53\u524d\u6307\u4ee4\u6e05\u7406\u5b58\u50a8\u7a7a\u95f4\u3002\u6e05\u7406\u6570\u636e\u7684\u7b56\u7565\u79f0\u4e3a\u9010\u51fa\u7b97\u6cd5\u3002 \u6ce8\u610f\uff1a\u9010\u51fa\u6570\u636e\u7684\u8fc7\u7a0b\u4e0d\u662f100%\u80fd\u591f\u6e05\u7406\u51fa\u8db3\u591f\u7684\u53ef\u4f7f\u7528\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u5982\u679c\u4e0d\u6210\u529f\u5219\u53cd\u590d\u6267\u884c\u3002\u5f53\u5bf9\u6240\u6709\u6570\u636e\u5c1d\u8bd5\u5b8c\u6bd5\uff0c \u5982\u4e0d\u80fd\u8fbe\u5230\u5185\u5b58\u6e05\u7406\u7684\u8981\u6c42\uff0c\u5c06\u51fa\u73b0\u9519\u8bef\u4fe1\u606f\u5982\u4e0b ( error ) OOM command not allowed when used memory > 'maxmemory'","title":"1.3.1 \u6dd8\u6c70\u7b56\u7565\u6982\u8ff0"},{"location":"redis/day02/#132","text":"\u5f71\u54cd\u6570\u636e\u6dd8\u6c70\u7684\u76f8\u5173\u914d\u7f6e\u5982\u4e0b\uff1a 1\uff1a\u6700\u5927\u53ef\u4f7f\u7528\u5185\u5b58\uff0c\u5373\u5360\u7528\u7269\u7406\u5185\u5b58\u7684\u6bd4\u4f8b\uff0c\u9ed8\u8ba4\u503c\u4e3a0\uff0c\u8868\u793a\u4e0d\u9650\u5236\u3002\u751f\u4ea7\u73af\u5883\u4e2d\u6839\u636e\u9700\u6c42\u8bbe\u5b9a\uff0c\u901a\u5e38\u8bbe\u7f6e\u572850%\u4ee5\u4e0a maxmemory ?mb 2\uff1a\u6bcf\u6b21\u9009\u53d6\u5f85\u5220\u9664\u6570\u636e\u7684\u4e2a\u6570\uff0c\u91c7\u7528\u968f\u673a\u83b7\u53d6\u6570\u636e\u7684\u65b9\u5f0f\u4f5c\u4e3a\u5f85\u68c0\u6d4b\u5220\u9664\u6570\u636e maxmemory-samples count 3\uff1a\u5bf9\u6570\u636e\u8fdb\u884c\u5220\u9664\u7684\u9009\u62e9\u7b56\u7565 maxmemory-policy policy \u90a3\u6570\u636e\u5220\u9664\u7684\u7b56\u7565policy\u5230\u5e95\u6709\u51e0\u79cd\u5462\uff1f\u4e00\u5171\u662f 3\u7c7b8\u79cd \u7b2c\u4e00\u7c7b \uff1a\u68c0\u6d4b\u6613\u5931\u6570\u636e\uff08\u53ef\u80fd\u4f1a\u8fc7\u671f\u7684\u6570\u636e\u96c6server.db[i].expires \uff09 volatile-lru\uff1a\u6311\u9009\u6700\u8fd1\u6700\u5c11\u4f7f\u7528\u7684\u6570\u636e\u6dd8\u6c70 volatile-lfu\uff1a\u6311\u9009\u6700\u8fd1\u4f7f\u7528\u6b21\u6570\u6700\u5c11\u7684\u6570\u636e\u6dd8\u6c70 volatile-ttl\uff1a\u6311\u9009\u5c06\u8981\u8fc7\u671f\u7684\u6570\u636e\u6dd8\u6c70 volatile-random\uff1a\u4efb\u610f\u9009\u62e9\u6570\u636e\u6dd8\u6c70 \u7b2c\u4e8c\u7c7b \uff1a\u68c0\u6d4b\u5168\u5e93\u6570\u636e\uff08\u6240\u6709\u6570\u636e\u96c6server.db[i].dict \uff09 allkeys-lru\uff1a\u6311\u9009\u6700\u8fd1\u6700\u5c11\u4f7f\u7528\u7684\u6570\u636e\u6dd8\u6c70 allkeLyRs-lfu\uff1a\uff1a\u6311\u9009\u6700\u8fd1\u4f7f\u7528\u6b21\u6570\u6700\u5c11\u7684\u6570\u636e\u6dd8\u6c70 allkeys-random\uff1a\u4efb\u610f\u9009\u62e9\u6570\u636e\u6dd8\u6c70\uff0c\u76f8\u5f53\u4e8e\u968f\u673a \u7b2c\u4e09\u7c7b \uff1a\u653e\u5f03\u6570\u636e\u9a71\u9010 no-enviction\uff08\u9a71\u9010\uff09\uff1a\u7981\u6b62\u9a71\u9010\u6570\u636e(redis4.0\u4e2d\u9ed8\u8ba4\u7b56\u7565)\uff0c\u4f1a\u5f15\u53d1OOM(Out Of Memory) \u6ce8\u610f\uff1a\u8fd9\u4e9b\u7b56\u7565\u662f\u914d\u7f6e\u5230\u54ea\u4e2a\u5c5e\u6027\u4e0a\uff1f\u600e\u4e48\u914d\u7f6e\uff1f\u5982\u4e0b\u6240\u793a maxmemory-policy volatile-lru \u6570\u636e\u6dd8\u6c70\u7b56\u7565\u914d\u7f6e\u4f9d\u636e \u4f7f\u7528INFO\u547d\u4ee4\u8f93\u51fa\u76d1\u63a7\u4fe1\u606f\uff0c\u67e5\u8be2\u7f13\u5b58 hit \u548c miss \u7684\u6b21\u6570\uff0c\u6839\u636e\u4e1a\u52a1\u9700\u6c42\u8c03\u4f18Redis\u914d\u7f6e","title":"1.3.2 \u7b56\u7565\u914d\u7f6e"},{"location":"redis/day02/#2","text":"","title":"2.\u4e3b\u4ece\u590d\u5236"},{"location":"redis/day02/#21","text":"","title":"2.1 \u4e3b\u4ece\u590d\u5236\u7b80\u4ecb"},{"location":"redis/day02/#211","text":"\u9996\u5148\u6211\u4eec\u8981\u7406\u89e3\u4e92\u8054\u7f51\u5e94\u7528\u56e0\u4e3a\u5176\u72ec\u6709\u7684\u7279\u6027\u6211\u4eec\u6f14\u5316\u51fa\u7684 \u4e09\u9ad8 \u67b6\u6784 \u9ad8\u5e76\u53d1 \u5e94\u7528\u8981\u63d0\u4f9b\u67d0\u4e00\u4e1a\u52a1\u8981\u80fd\u652f\u6301\u5f88\u591a\u5ba2\u6237\u7aef\u540c\u65f6\u8bbf\u95ee\u7684\u80fd\u529b\uff0c\u6211\u4eec\u79f0\u4e3a\u5e76\u53d1\uff0c\u9ad8\u5e76\u53d1\u610f\u601d\u5c31\u5f88\u660e\u786e\u4e86 \u9ad8\u6027\u80fd \u6027\u80fd\u5e26\u7ed9\u6211\u4eec\u6700\u76f4\u89c2\u7684\u611f\u53d7\u5c31\u662f\uff1a\u901f\u5ea6\u5feb\uff0c\u65f6\u95f4\u77ed \u9ad8\u53ef\u7528 \u53ef\u7528\u6027 \uff1a\u4e00\u5e74\u4e2d\u5e94\u7528\u670d\u52a1\u6b63\u5e38\u8fd0\u884c\u7684\u65f6\u95f4\u5360\u5168\u5e74\u65f6\u95f4\u7684\u767e\u5206\u6bd4\uff0c\u5982\u4e0b\u56fe\uff1a\u8868\u793a\u4e86\u5e94\u7528\u670d\u52a1\u5728\u5168\u5e74\u5b95\u673a\u7684\u65f6\u95f4 \u6211\u4eec\u628a\u8fd9\u4e9b\u65f6\u95f4\u52a0\u5728\u4e00\u8d77\u5c31\u662f\u5168\u5e74\u5e94\u7528\u670d\u52a1\u4e0d\u53ef\u7528\u7684\u65f6\u95f4\uff0c\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u5e94\u7528\u670d\u52a1\u5168\u5e74\u53ef\u7528\u7684\u65f6\u95f4 4\u5c0f\u65f627\u520615\u79d2+11\u520636\u79d2+2\u520616\u79d2=4\u5c0f\u65f641\u52067\u79d2=16867\u79d2 1\u5e74=365 24 60*60=31536000\u79d2 \u53ef\u7528\u6027=\uff0831536000-16867\uff09/31536000*100%=99.9465151% \u4e1a\u754c\u53ef\u7528\u6027\u76ee\u6807 5\u4e2a9\uff0c\u537399.999% \uff0c\u5373\u670d\u52a1\u5668\u5e74\u5b95\u673a\u65f6\u957f\u4f4e\u4e8e315\u79d2\uff0c\u7ea65.25\u5206\u949f","title":"2.1.1 \u9ad8\u53ef\u7528"},{"location":"redis/day02/#212","text":"\u77e5\u9053\u4e86\u4e09\u9ad8\u7684\u6982\u5ff5\u4e4b\u540e\uff0c\u6211\u4eec\u60f3\uff1a\u4f60\u7684\u201cRedis\u201d\u662f\u5426\u9ad8\u53ef\u7528\uff1f\u90a3\u6211\u4eec\u8981\u6765\u5206\u6790\u5355\u673aredis\u7684\u98ce\u9669\u4e0e\u95ee\u9898 \u95ee\u98981.\u673a\u5668\u6545\u969c \u73b0\u8c61\uff1a\u786c\u76d8\u6545\u969c\u3001\u7cfb\u7edf\u5d29\u6e83 \u672c\u8d28\uff1a\u6570\u636e\u4e22\u5931\uff0c\u5f88\u53ef\u80fd\u5bf9\u4e1a\u52a1\u9020\u6210\u707e\u96be\u6027\u6253\u51fb \u7ed3\u8bba\uff1a\u57fa\u672c\u4e0a\u4f1a\u653e\u5f03\u4f7f\u7528redis. \u95ee\u98982.\u5bb9\u91cf\u74f6\u9888 \u73b0\u8c61\uff1a\u5185\u5b58\u4e0d\u8db3\uff0c\u4ece16G\u5347\u7ea7\u523064G\uff0c\u4ece64G\u5347\u7ea7\u5230128G\uff0c\u65e0\u9650\u5347\u7ea7\u5185\u5b58 \u672c\u8d28\uff1a\u7a77\uff0c\u786c\u4ef6\u6761\u4ef6\u8ddf\u4e0d\u4e0a \u7ed3\u8bba\uff1a\u653e\u5f03\u4f7f\u7528redis \u7ed3\u8bba\uff1a \u4e3a\u4e86\u907f\u514d\u5355\u70b9Redis\u670d\u52a1\u5668\u6545\u969c\uff0c\u51c6\u5907\u591a\u53f0\u670d\u52a1\u5668\uff0c\u4e92\u76f8\u8fde\u901a\u3002\u5c06\u6570\u636e\u590d\u5236\u591a\u4e2a\u526f\u672c\u4fdd\u5b58\u5728\u4e0d\u540c\u7684\u670d\u52a1\u5668\u4e0a\uff0c\u8fde\u63a5\u5728\u4e00\u8d77\uff0c\u5e76\u4fdd\u8bc1\u6570\u636e\u662f\u540c\u6b65\u7684\u3002\u5373\u4f7f\u6709\u5176\u4e2d\u4e00\u53f0\u670d\u52a1\u5668\u5b95\u673a\uff0c\u5176\u4ed6\u670d\u52a1\u5668\u4f9d\u7136\u53ef\u4ee5\u7ee7\u7eed\u63d0\u4f9b\u670d\u52a1\uff0c\u5b9e\u73b0Redis\u7684\u9ad8\u53ef\u7528\uff0c\u540c\u65f6\u5b9e\u73b0\u6570\u636e\u5197\u4f59\u5907\u4efd\u3002 \u591a\u53f0\u670d\u52a1\u5668\u8fde\u63a5\u65b9\u6848\uff1a \u63d0\u4f9b\u6570\u636e\u65b9\uff1a master \u4e3b\u670d\u52a1\u5668\uff0c\u4e3b\u8282\u70b9\uff0c\u4e3b\u5e93\u4e3b\u5ba2\u6237\u7aef \u63a5\u6536\u6570\u636e\u65b9\uff1a slave \u4ece\u670d\u52a1\u5668\uff0c\u4ece\u8282\u70b9\uff0c\u4ece\u5e93 \u4ece\u5ba2\u6237\u7aef \u9700\u8981\u89e3\u51b3\u7684\u95ee\u9898\uff1a \u6570\u636e\u540c\u6b65\uff08master\u7684\u6570\u636e\u590d\u5236\u5230slave\u4e2d\uff09 \u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u6765\u89e3\u91ca\u4e3b\u4ece\u590d\u5236\u7684\u6982\u5ff5\uff1a \u6982\u5ff5\uff1a\u4e3b\u4ece\u590d\u5236\u5373\u5c06master\u4e2d\u7684\u6570\u636e\u5373\u65f6\u3001\u6709\u6548\u7684\u590d\u5236\u5230slave\u4e2d \u7279\u5f81 \uff1a\u4e00\u4e2amaster\u53ef\u4ee5\u62e5\u6709\u591a\u4e2aslave\uff0c\u4e00\u4e2aslave\u53ea\u5bf9\u5e94\u4e00\u4e2amaster \u804c\u8d23 \uff1amaster\u548cslave\u5404\u81ea\u7684\u804c\u8d23\u4e0d\u4e00\u6837 master: \u5199\u6570\u636e \u6267\u884c\u5199\u64cd\u4f5c\u65f6\uff0c\u5c06\u51fa\u73b0\u53d8\u5316\u7684\u6570\u636e\u81ea\u52a8\u540c\u6b65\u5230slave \u8bfb\u6570\u636e\uff08\u53ef\u5ffd\u7565\uff09 slave: \u8bfb\u6570\u636e \u5199\u6570\u636e\uff08\u7981\u6b62\uff09","title":"2.1.2 \u4e3b\u4ece\u590d\u5236\u6982\u5ff5"},{"location":"redis/day02/#213","text":"\u8bfb\u5199\u5206\u79bb\uff1amaster\u5199\u3001slave\u8bfb\uff0c\u63d0\u9ad8\u670d\u52a1\u5668\u7684\u8bfb\u5199\u8d1f\u8f7d\u80fd\u529b \u8d1f\u8f7d\u5747\u8861\uff1a\u57fa\u4e8e\u4e3b\u4ece\u7ed3\u6784\uff0c\u914d\u5408\u8bfb\u5199\u5206\u79bb\uff0c\u7531slave\u5206\u62c5master\u8d1f\u8f7d\uff0c\u5e76\u6839\u636e\u9700\u6c42\u7684\u53d8\u5316\uff0c\u6539\u53d8slave\u7684\u6570 \u91cf\uff0c\u901a\u8fc7\u591a\u4e2a\u4ece\u8282\u70b9\u5206\u62c5\u6570\u636e\u8bfb\u53d6\u8d1f\u8f7d\uff0c\u5927\u5927\u63d0\u9ad8Redis\u670d\u52a1\u5668\u5e76\u53d1\u91cf\u4e0e\u6570\u636e\u541e\u5410\u91cf \u6545\u969c\u6062\u590d\uff1a\u5f53master\u51fa\u73b0\u95ee\u9898\u65f6\uff0c\u7531slave\u63d0\u4f9b\u670d\u52a1\uff0c\u5b9e\u73b0\u5feb\u901f\u7684\u6545\u969c\u6062\u590d \u6570\u636e\u5197\u4f59\uff1a\u5b9e\u73b0\u6570\u636e\u70ed\u5907\u4efd\uff0c\u662f\u6301\u4e45\u5316\u4e4b\u5916\u7684\u4e00\u79cd\u6570\u636e\u5197\u4f59\u65b9\u5f0f \u9ad8\u53ef\u7528\u57fa\u77f3\uff1a\u57fa\u4e8e\u4e3b\u4ece\u590d\u5236\uff0c\u6784\u5efa\u54e8\u5175\u6a21\u5f0f\u4e0e\u96c6\u7fa4\uff0c\u5b9e\u73b0Redis\u7684\u9ad8\u53ef\u7528\u65b9\u6848","title":"2.1.3 \u4e3b\u4ece\u590d\u5236\u7684\u4f5c\u7528"},{"location":"redis/day02/#22","text":"\u4e3b\u4ece\u590d\u5236\u8fc7\u7a0b\u5927\u4f53\u53ef\u4ee5\u5206\u4e3a3\u4e2a\u9636\u6bb5 \u5efa\u7acb\u8fde\u63a5\u9636\u6bb5\uff08\u5373\u51c6\u5907\u9636\u6bb5\uff09 \u6570\u636e\u540c\u6b65\u9636\u6bb5 \u547d\u4ee4\u4f20\u64ad\u9636\u6bb5\uff08\u53cd\u590d\u540c\u6b65\uff09 \u800c\u547d\u4ee4\u7684\u4f20\u64ad\u5176\u5b9e\u67094\u79cd\uff0c\u5206\u522b\u5982\u4e0b\uff1a","title":"2.2 \u4e3b\u4ece\u590d\u5236\u5de5\u4f5c\u6d41\u7a0b"},{"location":"redis/day02/#221","text":"","title":"2.2.1 \u4e3b\u4ece\u590d\u5236\u7684\u5de5\u4f5c\u6d41\u7a0b\uff08\u4e09\u4e2a\u9636\u6bb5\uff09"},{"location":"redis/day02/#2211","text":"\u5efa\u7acbslave\u5230master\u7684\u8fde\u63a5\uff0c\u4f7fmaster\u80fd\u591f\u8bc6\u522bslave\uff0c\u5e76\u4fdd\u5b58slave\u7aef\u53e3\u53f7 \u6d41\u7a0b\u5982\u4e0b\uff1a \u6b65\u9aa41\uff1a\u8bbe\u7f6emaster\u7684\u5730\u5740\u548c\u7aef\u53e3\uff0c\u4fdd\u5b58master\u4fe1\u606f \u6b65\u9aa42\uff1a\u5efa\u7acbsocket\u8fde\u63a5 \u6b65\u9aa43\uff1a\u53d1\u9001ping\u547d\u4ee4\uff08\u5b9a\u65f6\u5668\u4efb\u52a1\uff09 \u6b65\u9aa44\uff1a\u8eab\u4efd\u9a8c\u8bc1 \u6b65\u9aa45\uff1a\u53d1\u9001slave\u7aef\u53e3\u4fe1\u606f \u81f3\u6b64\uff0c\u4e3b\u4ece\u8fde\u63a5\u6210\u529f\uff01 \u5f53\u524d\u72b6\u6001\uff1a slave\uff1a\u4fdd\u5b58master\u7684\u5730\u5740\u4e0e\u7aef\u53e3 master\uff1a\u4fdd\u5b58slave\u7684\u7aef\u53e3 \u603b\u4f53\uff1a\u4e4b\u95f4\u521b\u5efa\u4e86\u8fde\u63a5\u7684socket master\u548cslave\u4e92\u8054 \u63a5\u4e0b\u6765\u5c31\u8981\u901a\u8fc7\u67d0\u79cd\u65b9\u5f0f\u5c06master\u548cslave\u8fde\u63a5\u5230\u4e00\u8d77 \u65b9\u5f0f\u4e00\uff1a\u5ba2\u6237\u7aef\u53d1\u9001\u547d\u4ee4 slaveof masterip masterport \u65b9\u5f0f\u4e8c\uff1a\u542f\u52a8\u670d\u52a1\u5668\u53c2\u6570 redis-server --slaveof masterip masterport \u65b9\u5f0f\u4e09\uff1a\u670d\u52a1\u5668\u914d\u7f6e\uff08 \u4e3b\u6d41\u65b9\u5f0f \uff09 slaveof masterip masterport slave\u7cfb\u7edf\u4fe1\u606f master_link_down_since_seconds masterhost & masterport master\u7cfb\u7edf\u4fe1\u606f uslave_listening_port(\u591a\u4e2a) \u4e3b\u4ece\u65ad\u5f00\u8fde\u63a5 \u65ad\u5f00slave\u4e0emaster\u7684\u8fde\u63a5\uff0cslave\u65ad\u5f00\u8fde\u63a5\u540e\uff0c\u4e0d\u4f1a\u5220\u9664\u5df2\u6709\u6570\u636e\uff0c\u53ea\u662f\u4e0d\u518d\u63a5\u53d7master\u53d1\u9001\u7684\u6570\u636e slaveof no one \u6388\u6743\u8bbf\u95ee master\u5ba2\u6237\u7aef\u53d1\u9001\u547d\u4ee4\u8bbe\u7f6e\u5bc6\u7801 requirepass password master\u914d\u7f6e\u6587\u4ef6\u8bbe\u7f6e\u5bc6\u7801 config set requirepass password config get requirepass slave\u5ba2\u6237\u7aef\u53d1\u9001\u547d\u4ee4\u8bbe\u7f6e\u5bc6\u7801 auth password slave\u914d\u7f6e\u6587\u4ef6\u8bbe\u7f6e\u5bc6\u7801 masterauth password slave\u542f\u52a8\u670d\u52a1\u5668\u8bbe\u7f6e\u5bc6\u7801 redis-server \u2013a password","title":"2.2.1.1 \u9636\u6bb5\u4e00\uff1a\u5efa\u7acb\u8fde\u63a5"},{"location":"redis/day02/#2212","text":"\u5728slave\u521d\u6b21\u8fde\u63a5master\u540e\uff0c\u590d\u5236master\u4e2d\u7684\u6240\u6709\u6570\u636e\u5230slave \u5c06slave\u7684\u6570\u636e\u5e93\u72b6\u6001\u66f4\u65b0\u6210master\u5f53\u524d\u7684\u6570\u636e\u5e93\u72b6\u6001 \u540c\u6b65\u8fc7\u7a0b\u5982\u4e0b\uff1a \u6b65\u9aa41\uff1a\u8bf7\u6c42\u540c\u6b65\u6570\u636e \u6b65\u9aa42\uff1a\u521b\u5efaRDB\u540c\u6b65\u6570\u636e \u6b65\u9aa43\uff1a\u6062\u590dRDB\u540c\u6b65\u6570\u636e \u6b65\u9aa44\uff1a\u8bf7\u6c42\u90e8\u5206\u540c\u6b65\u6570\u636e \u6b65\u9aa45\uff1a\u6062\u590d\u90e8\u5206\u540c\u6b65\u6570\u636e \u81f3\u6b64\uff0c\u6570\u636e\u540c\u6b65\u5de5\u4f5c\u5b8c\u6210\uff01 \u5f53\u524d\u72b6\u6001\uff1a slave\uff1a\u5177\u6709master\u7aef\u5168\u90e8\u6570\u636e\uff0c\u5305\u542bRDB\u8fc7\u7a0b\u63a5\u6536\u7684\u6570\u636e master\uff1a\u4fdd\u5b58slave\u5f53\u524d\u6570\u636e\u540c\u6b65\u7684\u4f4d\u7f6e \u603b\u4f53\uff1a\u4e4b\u95f4\u5b8c\u6210\u4e86\u6570\u636e\u514b\u9686 \u6570\u636e\u540c\u6b65\u9636\u6bb5master\u8bf4\u660e 1\uff1a\u5982\u679cmaster\u6570\u636e\u91cf\u5de8\u5927\uff0c\u6570\u636e\u540c\u6b65\u9636\u6bb5\u5e94\u907f\u5f00\u6d41\u91cf\u9ad8\u5cf0\u671f\uff0c\u907f\u514d\u9020\u6210master\u963b\u585e\uff0c\u5f71\u54cd\u4e1a\u52a1\u6b63\u5e38\u6267\u884c 2\uff1a\u590d\u5236\u7f13\u51b2\u533a\u5927\u5c0f\u8bbe\u5b9a\u4e0d\u5408\u7406\uff0c\u4f1a\u5bfc\u81f4\u6570\u636e\u6ea2\u51fa\u3002\u5982\u8fdb\u884c\u5168\u91cf\u590d\u5236\u5468\u671f\u592a\u957f\uff0c\u8fdb\u884c\u90e8\u5206\u590d\u5236\u65f6\u53d1\u73b0\u6570\u636e\u5df2\u7ecf\u5b58\u5728\u4e22\u5931\u7684\u60c5\u51b5\uff0c\u5fc5\u987b\u8fdb\u884c\u7b2c\u4e8c\u6b21\u5168\u91cf\u590d\u5236\uff0c\u81f4\u4f7fslave\u9677\u5165\u6b7b\u5faa\u73af\u72b6\u6001\u3002 repl-backlog-size ?mb master\u5355\u673a\u5185\u5b58\u5360\u7528\u4e3b\u673a\u5185\u5b58\u7684\u6bd4\u4f8b\u4e0d\u5e94\u8fc7\u5927\uff0c\u5efa\u8bae\u4f7f\u752850%-70%\u7684\u5185\u5b58\uff0c\u7559\u4e0b30%-50%\u7684\u5185\u5b58\u7528\u4e8e\u6267 \u884cbgsave\u547d\u4ee4\u548c\u521b\u5efa\u590d\u5236\u7f13\u51b2\u533a \u6570\u636e\u540c\u6b65\u9636\u6bb5slave\u8bf4\u660e \u4e3a\u907f\u514dslave\u8fdb\u884c\u5168\u91cf\u590d\u5236\u3001\u90e8\u5206\u590d\u5236\u65f6\u670d\u52a1\u5668\u54cd\u5e94\u963b\u585e\u6216\u6570\u636e\u4e0d\u540c\u6b65\uff0c\u5efa\u8bae\u5173\u95ed\u6b64\u671f\u95f4\u7684\u5bf9\u5916\u670d\u52a1 slave-serve-stale-data yes|no \u6570\u636e\u540c\u6b65\u9636\u6bb5\uff0cmaster\u53d1\u9001\u7ed9slave\u4fe1\u606f\u53ef\u4ee5\u7406\u89e3master\u662fslave\u7684\u4e00\u4e2a\u5ba2\u6237\u7aef\uff0c\u4e3b\u52a8\u5411slave\u53d1\u9001\u547d\u4ee4 \u591a\u4e2aslave\u540c\u65f6\u5bf9master\u8bf7\u6c42\u6570\u636e\u540c\u6b65\uff0cmaster\u53d1\u9001\u7684RDB\u6587\u4ef6\u589e\u591a\uff0c\u4f1a\u5bf9\u5e26\u5bbd\u9020\u6210\u5de8\u5927\u51b2\u51fb\uff0c\u5982\u679cmaster\u5e26\u5bbd\u4e0d\u8db3\uff0c\u56e0\u6b64\u6570\u636e\u540c\u6b65\u9700\u8981\u6839\u636e\u4e1a\u52a1\u9700\u6c42\uff0c\u9002\u91cf\u9519\u5cf0 slave\u8fc7\u591a\u65f6\uff0c\u5efa\u8bae\u8c03\u6574\u62d3\u6251\u7ed3\u6784\uff0c\u7531\u4e00\u4e3b\u591a\u4ece\u7ed3\u6784\u53d8\u4e3a\u6811\u72b6\u7ed3\u6784\uff0c\u4e2d\u95f4\u7684\u8282\u70b9\u65e2\u662fmaster\uff0c\u4e5f\u662f slave\u3002\u6ce8\u610f\u4f7f\u7528\u6811\u72b6\u7ed3\u6784\u65f6\uff0c\u7531\u4e8e\u5c42\u7ea7\u6df1\u5ea6\uff0c\u5bfc\u81f4\u6df1\u5ea6\u8d8a\u9ad8\u7684slave\u4e0e\u6700\u9876\u5c42master\u95f4\u6570\u636e\u540c\u6b65\u5ef6\u8fdf \u8f83\u5927\uff0c\u6570\u636e\u4e00\u81f4\u6027\u53d8\u5dee\uff0c\u5e94\u8c28\u614e\u9009\u62e9","title":"2.2.1.2 \u9636\u6bb5\u4e8c\uff1a\u6570\u636e\u540c\u6b65"},{"location":"redis/day02/#2213","text":"\u5f53master\u6570\u636e\u5e93\u72b6\u6001\u88ab\u4fee\u6539\u540e\uff0c\u5bfc\u81f4\u4e3b\u4ece\u670d\u52a1\u5668\u6570\u636e\u5e93\u72b6\u6001\u4e0d\u4e00\u81f4\uff0c\u6b64\u65f6\u9700\u8981\u8ba9\u4e3b\u4ece\u6570\u636e\u540c\u6b65\u5230\u4e00\u81f4\u7684\u72b6\u6001\uff0c\u540c\u6b65\u7684\u52a8\u4f5c\u79f0\u4e3a\u547d\u4ee4\u4f20\u64ad master\u5c06\u63a5\u6536\u5230\u7684\u6570\u636e\u53d8\u66f4\u547d\u4ee4\u53d1\u9001\u7ed9slave\uff0cslave\u63a5\u6536\u547d\u4ee4\u540e\u6267\u884c\u547d\u4ee4 \u547d\u4ee4\u4f20\u64ad\u9636\u6bb5\u7684\u90e8\u5206\u590d\u5236 \u547d\u4ee4\u4f20\u64ad\u9636\u6bb5\u51fa\u73b0\u4e86\u65ad\u7f51\u73b0\u8c61\uff1a \u7f51\u7edc\u95ea\u65ad\u95ea\u8fde\uff1a\u5ffd\u7565 \u77ed\u65f6\u95f4\u7f51\u7edc\u4e2d\u65ad\uff1a\u90e8\u5206\u590d\u5236 \u957f\u65f6\u95f4\u7f51\u7edc\u4e2d\u65ad\uff1a\u5168\u91cf\u590d\u5236 \u8fd9\u91cc\u6211\u4eec\u4e3b\u8981\u6765\u770b\u90e8\u5206\u590d\u5236\uff0c\u90e8\u5206\u590d\u5236\u7684\u4e09\u4e2a\u6838\u5fc3\u8981\u7d20 \u670d\u52a1\u5668\u7684\u8fd0\u884c id\uff08run id\uff09 \u4e3b\u670d\u52a1\u5668\u7684\u590d\u5236\u79ef\u538b\u7f13\u51b2\u533a \u4e3b\u4ece\u670d\u52a1\u5668\u7684\u590d\u5236\u504f\u79fb\u91cf \u670d\u52a1\u5668\u8fd0\u884cID\uff08runid\uff09 \u6982\u5ff5\uff1a\u670d\u52a1\u5668\u8fd0\u884cID\u662f\u6bcf\u4e00\u53f0\u670d\u52a1\u5668\u6bcf\u6b21\u8fd0\u884c\u7684\u8eab\u4efd\u8bc6\u522b\u7801\uff0c\u4e00\u53f0\u670d\u52a1\u5668\u591a\u6b21\u8fd0\u884c\u53ef\u4ee5\u751f\u6210\u591a\u4e2a\u8fd0\u884cid \u7ec4\u6210\uff1a\u8fd0\u884cid\u753140\u4f4d\u5b57\u7b26\u7ec4\u6210\uff0c\u662f\u4e00\u4e2a\u968f\u673a\u7684\u5341\u516d\u8fdb\u5236\u5b57\u7b26 \u4f8b\u5982\uff1afdc9ff13b9bbaab28db42b3d50f852bb5e3fcdce \u4f5c\u7528\uff1a\u8fd0\u884cid\u88ab\u7528\u4e8e\u5728\u670d\u52a1\u5668\u95f4\u8fdb\u884c\u4f20\u8f93\uff0c\u8bc6\u522b\u8eab\u4efd \u5982\u679c\u60f3\u4e24\u6b21\u64cd\u4f5c\u5747\u5bf9\u540c\u4e00\u53f0\u670d\u52a1\u5668\u8fdb\u884c\uff0c\u5fc5\u987b\u6bcf\u6b21\u64cd\u4f5c\u643a\u5e26\u5bf9\u5e94\u7684\u8fd0\u884cid\uff0c\u7528\u4e8e\u5bf9\u65b9\u8bc6\u522b \u5b9e\u73b0\u65b9\u5f0f\uff1a\u8fd0\u884cid\u5728\u6bcf\u53f0\u670d\u52a1\u5668\u542f\u52a8\u65f6\u81ea\u52a8\u751f\u6210\u7684\uff0cmaster\u5728\u9996\u6b21\u8fde\u63a5slave\u65f6\uff0c\u4f1a\u5c06\u81ea\u5df1\u7684\u8fd0\u884cID\u53d1\u9001\u7ed9slave\uff0c slave\u4fdd\u5b58\u6b64ID\uff0c\u901a\u8fc7info Server\u547d\u4ee4\uff0c\u53ef\u4ee5\u67e5\u770b\u8282\u70b9\u7684runid \u590d\u5236\u7f13\u51b2\u533a \u6982\u5ff5\uff1a\u590d\u5236\u7f13\u51b2\u533a\uff0c\u53c8\u540d\u590d\u5236\u79ef\u538b\u7f13\u51b2\u533a\uff0c\u662f\u4e00\u4e2a\u5148\u8fdb\u5148\u51fa\uff08FIFO\uff09\u7684\u961f\u5217\uff0c\u7528\u4e8e\u5b58\u50a8\u670d\u52a1\u5668\u6267\u884c\u8fc7\u7684\u547d\u4ee4\uff0c\u6bcf\u6b21\u4f20\u64ad\u547d\u4ee4\uff0cmaster\u90fd\u4f1a\u5c06\u4f20\u64ad\u7684\u547d\u4ee4\u8bb0\u5f55\u4e0b\u6765\uff0c\u5e76\u5b58\u50a8\u5728\u590d\u5236\u7f13\u51b2\u533a \u590d\u5236\u7f13\u51b2\u533a\u9ed8\u8ba4\u6570\u636e\u5b58\u50a8\u7a7a\u95f4\u5927\u5c0f\u662f1M \u5f53\u5165\u961f\u5143\u7d20\u7684\u6570\u91cf\u5927\u4e8e\u961f\u5217\u957f\u5ea6\u65f6\uff0c\u6700\u5148\u5165\u961f\u7684\u5143\u7d20\u4f1a\u88ab\u5f39\u51fa\uff0c\u800c\u65b0\u5143\u7d20\u4f1a\u88ab\u653e\u5165\u961f\u5217 \u4f5c\u7528\uff1a\u7528\u4e8e\u4fdd\u5b58master\u6536\u5230\u7684\u6240\u6709\u6307\u4ee4\uff08\u4ec5\u5f71\u54cd\u6570\u636e\u53d8\u66f4\u7684\u6307\u4ee4\uff0c\u4f8b\u5982set\uff0cselect\uff09 \u6570\u636e\u6765\u6e90\uff1a\u5f53master\u63a5\u6536\u5230\u4e3b\u5ba2\u6237\u7aef\u7684\u6307\u4ee4\u65f6\uff0c\u9664\u4e86\u5c06\u6307\u4ee4\u6267\u884c\uff0c\u4f1a\u5c06\u8be5\u6307\u4ee4\u5b58\u50a8\u5230\u7f13\u51b2\u533a\u4e2d \u590d\u5236\u7f13\u51b2\u533a\u5185\u90e8\u5de5\u4f5c\u539f\u7406\uff1a \u7ec4\u6210 \u504f\u79fb\u91cf \u6982\u5ff5\uff1a\u4e00\u4e2a\u6570\u5b57\uff0c\u63cf\u8ff0\u590d\u5236\u7f13\u51b2\u533a\u4e2d\u7684\u6307\u4ee4\u5b57\u8282\u4f4d\u7f6e \u5206\u7c7b\uff1a master\u590d\u5236\u504f\u79fb\u91cf\uff1a\u8bb0\u5f55\u53d1\u9001\u7ed9\u6240\u6709slave\u7684\u6307\u4ee4\u5b57\u8282\u5bf9\u5e94\u7684\u4f4d\u7f6e\uff08\u591a\u4e2a\uff09 slave\u590d\u5236\u504f\u79fb\u91cf\uff1a\u8bb0\u5f55slave\u63a5\u6536master\u53d1\u9001\u8fc7\u6765\u7684\u6307\u4ee4\u5b57\u8282\u5bf9\u5e94\u7684\u4f4d\u7f6e\uff08\u4e00\u4e2a\uff09 \u4f5c\u7528\uff1a\u540c\u6b65\u4fe1\u606f\uff0c\u6bd4\u5bf9master\u4e0eslave\u7684\u5dee\u5f02\uff0c\u5f53slave\u65ad\u7ebf\u540e\uff0c\u6062\u590d\u6570\u636e\u4f7f\u7528 \u6570\u636e\u6765\u6e90\uff1a master\u7aef\uff1a\u53d1\u9001\u4e00\u6b21\u8bb0\u5f55\u4e00\u6b21 slave\u7aef\uff1a\u63a5\u6536\u4e00\u6b21\u8bb0\u5f55\u4e00\u6b21 \u5b57\u8282\u503c \u5de5\u4f5c\u539f\u7406 \u901a\u8fc7offset\u533a\u5206\u4e0d\u540c\u7684slave\u5f53\u524d\u6570\u636e\u4f20\u64ad\u7684\u5dee\u5f02 master\u8bb0\u5f55\u5df2\u53d1\u9001\u7684\u4fe1\u606f\u5bf9\u5e94\u7684offset slave\u8bb0\u5f55\u5df2\u63a5\u6536\u7684\u4fe1\u606f\u5bf9\u5e94\u7684offset","title":"2.2.1.3 \u9636\u6bb5\u4e09\uff1a\u547d\u4ee4\u4f20\u64ad"},{"location":"redis/day02/#222","text":"\u6211\u4eec\u518d\u6b21\u7684\u603b\u7ed3\u4e00\u4e0b\u4e3b\u4ece\u590d\u5236\u7684\u4e09\u4e2a\u9636\u6bb5\u7684\u5de5\u4f5c\u6d41\u7a0b\uff1a","title":"2.2.2 \u6d41\u7a0b\u66f4\u65b0(\u5168\u91cf\u590d\u5236/\u90e8\u5206\u590d\u5236)"},{"location":"redis/day02/#223","text":"\u4ec0\u4e48\u662f\u5fc3\u8df3\u673a\u5236\uff1f \u8fdb\u5165\u547d\u4ee4\u4f20\u64ad\u9636\u6bb5\u5019\uff0cmaster\u4e0eslave\u95f4\u9700\u8981\u8fdb\u884c\u4fe1\u606f\u4ea4\u6362\uff0c\u4f7f\u7528\u5fc3\u8df3\u673a\u5236\u8fdb\u884c\u7ef4\u62a4\uff0c\u5b9e\u73b0\u53cc\u65b9\u8fde\u63a5\u4fdd\u6301\u5728\u7ebf master\u5fc3\u8df3\uff1a \u5185\u90e8\u6307\u4ee4\uff1aPING \u5468\u671f\uff1a\u7531repl-ping-slave-period\u51b3\u5b9a\uff0c\u9ed8\u8ba410\u79d2 \u4f5c\u7528\uff1a\u5224\u65adslave\u662f\u5426\u5728\u7ebf \u67e5\u8be2\uff1aINFO replication \u83b7\u53d6slave\u6700\u540e\u4e00\u6b21\u8fde\u63a5\u65f6\u95f4\u95f4\u9694\uff0clag\u9879\u7ef4\u6301\u57280\u62161\u89c6\u4e3a\u6b63\u5e38 slave\u5fc3\u8df3\u4efb\u52a1 \u5185\u90e8\u6307\u4ee4\uff1aREPLCONF ACK {offset} \u5468\u671f\uff1a1\u79d2 \u4f5c\u75281\uff1a\u6c47\u62a5slave\u81ea\u5df1\u7684\u590d\u5236\u504f\u79fb\u91cf\uff0c\u83b7\u53d6\u6700\u65b0\u7684\u6570\u636e\u53d8\u66f4\u6307\u4ee4 \u4f5c\u75282\uff1a\u5224\u65admaster\u662f\u5426\u5728\u7ebf \u5fc3\u8df3\u9636\u6bb5\u6ce8\u610f\u4e8b\u9879\uff1a \u5f53slave\u591a\u6570\u6389\u7ebf\uff0c\u6216\u5ef6\u8fdf\u8fc7\u9ad8\u65f6\uff0cmaster\u4e3a\u4fdd\u969c\u6570\u636e\u7a33\u5b9a\u6027\uff0c\u5c06\u62d2\u7edd\u6240\u6709\u4fe1\u606f\u540c\u6b65 min-slaves-to-write 2 min-slaves-max-lag 8 slave\u6570\u91cf\u5c11\u4e8e2\u4e2a\uff0c\u6216\u8005\u6240\u6709slave\u7684\u5ef6\u8fdf\u90fd\u5927\u4e8e\u7b49\u4e8e8\u79d2\u65f6\uff0c\u5f3a\u5236\u5173\u95edmaster\u5199\u529f\u80fd\uff0c\u505c\u6b62\u6570\u636e\u540c\u6b65 slave\u6570\u91cf\u7531slave\u53d1\u9001REPLCONF ACK\u547d\u4ee4\u505a\u786e\u8ba4 slave\u5ef6\u8fdf\u7531slave\u53d1\u9001REPLCONF ACK\u547d\u4ee4\u505a\u786e\u8ba4 \u81f3\u6b64\uff1a\u6211\u4eec\u53ef\u4ee5\u603b\u7ed3\u51fa\u5b8c\u6574\u7684\u4e3b\u4ece\u590d\u5236\u6d41\u7a0b\uff1a","title":"2.2.3 \u5fc3\u8df3\u673a\u5236"},{"location":"redis/day02/#23","text":"","title":"2.3 \u4e3b\u4ece\u590d\u5236\u5e38\u89c1\u95ee\u9898"},{"location":"redis/day02/#231","text":"\u4f34\u968f\u7740\u7cfb\u7edf\u7684\u8fd0\u884c\uff0cmaster\u7684\u6570\u636e\u91cf\u4f1a\u8d8a\u6765\u8d8a\u5927\uff0c\u4e00\u65e6master\u91cd\u542f\uff0crunid\u5c06\u53d1\u751f\u53d8\u5316\uff0c\u4f1a\u5bfc\u81f4\u5168\u90e8slave\u7684\u5168\u91cf\u590d\u5236\u64cd\u4f5c \u5185\u90e8\u4f18\u5316\u8c03\u6574\u65b9\u6848\uff1a 1\uff1amaster\u5185\u90e8\u521b\u5efamaster_replid\u53d8\u91cf\uff0c\u4f7f\u7528runid\u76f8\u540c\u7684\u7b56\u7565\u751f\u6210\uff0c\u957f\u5ea641\u4f4d\uff0c\u5e76\u53d1\u9001\u7ed9\u6240\u6709slave 2\uff1a\u5728master\u5173\u95ed\u65f6\u6267\u884c\u547d\u4ee4shutdown save\uff0c\u8fdb\u884cRDB\u6301\u4e45\u5316,\u5c06runid\u4e0eoffset\u4fdd\u5b58\u5230RDB\u6587\u4ef6\u4e2d repl-id repl-offset \u901a\u8fc7redis-check-rdb\u547d\u4ee4\u53ef\u4ee5\u67e5\u770b\u8be5\u4fe1\u606f 3\uff1amaster\u91cd\u542f\u540e\u52a0\u8f7dRDB\u6587\u4ef6\uff0c\u6062\u590d\u6570\u636e\uff0c\u91cd\u542f\u540e\uff0c\u5c06RDB\u6587\u4ef6\u4e2d\u4fdd\u5b58\u7684repl-id\u4e0erepl-offset\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d master_repl_id=repl master_repl_offset =repl-offset \u901a\u8fc7info\u547d\u4ee4\u53ef\u4ee5\u67e5\u770b\u8be5\u4fe1\u606f \u4f5c\u7528\uff1a\u672c\u673a\u4fdd\u5b58\u4e0a\u6b21runid\uff0c\u91cd\u542f\u540e\u6062\u590d\u8be5\u503c\uff0c\u4f7f\u6240\u6709slave\u8ba4\u4e3a\u8fd8\u662f\u4e4b\u524d\u7684master \u7b2c\u4e8c\u79cd\u51fa\u73b0\u9891\u7e41\u5168\u91cf\u590d\u5236\u7684\u95ee\u9898\u73b0\u8c61\uff1a\u7f51\u7edc\u73af\u5883\u4e0d\u4f73\uff0c\u51fa\u73b0\u7f51\u7edc\u4e2d\u65ad\uff0cslave\u4e0d\u63d0\u4f9b\u670d\u52a1 \u95ee\u9898\u539f\u56e0\uff1a\u590d\u5236\u7f13\u51b2\u533a\u8fc7\u5c0f\uff0c\u65ad\u7f51\u540eslave\u7684offset\u8d8a\u754c\uff0c\u89e6\u53d1\u5168\u91cf\u590d\u5236 \u6700\u7ec8\u7ed3\u679c\uff1aslave\u53cd\u590d\u8fdb\u884c\u5168\u91cf\u590d\u5236 \u89e3\u51b3\u65b9\u6848\uff1a\u4fee\u6539\u590d\u5236\u7f13\u51b2\u533a\u5927\u5c0f repl-backlog-size ?mb \u5efa\u8bae\u8bbe\u7f6e\u5982\u4e0b\uff1a 1.\u6d4b\u7b97\u4ecemaster\u5230slave\u7684\u91cd\u8fde\u5e73\u5747\u65f6\u957fsecond 2.\u83b7\u53d6master\u5e73\u5747\u6bcf\u79d2\u4ea7\u751f\u5199\u547d\u4ee4\u6570\u636e\u603b\u91cfwrite_size_per_second 3.\u6700\u4f18\u590d\u5236\u7f13\u51b2\u533a\u7a7a\u95f4 = 2 * second * write_size_per_second","title":"2.3.1 \u9891\u7e41\u7684\u5168\u91cf\u590d\u5236"},{"location":"redis/day02/#232","text":"\u95ee\u9898\u73b0\u8c61\uff1amaster\u7684CPU\u5360\u7528\u8fc7\u9ad8 \u6216 slave\u9891\u7e41\u65ad\u5f00\u8fde\u63a5 \u95ee\u9898\u539f\u56e0 slave\u6bcf1\u79d2\u53d1\u9001REPLCONFACK\u547d\u4ee4\u5230master \u5f53slave\u63a5\u5230\u4e86\u6162\u67e5\u8be2\u65f6\uff08keys * \uff0chgetall\u7b49\uff09\uff0c\u4f1a\u5927\u91cf\u5360\u7528CPU\u6027\u80fd master\u6bcf1\u79d2\u8c03\u7528\u590d\u5236\u5b9a\u65f6\u51fd\u6570replicationCron()\uff0c\u6bd4\u5bf9slave\u53d1\u73b0\u957f\u65f6\u95f4\u6ca1\u6709\u8fdb\u884c\u54cd\u5e94 \u6700\u7ec8\u7ed3\u679c\uff1amaster\u5404\u79cd\u8d44\u6e90\uff08\u8f93\u51fa\u7f13\u51b2\u533a\u3001\u5e26\u5bbd\u3001\u8fde\u63a5\u7b49\uff09\u88ab\u4e25\u91cd\u5360\u7528 \u89e3\u51b3\u65b9\u6848\uff1a\u901a\u8fc7\u8bbe\u7f6e\u5408\u7406\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u786e\u8ba4\u662f\u5426\u91ca\u653eslave repl-timeout seconds \u8be5\u53c2\u6570\u5b9a\u4e49\u4e86\u8d85\u65f6\u65f6\u95f4\u7684\u9608\u503c\uff08\u9ed8\u8ba460\u79d2\uff09\uff0c\u8d85\u8fc7\u8be5\u503c\uff0c\u91ca\u653eslave \u95ee\u9898\u73b0\u8c61\uff1aslave\u4e0emaster\u8fde\u63a5\u65ad\u5f00 \u95ee\u9898\u539f\u56e0 master\u53d1\u9001ping\u6307\u4ee4\u9891\u5ea6\u8f83\u4f4e master\u8bbe\u5b9a\u8d85\u65f6\u65f6\u95f4\u8f83\u77ed ping\u6307\u4ee4\u5728\u7f51\u7edc\u4e2d\u5b58\u5728\u4e22\u5305 \u89e3\u51b3\u65b9\u6848\uff1a\u63d0\u9ad8ping\u6307\u4ee4\u53d1\u9001\u7684\u9891\u5ea6 repl-ping-slave-period seconds \u8d85\u65f6\u65f6\u95f4repl-time\u7684\u65f6\u95f4\u81f3\u5c11\u662fping\u6307\u4ee4\u9891\u5ea6\u76845\u523010\u500d\uff0c\u5426\u5219slave\u5f88\u5bb9\u6613\u5224\u5b9a\u8d85\u65f6","title":"2.3.2 \u9891\u7e41\u7684\u7f51\u7edc\u4e2d\u65ad"},{"location":"redis/day02/#233","text":"\u95ee\u9898\u73b0\u8c61\uff1a\u591a\u4e2aslave\u83b7\u53d6\u76f8\u540c\u6570\u636e\u4e0d\u540c\u6b65 \u95ee\u9898\u539f\u56e0\uff1a\u7f51\u7edc\u4fe1\u606f\u4e0d\u540c\u6b65\uff0c\u6570\u636e\u53d1\u9001\u6709\u5ef6\u8fdf \u89e3\u51b3\u65b9\u6848 \u4f18\u5316\u4e3b\u4ece\u95f4\u7684\u7f51\u7edc\u73af\u5883\uff0c\u901a\u5e38\u653e\u7f6e\u5728\u540c\u4e00\u4e2a\u673a\u623f\u90e8\u7f72\uff0c\u5982\u4f7f\u7528\u963f\u91cc\u4e91\u7b49\u4e91\u670d\u52a1\u5668\u65f6\u8981\u6ce8\u610f\u6b64\u73b0\u8c61 \u76d1\u63a7\u4e3b\u4ece\u8282\u70b9\u5ef6\u8fdf\uff08\u901a\u8fc7offset\uff09\u5224\u65ad\uff0c\u5982\u679cslave\u5ef6\u8fdf\u8fc7\u5927\uff0c\u6682\u65f6\u5c4f\u853d\u7a0b\u5e8f\u5bf9\u8be5slave\u7684\u6570\u636e\u8bbf\u95ee slave-serve-stale-data yes|no \u5f00\u542f\u540e\u4ec5\u54cd\u5e94info\u3001slaveof\u7b49\u5c11\u6570\u547d\u4ee4\uff08\u614e\u7528\uff0c\u9664\u975e\u5bf9\u6570\u636e\u4e00\u81f4\u6027\u8981\u6c42\u5f88\u9ad8\uff09","title":"2.3.3 \u6570\u636e\u4e0d\u4e00\u81f4"},{"location":"redis/day02/#3","text":"","title":"3.\u54e8\u5175\u6a21\u5f0f"},{"location":"redis/day02/#31","text":"","title":"3.1 \u54e8\u5175\u7b80\u4ecb"},{"location":"redis/day02/#311","text":"\u9996\u5148\u6211\u4eec\u6765\u770b\u4e00\u4e2a\u4e1a\u52a1\u573a\u666f\uff1a\u5982\u679credis\u7684master\u5b95\u673a\u4e86\uff0c\u6b64\u65f6\u5e94\u8be5\u600e\u4e48\u529e\uff1f \u90a3\u6b64\u65f6\u6211\u4eec\u53ef\u80fd\u9700\u8981\u4ece\u4e00\u5806\u7684slave\u4e2d\u91cd\u65b0\u9009\u4e3e\u51fa\u4e00\u4e2a\u65b0\u7684master\uff0c\u90a3\u8fd9\u4e2a\u64cd\u4f5c\u8fc7\u7a0b\u662f\u4ec0\u4e48\u6837\u7684\u5462\uff1f\u8fd9\u91cc\u9762\u4f1a\u6709\u4ec0\u4e48\u95ee\u9898\u51fa\u73b0\u5462\uff1f \u8981\u5b9e\u73b0\u8fd9\u4e9b\u529f\u80fd\uff0c\u6211\u4eec\u5c31\u9700\u8981redis\u7684\u54e8\u5175\uff0c\u90a3\u54e8\u5175\u662f\u4ec0\u4e48\u5462\uff1f \u54e8\u5175 \u54e8\u5175(sentinel) \u662f\u4e00\u4e2a\u5206\u5e03\u5f0f\u7cfb\u7edf\uff0c\u7528\u4e8e\u5bf9\u4e3b\u4ece\u7ed3\u6784\u4e2d\u7684\u6bcf\u53f0\u670d\u52a1\u5668\u8fdb\u884c \u76d1\u63a7 \uff0c\u5f53\u51fa\u73b0\u6545\u969c\u65f6\u901a\u8fc7 \u6295\u7968 \u673a\u5236 \u9009\u62e9 \u65b0\u7684master\u5e76\u5c06\u6240\u6709slave\u8fde\u63a5\u5230\u65b0\u7684master\u3002","title":"3.1.1 \u54e8\u5175\u6982\u5ff5"},{"location":"redis/day02/#312","text":"\u54e8\u5175\u7684\u4f5c\u7528\uff1a \u76d1\u63a7\uff1a\u76d1\u63a7master\u548cslave \u4e0d\u65ad\u7684\u68c0\u67e5master\u548cslave\u662f\u5426\u6b63\u5e38\u8fd0\u884c master\u5b58\u6d3b\u68c0\u6d4b\u3001master\u4e0eslave\u8fd0\u884c\u60c5\u51b5\u68c0\u6d4b \u901a\u77e5\uff08\u63d0\u9192\uff09\uff1a\u5f53\u88ab\u76d1\u63a7\u7684\u670d\u52a1\u5668\u51fa\u73b0\u95ee\u9898\u65f6\uff0c\u5411\u5176\u4ed6\uff08\u54e8\u5175\u95f4\uff0c\u5ba2\u6237\u7aef\uff09\u53d1\u9001\u901a\u77e5 \u81ea\u52a8\u6545\u969c\u8f6c\u79fb\uff1a\u65ad\u5f00master\u4e0eslave\u8fde\u63a5\uff0c\u9009\u53d6\u4e00\u4e2aslave\u4f5c\u4e3amaster\uff0c\u5c06\u5176\u4ed6slave\u8fde\u63a5\u65b0\u7684master\uff0c\u5e76\u544a\u77e5\u5ba2\u6237\u7aef\u65b0\u7684\u670d\u52a1\u5668\u5730\u5740 \u6ce8\u610f\uff1a\u54e8\u5175\u4e5f\u662f\u4e00\u53f0redis\u670d\u52a1\u5668\uff0c\u53ea\u662f\u4e0d\u63d0\u4f9b\u6570\u636e\u76f8\u5173\u670d\u52a1\uff0c\u901a\u5e38\u54e8\u5175\u7684\u6570\u91cf\u914d\u7f6e\u4e3a\u5355\u6570","title":"3.1.2 \u54e8\u5175\u4f5c\u7528"},{"location":"redis/day02/#32","text":"\u914d\u7f6e\u54e8\u5175 \u914d\u7f6e\u4e00\u62d6\u4e8c\u7684\u4e3b\u4ece\u7ed3\u6784\uff08\u5229\u7528\u4e4b\u524d\u7684\u65b9\u5f0f\u542f\u52a8\u5373\u53ef\uff09 \u914d\u7f6e\u4e09\u4e2a\u54e8\u5175\uff08\u914d\u7f6e\u76f8\u540c\uff0c\u7aef\u53e3\u4e0d\u540c\uff09\uff0c\u53c2\u770bsentinel.conf 1\uff1a\u8bbe\u7f6e\u54e8\u5175\u76d1\u542c\u7684\u4e3b\u670d\u52a1\u5668\u4fe1\u606f\uff0c sentinel_number\u8868\u793a\u53c2\u4e0e\u6295\u7968\u7684\u54e8\u5175\u6570\u91cf sentinel monitor master_name master_host master_port sentinel_number 2\uff1a\u8bbe\u7f6e\u5224\u5b9a\u670d\u52a1\u5668\u5b95\u673a\u65f6\u957f\uff0c\u8be5\u8bbe\u7f6e\u63a7\u5236\u662f\u5426\u8fdb\u884c\u4e3b\u4ece\u5207\u6362 sentinel down-after-milliseconds master_name million_seconds 3\uff1a\u8bbe\u7f6e\u6545\u969c\u5207\u6362\u7684\u6700\u5927\u8d85\u65f6\u65f6 sentinel failover-timeout master_name million_seconds 4\uff1a\u8bbe\u7f6e\u4e3b\u4ece\u5207\u6362\u540e\uff0c\u540c\u65f6\u8fdb\u884c\u6570\u636e\u540c\u6b65\u7684slave\u6570\u91cf\uff0c\u6570\u503c\u8d8a\u5927\uff0c\u8981\u6c42\u7f51\u7edc\u8d44\u6e90\u8d8a\u9ad8\uff0c\u6570\u503c\u8d8a\u5c0f\uff0c\u540c\u6b65\u65f6\u95f4\u8d8a\u957f sentinel parallel-syncs master_name sync_slave_number \u542f\u52a8\u54e8\u5175 redis-sentinel filename","title":"3.2 \u542f\u7528\u54e8\u5175"},{"location":"redis/day02/#33","text":"\u54e8\u5175\u5728\u8fdb\u884c\u4e3b\u4ece\u5207\u6362\u8fc7\u7a0b\u4e2d\u7ecf\u5386\u4e09\u4e2a\u9636\u6bb5 \u76d1\u63a7 \u901a\u77e5 \u6545\u969c\u8f6c\u79fb","title":"3.3 \u54e8\u5175\u5de5\u4f5c\u539f\u7406"},{"location":"redis/day02/#331","text":"\u7528\u4e8e\u540c\u6b65\u5404\u4e2a\u8282\u70b9\u7684\u72b6\u6001\u4fe1\u606f \u83b7\u53d6\u5404\u4e2asentinel\u7684\u72b6\u6001\uff08\u662f\u5426\u5728\u7ebf\uff09 \u83b7\u53d6master\u7684\u72b6\u6001 master\u5c5e\u6027 prunid prole\uff1amaster \u5404\u4e2aslave\u7684\u8be6\u7ec6\u4fe1\u606f \u83b7\u53d6\u6240\u6709slave\u7684\u72b6\u6001\uff08\u6839\u636emaster\u4e2d\u7684slave\u4fe1\u606f\uff09 slave\u5c5e\u6027 prunid prole\uff1aslave pmaster_host\u3001master_port poffset \u5176\u5185\u90e8\u7684\u5de5\u4f5c\u539f\u7406\u5177\u4f53\u5982\u4e0b\uff1a","title":"3.3.1 \u76d1\u63a7"},{"location":"redis/day02/#332","text":"sentinel\u5728\u901a\u77e5\u9636\u6bb5\u8981\u4e0d\u65ad\u7684\u53bb\u83b7\u53d6master/slave\u7684\u4fe1\u606f\uff0c\u7136\u540e\u5728\u5404\u4e2asentinel\u4e4b\u95f4\u8fdb\u884c\u5171\u4eab\uff0c\u5177\u4f53\u7684\u6d41\u7a0b\u5982\u4e0b\uff1a","title":"3.3.2 \u901a\u77e5"},{"location":"redis/day02/#333","text":"\u5f53master\u5b95\u673a\u540esentinel\u662f\u5982\u4f55\u77e5\u6653\u5e76\u5224\u65ad\u51famaster\u662f\u771f\u7684\u5b95\u673a\u4e86\u5462\uff1f\u6211\u4eec\u6765\u770b\u5177\u4f53\u7684\u64cd\u4f5c\u6d41\u7a0b \u5f53sentinel\u8ba4\u5b9amaster\u4e0b\u7ebf\u4e4b\u540e\uff0c\u6b64\u65f6\u9700\u8981\u51b3\u5b9a\u66f4\u6362master\uff0c\u90a3\u8fd9\u4ef6\u4e8b\u7531\u54ea\u4e2asentinel\u6765\u505a\u5462\uff1f\u8fd9\u65f6\u5019sentinel\u4e4b\u95f4\u8981\u8fdb\u884c\u9009\u4e3e\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5728\u9009\u4e3e\u7684\u65f6\u5019\u6bcf\u4e00\u4e2a\u4eba\u624b\u91cc\u90fd\u6709\u4e00\u7968\uff0c\u800c\u6bcf\u4e00\u4e2a\u4eba\u7684\u53c8\u90fd\u60f3\u5f53\u8fd9\u4e2a\u5904\u7406\u4e8b\u6545\u7684\u4eba\uff0c\u90a3\u600e\u4e48\u529e\uff1f\u5927\u5bb6\u5c31\u5f00\u59cb\u62a2\uff0c\u4e8e\u662f\u6bcf\u4e2a\u4eba\u90fd\u4f1a\u53d1\u51fa\u4e00\u4e2a\u6307\u4ee4\uff0c\u5728\u5185\u7f51\u91cc\u8fb9\u544a\u8bc9\u5927\u5bb6\u6211\u8981\u5f53\u9009\u4e3e\u4eba\uff0c\u6bd4\u5982\u8bf4\u73b0\u5728\u7684sentinel1\u548csentinel4\u53d1\u51fa\u8fd9\u4e2a\u9009\u4e3e\u6307\u4ee4\u4e86\uff0c\u90a3\u4e48sentinel2\u65e2\u80fd\u63a5\u5230sentinel1\u7684\u4e5f\u80fd\u63a5\u5230sentinel4\u7684\uff0c\u63a5\u5230\u4e86\u4ed6\u4eec\u7684\u7533\u8bf7\u4ee5\u540e\u5462\uff0csentinel2\u4ed6\u5c31\u4f1a\u628a\u4ed6\u7684\u4e00\u7968\u6295\u7ed9\u5176\u4e2d\u4e00\u65b9\uff0c\u6295\u7ed9\u8c01\u5462\uff1f\u8c01\u5148\u8fc7\u6765\u6211\u6295\u7ed9\u8c01\uff0c\u5047\u8bbesentinel1\u5148\u8fc7\u6765\uff0c\u6240\u4ee5\u8fd9\u4e2a\u7968\u5c31\u7ed9\u5230\u4e86sentinel1\u3002\u90a3\u4e48\u7ed9\u8fc7\u53bb\u4ee5\u540e\u5462\uff0c\u73b0\u5728sentinel1\u5c31\u62ff\u5230\u4e86\u4e00\u7968\uff0c\u6309\u7167\u8fd9\u6837\u7684\u4e00\u79cd\u5f62\u5f0f\uff0c\u6700\u7ec8\u4f1a\u6709\u4e00\u4e2a\u9009\u4e3e\u7ed3\u679c\u3002\u5bf9\u5e94\u7684\u9009\u4e3e\u6700\u7ec8\u5f97\u7968\u591a\u7684\uff0c\u90a3\u81ea\u7136\u5c31\u6210\u4e3a\u4e86\u5904\u7406\u4e8b\u6545\u7684\u4eba\u3002\u9700\u8981\u6ce8\u610f\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u6709\u53ef\u80fd\u4f1a\u5b58\u5728\u5931\u8d25\u7684\u73b0\u8c61\uff0c\u5c31\u662f\u4e00\u8f6e\u9009\u4e3e\u5b8c\u6ca1\u6709\u9009\u53d6\uff0c\u90a3\u5c31\u4f1a\u63a5\u7740\u8fdb\u884c\u7b2c\u4e8c\u8f6e\u7b2c\u4e09\u8f6e\u76f4\u5230\u5b8c\u6210\u9009\u4e3e\u3002 \u63a5\u4e0b\u6765\u5c31\u662f\u7531\u9009\u4e3e\u80dc\u51fa\u7684sentinel\u53bb\u4eceslave\u4e2d\u9009\u4e00\u4e2a\u65b0\u7684master\u51fa\u6765\u7684\u5de5\u4f5c\uff0c\u8fd9\u4e2a\u6d41\u7a0b\u662f\u4ec0\u4e48\u6837\u7684\u5462\uff1f \u9996\u5148\u5b83\u6709\u4e00\u4e2a\u5728\u670d\u52a1\u5668\u5217\u8868\u4e2d\u6311\u9009\u5907\u9009master\u7684\u539f\u5219 \u4e0d\u5728\u7ebf\u7684OUT \u54cd\u5e94\u6162\u7684OUT \u4e0e\u539fmaster\u65ad\u5f00\u65f6\u95f4\u4e45\u7684OUT \u4f18\u5148\u539f\u5219 \u4f18\u5148\u7ea7 offset runid \u9009\u51fa\u65b0\u7684master\u4e4b\u540e\uff0c\u53d1\u9001\u6307\u4ee4\uff08 sentinel \uff09\u7ed9\u5176\u4ed6\u7684slave\uff1a \u5411\u65b0\u7684master\u53d1\u9001slaveof no one \u5411\u5176\u4ed6slave\u53d1\u9001slaveof \u65b0masterIP\u7aef\u53e3 \u603b\u7ed3 \uff1a\u6545\u969c\u8f6c\u79fb\u9636\u6bb5 \u53d1\u73b0\u95ee\u9898\uff0c\u4e3b\u89c2\u4e0b\u7ebf\u4e0e\u5ba2\u89c2\u4e0b\u7ebf \u7ade\u9009\u8d1f\u8d23\u4eba \u4f18\u9009\u65b0master \u65b0master\u4e0a\u4efb\uff0c\u5176\u4ed6slave\u5207\u6362master\uff0c\u539fmaster\u4f5c\u4e3aslave\u6545\u969c\u6062\u590d\u540e\u8fde\u63a5","title":"3.3.3 \u6545\u969c\u8f6c\u79fb"},{"location":"redis/day02/#4cluster","text":"\u73b0\u72b6\u95ee\u9898\uff1a\u4e1a\u52a1\u53d1\u5c55\u8fc7\u7a0b\u4e2d\u9047\u5230\u7684\u5cf0\u503c\u74f6\u9888 redis\u63d0\u4f9b\u7684\u670d\u52a1OPS\u53ef\u4ee5\u8fbe\u523010\u4e07/\u79d2\uff0c\u5f53\u524d\u4e1a\u52a1OPS\u5df2\u7ecf\u8fbe\u523010\u4e07/\u79d2 \u5185\u5b58\u5355\u673a\u5bb9\u91cf\u8fbe\u5230256G\uff0c\u5f53\u524d\u4e1a\u52a1\u9700\u6c42\u5185\u5b58\u5bb9\u91cf1T \u4f7f\u7528\u96c6\u7fa4\u7684\u65b9\u5f0f\u53ef\u4ee5\u5feb\u901f\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898","title":"4.\u96c6\u7fa4cluster"},{"location":"redis/day02/#41","text":"\u96c6\u7fa4\u5c31\u662f\u4f7f\u7528\u7f51\u7edc\u5c06\u82e5\u5e72\u53f0\u8ba1\u7b97\u673a\u8054\u901a\u8d77\u6765\uff0c\u5e76\u63d0\u4f9b\u7edf\u4e00\u7684\u7ba1\u7406\u65b9\u5f0f\uff0c\u4f7f\u5176\u5bf9\u5916\u5448\u73b0\u5355\u673a\u7684\u670d\u52a1\u6548\u679c \u96c6\u7fa4\u4f5c\u7528\uff1a \u5206\u6563\u5355\u53f0\u670d\u52a1\u5668\u7684\u8bbf\u95ee\u538b\u529b\uff0c\u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861 \u5206\u6563\u5355\u53f0\u670d\u52a1\u5668\u7684\u5b58\u50a8\u538b\u529b\uff0c\u5b9e\u73b0\u53ef\u6269\u5c55\u6027 \u964d\u4f4e\u5355\u53f0\u670d\u52a1\u5668\u5b95\u673a\u5e26\u6765\u7684\u4e1a\u52a1\u707e\u96be","title":"4.1 \u96c6\u7fa4\u7b80\u4ecb"},{"location":"redis/day02/#42_cluster","text":"\u6570\u636e\u5b58\u50a8\u8bbe\u8ba1\uff1a \u901a\u8fc7\u7b97\u6cd5\u8bbe\u8ba1\uff0c\u8ba1\u7b97\u51fakey\u5e94\u8be5\u4fdd\u5b58\u7684\u4f4d\u7f6e \u5c06\u6240\u6709\u7684\u5b58\u50a8\u7a7a\u95f4\u8ba1\u5212\u5207\u5272\u621016384\u4efd\uff0c\u6bcf\u53f0\u4e3b\u673a\u4fdd\u5b58\u4e00\u90e8\u5206 \u6ce8\u610f\uff1a\u6bcf\u4efd\u4ee3\u8868\u7684\u662f\u4e00\u4e2a\u5b58\u50a8\u7a7a\u95f4\uff0c\u4e0d\u662f\u4e00\u4e2akey\u7684\u4fdd\u5b58\u7a7a\u95f4 \u5c06key\u6309\u7167\u8ba1\u7b97\u51fa\u7684\u7ed3\u679c\u653e\u5230\u5bf9\u5e94\u7684\u5b58\u50a8\u7a7a\u95f4 \u90a3redis\u7684\u96c6\u7fa4\u662f\u5982\u4f55\u589e\u5f3a\u53ef\u6269\u5c55\u6027\u7684\u5462\uff1f\u8b6c\u5982\u6211\u4eec\u8981\u589e\u52a0\u4e00\u4e2a\u96c6\u7fa4\u8282\u70b9 \u5f53\u6211\u4eec\u67e5\u627e\u6570\u636e\u65f6\uff0c\u96c6\u7fa4\u662f\u5982\u4f55\u64cd\u4f5c\u7684\u5462\uff1f \u5404\u4e2a\u6570\u636e\u5e93\u76f8\u4e92\u901a\u4fe1\uff0c\u4fdd\u5b58\u5404\u4e2a\u5e93\u4e2d\u69fd\u7684\u7f16\u53f7\u6570\u636e \u4e00\u6b21\u547d\u4e2d\uff0c\u76f4\u63a5\u8fd4\u56de \u4e00\u6b21\u672a\u547d\u4e2d\uff0c\u544a\u77e5\u5177\u4f53\u4f4d\u7f6e","title":"4.2 Cluster\u96c6\u7fa4\u7ed3\u6784\u8bbe\u8ba1"},{"location":"redis/day02/#43_cluster","text":"\u9996\u5148\u8981\u660e\u786e\u7684\u51e0\u4e2a\u8981\u70b9\uff1a \u914d\u7f6e\u670d\u52a1\u5668\uff083\u4e3b3\u4ece\uff09 \u5efa\u7acb\u901a\u4fe1\uff08Meet\uff09 \u5206\u69fd\uff08Slot\uff09 \u642d\u5efa\u4e3b\u4ece\uff08master-slave\uff09 Cluster\u914d\u7f6e \u662f\u5426\u542f\u7528cluster\uff0c\u52a0\u5165cluster\u8282\u70b9 cluster-enabled yes|no cluster\u914d\u7f6e\u6587\u4ef6\u540d\uff0c\u8be5\u6587\u4ef6\u5c5e\u4e8e\u81ea\u52a8\u751f\u6210\uff0c\u4ec5\u7528\u4e8e\u5feb\u901f\u67e5\u627e\u6587\u4ef6\u5e76\u67e5\u8be2\u6587\u4ef6\u5185\u5bb9 cluster-config-file filename \u8282\u70b9\u670d\u52a1\u54cd\u5e94\u8d85\u65f6\u65f6\u95f4\uff0c\u7528\u4e8e\u5224\u5b9a\u8be5\u8282\u70b9\u662f\u5426\u4e0b\u7ebf\u6216\u5207\u6362\u4e3a\u4ece\u8282\u70b9 cluster-node-timeout milliseconds master\u8fde\u63a5\u7684slave\u6700\u5c0f\u6570\u91cf cluster-migration-barrier min_slave_number Cluster\u8282\u70b9\u64cd\u4f5c\u547d\u4ee4 \u67e5\u770b\u96c6\u7fa4\u8282\u70b9\u4fe1\u606f cluster nodes \u66f4\u6539slave\u6307\u5411\u65b0\u7684master cluster replicate master-id \u53d1\u73b0\u4e00\u4e2a\u65b0\u8282\u70b9\uff0c\u65b0\u589emaster cluster meet ip : port \u5ffd\u7565\u4e00\u4e2a\u6ca1\u6709solt\u7684\u8282\u70b9 cluster forget server_id \u624b\u52a8\u6545\u969c\u8f6c\u79fb cluster failover \u96c6\u7fa4\u64cd\u4f5c\u547d\u4ee4\uff1a \u521b\u5efa\u96c6\u7fa4 redis-cli \u2013-cluster create masterhost1 : masterport1 masterhost2:masterport2 masterhost3:masterport3 [masterhostn:masterportn \u2026] slavehost1:slaveport1 slavehost2:slaveport2 slavehost3:slaveport3 -\u2013cluster-replicas n \u6ce8\u610f\uff1amaster\u4e0eslave\u7684\u6570\u91cf\u8981\u5339\u914d\uff0c\u4e00\u4e2amaster\u5bf9\u5e94n\u4e2aslave\uff0c\u7531\u6700\u540e\u7684\u53c2\u6570n\u51b3\u5b9a master\u4e0eslave\u7684\u5339\u914d\u987a\u5e8f\u4e3a\u7b2c\u4e00\u4e2amaster\u4e0e\u524dn\u4e2aslave\u5206\u4e3a\u4e00\u7ec4\uff0c\u5f62\u6210\u4e3b\u4ece\u7ed3\u6784 \u6dfb\u52a0master\u5230\u5f53\u524d\u96c6\u7fa4\u4e2d\uff0c\u8fde\u63a5\u65f6\u53ef\u4ee5\u6307\u5b9a\u4efb\u610f\u73b0\u6709\u8282\u70b9\u5730\u5740\u4e0e\u7aef\u53e3 redis-cli --cluster add-node new-master-host : new-master-port now-host:now-port \u6dfb\u52a0slave redis-cli --cluster add-node new-slave-host : new-slave-port master-host:master-port --cluster-slave --cluster-master-id masterid \u5220\u9664\u8282\u70b9\uff0c\u5982\u679c\u5220\u9664\u7684\u8282\u70b9\u662fmaster\uff0c\u5fc5\u987b\u4fdd\u969c\u5176\u4e2d\u6ca1\u6709\u69fdslot redis-cli --cluster del-node del-slave-host : del-slave-port del-slave-id \u91cd\u65b0\u5206\u69fd\uff0c\u5206\u69fd\u662f\u4ece\u5177\u6709\u69fd\u7684master\u4e2d\u5212\u5206\u4e00\u90e8\u5206\u7ed9\u5176\u4ed6master\uff0c\u8fc7\u7a0b\u4e2d\u4e0d\u521b\u5efa\u65b0\u7684\u69fd redis-cli --cluster reshard new-master-host : new-master:port --cluster-from src- master-id1, src-master-id2, src-master-idn --cluster-to target-master-id -- cluster-slots slots \u6ce8\u610f\uff1a\u5c06\u9700\u8981\u53c2\u4e0e\u5206\u69fd\u7684\u6240\u6709masterid\u4e0d\u5206\u5148\u540e\u987a\u5e8f\u6dfb\u52a0\u5230\u53c2\u6570\u4e2d\uff0c\u4f7f\u7528\uff0c\u5206\u9694 \u6307\u5b9a\u76ee\u6807\u5f97\u5230\u7684\u69fd\u7684\u6570\u91cf\uff0c\u6240\u6709\u7684\u69fd\u5c06\u5e73\u5747\u4ece\u6bcf\u4e2a\u6765\u6e90\u7684master\u5904\u83b7\u53d6 \u91cd\u65b0\u5206\u914d\u69fd\uff0c\u4ece\u5177\u6709\u69fd\u7684master\u4e2d\u5206\u914d\u6307\u5b9a\u6570\u91cf\u7684\u69fd\u5230\u53e6\u4e00\u4e2amaster\u4e2d\uff0c\u5e38\u7528\u4e8e\u6e05\u7a7a\u6307\u5b9amaster\u4e2d\u7684\u69fd redis-cli --cluster reshard src-master-host : src-master-port --cluster-from src- master-id --cluster-to target-master-id --cluster-slots slots --cluster-yes","title":"4.3 Cluster\u96c6\u7fa4\u7ed3\u6784\u642d\u5efa"},{"location":"redis/day02/#5","text":"","title":"5.\u4f01\u4e1a\u7ea7\u89e3\u51b3\u65b9\u6848"},{"location":"redis/day02/#51","text":"\u573a\u666f \uff1a\u201c\u5b95\u673a\u201d \u670d\u52a1\u5668\u542f\u52a8\u540e\u8fc5\u901f\u5b95\u673a \u95ee\u9898\u6392\u67e5 \uff1a 1.\u8bf7\u6c42\u6570\u91cf\u8f83\u9ad8\uff0c\u5927\u91cf\u7684\u8bf7\u6c42\u8fc7\u6765\u4e4b\u540e\u90fd\u9700\u8981\u53bb\u4ece\u7f13\u5b58\u4e2d\u83b7\u53d6\u6570\u636e\uff0c\u4f46\u662f\u7f13\u5b58\u4e2d\u53c8\u6ca1\u6709\uff0c\u6b64\u65f6\u4ece\u6570\u636e\u5e93\u4e2d\u67e5\u627e\u6570\u636e\u7136\u540e\u5c06\u6570\u636e\u518d\u5b58\u5165\u7f13\u5b58\uff0c\u9020\u6210\u4e86\u77ed\u671f\u5185\u5bf9redis\u7684\u9ad8\u5f3a\u5ea6\u64cd\u4f5c\u4ece\u800c\u5bfc\u81f4\u95ee\u9898 2.\u4e3b\u4ece\u4e4b\u95f4\u6570\u636e\u541e\u5410\u91cf\u8f83\u5927\uff0c\u6570\u636e\u540c\u6b65\u64cd\u4f5c\u9891\u5ea6\u8f83\u9ad8 \u89e3\u51b3\u65b9\u6848\uff1a \u524d\u7f6e\u51c6\u5907\u5de5\u4f5c\uff1a 1.\u65e5\u5e38\u4f8b\u884c\u7edf\u8ba1\u6570\u636e\u8bbf\u95ee\u8bb0\u5f55\uff0c\u7edf\u8ba1\u8bbf\u95ee\u9891\u5ea6\u8f83\u9ad8\u7684\u70ed\u70b9\u6570\u636e 2.\u5229\u7528LRU\u6570\u636e\u5220\u9664\u7b56\u7565\uff0c\u6784\u5efa\u6570\u636e\u7559\u5b58\u961f\u5217\u4f8b\u5982\uff1astorm\u4e0ekafka\u914d\u5408 \u51c6\u5907\u5de5\u4f5c\uff1a 1.\u5c06\u7edf\u8ba1\u7ed3\u679c\u4e2d\u7684\u6570\u636e\u5206\u7c7b\uff0c\u6839\u636e\u7ea7\u522b\uff0credis\u4f18\u5148\u52a0\u8f7d\u7ea7\u522b\u8f83\u9ad8\u7684\u70ed\u70b9\u6570\u636e 2.\u5229\u7528\u5206\u5e03\u5f0f\u591a\u670d\u52a1\u5668\u540c\u65f6\u8fdb\u884c\u6570\u636e\u8bfb\u53d6\uff0c\u63d0\u901f\u6570\u636e\u52a0\u8f7d\u8fc7\u7a0b 3.\u70ed\u70b9\u6570\u636e\u4e3b\u4ece\u540c\u65f6\u9884\u70ed \u5b9e\u65bd\uff1a 4.\u4f7f\u7528\u811a\u672c\u7a0b\u5e8f\u56fa\u5b9a\u89e6\u53d1\u6570\u636e\u9884\u70ed\u8fc7\u7a0b 5.\u5982\u679c\u6761\u4ef6\u5141\u8bb8\uff0c\u4f7f\u7528\u4e86CDN\uff08\u5185\u5bb9\u5206\u53d1\u7f51\u7edc\uff09\uff0c\u6548\u679c\u4f1a\u66f4\u597d \u603b\u7684\u6765\u8bf4 \uff1a\u7f13\u5b58\u9884\u70ed\u5c31\u662f\u7cfb\u7edf\u542f\u52a8\u524d\uff0c\u63d0\u524d\u5c06\u76f8\u5173\u7684\u7f13\u5b58\u6570\u636e\u76f4\u63a5\u52a0\u8f7d\u5230\u7f13\u5b58\u7cfb\u7edf\u3002\u907f\u514d\u5728\u7528\u6237\u8bf7\u6c42\u7684\u65f6\u5019\uff0c\u5148\u67e5\u8be2\u6570\u636e\u5e93\uff0c\u7136\u540e\u518d\u5c06\u6570\u636e\u7f13\u5b58\u7684\u95ee\u9898\uff01\u7528\u6237\u76f4\u63a5\u67e5\u8be2\u4e8b\u5148\u88ab\u9884\u70ed\u7684\u7f13\u5b58\u6570\u636e\uff01","title":"5.1 \u7f13\u5b58\u9884\u70ed"},{"location":"redis/day02/#52","text":"\u573a\u666f \uff1a\u6570\u636e\u5e93\u670d\u52a1\u5668\u5d29\u6e83\uff0c\u4e00\u8fde\u4e32\u7684\u573a\u666f\u4f1a\u968f\u4e4b\u513f\u6765 1.\u7cfb\u7edf\u5e73\u7a33\u8fd0\u884c\u8fc7\u7a0b\u4e2d\uff0c\u5ffd\u7136\u6570\u636e\u5e93\u8fde\u63a5\u91cf\u6fc0\u589e 2.\u5e94\u7528\u670d\u52a1\u5668\u65e0\u6cd5\u53ca\u65f6\u5904\u7406\u8bf7\u6c42 3.\u5927\u91cf408\uff0c500\u9519\u8bef\u9875\u9762\u51fa\u73b0 4.\u5ba2\u6237\u53cd\u590d\u5237\u65b0\u9875\u9762\u83b7\u53d6\u6570\u636e 5.\u6570\u636e\u5e93\u5d29\u6e83 6.\u5e94\u7528\u670d\u52a1\u5668\u5d29\u6e83 7.\u91cd\u542f\u5e94\u7528\u670d\u52a1\u5668\u65e0\u6548 8.Redis\u670d\u52a1\u5668\u5d29\u6e83 9.Redis\u96c6\u7fa4\u5d29\u6e83 10.\u91cd\u542f\u6570\u636e\u5e93\u540e\u518d\u6b21\u88ab\u77ac\u95f4\u6d41\u91cf\u653e\u5012 \u95ee\u9898\u6392\u67e5 \uff1a 1.\u5728\u4e00\u4e2a\u8f83\u77ed\u7684\u65f6\u95f4\u5185\uff0c\u7f13\u5b58\u4e2d\u8f83\u591a\u7684key\u96c6\u4e2d\u8fc7\u671f 2.\u6b64\u5468\u671f\u5185\u8bf7\u6c42\u8bbf\u95ee\u8fc7\u671f\u7684\u6570\u636e\uff0credis\u672a\u547d\u4e2d\uff0credis\u5411\u6570\u636e\u5e93\u83b7\u53d6\u6570\u636e 3.\u6570\u636e\u5e93\u540c\u65f6\u63a5\u6536\u5230\u5927\u91cf\u7684\u8bf7\u6c42\u65e0\u6cd5\u53ca\u65f6\u5904\u7406 4.Redis\u5927\u91cf\u8bf7\u6c42\u88ab\u79ef\u538b\uff0c\u5f00\u59cb\u51fa\u73b0\u8d85\u65f6\u73b0\u8c61 5.\u6570\u636e\u5e93\u6d41\u91cf\u6fc0\u589e\uff0c\u6570\u636e\u5e93\u5d29\u6e83 6.\u91cd\u542f\u540e\u4ecd\u7136\u9762\u5bf9\u7f13\u5b58\u4e2d\u65e0\u6570\u636e\u53ef\u7528 7.Redis\u670d\u52a1\u5668\u8d44\u6e90\u88ab\u4e25\u91cd\u5360\u7528\uff0cRedis\u670d\u52a1\u5668\u5d29\u6e83 8.Redis\u96c6\u7fa4\u5448\u73b0\u5d29\u584c\uff0c\u96c6\u7fa4\u74e6\u89e3 9.\u5e94\u7528\u670d\u52a1\u5668\u65e0\u6cd5\u53ca\u65f6\u5f97\u5230\u6570\u636e\u54cd\u5e94\u8bf7\u6c42\uff0c\u6765\u81ea\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u6570\u91cf\u8d8a\u6765\u8d8a\u591a\uff0c\u5e94\u7528\u670d\u52a1\u5668\u5d29\u6e83 10.\u5e94\u7528\u670d\u52a1\u5668\uff0credis\uff0c\u6570\u636e\u5e93\u5168\u90e8\u91cd\u542f\uff0c\u6548\u679c\u4e0d\u7406\u60f3 \u603b\u800c\u8a00\u4e4b\u5c31\u4e24\u70b9\uff1a\u77ed\u65f6\u95f4\u8303\u56f4\u5185\uff0c\u5927\u91cfkey\u96c6\u4e2d\u8fc7\u671f \u89e3\u51b3\u65b9\u6848 \u601d\u8def\uff1a 1.\u66f4\u591a\u7684\u9875\u9762\u9759\u6001\u5316\u5904\u7406 2.\u6784\u5efa\u591a\u7ea7\u7f13\u5b58\u67b6\u6784 Nginx\u7f13\u5b58+redis\u7f13\u5b58+ehcache\u7f13\u5b58 3.\u68c0\u6d4bMysql\u4e25\u91cd\u8017\u65f6\u4e1a\u52a1\u8fdb\u884c\u4f18\u5316 \u5bf9\u6570\u636e\u5e93\u7684\u74f6\u9888\u6392\u67e5\uff1a\u4f8b\u5982\u8d85\u65f6\u67e5\u8be2\u3001\u8017\u65f6\u8f83\u9ad8\u4e8b\u52a1\u7b49 4.\u707e\u96be\u9884\u8b66\u673a\u5236 \u76d1\u63a7redis\u670d\u52a1\u5668\u6027\u80fd\u6307\u6807 CPU\u5360\u7528\u3001CPU\u4f7f\u7528\u7387 \u5185\u5b58\u5bb9\u91cf \u67e5\u8be2\u5e73\u5747\u54cd\u5e94\u65f6\u95f4 \u7ebf\u7a0b\u6570 5.\u9650\u6d41\u3001\u964d\u7ea7 \u77ed\u65f6\u95f4\u8303\u56f4\u5185\u727a\u7272\u4e00\u4e9b\u5ba2\u6237\u4f53\u9a8c\uff0c\u9650\u5236\u4e00\u90e8\u5206\u8bf7\u6c42\u8bbf\u95ee\uff0c\u964d\u4f4e\u5e94\u7528\u670d\u52a1\u5668\u538b\u529b\uff0c\u5f85\u4e1a\u52a1\u4f4e\u901f\u8fd0\u8f6c\u540e\u518d\u9010\u6b65\u653e\u5f00\u8bbf\u95ee \u843d\u5730\u5b9e\u8df5\uff1a 1.LRU\u4e0eLFU\u5207\u6362 2.\u6570\u636e\u6709\u6548\u671f\u7b56\u7565\u8c03\u6574 \u6839\u636e\u4e1a\u52a1\u6570\u636e\u6709\u6548\u671f\u8fdb\u884c\u5206\u7c7b\u9519\u5cf0\uff0cA\u7c7b90\u5206\u949f\uff0cB\u7c7b80\u5206\u949f\uff0cC\u7c7b70\u5206\u949f \u8fc7\u671f\u65f6\u95f4\u4f7f\u7528\u56fa\u5b9a\u65f6\u95f4+\u968f\u673a\u503c\u7684\u5f62\u5f0f\uff0c\u7a00\u91ca\u96c6\u4e2d\u5230\u671f\u7684key\u7684\u6570\u91cf 3.\u8d85\u70ed\u6570\u636e\u4f7f\u7528\u6c38\u4e45key 4.\u5b9a\u671f\u7ef4\u62a4\uff08\u81ea\u52a8+\u4eba\u5de5\uff09 \u5bf9\u5373\u5c06\u8fc7\u671f\u6570\u636e\u505a\u8bbf\u95ee\u91cf\u5206\u6790\uff0c\u786e\u8ba4\u662f\u5426\u5ef6\u65f6\uff0c\u914d\u5408\u8bbf\u95ee\u91cf\u7edf\u8ba1\uff0c\u505a\u70ed\u70b9\u6570\u636e\u7684\u5ef6\u65f6 5.\u52a0\u9501\uff1a\u614e\u7528\uff01 \u603b\u7684\u6765\u8bf4 \uff1a\u7f13\u5b58\u96ea\u5d29\u5c31\u662f\u77ac\u95f4\u8fc7\u671f\u6570\u636e\u91cf\u592a\u5927\uff0c\u5bfc\u81f4\u5bf9\u6570\u636e\u5e93\u670d\u52a1\u5668\u9020\u6210\u538b\u529b\u3002\u5982\u80fd\u591f\u6709\u6548\u907f\u514d\u8fc7\u671f\u65f6\u95f4\u96c6\u4e2d\uff0c\u53ef\u4ee5\u6709\u6548\u89e3\u51b3\u96ea\u5d29\u73b0\u8c61\u7684 \u51fa\u73b0\uff08\u7ea640%\uff09\uff0c\u914d\u5408\u5176\u4ed6\u7b56\u7565\u4e00\u8d77\u4f7f\u7528\uff0c\u5e76\u76d1\u63a7\u670d\u52a1\u5668\u7684\u8fd0\u884c\u6570\u636e\uff0c\u6839\u636e\u8fd0\u884c\u8bb0\u5f55\u505a\u5feb\u901f\u8c03\u6574\u3002","title":"5.2 \u7f13\u5b58\u96ea\u5d29"},{"location":"redis/day02/#53","text":"\u573a\u666f \uff1a\u8fd8\u662f\u6570\u636e\u5e93\u670d\u52a1\u5668\u5d29\u6e83\uff0c\u4f46\u662f\u8ddf\u4e4b\u524d\u7684\u573a\u666f\u6709\u70b9\u4e0d\u592a\u4e00\u6837 1.\u7cfb\u7edf\u5e73\u7a33\u8fd0\u884c\u8fc7\u7a0b\u4e2d 2.\u6570\u636e\u5e93\u8fde\u63a5\u91cf\u77ac\u95f4\u6fc0\u589e 3.Redis\u670d\u52a1\u5668\u65e0\u5927\u91cfkey\u8fc7\u671f 4.Redis\u5185\u5b58\u5e73\u7a33\uff0c\u65e0\u6ce2\u52a8 5.Redis\u670d\u52a1\u5668CPU\u6b63\u5e38 6.\u6570\u636e\u5e93\u5d29\u6e83 \u95ee\u9898\u6392\u67e5\uff1a 1.Redis\u4e2d\u67d0\u4e2akey\u8fc7\u671f\uff0c\u8be5key\u8bbf\u95ee\u91cf\u5de8\u5927 2.\u591a\u4e2a\u6570\u636e\u8bf7\u6c42\u4ece\u670d\u52a1\u5668\u76f4\u63a5\u538b\u5230Redis\u540e\uff0c\u5747\u672a\u547d\u4e2d 3.Redis\u5728\u77ed\u65f6\u95f4\u5185\u53d1\u8d77\u4e86\u5927\u91cf\u5bf9\u6570\u636e\u5e93\u4e2d\u540c\u4e00\u6570\u636e\u7684\u8bbf\u95ee \u603b\u800c\u8a00\u4e4b\u5c31\u4e24\u70b9\uff1a\u5355\u4e2akey\u9ad8\u70ed\u6570\u636e\uff0ckey\u8fc7\u671f \u89e3\u51b3\u65b9\u6848 \uff1a 1.\u9884\u5148\u8bbe\u5b9a \u4ee5\u7535\u5546\u4e3a\u4f8b\uff0c\u6bcf\u4e2a\u5546\u5bb6\u6839\u636e\u5e97\u94fa\u7b49\u7ea7\uff0c\u6307\u5b9a\u82e5\u5e72\u6b3e\u4e3b\u6253\u5546\u54c1\uff0c\u5728\u8d2d\u7269\u8282\u671f\u95f4\uff0c\u52a0\u5927\u6b64\u7c7b\u4fe1\u606fkey\u7684\u8fc7\u671f\u65f6\u957f \u6ce8\u610f\uff1a\u8d2d\u7269\u8282\u4e0d\u4ec5\u4ec5\u6307\u5f53\u5929\uff0c\u4ee5\u53ca\u540e\u7eed\u82e5\u5e72\u5929\uff0c\u8bbf\u95ee\u5cf0\u503c\u5448\u73b0\u9010\u6e10\u964d\u4f4e\u7684\u8d8b\u52bf 2.\u73b0\u573a\u8c03\u6574 \u76d1\u63a7\u8bbf\u95ee\u91cf\uff0c\u5bf9\u81ea\u7136\u6d41\u91cf\u6fc0\u589e\u7684\u6570\u636e\u5ef6\u957f\u8fc7\u671f\u65f6\u95f4\u6216\u8bbe\u7f6e\u4e3a\u6c38\u4e45\u6027key 3.\u540e\u53f0\u5237\u65b0\u6570\u636e \u542f\u52a8\u5b9a\u65f6\u4efb\u52a1\uff0c\u9ad8\u5cf0\u671f\u6765\u4e34\u4e4b\u524d\uff0c\u5237\u65b0\u6570\u636e\u6709\u6548\u671f\uff0c\u786e\u4fdd\u4e0d\u4e22\u5931 4.\u4e8c\u7ea7\u7f13\u5b58 \u8bbe\u7f6e\u4e0d\u540c\u7684\u5931\u6548\u65f6\u95f4\uff0c\u4fdd\u969c\u4e0d\u4f1a\u88ab\u540c\u65f6\u6dd8\u6c70\u5c31\u884c 5.\u52a0\u9501 \u5206\u5e03\u5f0f\u9501\uff0c\u9632\u6b62\u88ab\u51fb\u7a7f\uff0c\u4f46\u662f\u8981\u6ce8\u610f\u4e5f\u662f\u6027\u80fd\u74f6\u9888\uff0c\u614e\u91cd\uff01 \u603b\u7684\u6765\u8bf4 \uff1a\u7f13\u5b58\u51fb\u7a7f\u5c31\u662f\u5355\u4e2a\u9ad8\u70ed\u6570\u636e\u8fc7\u671f\u7684\u77ac\u95f4\uff0c\u6570\u636e\u8bbf\u95ee\u91cf\u8f83\u5927\uff0c\u672a\u547d\u4e2dredis\u540e\uff0c\u53d1\u8d77\u4e86\u5927\u91cf\u5bf9\u540c\u4e00\u6570\u636e\u7684\u6570\u636e\u5e93\u8bbf\u95ee\uff0c\u5bfc\u81f4\u5bf9\u6570 \u636e\u5e93\u670d\u52a1\u5668\u9020\u6210\u538b\u529b\u3002\u5e94\u5bf9\u7b56\u7565\u5e94\u8be5\u5728\u4e1a\u52a1\u6570\u636e\u5206\u6790\u4e0e\u9884\u9632\u65b9\u9762\u8fdb\u884c\uff0c\u914d\u5408\u8fd0\u884c\u76d1\u63a7\u6d4b\u8bd5\u4e0e\u5373\u65f6\u8c03\u6574\u7b56\u7565\uff0c\u6bd5\u7adf\u5355\u4e2akey\u7684\u8fc7 \u671f\u76d1\u63a7\u96be\u5ea6\u8f83\u9ad8\uff0c\u914d\u5408\u96ea\u5d29\u5904\u7406\u7b56\u7565\u5373\u53ef\u3002","title":"5.3 \u7f13\u5b58\u51fb\u7a7f"},{"location":"redis/day02/#54","text":"\u573a\u666f \uff1a\u6570\u636e\u5e93\u670d\u52a1\u5668\u53c8\u5d29\u6e83\u4e86\uff0c\u8ddf\u4e4b\u524d\u7684\u4e00\u6837\u5417\uff1f 1.\u7cfb\u7edf\u5e73\u7a33\u8fd0\u884c\u8fc7\u7a0b\u4e2d 2.\u5e94\u7528\u670d\u52a1\u5668\u6d41\u91cf\u968f\u65f6\u95f4\u589e\u91cf\u8f83\u5927 3.Redis\u670d\u52a1\u5668\u547d\u4e2d\u7387\u968f\u65f6\u95f4\u9010\u6b65\u964d\u4f4e 4.Redis\u5185\u5b58\u5e73\u7a33\uff0c\u5185\u5b58\u65e0\u538b\u529b 5.Redis\u670d\u52a1\u5668CPU\u5360\u7528\u6fc0\u589e 6.\u6570\u636e\u5e93\u670d\u52a1\u5668\u538b\u529b\u6fc0\u589e 7.\u6570\u636e\u5e93\u5d29\u6e83 \u95ee\u9898\u6392\u67e5\uff1a 1.Redis\u4e2d\u5927\u9762\u79ef\u51fa\u73b0\u672a\u547d\u4e2d 2.\u51fa\u73b0\u975e\u6b63\u5e38URL\u8bbf\u95ee \u95ee\u9898\u5206\u6790 \uff1a \u83b7\u53d6\u7684\u6570\u636e\u5728\u6570\u636e\u5e93\u4e2d\u4e5f\u4e0d\u5b58\u5728\uff0c\u6570\u636e\u5e93\u67e5\u8be2\u672a\u5f97\u5230\u5bf9\u5e94\u6570\u636e Redis\u83b7\u53d6\u5230null\u6570\u636e\u672a\u8fdb\u884c\u6301\u4e45\u5316\uff0c\u76f4\u63a5\u8fd4\u56de \u4e0b\u6b21\u6b64\u7c7b\u6570\u636e\u5230\u8fbe\u91cd\u590d\u4e0a\u8ff0\u8fc7\u7a0b \u51fa\u73b0\u9ed1\u5ba2\u653b\u51fb\u670d\u52a1\u5668 \u89e3\u51b3\u65b9\u6848 \uff1a 1.\u7f13\u5b58null \u5bf9\u67e5\u8be2\u7ed3\u679c\u4e3anull\u7684\u6570\u636e\u8fdb\u884c\u7f13\u5b58\uff08\u957f\u671f\u4f7f\u7528\uff0c\u5b9a\u671f\u6e05\u7406\uff09\uff0c\u8bbe\u5b9a\u77ed\u65f6\u9650\uff0c\u4f8b\u598230-60\u79d2\uff0c\u6700\u9ad85\u5206\u949f 2.\u767d\u540d\u5355\u7b56\u7565 \u63d0\u524d\u9884\u70ed\u5404\u79cd\u5206\u7c7b\u6570\u636eid\u5bf9\u5e94\u7684bitmaps\uff0cid\u4f5c\u4e3abitmaps\u7684offset\uff0c\u76f8\u5f53\u4e8e\u8bbe\u7f6e\u4e86\u6570\u636e\u767d\u540d\u5355\u3002\u5f53\u52a0\u8f7d\u6b63\u5e38\u6570\u636e\u65f6\u653e\u884c\uff0c\u52a0\u8f7d\u5f02\u5e38\u6570\u636e\u65f6\u76f4\u63a5\u62e6\u622a\uff08\u6548\u7387\u504f\u4f4e\uff09 \u4f7f\u7528\u5e03\u9686\u8fc7\u6ee4\u5668\uff08\u6709\u5173\u5e03\u9686\u8fc7\u6ee4\u5668\u7684\u547d\u4e2d\u95ee\u9898\u5bf9\u5f53\u524d\u72b6\u51b5\u53ef\u4ee5\u5ffd\u7565\uff09 2.\u5b9e\u65bd\u76d1\u63a7 \u5b9e\u65f6\u76d1\u63a7redis\u547d\u4e2d\u7387\uff08\u4e1a\u52a1\u6b63\u5e38\u8303\u56f4\u65f6\uff0c\u901a\u5e38\u4f1a\u6709\u4e00\u4e2a\u6ce2\u52a8\u503c\uff09\u4e0enull\u6570\u636e\u7684\u5360\u6bd4 \u975e\u6d3b\u52a8\u65f6\u6bb5\u6ce2\u52a8\uff1a\u901a\u5e38\u68c0\u6d4b3-5\u500d\uff0c\u8d85\u8fc75\u500d\u7eb3\u5165\u91cd\u70b9\u6392\u67e5\u5bf9\u8c61 \u6d3b\u52a8\u65f6\u6bb5\u6ce2\u52a8\uff1a\u901a\u5e38\u68c0\u6d4b10-50\u500d\uff0c\u8d85\u8fc750\u500d\u7eb3\u5165\u91cd\u70b9\u6392\u67e5\u5bf9\u8c61 \u6839\u636e\u500d\u6570\u4e0d\u540c\uff0c\u542f\u52a8\u4e0d\u540c\u7684\u6392\u67e5\u6d41\u7a0b\u3002\u7136\u540e\u4f7f\u7528\u9ed1\u540d\u5355\u8fdb\u884c\u9632\u63a7\uff08\u8fd0\u8425\uff09 4.key\u52a0\u5bc6 \u95ee\u9898\u51fa\u73b0\u540e\uff0c\u4e34\u65f6\u542f\u52a8\u9632\u707e\u4e1a\u52a1key\uff0c\u5bf9key\u8fdb\u884c\u4e1a\u52a1\u5c42\u4f20\u8f93\u52a0\u5bc6\u670d\u52a1\uff0c\u8bbe\u5b9a\u6821\u9a8c\u7a0b\u5e8f\uff0c\u8fc7\u6765\u7684key\u6821\u9a8c \u4f8b\u5982\u6bcf\u5929\u968f\u673a\u5206\u914d60\u4e2a\u52a0\u5bc6\u4e32\uff0c\u6311\u90092\u52303\u4e2a\uff0c\u6df7\u6dc6\u5230\u9875\u9762\u6570\u636eid\u4e2d\uff0c\u53d1\u73b0\u8bbf\u95eekey\u4e0d\u6ee1\u8db3\u89c4\u5219\uff0c\u9a73\u56de\u6570\u636e\u8bbf\u95ee \u603b\u7684\u6765\u8bf4 \uff1a\u7f13\u5b58\u51fb\u7a7f\u662f\u6307\u8bbf\u95ee\u4e86\u4e0d\u5b58\u5728\u7684\u6570\u636e\uff0c\u8df3\u8fc7\u4e86\u5408\u6cd5\u6570\u636e\u7684redis\u6570\u636e\u7f13\u5b58\u9636\u6bb5\uff0c\u6bcf\u6b21\u8bbf\u95ee\u6570\u636e\u5e93\uff0c\u5bfc\u81f4\u5bf9\u6570\u636e\u5e93\u670d\u52a1\u5668\u9020\u6210\u538b\u529b\u3002\u901a\u5e38\u6b64\u7c7b\u6570\u636e\u7684\u51fa\u73b0\u91cf\u662f\u4e00\u4e2a\u8f83\u4f4e\u7684\u503c\uff0c\u5f53\u51fa\u73b0\u6b64\u7c7b\u60c5\u51b5\u4ee5\u6bd2\u653b\u6bd2\uff0c\u5e76\u53ca\u65f6\u62a5\u8b66\u3002\u5e94\u5bf9\u7b56\u7565\u5e94\u8be5\u5728\u4e34\u65f6\u9884\u6848\u9632\u8303\u65b9\u9762\u591a\u505a\u6587\u7ae0\u3002 \u65e0\u8bba\u662f\u9ed1\u540d\u5355\u8fd8\u662f\u767d\u540d\u5355\uff0c\u90fd\u662f\u5bf9\u6574\u4f53\u7cfb\u7edf\u7684\u538b\u529b\uff0c\u8b66\u62a5\u89e3\u9664\u540e\u5c3d\u5feb\u79fb\u9664\u3002","title":"5.4 \u7f13\u5b58\u7a7f\u900f"},{"location":"redis/day02/#55","text":"redis\u4e2d\u7684\u76d1\u63a7\u6307\u6807\u5982\u4e0b\uff1a \u6027\u80fd\u6307\u6807\uff1aPerformance \u54cd\u5e94\u8bf7\u6c42\u7684\u5e73\u5747\u65f6\u95f4: properties latency \u5e73\u5747\u6bcf\u79d2\u5904\u7406\u8bf7\u6c42\u603b\u6570 properties instantaneous_ops_per_sec \u7f13\u5b58\u67e5\u8be2\u547d\u4e2d\u7387\uff08\u901a\u8fc7\u67e5\u8be2\u603b\u6b21\u6570\u4e0e\u67e5\u8be2\u5f97\u5230\u975enil\u6570\u636e\u603b\u6b21\u6570\u8ba1\u7b97\u800c\u6765\uff09 ```properties hit_rate(calculated) ``` \u5185\u5b58\u6307\u6807\uff1aMemory \u5f53\u524d\u5185\u5b58\u4f7f\u7528\u91cf properties used_memory \u5185\u5b58\u788e\u7247\u7387\uff08\u5173\u7cfb\u5230\u662f\u5426\u8fdb\u884c\u788e\u7247\u6574\u7406\uff09 properties mem_fragmentation_ratio \u4e3a\u907f\u514d\u5185\u5b58\u6ea2\u51fa\u5220\u9664\u7684key\u7684\u603b\u6570\u91cf properties evicted_keys \u57fa\u4e8e\u963b\u585e\u64cd\u4f5c\uff08BLPOP\u7b49\uff09\u5f71\u54cd\u7684\u5ba2\u6237\u7aef\u6570\u91cf properties blocked_clients \u57fa\u672c\u6d3b\u52a8\u6307\u6807\uff1aBasic_activity \u5f53\u524d\u5ba2\u6237\u7aef\u8fde\u63a5\u603b\u6570 properties connected_clients \u5f53\u524d\u8fde\u63a5slave\u603b\u6570 properties connected_slaves \u6700\u540e\u4e00\u6b21\u4e3b\u4ece\u4fe1\u606f\u4ea4\u6362\u8ddd\u73b0\u5728\u7684\u79d2 properties master_last_io_seconds_ago key\u7684\u603b\u6570 properties keyspace \u6301\u4e45\u6027\u6307\u6807\uff1aPersistence \u5f53\u524d\u670d\u52a1\u5668\u6700\u540e\u4e00\u6b21RDB\u6301\u4e45\u5316\u7684\u65f6\u95f4 properties rdb_last_save_time \u5f53\u524d\u670d\u52a1\u5668\u6700\u540e\u4e00\u6b21RDB\u6301\u4e45\u5316\u540e\u6570\u636e\u53d8\u5316\u603b\u91cf properties rdb_changes_since_last_save \u9519\u8bef\u6307\u6807\uff1aError \u88ab\u62d2\u7edd\u8fde\u63a5\u7684\u5ba2\u6237\u7aef\u603b\u6570\uff08\u57fa\u4e8e\u8fbe\u5230\u6700\u5927\u8fde\u63a5\u503c\u7684\u56e0\u7d20\uff09 properties rejected_connections key\u672a\u547d\u4e2d\u7684\u603b\u6b21\u6570 properties keyspace_misses \u4e3b\u4ece\u65ad\u5f00\u7684\u79d2\u6570 properties master_link_down_since_seconds \u8981\u5bf9redis\u7684\u76f8\u5173\u6307\u6807\u8fdb\u884c\u76d1\u63a7\uff0c\u6211\u4eec\u53ef\u4ee5\u91c7\u7528\u4e00\u4e9b\u7528\u5177\uff1a CloudInsight Redis Prometheus Redis-stat Redis-faina RedisLive zabbix \u4e5f\u6709\u4e00\u4e9b\u547d\u4ee4\u5de5\u5177\uff1a benchmark \u6d4b\u8bd5\u5f53\u524d\u670d\u52a1\u5668\u7684\u5e76\u53d1\u6027\u80fd properties redis-benchmark [-h ] [-p ] [-c ] [-n <requests]> [-k ] \u8303\u4f8b1\uff1a50\u4e2a\u8fde\u63a5\uff0c10000\u6b21\u8bf7\u6c42\u5bf9\u5e94\u7684\u6027\u80fd properties redis-benchmark \u8303\u4f8b2\uff1a100\u4e2a\u8fde\u63a5\uff0c5000\u6b21\u8bf7\u6c42\u5bf9\u5e94\u7684\u6027\u80fd properties redis-benchmark -c 100 -n 5000 redis-cli monitor\uff1a\u542f\u52a8\u670d\u52a1\u5668\u8c03\u8bd5\u4fe1\u606f properties monitor slowlog\uff1a\u6162\u65e5\u5fd7 \u83b7\u53d6\u6162\u67e5\u8be2\u65e5\u5fd7 properties slowlog [operator] get \uff1a\u83b7\u53d6\u6162\u67e5\u8be2\u65e5\u5fd7\u4fe1\u606f len \uff1a\u83b7\u53d6\u6162\u67e5\u8be2\u65e5\u5fd7\u6761\u76ee\u6570 reset \uff1a\u91cd\u7f6e\u6162\u67e5\u8be2\u65e5\u5fd7 \u76f8\u5173\u914d\u7f6e properties slowlog-log-slower-than 1000 #\u8bbe\u7f6e\u6162\u67e5\u8be2\u7684\u65f6\u95f4\u4e0b\u7ebf\uff0c\u5355\u4f4d\uff1a\u5fae\u5999 slowlog-max-len 100 #\u8bbe\u7f6e\u6162\u67e5\u8be2\u547d\u4ee4\u5bf9\u5e94\u7684\u65e5\u5fd7\u663e\u793a\u957f\u5ea6\uff0c\u5355\u4f4d\uff1a\u547d\u4ee4\u6570","title":"5.5 \u6027\u80fd\u6307\u6807\u76d1\u63a7"},{"location":"zookeeper/zk/","text":"Zookeeper \u00b6 1)\u521d\u8bc6 Zookeeper \u00b6 1.1)Zookeeper\u6982\u5ff5 \u00b6 \u2022Zookeeper \u662f Apache Hadoop \u9879\u76ee\u4e0b\u7684\u4e00\u4e2a\u5b50\u9879\u76ee\uff0c\u662f\u4e00\u4e2a\u6811\u5f62\u76ee\u5f55\u670d\u52a1\u3002 \u2022Zookeeper \u7ffb\u8bd1\u8fc7\u6765\u5c31\u662f \u52a8\u7269\u56ed\u7ba1\u7406\u5458\uff0c\u4ed6\u662f\u7528\u6765\u7ba1 Hadoop\uff08\u5927\u8c61\uff09\u3001Hive(\u871c\u8702)\u3001Pig(\u5c0f \u732a)\u7684\u7ba1\u7406\u5458\u3002\u7b80\u79f0zk \u2022Zookeeper \u662f\u4e00\u4e2a\u5206\u5e03\u5f0f\u7684\u3001\u5f00\u6e90\u7684\u5206\u5e03\u5f0f\u5e94\u7528\u7a0b\u5e8f\u7684\u534f\u8c03\u670d\u52a1\u3002 \u2022Zookeeper \u63d0\u4f9b\u7684\u4e3b\u8981\u529f\u80fd\u5305\u62ec\uff1a \u2022\u914d\u7f6e\u7ba1\u7406 \u2022\u5206\u5e03\u5f0f\u9501 \u2022\u96c6\u7fa4\u7ba1\u7406 2)ZooKeeper \u5b89\u88c5\u4e0e\u914d\u7f6e \u00b6 2.1) \u4e0b\u8f7d\u5b89\u88c5 \u00b6 2.1.1\u3001\u73af\u5883\u51c6\u5907 \u00b6 ZooKeeper\u670d\u52a1\u5668\u662f\u7528Java\u521b\u5efa\u7684\uff0c\u5b83\u8fd0\u884c\u5728JVM\u4e4b\u4e0a\u3002\u9700\u8981\u5b89\u88c5JDK 7\u6216\u66f4\u9ad8\u7248\u672c\u3002 2.1.2\u3001\u4e0a\u4f20 \u00b6 \u5c06\u4e0b\u8f7d\u7684ZooKeeper\u653e\u5230/opt/ZooKeeper\u76ee\u5f55\u4e0b #\u4e0a\u4f20zookeeper alt+p put f:/setup/apache-zookeeper-3.5.6-bin.tar.gz #\u6253\u5f00 opt\u76ee\u5f55 cd /opt #\u521b\u5efazooKeeper\u76ee\u5f55 mkdir zooKeeper #\u5c06zookeeper\u5b89\u88c5\u5305\u79fb\u52a8\u5230 /opt/zooKeeper mv apache-zookeeper-3.5.6-bin.tar.gz /opt/zookeeper/ 2.1.3\u3001\u89e3\u538b \u00b6 \u5c06tar\u5305\u89e3\u538b\u5230/opt/zookeeper\u76ee\u5f55\u4e0b tar -zxvf apache-ZooKeeper-3.5.6-bin.tar.gz 2.2) \u914d\u7f6e\u542f\u52a8 \u00b6 2.2.1\u3001\u914d\u7f6ezoo.cfg \u00b6 \u8fdb\u5165\u5230conf\u76ee\u5f55\u62f7\u8d1d\u4e00\u4e2azoo_sample.cfg\u5e76\u5b8c\u6210\u914d\u7f6e #\u8fdb\u5165\u5230conf\u76ee\u5f55 cd /opt/zooKeeper/apache-zooKeeper-3.5.6-bin/conf/ #\u62f7\u8d1d cp zoo_sample.cfg zoo.cfg \u4fee\u6539zoo.cfg #\u6253\u5f00\u76ee\u5f55 cd /opt/zooKeeper/ #\u521b\u5efazooKeeper\u5b58\u50a8\u76ee\u5f55 mkdir zkdata #\u4fee\u6539zoo.cfg vim /opt/zooKeeper/apache-zooKeeper-3.5.6-bin/conf/zoo.cfg \u4fee\u6539\u5b58\u50a8\u76ee\u5f55\uff1adataDir=/opt/zookeeper/zkdata 2.2.2\u3001\u542f\u52a8ZooKeeper \u00b6 cd /opt/zooKeeper/apache-zooKeeper-3.5.6-bin/bin/ #\u542f\u52a8 ./zkServer.sh start \u770b\u5230\u4e0a\u56fe\u8868\u793aZooKeeper\u6210\u529f\u542f\u52a8 3\u3001\u67e5\u770bZooKeeper\u72b6\u6001 ./zkServer.sh status zookeeper\u542f\u52a8\u6210\u529f\u3002standalone\u4ee3\u8868zk\u6ca1\u6709\u642d\u5efa\u96c6\u7fa4\uff0c\u73b0\u5728\u662f\u5355\u8282\u70b9 zookeeper\u6ca1\u6709\u542f\u52a8 \u00b6 3)ZooKeeper \u547d\u4ee4\u64cd\u4f5c \u00b6 3.1)Zookeeper\u547d\u4ee4\u64cd\u4f5c\u6570\u636e\u6a21\u578b \u00b6 \u2022ZooKeeper \u662f\u4e00\u4e2a\u6811\u5f62\u76ee\u5f55\u670d\u52a1,\u5176\u6570\u636e\u6a21\u578b\u548cUnix\u7684\u6587\u4ef6\u7cfb\u7edf\u76ee\u5f55\u6811\u5f88\u7c7b\u4f3c\uff0c\u62e5\u6709\u4e00\u4e2a\u5c42\u6b21\u5316\u7ed3\u6784\u3002 \u2022\u8fd9\u91cc\u9762\u7684\u6bcf\u4e00\u4e2a\u8282\u70b9\u90fd\u88ab\u79f0\u4e3a\uff1a ZNode\uff0c\u6bcf\u4e2a\u8282\u70b9\u4e0a\u90fd\u4f1a\u4fdd\u5b58\u81ea\u5df1\u7684\u6570\u636e\u548c\u8282\u70b9\u4fe1\u606f\u3002 \u2022 \u8282\u70b9\u53ef\u4ee5\u62e5\u6709\u5b50\u8282\u70b9\uff0c\u540c\u65f6\u4e5f\u5141\u8bb8\u5c11\u91cf\uff081MB\uff09\u6570\u636e\u5b58\u50a8\u5728\u8be5\u8282\u70b9\u4e4b\u4e0b\u3002 \u2022\u8282\u70b9\u53ef\u4ee5\u5206\u4e3a\u56db\u5927\u7c7b\uff1a \u2022PERSISTENT \u6301\u4e45\u5316\u8282\u70b9 \u2022EPHEMERAL \u4e34\u65f6\u8282\u70b9 \uff1a-e \u2022PERSISTENT_SEQUENTIAL \u6301\u4e45\u5316\u987a\u5e8f\u8282\u70b9 \uff1a-s \u2022EPHEMERAL_SEQUENTIAL \u4e34\u65f6\u987a\u5e8f\u8282\u70b9 \uff1a-es 3.2)Zookeeper\u547d\u4ee4\u64cd\u4f5c\u670d\u52a1\u7aef\u547d\u4ee4 \u00b6 \u2022\u542f\u52a8 ZooKeeper \u670d\u52a1: ./zkServer.sh start \u2022\u67e5\u770b ZooKeeper \u670d\u52a1\u72b6\u6001: ./zkServer.sh status \u2022\u505c\u6b62 ZooKeeper \u670d\u52a1: ./zkServer.sh stop \u2022\u91cd\u542f ZooKeeper \u670d\u52a1: ./zkServer.sh restart 3.3)Zookeeper\u5ba2\u6237\u7aef\u5e38\u7528\u547d\u4ee4 \u00b6 \u8fde\u63a5ZooKeeper\u670d\u52a1\u7aef ./zkCli.sh \u2013server ip:port \u65ad\u5f00\u8fde\u63a5 quit \u67e5\u770b\u547d\u4ee4\u5e2e\u52a9 help \u663e\u793a\u6307\u5b9a\u76ee\u5f55\u4e0b\u8282\u70b9 ls \u76ee\u5f55 \u521b\u5efa\u8282\u70b9 create /\u8282\u70b9path value \u83b7\u53d6\u8282\u70b9\u503c get /\u8282\u70b9path \u8bbe\u7f6e\u8282\u70b9\u503c set /\u8282\u70b9path value \u5220\u9664\u5355\u4e2a\u8282\u70b9 delete /\u8282\u70b9path \u5220\u9664\u5e26\u6709\u5b50\u8282\u70b9\u7684\u8282\u70b9 deleteall /\u8282\u70b9path 3.4)\u5ba2\u6237\u7aef\u547d\u4ee4-\u521b\u5efa\u4e34\u65f6\u6709\u5e8f\u8282\u70b9 \u00b6 \u2022\u521b\u5efa\u4e34\u65f6\u8282\u70b9 create -e /\u8282\u70b9path value \u2022\u521b\u5efa\u987a\u5e8f\u8282\u70b9 create -s /\u8282\u70b9path value \u2022\u67e5\u8be2\u8282\u70b9\u8be6\u7ec6\u4fe1\u606f ls \u2013s /\u8282\u70b9path \u2022czxid\uff1a\u8282\u70b9\u88ab\u521b\u5efa\u7684\u4e8b\u52a1ID \u2022ctime: \u521b\u5efa\u65f6\u95f4 \u2022mzxid: \u6700\u540e\u4e00\u6b21\u88ab\u66f4\u65b0\u7684\u4e8b\u52a1ID \u2022mtime: \u4fee\u6539\u65f6\u95f4 \u2022pzxid\uff1a\u5b50\u8282\u70b9\u5217\u8868\u6700\u540e\u4e00\u6b21\u88ab\u66f4\u65b0\u7684\u4e8b\u52a1ID \u2022cversion\uff1a\u5b50\u8282\u70b9\u7684\u7248\u672c\u53f7 \u2022dataversion\uff1a\u6570\u636e\u7248\u672c\u53f7 \u2022aclversion\uff1a\u6743\u9650\u7248\u672c\u53f7 \u2022ephemeralOwner\uff1a\u7528\u4e8e\u4e34\u65f6\u8282\u70b9\uff0c\u4ee3\u8868\u4e34\u65f6\u8282\u70b9\u7684\u4e8b\u52a1ID\uff0c\u5982\u679c\u4e3a\u6301\u4e45\u8282\u70b9\u5219\u4e3a0 \u2022dataLength\uff1a\u8282\u70b9\u5b58\u50a8\u7684\u6570\u636e\u7684\u957f\u5ea6 \u2022numChildren\uff1a\u5f53\u524d\u8282\u70b9\u7684\u5b50\u8282\u70b9\u4e2a\u6570 4)ZooKeeper JavaAPI \u64cd\u4f5c \u00b6 4.1)urator\u4ecb\u7ecd \u00b6 \u2022Curator \u662f Apache ZooKeeper \u7684Java\u5ba2\u6237\u7aef\u5e93\u3002 \u2022\u5e38\u89c1\u7684ZooKeeper Java API \uff1a \u2022\u539f\u751fJava API \u2022ZkClient \u2022Curator \u2022Curator \u9879\u76ee\u7684\u76ee\u6807\u662f\u7b80\u5316 ZooKeeper \u5ba2\u6237\u7aef\u7684\u4f7f\u7528\u3002 \u2022Curator \u6700\u521d\u662f Netfix \u7814\u53d1\u7684,\u540e\u6765\u6350\u732e\u4e86 Apache \u57fa\u91d1\u4f1a,\u76ee\u524d\u662f Apache \u7684\u9876\u7ea7\u9879\u76ee\u3002 \u2022\u5b98\u7f51\uff1ahttp://curator.apache.org/ 4.2)JavaAPI\u64cd\u4f5c\u5efa\u7acb\u8fde\u63a5 \u00b6 1\uff0c\u642d\u5efa\u9879\u76ee \u521b\u5efa\u9879\u76eecurator-zk \u5f15\u5165pom\u548c\u65e5\u5fd7\u6587\u4ef6 \u8d44\u6599\u6587\u4ef6\u5939\u4e0bpom.xml\u548clog4j.properties 2\u3001\u521b\u5efa\u6d4b\u8bd5\u7c7b\uff0c\u4f7f\u7528curator\u8fde\u63a5zookeeper @Before public void testConnect () { //\u91cd\u8bd5\u7b56\u7565 RetryPolicy retryPolicy = new ExponentialBackoffRetry ( 3000 , 10 ); //2.\u7b2c\u4e8c\u79cd\u65b9\u5f0f //CuratorFrameworkFactory.builder(); client = CuratorFrameworkFactory . builder () . connectString ( \"192.168.200.130:2181\" ) . sessionTimeoutMs ( 60 * 1000 ) . connectionTimeoutMs ( 15 * 1000 ) . retryPolicy ( retryPolicy ) . namespace ( \"itheima\" ) . build (); //\u5f00\u542f\u8fde\u63a5 client . start (); } 4.3)Zookeeper JavaAPI\u64cd\u4f5c-\u521b\u5efa\u8282\u70b9 \u00b6 /** * \u521b\u5efa\u8282\u70b9\uff1acreate \u6301\u4e45 \u4e34\u65f6 \u987a\u5e8f \u6570\u636e * 1. \u57fa\u672c\u521b\u5efa \uff1acreate().forPath(\"\") * 2. \u521b\u5efa\u8282\u70b9 \u5e26\u6709\u6570\u636e:create().forPath(\"\",data) * 3. \u8bbe\u7f6e\u8282\u70b9\u7684\u7c7b\u578b\uff1acreate().withMode().forPath(\"\",data) * 4. \u521b\u5efa\u591a\u7ea7\u8282\u70b9 /app1/p1 \uff1acreate().creatingParentsIfNeeded().forPath(\"\",data) */ @Test public void testCreate () throws Exception { //2. \u521b\u5efa\u8282\u70b9 \u5e26\u6709\u6570\u636e //\u5982\u679c\u521b\u5efa\u8282\u70b9\uff0c\u6ca1\u6709\u6307\u5b9a\u6570\u636e\uff0c\u5219\u9ed8\u8ba4\u5c06\u5f53\u524d\u5ba2\u6237\u7aef\u7684ip\u4f5c\u4e3a\u6570\u636e\u5b58\u50a8 String path = client . create (). forPath ( \"/app2\" , \"hehe\" . getBytes ()); System . out . println ( path ); } @Test public void testCreate2 () throws Exception { //1. \u57fa\u672c\u521b\u5efa //\u5982\u679c\u521b\u5efa\u8282\u70b9\uff0c\u6ca1\u6709\u6307\u5b9a\u6570\u636e\uff0c\u5219\u9ed8\u8ba4\u5c06\u5f53\u524d\u5ba2\u6237\u7aef\u7684ip\u4f5c\u4e3a\u6570\u636e\u5b58\u50a8 String path = client . create (). forPath ( \"/app1\" ); System . out . println ( path ); } @Test public void testCreate3 () throws Exception { //3. \u8bbe\u7f6e\u8282\u70b9\u7684\u7c7b\u578b //\u9ed8\u8ba4\u7c7b\u578b\uff1a\u6301\u4e45\u5316 String path = client . create (). withMode ( CreateMode . EPHEMERAL ). forPath ( \"/app3\" ); System . out . println ( path ); } @Test public void testCreate4 () throws Exception { //4. \u521b\u5efa\u591a\u7ea7\u8282\u70b9 /app1/p1 //creatingParentsIfNeeded():\u5982\u679c\u7236\u8282\u70b9\u4e0d\u5b58\u5728\uff0c\u5219\u521b\u5efa\u7236\u8282\u70b9 String path = client . create (). creatingParentsIfNeeded (). forPath ( \"/app4/p1\" ); System . out . println ( path ); } 4.4)ZookeeperJavaAPI\u64cd\u4f5c-\u67e5\u8be2\u8282\u70b9 \u00b6 /** * \u67e5\u8be2\u8282\u70b9\uff1a * 1. \u67e5\u8be2\u6570\u636e\uff1aget: getData().forPath() * 2. \u67e5\u8be2\u5b50\u8282\u70b9\uff1a ls: getChildren().forPath() * 3. \u67e5\u8be2\u8282\u70b9\u72b6\u6001\u4fe1\u606f\uff1als -s:getData().storingStatIn(\u72b6\u6001\u5bf9\u8c61).forPath() */ @Test public void testGet1 () throws Exception { //1. \u67e5\u8be2\u6570\u636e\uff1aget byte [] data = client . getData (). forPath ( \"/app1\" ); System . out . println ( new String ( data )); } @Test public void testGet2 () throws Exception { // 2. \u67e5\u8be2\u5b50\u8282\u70b9\uff1a ls List < String > path = client . getChildren (). forPath ( \"/\" ); System . out . println ( path ); } @Test public void testGet3 () throws Exception { Stat status = new Stat (); System . out . println ( status ); //3. \u67e5\u8be2\u8282\u70b9\u72b6\u6001\u4fe1\u606f\uff1als -s client . getData (). storingStatIn ( status ). forPath ( \"/app1\" ); System . out . println ( status ); } 4.5)Zookeeper JavaAPI\u64cd\u4f5c-\u4fee\u6539\u8282\u70b9 \u00b6 /** * \u4fee\u6539\u6570\u636e * 1. \u57fa\u672c\u4fee\u6539\u6570\u636e\uff1asetData().forPath() * 2. \u6839\u636e\u7248\u672c\u4fee\u6539: setData().withVersion().forPath() * * version \u662f\u901a\u8fc7\u67e5\u8be2\u51fa\u6765\u7684\u3002\u76ee\u7684\u5c31\u662f\u4e3a\u4e86\u8ba9\u5176\u4ed6\u5ba2\u6237\u7aef\u6216\u8005\u7ebf\u7a0b\u4e0d\u5e72\u6270\u6211\u3002 * * @throws Exception */ @Test public void testSet () throws Exception { client . setData (). forPath ( \"/app1\" , \"itcast\" . getBytes ()); } @Test public void testSetForVersion () throws Exception { Stat status = new Stat (); //3. \u67e5\u8be2\u8282\u70b9\u72b6\u6001\u4fe1\u606f\uff1als -s client . getData (). storingStatIn ( status ). forPath ( \"/app1\" ); int version = status . getVersion (); //\u67e5\u8be2\u51fa\u6765\u7684 3 System . out . println ( version ); client . setData (). withVersion ( version ). forPath ( \"/app1\" , \"hehe\" . getBytes ()); } 4.6)Zookeeper JavaAPI\u64cd\u4f5c-\u5220\u9664\u8282\u70b9 \u00b6 /** * \u5220\u9664\u8282\u70b9\uff1a delete deleteall * 1. \u5220\u9664\u5355\u4e2a\u8282\u70b9:delete().forPath(\"/app1\"); * 2. \u5220\u9664\u5e26\u6709\u5b50\u8282\u70b9\u7684\u8282\u70b9:delete().deletingChildrenIfNeeded().forPath(\"/app1\"); * 3. \u5fc5\u987b\u6210\u529f\u7684\u5220\u9664:\u4e3a\u4e86\u9632\u6b62\u7f51\u7edc\u6296\u52a8\u3002\u672c\u8d28\u5c31\u662f\u91cd\u8bd5\u3002 client.delete().guaranteed().forPath(\"/app2\"); * 4. \u56de\u8c03\uff1ainBackground * @throws Exception */ @Test public void testDelete () throws Exception { // 1. \u5220\u9664\u5355\u4e2a\u8282\u70b9 client . delete (). forPath ( \"/app1\" ); } @Test public void testDelete2 () throws Exception { //2. \u5220\u9664\u5e26\u6709\u5b50\u8282\u70b9\u7684\u8282\u70b9 client . delete (). deletingChildrenIfNeeded (). forPath ( \"/app4\" ); } @Test public void testDelete3 () throws Exception { //3. \u5fc5\u987b\u6210\u529f\u7684\u5220\u9664 client . delete (). guaranteed (). forPath ( \"/app2\" ); } @Test public void testDelete4 () throws Exception { //4. \u56de\u8c03 client . delete (). guaranteed (). inBackground ( new BackgroundCallback (){ @Override public void processResult ( CuratorFramework client , CuratorEvent event ) throws Exception { System . out . println ( \"\u6211\u88ab\u5220\u9664\u4e86~\" ); System . out . println ( event ); } }). forPath ( \"/app1\" ); } 4.7)Zookeeper JavaAPI\u64cd\u4f5c-Watch\u76d1\u542c\u6982\u8ff0 \u00b6 \u2022ZooKeeper \u5141\u8bb8\u7528\u6237\u5728\u6307\u5b9a\u8282\u70b9\u4e0a\u6ce8\u518c\u4e00\u4e9bWatcher\uff0c\u5e76\u4e14\u5728\u4e00\u4e9b\u7279\u5b9a\u4e8b\u4ef6\u89e6\u53d1\u7684\u65f6\u5019\uff0cZooKeeper \u670d\u52a1\u7aef\u4f1a\u5c06\u4e8b\u4ef6\u901a\u77e5\u5230\u611f\u5174\u8da3\u7684\u5ba2\u6237\u7aef\u4e0a\u53bb\uff0c\u8be5\u673a\u5236\u662f ZooKeeper \u5b9e\u73b0\u5206\u5e03\u5f0f\u534f\u8c03\u670d\u52a1\u7684\u91cd\u8981\u7279\u6027\u3002 \u2022ZooKeeper \u4e2d\u5f15\u5165\u4e86Watcher\u673a\u5236\u6765\u5b9e\u73b0\u4e86\u53d1\u5e03/\u8ba2\u9605\u529f\u80fd\u80fd\uff0c\u80fd\u591f\u8ba9\u591a\u4e2a\u8ba2\u9605\u8005\u540c\u65f6\u76d1\u542c\u67d0\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5f53\u4e00\u4e2a\u5bf9\u8c61\u81ea\u8eab\u72b6\u6001\u53d8\u5316\u65f6\uff0c\u4f1a\u901a\u77e5\u6240\u6709\u8ba2\u9605\u8005\u3002 \u2022ZooKeeper \u539f\u751f\u652f\u6301\u901a\u8fc7\u6ce8\u518cWatcher\u6765\u8fdb\u884c\u4e8b\u4ef6\u76d1\u542c\uff0c\u4f46\u662f\u5176\u4f7f\u7528\u5e76\u4e0d\u662f\u7279\u522b\u65b9\u4fbf \u200b \u9700\u8981\u5f00\u53d1\u4eba\u5458\u81ea\u5df1\u53cd\u590d\u6ce8\u518cWatcher\uff0c\u6bd4\u8f83\u7e41\u7410\u3002 \u2022Curator\u5f15\u5165\u4e86 Cache \u6765\u5b9e\u73b0\u5bf9 ZooKeeper \u670d\u52a1\u7aef\u4e8b\u4ef6\u7684\u76d1\u542c\u3002 \u2022ZooKeeper\u63d0\u4f9b\u4e86\u4e09\u79cdWatcher\uff1a \u2022NodeCache : \u53ea\u662f\u76d1\u542c\u67d0\u4e00\u4e2a\u7279\u5b9a\u7684\u8282\u70b9 \u2022PathChildrenCache : \u76d1\u63a7\u4e00\u4e2aZNode\u7684\u5b50\u8282\u70b9. \u2022TreeCache : \u53ef\u4ee5\u76d1\u63a7\u6574\u4e2a\u6811\u4e0a\u7684\u6240\u6709\u8282\u70b9\uff0c\u7c7b\u4f3c\u4e8ePathChildrenCache\u548cNodeCache\u7684\u7ec4\u5408 4.8Zookeeper JavaAPI\u64cd\u4f5c-Watch\u76d1\u542c-NodeCache \u00b6 /** * \u6f14\u793a NodeCache\uff1a\u7ed9\u6307\u5b9a\u4e00\u4e2a\u8282\u70b9\u6ce8\u518c\u76d1\u542c\u5668 */ @Test public void testNodeCache () throws Exception { //1. \u521b\u5efaNodeCache\u5bf9\u8c61 final NodeCache nodeCache = new NodeCache ( client , \"/app1\" ); //2. \u6ce8\u518c\u76d1\u542c nodeCache . getListenable (). addListener ( new NodeCacheListener () { @Override public void nodeChanged () throws Exception { System . out . println ( \"\u8282\u70b9\u53d8\u5316\u4e86~\" ); //\u83b7\u53d6\u4fee\u6539\u8282\u70b9\u540e\u7684\u6570\u636e byte [] data = nodeCache . getCurrentData (). getData (); System . out . println ( new String ( data )); } }); //3. \u5f00\u542f\u76d1\u542c.\u5982\u679c\u8bbe\u7f6e\u4e3atrue\uff0c\u5219\u5f00\u542f\u76d1\u542c\u662f\uff0c\u52a0\u8f7d\u7f13\u51b2\u6570\u636e nodeCache . start ( true ); while ( true ){ } } 4.9)Zookeeper JavaAPI\u64cd\u4f5c-Watch\u76d1\u542c-PathChildrenCache \u00b6 @Test public void testPathChildrenCache () throws Exception { //1.\u521b\u5efa\u76d1\u542c\u5bf9\u8c61 PathChildrenCache pathChildrenCache = new PathChildrenCache ( client , \"/app2\" , true ); //2. \u7ed1\u5b9a\u76d1\u542c\u5668 pathChildrenCache . getListenable (). addListener ( new PathChildrenCacheListener () { @Override public void childEvent ( CuratorFramework client , PathChildrenCacheEvent event ) throws Exception { System . out . println ( \"\u5b50\u8282\u70b9\u53d8\u5316\u4e86~\" ); System . out . println ( event ); //\u76d1\u542c\u5b50\u8282\u70b9\u7684\u6570\u636e\u53d8\u66f4\uff0c\u5e76\u4e14\u62ff\u5230\u53d8\u66f4\u540e\u7684\u6570\u636e //1.\u83b7\u53d6\u7c7b\u578b PathChildrenCacheEvent . Type type = event . getType (); //2.\u5224\u65ad\u7c7b\u578b\u662f\u5426\u662fupdate if ( type . equals ( PathChildrenCacheEvent . Type . CHILD_UPDATED )){ System . out . println ( \"\u6570\u636e\u53d8\u4e86\uff01\uff01\uff01\" ); byte [] data = event . getData (). getData (); System . out . println ( new String ( data )); } } }); //3. \u5f00\u542f pathChildrenCache . start (); while ( true ){ } } 4.10)Zookeeper JavaAPI\u64cd\u4f5c-Watch\u76d1\u542c-TreeCache \u00b6 /** * \u6f14\u793a TreeCache\uff1a\u76d1\u542c\u67d0\u4e2a\u8282\u70b9\u81ea\u5df1\u548c\u6240\u6709\u5b50\u8282\u70b9\u4eec */ @Test public void testTreeCache () throws Exception { //1. \u521b\u5efa\u76d1\u542c\u5668 TreeCache treeCache = new TreeCache ( client , \"/app2\" ); //2. \u6ce8\u518c\u76d1\u542c treeCache . getListenable (). addListener ( new TreeCacheListener () { @Override public void childEvent ( CuratorFramework client , TreeCacheEvent event ) throws Exception { System . out . println ( \"\u8282\u70b9\u53d8\u5316\u4e86\" ); System . out . println ( event ); } }); //3. \u5f00\u542f treeCache . start (); while ( true ){ } } 4.11)Zookeeper\u5206\u5e03\u5f0f\u9501-\u6982\u5ff5 \u00b6 \u2022\u5728\u6211\u4eec\u8fdb\u884c\u5355\u673a\u5e94\u7528\u5f00\u53d1\uff0c\u6d89\u53ca\u5e76\u53d1\u540c\u6b65\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5f80\u5f80\u91c7\u7528synchronized\u6216\u8005Lock\u7684\u65b9\u5f0f\u6765\u89e3\u51b3\u591a\u7ebf\u7a0b\u95f4\u7684\u4ee3\u7801\u540c\u6b65\u95ee\u9898\uff0c\u8fd9\u65f6\u591a\u7ebf\u7a0b\u7684\u8fd0\u884c\u90fd\u662f\u5728\u540c\u4e00\u4e2aJVM\u4e4b\u4e0b\uff0c\u6ca1\u6709\u4efb\u4f55\u95ee\u9898\u3002 \u2022\u4f46\u5f53\u6211\u4eec\u7684\u5e94\u7528\u662f\u5206\u5e03\u5f0f\u96c6\u7fa4\u5de5\u4f5c\u7684\u60c5\u51b5\u4e0b\uff0c\u5c5e\u4e8e\u591aJVM\u4e0b\u7684\u5de5\u4f5c\u73af\u5883\uff0c\u8de8JVM\u4e4b\u95f4\u5df2\u7ecf\u65e0\u6cd5\u901a\u8fc7\u591a\u7ebf\u7a0b\u7684\u9501\u89e3\u51b3\u540c\u6b65\u95ee\u9898\u3002 \u2022\u90a3\u4e48\u5c31\u9700\u8981\u4e00\u79cd\u66f4\u52a0\u9ad8\u7ea7\u7684\u9501\u673a\u5236\uff0c\u6765\u5904\u7406\u79cd\u8de8\u673a\u5668\u7684\u8fdb\u7a0b\u4e4b\u95f4\u7684\u6570\u636e\u540c\u6b65\u95ee\u9898\u2014\u2014\u8fd9\u5c31\u662f\u5206\u5e03\u5f0f\u9501\u3002 4.12)Zookeeper \u5206\u5e03\u5f0f\u9501-zookeeper\u5206\u5e03\u5f0f\u9501\u539f\u7406 \u00b6 \u2022\u6838\u5fc3\u601d\u60f3\uff1a\u5f53\u5ba2\u6237\u7aef\u8981\u83b7\u53d6\u9501\uff0c\u5219\u521b\u5efa\u8282\u70b9\uff0c\u4f7f\u7528\u5b8c\u9501\uff0c\u5219\u5220\u9664\u8be5\u8282\u70b9\u3002 1.\u5ba2\u6237\u7aef\u83b7\u53d6\u9501\u65f6\uff0c\u5728lock\u8282\u70b9\u4e0b\u521b\u5efa\u4e34\u65f6\u987a\u5e8f\u8282\u70b9\u3002 2.\u7136\u540e\u83b7\u53d6lock\u4e0b\u9762\u7684\u6240\u6709\u5b50\u8282\u70b9\uff0c\u5ba2\u6237\u7aef\u83b7\u53d6\u5230\u6240\u6709\u7684\u5b50\u8282\u70b9\u4e4b\u540e\uff0c\u5982\u679c\u53d1\u73b0\u81ea\u5df1\u521b\u5efa\u7684\u5b50\u8282\u70b9\u5e8f\u53f7\u6700\u5c0f\uff0c\u90a3\u4e48\u5c31\u8ba4\u4e3a\u8be5\u5ba2\u6237\u7aef\u83b7\u53d6\u5230\u4e86\u9501\u3002\u4f7f\u7528\u5b8c\u9501\u540e\uff0c\u5c06\u8be5\u8282\u70b9\u5220\u9664\u3002 3.\u5982\u679c\u53d1\u73b0\u81ea\u5df1\u521b\u5efa\u7684\u8282\u70b9\u5e76\u975elock\u6240\u6709\u5b50\u8282\u70b9\u4e2d\u6700\u5c0f\u7684\uff0c\u8bf4\u660e\u81ea\u5df1\u8fd8\u6ca1\u6709\u83b7\u53d6\u5230\u9501\uff0c\u6b64\u65f6\u5ba2\u6237\u7aef\u9700\u8981\u627e\u5230\u6bd4\u81ea\u5df1\u5c0f\u7684\u90a3\u4e2a\u8282\u70b9\uff0c\u540c\u65f6\u5bf9\u5176\u6ce8\u518c\u4e8b\u4ef6\u76d1\u542c\u5668\uff0c\u76d1\u542c\u5220\u9664\u4e8b\u4ef6\u3002 4.\u5982\u679c\u53d1\u73b0\u6bd4\u81ea\u5df1\u5c0f\u7684\u90a3\u4e2a\u8282\u70b9\u88ab\u5220\u9664\uff0c\u5219\u5ba2\u6237\u7aef\u7684 \u200b Watcher\u4f1a\u6536\u5230\u76f8\u5e94\u901a\u77e5\uff0c\u6b64\u65f6\u518d\u6b21\u5224\u65ad\u81ea\u5df1\u521b\u5efa\u7684\u8282\u70b9 \u200b \u662f\u5426\u662flock\u5b50\u8282\u70b9\u4e2d\u5e8f\u53f7\u6700\u5c0f\u7684\uff0c\u5982\u679c\u662f\u5219\u83b7\u53d6\u5230\u4e86\u9501\uff0c \u200b \u5982\u679c\u4e0d\u662f\u5219\u91cd\u590d\u4ee5\u4e0a\u6b65\u9aa4\u7ee7\u7eed\u83b7\u53d6\u5230\u6bd4\u81ea\u5df1\u5c0f\u7684\u4e00\u4e2a\u8282\u70b9 \u200b \u5e76\u6ce8\u518c\u76d1\u542c\u3002 4.13)Zookeeper \u5206\u5e03\u5f0f\u9501-\u6a21\u62df12306\u552e\u7968\u6848\u4f8b \u00b6 Curator\u5b9e\u73b0\u5206\u5e03\u5f0f\u9501API \u5728Curator\u4e2d\u6709\u4e94\u79cd\u9501\u65b9\u6848\uff1a InterProcessSemaphoreMutex\uff1a\u5206\u5e03\u5f0f\u6392\u5b83\u9501\uff08\u975e\u53ef\u91cd\u5165\u9501\uff09 InterProcessMutex\uff1a\u5206\u5e03\u5f0f\u53ef\u91cd\u5165\u6392\u5b83\u9501 InterProcessReadWriteLock\uff1a\u5206\u5e03\u5f0f\u8bfb\u5199\u9501 InterProcessMultiLock\uff1a\u5c06\u591a\u4e2a\u9501\u4f5c\u4e3a\u5355\u4e2a\u5b9e\u4f53\u7ba1\u7406\u7684\u5bb9\u5668 InterProcessSemaphoreV2\uff1a\u5171\u4eab\u4fe1\u53f7\u91cf 1,\u521b\u5efa\u7ebf\u7a0b\u8fdb\u884c\u52a0\u9501\u8bbe\u7f6e public class Ticket12306 implements Runnable { private int tickets = 10 ; //\u6570\u636e\u5e93\u7684\u7968\u6570 private InterProcessMutex lock ; @Override public void run () { while ( true ){ //\u83b7\u53d6\u9501 try { lock . acquire ( 3 , TimeUnit . SECONDS ); if ( tickets > 0 ){ System . out . println ( Thread . currentThread () + \":\" + tickets ); Thread . sleep ( 100 ); tickets -- ; } } catch ( Exception e ) { e . printStackTrace (); } finally { //\u91ca\u653e\u9501 try { lock . release (); } catch ( Exception e ) { e . printStackTrace (); } } } } } 2,\u521b\u5efa\u8fde\u63a5\uff0c\u5e76\u4e14\u521d\u59cb\u5316\u9501 public Ticket12306 (){ //\u91cd\u8bd5\u7b56\u7565 RetryPolicy retryPolicy = new ExponentialBackoffRetry ( 3000 , 10 ); //2.\u7b2c\u4e8c\u79cd\u65b9\u5f0f //CuratorFrameworkFactory.builder(); CuratorFramework client = CuratorFrameworkFactory . builder () . connectString ( \"192.168.149.135:2181\" ) . sessionTimeoutMs ( 60 * 1000 ) . connectionTimeoutMs ( 15 * 1000 ) . retryPolicy ( retryPolicy ) . build (); //\u5f00\u542f\u8fde\u63a5 client . start (); lock = new InterProcessMutex ( client , \"/lock\" ); } 3,\u8fd0\u884c\u591a\u4e2a\u7ebf\u7a0b\u8fdb\u884c\u6d4b\u8bd5 public class LockTest { public static void main ( String [] args ) { Ticket12306 ticket12306 = new Ticket12306 (); //\u521b\u5efa\u5ba2\u6237\u7aef Thread t1 = new Thread ( ticket12306 , \"\u643a\u7a0b\" ); Thread t2 = new Thread ( ticket12306 , \"\u98de\u732a\" ); t1 . start (); t2 . start (); } } 5)ZooKeeper \u96c6\u7fa4\u642d\u5efa \u00b6 5.1)Zookeeper \u96c6\u7fa4\u4ecb\u7ecd \u00b6 Leader\u9009\u4e3e\uff1a \u2022Serverid\uff1a\u670d\u52a1\u5668ID \u6bd4\u5982\u6709\u4e09\u53f0\u670d\u52a1\u5668\uff0c\u7f16\u53f7\u5206\u522b\u662f1,2,3\u3002 \u7f16\u53f7\u8d8a\u5927\u5728\u9009\u62e9\u7b97\u6cd5\u4e2d\u7684\u6743\u91cd\u8d8a\u5927\u3002 \u2022Zxid\uff1a\u6570\u636eID \u670d\u52a1\u5668\u4e2d\u5b58\u653e\u7684\u6700\u5927\u6570\u636eID.\u503c\u8d8a\u5927\u8bf4\u660e\u6570\u636e \u8d8a\u65b0\uff0c\u5728\u9009\u4e3e\u7b97\u6cd5\u4e2d\u6570\u636e\u8d8a\u65b0\u6743\u91cd\u8d8a\u5927\u3002 \u2022\u5728Leader\u9009\u4e3e\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u67d0\u53f0ZooKeeper \u200b \u83b7\u5f97\u4e86\u8d85\u8fc7\u534a\u6570\u7684\u9009\u7968\uff0c \u200b \u5219\u6b64ZooKeeper\u5c31\u53ef\u4ee5\u6210\u4e3aLeader\u4e86\u3002 5.2)\u642d\u5efa\u8981\u6c42 \u00b6 \u771f\u5b9e\u7684\u96c6\u7fa4\u662f\u9700\u8981\u90e8\u7f72\u5728\u4e0d\u540c\u7684\u670d\u52a1\u5668\u4e0a\u7684\uff0c\u4f46\u662f\u5728\u6211\u4eec\u6d4b\u8bd5\u65f6\u540c\u65f6\u542f\u52a8\u5f88\u591a\u4e2a\u865a\u62df\u673a\u5185\u5b58\u4f1a\u5403\u4e0d\u6d88\uff0c\u6240\u4ee5\u6211\u4eec\u901a\u5e38\u4f1a\u642d\u5efa \u4f2a\u96c6\u7fa4 \uff0c\u4e5f\u5c31\u662f\u628a\u6240\u6709\u7684\u670d\u52a1\u90fd\u642d\u5efa\u5728\u4e00\u53f0\u865a\u62df\u673a\u4e0a\uff0c\u7528\u7aef\u53e3\u8fdb\u884c\u533a\u5206\u3002 \u6211\u4eec\u8fd9\u91cc\u8981\u6c42\u642d\u5efa\u4e00\u4e2a\u4e09\u4e2a\u8282\u70b9\u7684Zookeeper\u96c6\u7fa4\uff08\u4f2a\u96c6\u7fa4\uff09\u3002 5.3)\u51c6\u5907\u5de5\u4f5c \u00b6 \u91cd\u65b0\u90e8\u7f72\u4e00\u53f0\u865a\u62df\u673a\u4f5c\u4e3a\u6211\u4eec\u642d\u5efa\u96c6\u7fa4\u7684\u6d4b\u8bd5\u670d\u52a1\u5668\u3002 \uff081\uff09\u5b89\u88c5JDK \u3010\u6b64\u6b65\u9aa4\u7701\u7565\u3011\u3002 \uff082\uff09Zookeeper\u538b\u7f29\u5305\u4e0a\u4f20\u5230\u670d\u52a1\u5668 \uff083\uff09\u5c06Zookeeper\u89e3\u538b \uff0c\u5efa\u7acb/usr/local/zookeeper-cluster\u76ee\u5f55\uff0c\u5c06\u89e3\u538b\u540e\u7684Zookeeper\u590d\u5236\u5230\u4ee5\u4e0b\u4e09\u4e2a\u76ee\u5f55 /usr/local/zookeeper-cluster/zookeeper-1 /usr/local/zookeeper-cluster/zookeeper-2 /usr/local/zookeeper-cluster/zookeeper-3 [ root@localhost ~ ] # mkdir /usr/local/zookeeper-cluster [ root@localhost ~ ] # cp -r apache-zookeeper-3.5.6-bin /usr/local/zookeeper-cluster/zookeeper-1 [ root@localhost ~ ] # cp -r apache-zookeeper-3.5.6-bin /usr/local/zookeeper-cluster/zookeeper-2 [ root@localhost ~ ] # cp -r apache-zookeeper-3.5.6-bin /usr/local/zookeeper-cluster/zookeeper-3 \uff084\uff09\u521b\u5efadata\u76ee\u5f55 \uff0c\u5e76\u4e14\u5c06 conf\u4e0bzoo_sample.cfg \u6587\u4ef6\u6539\u540d\u4e3a zoo.cfg mkdir /usr/local/zookeeper-cluster/zookeeper-1/data mkdir /usr/local/zookeeper-cluster/zookeeper-2/data mkdir /usr/local/zookeeper-cluster/zookeeper-3/data mv /usr/local/zookeeper-cluster/zookeeper-1/conf/zoo_sample.cfg /usr/local/zookeeper-cluster/zookeeper-1/conf/zoo.cfg mv /usr/local/zookeeper-cluster/zookeeper-2/conf/zoo_sample.cfg /usr/local/zookeeper-cluster/zookeeper-2/conf/zoo.cfg mv /usr/local/zookeeper-cluster/zookeeper-3/conf/zoo_sample.cfg /usr/local/zookeeper-cluster/zookeeper-3/conf/zoo.cfg \uff085\uff09 \u914d\u7f6e\u6bcf\u4e00\u4e2aZookeeper \u7684dataDir \u548c clientPort \u5206\u522b\u4e3a2181 2182 2183 \u4fee\u6539/usr/local/zookeeper-cluster/zookeeper-1/conf/zoo.cfg vim /usr/local/zookeeper-cluster/zookeeper-1/conf/zoo.cfg clientPort = 2181 dataDir = /usr/local/zookeeper-cluster/zookeeper-1/data \u4fee\u6539/usr/local/zookeeper-cluster/zookeeper-2/conf/zoo.cfg vim /usr/local/zookeeper-cluster/zookeeper-2/conf/zoo.cfg clientPort = 2182 dataDir = /usr/local/zookeeper-cluster/zookeeper-2/data \u4fee\u6539/usr/local/zookeeper-cluster/zookeeper-3/conf/zoo.cfg vim /usr/local/zookeeper-cluster/zookeeper-3/conf/zoo.cfg clientPort = 2183 dataDir = /usr/local/zookeeper-cluster/zookeeper-3/data 5.4)\u914d\u7f6e\u96c6\u7fa4 \u00b6 \uff081\uff09\u5728\u6bcf\u4e2azookeeper\u7684 data \u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2a myid \u6587\u4ef6\uff0c\u5185\u5bb9\u5206\u522b\u662f1\u30012\u30013 \u3002\u8fd9\u4e2a\u6587\u4ef6\u5c31\u662f\u8bb0\u5f55\u6bcf\u4e2a\u670d\u52a1\u5668\u7684ID echo 1 >/usr/local/zookeeper-cluster/zookeeper-1/data/myid echo 2 >/usr/local/zookeeper-cluster/zookeeper-2/data/myid echo 3 >/usr/local/zookeeper-cluster/zookeeper-3/data/myid \uff082\uff09\u5728\u6bcf\u4e00\u4e2azookeeper \u7684 zoo.cfg\u914d\u7f6e\u5ba2\u6237\u7aef\u8bbf\u95ee\u7aef\u53e3\uff08clientPort\uff09\u548c\u96c6\u7fa4\u670d\u52a1\u5668IP\u5217\u8868\u3002 \u96c6\u7fa4\u670d\u52a1\u5668IP\u5217\u8868\u5982\u4e0b vim /usr/local/zookeeper-cluster/zookeeper-1/conf/zoo.cfg vim /usr/local/zookeeper-cluster/zookeeper-2/conf/zoo.cfg vim /usr/local/zookeeper-cluster/zookeeper-3/conf/zoo.cfg server.1 = 192 .168.149.135:2881:3881 server.2 = 192 .168.149.135:2882:3882 server.3 = 192 .168.149.135:2883:3883 \u89e3\u91ca\uff1aserver.\u670d\u52a1\u5668ID=\u670d\u52a1\u5668IP\u5730\u5740\uff1a\u670d\u52a1\u5668\u4e4b\u95f4\u901a\u4fe1\u7aef\u53e3\uff1a\u670d\u52a1\u5668\u4e4b\u95f4\u6295\u7968\u9009\u4e3e\u7aef\u53e3 5.5)\u542f\u52a8\u96c6\u7fa4 \u00b6 \u542f\u52a8\u96c6\u7fa4\u5c31\u662f\u5206\u522b\u542f\u52a8\u6bcf\u4e2a\u5b9e\u4f8b\u3002 /usr/local/zookeeper-cluster/zookeeper-1/bin/zkServer.sh start /usr/local/zookeeper-cluster/zookeeper-2/bin/zkServer.sh start /usr/local/zookeeper-cluster/zookeeper-3/bin/zkServer.sh start \u542f\u52a8\u540e\u6211\u4eec\u67e5\u8be2\u4e00\u4e0b\u6bcf\u4e2a\u5b9e\u4f8b\u7684\u8fd0\u884c\u72b6\u6001 /usr/local/zookeeper-cluster/zookeeper-1/bin/zkServer.sh status /usr/local/zookeeper-cluster/zookeeper-2/bin/zkServer.sh status /usr/local/zookeeper-cluster/zookeeper-3/bin/zkServer.sh status \u5148\u67e5\u8be2\u7b2c\u4e00\u4e2a\u670d\u52a1 Mode\u4e3afollower\u8868\u793a\u662f \u8ddf\u968f\u8005 \uff08\u4ece\uff09 \u518d\u67e5\u8be2\u7b2c\u4e8c\u4e2a\u670d\u52a1Mod \u4e3aleader\u8868\u793a\u662f \u9886\u5bfc\u8005 \uff08\u4e3b\uff09 \u67e5\u8be2\u7b2c\u4e09\u4e2a\u4e3a\u8ddf\u968f\u8005\uff08\u4ece\uff09 5.6)\u6a21\u62df\u96c6\u7fa4\u5f02\u5e38 \u00b6 \uff081\uff09\u9996\u5148\u6211\u4eec\u5148\u6d4b\u8bd5\u5982\u679c\u662f\u4ece\u670d\u52a1\u5668\u6302\u6389\uff0c\u4f1a\u600e\u4e48\u6837 \u628a3\u53f7\u670d\u52a1\u5668\u505c\u6389\uff0c\u89c2\u5bdf1\u53f7\u548c2\u53f7\uff0c\u53d1\u73b0\u72b6\u6001\u5e76\u6ca1\u6709\u53d8\u5316 /usr/local/zookeeper-cluster/zookeeper-3/bin/zkServer.sh stop /usr/local/zookeeper-cluster/zookeeper-1/bin/zkServer.sh status /usr/local/zookeeper-cluster/zookeeper-2/bin/zkServer.sh status \u7531\u6b64\u5f97\u51fa\u7ed3\u8bba\uff0c3\u4e2a\u8282\u70b9\u7684\u96c6\u7fa4\uff0c\u4ece\u670d\u52a1\u5668\u6302\u6389\uff0c\u96c6\u7fa4\u6b63\u5e38 \uff082\uff09\u6211\u4eec\u518d\u628a1\u53f7\u670d\u52a1\u5668\uff08\u4ece\u670d\u52a1\u5668\uff09\u4e5f\u505c\u6389\uff0c\u67e5\u770b2\u53f7\uff08\u4e3b\u670d\u52a1\u5668\uff09\u7684\u72b6\u6001\uff0c\u53d1\u73b0\u5df2\u7ecf\u505c\u6b62\u8fd0\u884c\u4e86\u3002 /usr/local/zookeeper-cluster/zookeeper-1/bin/zkServer.sh stop /usr/local/zookeeper-cluster/zookeeper-2/bin/zkServer.sh status \u7531\u6b64\u5f97\u51fa\u7ed3\u8bba\uff0c3\u4e2a\u8282\u70b9\u7684\u96c6\u7fa4\uff0c2\u4e2a\u4ece\u670d\u52a1\u5668\u90fd\u6302\u6389\uff0c\u4e3b\u670d\u52a1\u5668\u4e5f\u65e0\u6cd5\u8fd0\u884c\u3002\u56e0\u4e3a\u53ef\u8fd0\u884c\u7684\u673a\u5668\u6ca1\u6709\u8d85\u8fc7\u96c6\u7fa4\u603b\u6570\u91cf\u7684\u534a\u6570\u3002 \uff083\uff09\u6211\u4eec\u518d\u6b21\u628a1\u53f7\u670d\u52a1\u5668\u542f\u52a8\u8d77\u6765\uff0c\u53d1\u73b02\u53f7\u670d\u52a1\u5668\u53c8\u5f00\u59cb\u6b63\u5e38\u5de5\u4f5c\u4e86\u3002\u800c\u4e14\u4f9d\u7136\u662f\u9886\u5bfc\u8005\u3002 /usr/local/zookeeper-cluster/zookeeper-1/bin/zkServer.sh start /usr/local/zookeeper-cluster/zookeeper-2/bin/zkServer.sh status \uff084\uff09\u6211\u4eec\u628a3\u53f7\u670d\u52a1\u5668\u4e5f\u542f\u52a8\u8d77\u6765\uff0c\u628a2\u53f7\u670d\u52a1\u5668\u505c\u6389,\u505c\u6389\u540e\u89c2\u5bdf1\u53f7\u548c3\u53f7\u7684\u72b6\u6001\u3002 /usr/local/zookeeper-cluster/zookeeper-3/bin/zkServer.sh start /usr/local/zookeeper-cluster/zookeeper-2/bin/zkServer.sh stop /usr/local/zookeeper-cluster/zookeeper-1/bin/zkServer.sh status /usr/local/zookeeper-cluster/zookeeper-3/bin/zkServer.sh status \u53d1\u73b0\u65b0\u7684leader\u4ea7\u751f\u4e86~ \u7531\u6b64\u6211\u4eec\u5f97\u51fa\u7ed3\u8bba\uff0c\u5f53\u96c6\u7fa4\u4e2d\u7684\u4e3b\u670d\u52a1\u5668\u6302\u4e86\uff0c\u96c6\u7fa4\u4e2d\u7684\u5176\u4ed6\u670d\u52a1\u5668\u4f1a\u81ea\u52a8\u8fdb\u884c\u9009\u4e3e\u72b6\u6001\uff0c\u7136\u540e\u4ea7\u751f\u65b0\u5f97leader \uff085\uff09\u6211\u4eec\u518d\u6b21\u6d4b\u8bd5\uff0c\u5f53\u6211\u4eec\u628a2\u53f7\u670d\u52a1\u5668\u91cd\u65b0\u542f\u52a8\u8d77\u6765\u542f\u52a8\u540e\uff0c\u4f1a\u53d1\u751f\u4ec0\u4e48\uff1f2\u53f7\u670d\u52a1\u5668\u4f1a\u518d\u6b21\u6210\u4e3a\u65b0\u7684\u9886\u5bfc\u5417\uff1f\u6211\u4eec\u770b\u7ed3\u679c /usr/local/zookeeper-cluster/zookeeper-2/bin/zkServer.sh start /usr/local/zookeeper-cluster/zookeeper-2/bin/zkServer.sh status /usr/local/zookeeper-cluster/zookeeper-3/bin/zkServer.sh status \u6211\u4eec\u4f1a\u53d1\u73b0\uff0c2\u53f7\u670d\u52a1\u5668\u542f\u52a8\u540e\u4f9d\u7136\u662f\u8ddf\u968f\u8005\uff08\u4ece\u670d\u52a1\u5668\uff09\uff0c3\u53f7\u670d\u52a1\u5668\u4f9d\u7136\u662f\u9886\u5bfc\u8005\uff08\u4e3b\u670d\u52a1\u5668\uff09\uff0c\u6ca1\u6709\u64bc\u52a83\u53f7\u670d\u52a1\u5668\u7684\u9886\u5bfc\u5730\u4f4d\u3002 \u7531\u6b64\u6211\u4eec\u5f97\u51fa\u7ed3\u8bba\uff0c\u5f53\u9886\u5bfc\u8005\u4ea7\u751f\u540e\uff0c\u518d\u6b21\u6709\u65b0\u670d\u52a1\u5668\u52a0\u5165\u96c6\u7fa4\uff0c\u4e0d\u4f1a\u5f71\u54cd\u5230\u73b0\u4efb\u9886\u5bfc\u8005\u3002 6)Zookeeper \u6838\u5fc3\u7406\u8bba \u00b6 Zookeepe\u96c6\u7fa4\u89d2\u8272 \u5728ZooKeeper\u96c6\u7fa4\u670d\u4e2d\u52a1\u4e2d\u6709\u4e09\u4e2a\u89d2\u8272\uff1a \u2022Leader \u9886\u5bfc\u8005 \uff1a \u200b 1. \u5904\u7406\u4e8b\u52a1\u8bf7\u6c42 \u200b 2. \u96c6\u7fa4\u5185\u90e8\u5404\u670d\u52a1\u5668\u7684\u8c03\u5ea6\u8005 \u2022Follower \u8ddf\u968f\u8005 \uff1a \u200b 1. \u5904\u7406\u5ba2\u6237\u7aef\u975e\u4e8b\u52a1\u8bf7\u6c42\uff0c\u8f6c\u53d1\u4e8b\u52a1\u8bf7\u6c42\u7ed9Leader\u670d\u52a1\u5668 \u200b 2. \u53c2\u4e0eLeader\u9009\u4e3e\u6295\u7968 \u2022Observer \u89c2\u5bdf\u8005\uff1a 1. \u5904\u7406\u5ba2\u6237\u7aef\u975e\u4e8b\u52a1\u8bf7\u6c42 \uff0c \u8f6c\u53d1\u4e8b\u52a1\u8bf7\u6c42\u7ed9Leader\u670d\u52a1\u5668","title":"\u9879\u76ee\u4e00\u524d\u7f6e\u8bfe-Zookeeper"},{"location":"zookeeper/zk/#zookeeper","text":"","title":"Zookeeper"},{"location":"zookeeper/zk/#1_zookeeper","text":"","title":"1)\u521d\u8bc6 Zookeeper"},{"location":"zookeeper/zk/#11zookeeper","text":"\u2022Zookeeper \u662f Apache Hadoop \u9879\u76ee\u4e0b\u7684\u4e00\u4e2a\u5b50\u9879\u76ee\uff0c\u662f\u4e00\u4e2a\u6811\u5f62\u76ee\u5f55\u670d\u52a1\u3002 \u2022Zookeeper \u7ffb\u8bd1\u8fc7\u6765\u5c31\u662f \u52a8\u7269\u56ed\u7ba1\u7406\u5458\uff0c\u4ed6\u662f\u7528\u6765\u7ba1 Hadoop\uff08\u5927\u8c61\uff09\u3001Hive(\u871c\u8702)\u3001Pig(\u5c0f \u732a)\u7684\u7ba1\u7406\u5458\u3002\u7b80\u79f0zk \u2022Zookeeper \u662f\u4e00\u4e2a\u5206\u5e03\u5f0f\u7684\u3001\u5f00\u6e90\u7684\u5206\u5e03\u5f0f\u5e94\u7528\u7a0b\u5e8f\u7684\u534f\u8c03\u670d\u52a1\u3002 \u2022Zookeeper \u63d0\u4f9b\u7684\u4e3b\u8981\u529f\u80fd\u5305\u62ec\uff1a \u2022\u914d\u7f6e\u7ba1\u7406 \u2022\u5206\u5e03\u5f0f\u9501 \u2022\u96c6\u7fa4\u7ba1\u7406","title":"1.1)Zookeeper\u6982\u5ff5"},{"location":"zookeeper/zk/#2zookeeper","text":"","title":"2)ZooKeeper \u5b89\u88c5\u4e0e\u914d\u7f6e"},{"location":"zookeeper/zk/#21","text":"","title":"2.1) \u4e0b\u8f7d\u5b89\u88c5"},{"location":"zookeeper/zk/#211","text":"ZooKeeper\u670d\u52a1\u5668\u662f\u7528Java\u521b\u5efa\u7684\uff0c\u5b83\u8fd0\u884c\u5728JVM\u4e4b\u4e0a\u3002\u9700\u8981\u5b89\u88c5JDK 7\u6216\u66f4\u9ad8\u7248\u672c\u3002","title":"2.1.1\u3001\u73af\u5883\u51c6\u5907"},{"location":"zookeeper/zk/#212","text":"\u5c06\u4e0b\u8f7d\u7684ZooKeeper\u653e\u5230/opt/ZooKeeper\u76ee\u5f55\u4e0b #\u4e0a\u4f20zookeeper alt+p put f:/setup/apache-zookeeper-3.5.6-bin.tar.gz #\u6253\u5f00 opt\u76ee\u5f55 cd /opt #\u521b\u5efazooKeeper\u76ee\u5f55 mkdir zooKeeper #\u5c06zookeeper\u5b89\u88c5\u5305\u79fb\u52a8\u5230 /opt/zooKeeper mv apache-zookeeper-3.5.6-bin.tar.gz /opt/zookeeper/","title":"2.1.2\u3001\u4e0a\u4f20"},{"location":"zookeeper/zk/#213","text":"\u5c06tar\u5305\u89e3\u538b\u5230/opt/zookeeper\u76ee\u5f55\u4e0b tar -zxvf apache-ZooKeeper-3.5.6-bin.tar.gz","title":"2.1.3\u3001\u89e3\u538b"},{"location":"zookeeper/zk/#22","text":"","title":"2.2) \u914d\u7f6e\u542f\u52a8"},{"location":"zookeeper/zk/#221zoocfg","text":"\u8fdb\u5165\u5230conf\u76ee\u5f55\u62f7\u8d1d\u4e00\u4e2azoo_sample.cfg\u5e76\u5b8c\u6210\u914d\u7f6e #\u8fdb\u5165\u5230conf\u76ee\u5f55 cd /opt/zooKeeper/apache-zooKeeper-3.5.6-bin/conf/ #\u62f7\u8d1d cp zoo_sample.cfg zoo.cfg \u4fee\u6539zoo.cfg #\u6253\u5f00\u76ee\u5f55 cd /opt/zooKeeper/ #\u521b\u5efazooKeeper\u5b58\u50a8\u76ee\u5f55 mkdir zkdata #\u4fee\u6539zoo.cfg vim /opt/zooKeeper/apache-zooKeeper-3.5.6-bin/conf/zoo.cfg \u4fee\u6539\u5b58\u50a8\u76ee\u5f55\uff1adataDir=/opt/zookeeper/zkdata","title":"2.2.1\u3001\u914d\u7f6ezoo.cfg"},{"location":"zookeeper/zk/#222zookeeper","text":"cd /opt/zooKeeper/apache-zooKeeper-3.5.6-bin/bin/ #\u542f\u52a8 ./zkServer.sh start \u770b\u5230\u4e0a\u56fe\u8868\u793aZooKeeper\u6210\u529f\u542f\u52a8 3\u3001\u67e5\u770bZooKeeper\u72b6\u6001 ./zkServer.sh status zookeeper\u542f\u52a8\u6210\u529f\u3002standalone\u4ee3\u8868zk\u6ca1\u6709\u642d\u5efa\u96c6\u7fa4\uff0c\u73b0\u5728\u662f\u5355\u8282\u70b9 zookeeper\u6ca1\u6709\u542f\u52a8","title":"2.2.2\u3001\u542f\u52a8ZooKeeper"},{"location":"zookeeper/zk/#_1","text":"","title":""},{"location":"zookeeper/zk/#3zookeeper","text":"","title":"3)ZooKeeper \u547d\u4ee4\u64cd\u4f5c"},{"location":"zookeeper/zk/#31zookeeper","text":"\u2022ZooKeeper \u662f\u4e00\u4e2a\u6811\u5f62\u76ee\u5f55\u670d\u52a1,\u5176\u6570\u636e\u6a21\u578b\u548cUnix\u7684\u6587\u4ef6\u7cfb\u7edf\u76ee\u5f55\u6811\u5f88\u7c7b\u4f3c\uff0c\u62e5\u6709\u4e00\u4e2a\u5c42\u6b21\u5316\u7ed3\u6784\u3002 \u2022\u8fd9\u91cc\u9762\u7684\u6bcf\u4e00\u4e2a\u8282\u70b9\u90fd\u88ab\u79f0\u4e3a\uff1a ZNode\uff0c\u6bcf\u4e2a\u8282\u70b9\u4e0a\u90fd\u4f1a\u4fdd\u5b58\u81ea\u5df1\u7684\u6570\u636e\u548c\u8282\u70b9\u4fe1\u606f\u3002 \u2022 \u8282\u70b9\u53ef\u4ee5\u62e5\u6709\u5b50\u8282\u70b9\uff0c\u540c\u65f6\u4e5f\u5141\u8bb8\u5c11\u91cf\uff081MB\uff09\u6570\u636e\u5b58\u50a8\u5728\u8be5\u8282\u70b9\u4e4b\u4e0b\u3002 \u2022\u8282\u70b9\u53ef\u4ee5\u5206\u4e3a\u56db\u5927\u7c7b\uff1a \u2022PERSISTENT \u6301\u4e45\u5316\u8282\u70b9 \u2022EPHEMERAL \u4e34\u65f6\u8282\u70b9 \uff1a-e \u2022PERSISTENT_SEQUENTIAL \u6301\u4e45\u5316\u987a\u5e8f\u8282\u70b9 \uff1a-s \u2022EPHEMERAL_SEQUENTIAL \u4e34\u65f6\u987a\u5e8f\u8282\u70b9 \uff1a-es","title":"3.1)Zookeeper\u547d\u4ee4\u64cd\u4f5c\u6570\u636e\u6a21\u578b"},{"location":"zookeeper/zk/#32zookeeper","text":"\u2022\u542f\u52a8 ZooKeeper \u670d\u52a1: ./zkServer.sh start \u2022\u67e5\u770b ZooKeeper \u670d\u52a1\u72b6\u6001: ./zkServer.sh status \u2022\u505c\u6b62 ZooKeeper \u670d\u52a1: ./zkServer.sh stop \u2022\u91cd\u542f ZooKeeper \u670d\u52a1: ./zkServer.sh restart","title":"3.2)Zookeeper\u547d\u4ee4\u64cd\u4f5c\u670d\u52a1\u7aef\u547d\u4ee4"},{"location":"zookeeper/zk/#33zookeeper","text":"\u8fde\u63a5ZooKeeper\u670d\u52a1\u7aef ./zkCli.sh \u2013server ip:port \u65ad\u5f00\u8fde\u63a5 quit \u67e5\u770b\u547d\u4ee4\u5e2e\u52a9 help \u663e\u793a\u6307\u5b9a\u76ee\u5f55\u4e0b\u8282\u70b9 ls \u76ee\u5f55 \u521b\u5efa\u8282\u70b9 create /\u8282\u70b9path value \u83b7\u53d6\u8282\u70b9\u503c get /\u8282\u70b9path \u8bbe\u7f6e\u8282\u70b9\u503c set /\u8282\u70b9path value \u5220\u9664\u5355\u4e2a\u8282\u70b9 delete /\u8282\u70b9path \u5220\u9664\u5e26\u6709\u5b50\u8282\u70b9\u7684\u8282\u70b9 deleteall /\u8282\u70b9path","title":"3.3)Zookeeper\u5ba2\u6237\u7aef\u5e38\u7528\u547d\u4ee4"},{"location":"zookeeper/zk/#34-","text":"\u2022\u521b\u5efa\u4e34\u65f6\u8282\u70b9 create -e /\u8282\u70b9path value \u2022\u521b\u5efa\u987a\u5e8f\u8282\u70b9 create -s /\u8282\u70b9path value \u2022\u67e5\u8be2\u8282\u70b9\u8be6\u7ec6\u4fe1\u606f ls \u2013s /\u8282\u70b9path \u2022czxid\uff1a\u8282\u70b9\u88ab\u521b\u5efa\u7684\u4e8b\u52a1ID \u2022ctime: \u521b\u5efa\u65f6\u95f4 \u2022mzxid: \u6700\u540e\u4e00\u6b21\u88ab\u66f4\u65b0\u7684\u4e8b\u52a1ID \u2022mtime: \u4fee\u6539\u65f6\u95f4 \u2022pzxid\uff1a\u5b50\u8282\u70b9\u5217\u8868\u6700\u540e\u4e00\u6b21\u88ab\u66f4\u65b0\u7684\u4e8b\u52a1ID \u2022cversion\uff1a\u5b50\u8282\u70b9\u7684\u7248\u672c\u53f7 \u2022dataversion\uff1a\u6570\u636e\u7248\u672c\u53f7 \u2022aclversion\uff1a\u6743\u9650\u7248\u672c\u53f7 \u2022ephemeralOwner\uff1a\u7528\u4e8e\u4e34\u65f6\u8282\u70b9\uff0c\u4ee3\u8868\u4e34\u65f6\u8282\u70b9\u7684\u4e8b\u52a1ID\uff0c\u5982\u679c\u4e3a\u6301\u4e45\u8282\u70b9\u5219\u4e3a0 \u2022dataLength\uff1a\u8282\u70b9\u5b58\u50a8\u7684\u6570\u636e\u7684\u957f\u5ea6 \u2022numChildren\uff1a\u5f53\u524d\u8282\u70b9\u7684\u5b50\u8282\u70b9\u4e2a\u6570","title":"3.4)\u5ba2\u6237\u7aef\u547d\u4ee4-\u521b\u5efa\u4e34\u65f6\u6709\u5e8f\u8282\u70b9"},{"location":"zookeeper/zk/#4zookeeper_javaapi","text":"","title":"4)ZooKeeper JavaAPI \u64cd\u4f5c"},{"location":"zookeeper/zk/#41urator","text":"\u2022Curator \u662f Apache ZooKeeper \u7684Java\u5ba2\u6237\u7aef\u5e93\u3002 \u2022\u5e38\u89c1\u7684ZooKeeper Java API \uff1a \u2022\u539f\u751fJava API \u2022ZkClient \u2022Curator \u2022Curator \u9879\u76ee\u7684\u76ee\u6807\u662f\u7b80\u5316 ZooKeeper \u5ba2\u6237\u7aef\u7684\u4f7f\u7528\u3002 \u2022Curator \u6700\u521d\u662f Netfix \u7814\u53d1\u7684,\u540e\u6765\u6350\u732e\u4e86 Apache \u57fa\u91d1\u4f1a,\u76ee\u524d\u662f Apache \u7684\u9876\u7ea7\u9879\u76ee\u3002 \u2022\u5b98\u7f51\uff1ahttp://curator.apache.org/","title":"4.1)urator\u4ecb\u7ecd"},{"location":"zookeeper/zk/#42javaapi","text":"1\uff0c\u642d\u5efa\u9879\u76ee \u521b\u5efa\u9879\u76eecurator-zk \u5f15\u5165pom\u548c\u65e5\u5fd7\u6587\u4ef6 \u8d44\u6599\u6587\u4ef6\u5939\u4e0bpom.xml\u548clog4j.properties 2\u3001\u521b\u5efa\u6d4b\u8bd5\u7c7b\uff0c\u4f7f\u7528curator\u8fde\u63a5zookeeper @Before public void testConnect () { //\u91cd\u8bd5\u7b56\u7565 RetryPolicy retryPolicy = new ExponentialBackoffRetry ( 3000 , 10 ); //2.\u7b2c\u4e8c\u79cd\u65b9\u5f0f //CuratorFrameworkFactory.builder(); client = CuratorFrameworkFactory . builder () . connectString ( \"192.168.200.130:2181\" ) . sessionTimeoutMs ( 60 * 1000 ) . connectionTimeoutMs ( 15 * 1000 ) . retryPolicy ( retryPolicy ) . namespace ( \"itheima\" ) . build (); //\u5f00\u542f\u8fde\u63a5 client . start (); }","title":"4.2)JavaAPI\u64cd\u4f5c\u5efa\u7acb\u8fde\u63a5"},{"location":"zookeeper/zk/#43zookeeper_javaapi-","text":"/** * \u521b\u5efa\u8282\u70b9\uff1acreate \u6301\u4e45 \u4e34\u65f6 \u987a\u5e8f \u6570\u636e * 1. \u57fa\u672c\u521b\u5efa \uff1acreate().forPath(\"\") * 2. \u521b\u5efa\u8282\u70b9 \u5e26\u6709\u6570\u636e:create().forPath(\"\",data) * 3. \u8bbe\u7f6e\u8282\u70b9\u7684\u7c7b\u578b\uff1acreate().withMode().forPath(\"\",data) * 4. \u521b\u5efa\u591a\u7ea7\u8282\u70b9 /app1/p1 \uff1acreate().creatingParentsIfNeeded().forPath(\"\",data) */ @Test public void testCreate () throws Exception { //2. \u521b\u5efa\u8282\u70b9 \u5e26\u6709\u6570\u636e //\u5982\u679c\u521b\u5efa\u8282\u70b9\uff0c\u6ca1\u6709\u6307\u5b9a\u6570\u636e\uff0c\u5219\u9ed8\u8ba4\u5c06\u5f53\u524d\u5ba2\u6237\u7aef\u7684ip\u4f5c\u4e3a\u6570\u636e\u5b58\u50a8 String path = client . create (). forPath ( \"/app2\" , \"hehe\" . getBytes ()); System . out . println ( path ); } @Test public void testCreate2 () throws Exception { //1. \u57fa\u672c\u521b\u5efa //\u5982\u679c\u521b\u5efa\u8282\u70b9\uff0c\u6ca1\u6709\u6307\u5b9a\u6570\u636e\uff0c\u5219\u9ed8\u8ba4\u5c06\u5f53\u524d\u5ba2\u6237\u7aef\u7684ip\u4f5c\u4e3a\u6570\u636e\u5b58\u50a8 String path = client . create (). forPath ( \"/app1\" ); System . out . println ( path ); } @Test public void testCreate3 () throws Exception { //3. \u8bbe\u7f6e\u8282\u70b9\u7684\u7c7b\u578b //\u9ed8\u8ba4\u7c7b\u578b\uff1a\u6301\u4e45\u5316 String path = client . create (). withMode ( CreateMode . EPHEMERAL ). forPath ( \"/app3\" ); System . out . println ( path ); } @Test public void testCreate4 () throws Exception { //4. \u521b\u5efa\u591a\u7ea7\u8282\u70b9 /app1/p1 //creatingParentsIfNeeded():\u5982\u679c\u7236\u8282\u70b9\u4e0d\u5b58\u5728\uff0c\u5219\u521b\u5efa\u7236\u8282\u70b9 String path = client . create (). creatingParentsIfNeeded (). forPath ( \"/app4/p1\" ); System . out . println ( path ); }","title":"4.3)Zookeeper JavaAPI\u64cd\u4f5c-\u521b\u5efa\u8282\u70b9"},{"location":"zookeeper/zk/#44zookeeperjavaapi-","text":"/** * \u67e5\u8be2\u8282\u70b9\uff1a * 1. \u67e5\u8be2\u6570\u636e\uff1aget: getData().forPath() * 2. \u67e5\u8be2\u5b50\u8282\u70b9\uff1a ls: getChildren().forPath() * 3. \u67e5\u8be2\u8282\u70b9\u72b6\u6001\u4fe1\u606f\uff1als -s:getData().storingStatIn(\u72b6\u6001\u5bf9\u8c61).forPath() */ @Test public void testGet1 () throws Exception { //1. \u67e5\u8be2\u6570\u636e\uff1aget byte [] data = client . getData (). forPath ( \"/app1\" ); System . out . println ( new String ( data )); } @Test public void testGet2 () throws Exception { // 2. \u67e5\u8be2\u5b50\u8282\u70b9\uff1a ls List < String > path = client . getChildren (). forPath ( \"/\" ); System . out . println ( path ); } @Test public void testGet3 () throws Exception { Stat status = new Stat (); System . out . println ( status ); //3. \u67e5\u8be2\u8282\u70b9\u72b6\u6001\u4fe1\u606f\uff1als -s client . getData (). storingStatIn ( status ). forPath ( \"/app1\" ); System . out . println ( status ); }","title":"4.4)ZookeeperJavaAPI\u64cd\u4f5c-\u67e5\u8be2\u8282\u70b9"},{"location":"zookeeper/zk/#45zookeeper_javaapi-","text":"/** * \u4fee\u6539\u6570\u636e * 1. \u57fa\u672c\u4fee\u6539\u6570\u636e\uff1asetData().forPath() * 2. \u6839\u636e\u7248\u672c\u4fee\u6539: setData().withVersion().forPath() * * version \u662f\u901a\u8fc7\u67e5\u8be2\u51fa\u6765\u7684\u3002\u76ee\u7684\u5c31\u662f\u4e3a\u4e86\u8ba9\u5176\u4ed6\u5ba2\u6237\u7aef\u6216\u8005\u7ebf\u7a0b\u4e0d\u5e72\u6270\u6211\u3002 * * @throws Exception */ @Test public void testSet () throws Exception { client . setData (). forPath ( \"/app1\" , \"itcast\" . getBytes ()); } @Test public void testSetForVersion () throws Exception { Stat status = new Stat (); //3. \u67e5\u8be2\u8282\u70b9\u72b6\u6001\u4fe1\u606f\uff1als -s client . getData (). storingStatIn ( status ). forPath ( \"/app1\" ); int version = status . getVersion (); //\u67e5\u8be2\u51fa\u6765\u7684 3 System . out . println ( version ); client . setData (). withVersion ( version ). forPath ( \"/app1\" , \"hehe\" . getBytes ()); }","title":"4.5)Zookeeper JavaAPI\u64cd\u4f5c-\u4fee\u6539\u8282\u70b9"},{"location":"zookeeper/zk/#46zookeeper_javaapi-","text":"/** * \u5220\u9664\u8282\u70b9\uff1a delete deleteall * 1. \u5220\u9664\u5355\u4e2a\u8282\u70b9:delete().forPath(\"/app1\"); * 2. \u5220\u9664\u5e26\u6709\u5b50\u8282\u70b9\u7684\u8282\u70b9:delete().deletingChildrenIfNeeded().forPath(\"/app1\"); * 3. \u5fc5\u987b\u6210\u529f\u7684\u5220\u9664:\u4e3a\u4e86\u9632\u6b62\u7f51\u7edc\u6296\u52a8\u3002\u672c\u8d28\u5c31\u662f\u91cd\u8bd5\u3002 client.delete().guaranteed().forPath(\"/app2\"); * 4. \u56de\u8c03\uff1ainBackground * @throws Exception */ @Test public void testDelete () throws Exception { // 1. \u5220\u9664\u5355\u4e2a\u8282\u70b9 client . delete (). forPath ( \"/app1\" ); } @Test public void testDelete2 () throws Exception { //2. \u5220\u9664\u5e26\u6709\u5b50\u8282\u70b9\u7684\u8282\u70b9 client . delete (). deletingChildrenIfNeeded (). forPath ( \"/app4\" ); } @Test public void testDelete3 () throws Exception { //3. \u5fc5\u987b\u6210\u529f\u7684\u5220\u9664 client . delete (). guaranteed (). forPath ( \"/app2\" ); } @Test public void testDelete4 () throws Exception { //4. \u56de\u8c03 client . delete (). guaranteed (). inBackground ( new BackgroundCallback (){ @Override public void processResult ( CuratorFramework client , CuratorEvent event ) throws Exception { System . out . println ( \"\u6211\u88ab\u5220\u9664\u4e86~\" ); System . out . println ( event ); } }). forPath ( \"/app1\" ); }","title":"4.6)Zookeeper JavaAPI\u64cd\u4f5c-\u5220\u9664\u8282\u70b9"},{"location":"zookeeper/zk/#47zookeeper_javaapi-watch","text":"\u2022ZooKeeper \u5141\u8bb8\u7528\u6237\u5728\u6307\u5b9a\u8282\u70b9\u4e0a\u6ce8\u518c\u4e00\u4e9bWatcher\uff0c\u5e76\u4e14\u5728\u4e00\u4e9b\u7279\u5b9a\u4e8b\u4ef6\u89e6\u53d1\u7684\u65f6\u5019\uff0cZooKeeper \u670d\u52a1\u7aef\u4f1a\u5c06\u4e8b\u4ef6\u901a\u77e5\u5230\u611f\u5174\u8da3\u7684\u5ba2\u6237\u7aef\u4e0a\u53bb\uff0c\u8be5\u673a\u5236\u662f ZooKeeper \u5b9e\u73b0\u5206\u5e03\u5f0f\u534f\u8c03\u670d\u52a1\u7684\u91cd\u8981\u7279\u6027\u3002 \u2022ZooKeeper \u4e2d\u5f15\u5165\u4e86Watcher\u673a\u5236\u6765\u5b9e\u73b0\u4e86\u53d1\u5e03/\u8ba2\u9605\u529f\u80fd\u80fd\uff0c\u80fd\u591f\u8ba9\u591a\u4e2a\u8ba2\u9605\u8005\u540c\u65f6\u76d1\u542c\u67d0\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5f53\u4e00\u4e2a\u5bf9\u8c61\u81ea\u8eab\u72b6\u6001\u53d8\u5316\u65f6\uff0c\u4f1a\u901a\u77e5\u6240\u6709\u8ba2\u9605\u8005\u3002 \u2022ZooKeeper \u539f\u751f\u652f\u6301\u901a\u8fc7\u6ce8\u518cWatcher\u6765\u8fdb\u884c\u4e8b\u4ef6\u76d1\u542c\uff0c\u4f46\u662f\u5176\u4f7f\u7528\u5e76\u4e0d\u662f\u7279\u522b\u65b9\u4fbf \u200b \u9700\u8981\u5f00\u53d1\u4eba\u5458\u81ea\u5df1\u53cd\u590d\u6ce8\u518cWatcher\uff0c\u6bd4\u8f83\u7e41\u7410\u3002 \u2022Curator\u5f15\u5165\u4e86 Cache \u6765\u5b9e\u73b0\u5bf9 ZooKeeper \u670d\u52a1\u7aef\u4e8b\u4ef6\u7684\u76d1\u542c\u3002 \u2022ZooKeeper\u63d0\u4f9b\u4e86\u4e09\u79cdWatcher\uff1a \u2022NodeCache : \u53ea\u662f\u76d1\u542c\u67d0\u4e00\u4e2a\u7279\u5b9a\u7684\u8282\u70b9 \u2022PathChildrenCache : \u76d1\u63a7\u4e00\u4e2aZNode\u7684\u5b50\u8282\u70b9. \u2022TreeCache : \u53ef\u4ee5\u76d1\u63a7\u6574\u4e2a\u6811\u4e0a\u7684\u6240\u6709\u8282\u70b9\uff0c\u7c7b\u4f3c\u4e8ePathChildrenCache\u548cNodeCache\u7684\u7ec4\u5408","title":"4.7)Zookeeper JavaAPI\u64cd\u4f5c-Watch\u76d1\u542c\u6982\u8ff0"},{"location":"zookeeper/zk/#48zookeeper_javaapi-watch-nodecache","text":"/** * \u6f14\u793a NodeCache\uff1a\u7ed9\u6307\u5b9a\u4e00\u4e2a\u8282\u70b9\u6ce8\u518c\u76d1\u542c\u5668 */ @Test public void testNodeCache () throws Exception { //1. \u521b\u5efaNodeCache\u5bf9\u8c61 final NodeCache nodeCache = new NodeCache ( client , \"/app1\" ); //2. \u6ce8\u518c\u76d1\u542c nodeCache . getListenable (). addListener ( new NodeCacheListener () { @Override public void nodeChanged () throws Exception { System . out . println ( \"\u8282\u70b9\u53d8\u5316\u4e86~\" ); //\u83b7\u53d6\u4fee\u6539\u8282\u70b9\u540e\u7684\u6570\u636e byte [] data = nodeCache . getCurrentData (). getData (); System . out . println ( new String ( data )); } }); //3. \u5f00\u542f\u76d1\u542c.\u5982\u679c\u8bbe\u7f6e\u4e3atrue\uff0c\u5219\u5f00\u542f\u76d1\u542c\u662f\uff0c\u52a0\u8f7d\u7f13\u51b2\u6570\u636e nodeCache . start ( true ); while ( true ){ } }","title":"4.8Zookeeper JavaAPI\u64cd\u4f5c-Watch\u76d1\u542c-NodeCache"},{"location":"zookeeper/zk/#49zookeeper_javaapi-watch-pathchildrencache","text":"@Test public void testPathChildrenCache () throws Exception { //1.\u521b\u5efa\u76d1\u542c\u5bf9\u8c61 PathChildrenCache pathChildrenCache = new PathChildrenCache ( client , \"/app2\" , true ); //2. \u7ed1\u5b9a\u76d1\u542c\u5668 pathChildrenCache . getListenable (). addListener ( new PathChildrenCacheListener () { @Override public void childEvent ( CuratorFramework client , PathChildrenCacheEvent event ) throws Exception { System . out . println ( \"\u5b50\u8282\u70b9\u53d8\u5316\u4e86~\" ); System . out . println ( event ); //\u76d1\u542c\u5b50\u8282\u70b9\u7684\u6570\u636e\u53d8\u66f4\uff0c\u5e76\u4e14\u62ff\u5230\u53d8\u66f4\u540e\u7684\u6570\u636e //1.\u83b7\u53d6\u7c7b\u578b PathChildrenCacheEvent . Type type = event . getType (); //2.\u5224\u65ad\u7c7b\u578b\u662f\u5426\u662fupdate if ( type . equals ( PathChildrenCacheEvent . Type . CHILD_UPDATED )){ System . out . println ( \"\u6570\u636e\u53d8\u4e86\uff01\uff01\uff01\" ); byte [] data = event . getData (). getData (); System . out . println ( new String ( data )); } } }); //3. \u5f00\u542f pathChildrenCache . start (); while ( true ){ } }","title":"4.9)Zookeeper JavaAPI\u64cd\u4f5c-Watch\u76d1\u542c-PathChildrenCache"},{"location":"zookeeper/zk/#410zookeeper_javaapi-watch-treecache","text":"/** * \u6f14\u793a TreeCache\uff1a\u76d1\u542c\u67d0\u4e2a\u8282\u70b9\u81ea\u5df1\u548c\u6240\u6709\u5b50\u8282\u70b9\u4eec */ @Test public void testTreeCache () throws Exception { //1. \u521b\u5efa\u76d1\u542c\u5668 TreeCache treeCache = new TreeCache ( client , \"/app2\" ); //2. \u6ce8\u518c\u76d1\u542c treeCache . getListenable (). addListener ( new TreeCacheListener () { @Override public void childEvent ( CuratorFramework client , TreeCacheEvent event ) throws Exception { System . out . println ( \"\u8282\u70b9\u53d8\u5316\u4e86\" ); System . out . println ( event ); } }); //3. \u5f00\u542f treeCache . start (); while ( true ){ } }","title":"4.10)Zookeeper JavaAPI\u64cd\u4f5c-Watch\u76d1\u542c-TreeCache"},{"location":"zookeeper/zk/#411zookeeper-","text":"\u2022\u5728\u6211\u4eec\u8fdb\u884c\u5355\u673a\u5e94\u7528\u5f00\u53d1\uff0c\u6d89\u53ca\u5e76\u53d1\u540c\u6b65\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5f80\u5f80\u91c7\u7528synchronized\u6216\u8005Lock\u7684\u65b9\u5f0f\u6765\u89e3\u51b3\u591a\u7ebf\u7a0b\u95f4\u7684\u4ee3\u7801\u540c\u6b65\u95ee\u9898\uff0c\u8fd9\u65f6\u591a\u7ebf\u7a0b\u7684\u8fd0\u884c\u90fd\u662f\u5728\u540c\u4e00\u4e2aJVM\u4e4b\u4e0b\uff0c\u6ca1\u6709\u4efb\u4f55\u95ee\u9898\u3002 \u2022\u4f46\u5f53\u6211\u4eec\u7684\u5e94\u7528\u662f\u5206\u5e03\u5f0f\u96c6\u7fa4\u5de5\u4f5c\u7684\u60c5\u51b5\u4e0b\uff0c\u5c5e\u4e8e\u591aJVM\u4e0b\u7684\u5de5\u4f5c\u73af\u5883\uff0c\u8de8JVM\u4e4b\u95f4\u5df2\u7ecf\u65e0\u6cd5\u901a\u8fc7\u591a\u7ebf\u7a0b\u7684\u9501\u89e3\u51b3\u540c\u6b65\u95ee\u9898\u3002 \u2022\u90a3\u4e48\u5c31\u9700\u8981\u4e00\u79cd\u66f4\u52a0\u9ad8\u7ea7\u7684\u9501\u673a\u5236\uff0c\u6765\u5904\u7406\u79cd\u8de8\u673a\u5668\u7684\u8fdb\u7a0b\u4e4b\u95f4\u7684\u6570\u636e\u540c\u6b65\u95ee\u9898\u2014\u2014\u8fd9\u5c31\u662f\u5206\u5e03\u5f0f\u9501\u3002","title":"4.11)Zookeeper\u5206\u5e03\u5f0f\u9501-\u6982\u5ff5"},{"location":"zookeeper/zk/#412zookeeper_-zookeeper","text":"\u2022\u6838\u5fc3\u601d\u60f3\uff1a\u5f53\u5ba2\u6237\u7aef\u8981\u83b7\u53d6\u9501\uff0c\u5219\u521b\u5efa\u8282\u70b9\uff0c\u4f7f\u7528\u5b8c\u9501\uff0c\u5219\u5220\u9664\u8be5\u8282\u70b9\u3002 1.\u5ba2\u6237\u7aef\u83b7\u53d6\u9501\u65f6\uff0c\u5728lock\u8282\u70b9\u4e0b\u521b\u5efa\u4e34\u65f6\u987a\u5e8f\u8282\u70b9\u3002 2.\u7136\u540e\u83b7\u53d6lock\u4e0b\u9762\u7684\u6240\u6709\u5b50\u8282\u70b9\uff0c\u5ba2\u6237\u7aef\u83b7\u53d6\u5230\u6240\u6709\u7684\u5b50\u8282\u70b9\u4e4b\u540e\uff0c\u5982\u679c\u53d1\u73b0\u81ea\u5df1\u521b\u5efa\u7684\u5b50\u8282\u70b9\u5e8f\u53f7\u6700\u5c0f\uff0c\u90a3\u4e48\u5c31\u8ba4\u4e3a\u8be5\u5ba2\u6237\u7aef\u83b7\u53d6\u5230\u4e86\u9501\u3002\u4f7f\u7528\u5b8c\u9501\u540e\uff0c\u5c06\u8be5\u8282\u70b9\u5220\u9664\u3002 3.\u5982\u679c\u53d1\u73b0\u81ea\u5df1\u521b\u5efa\u7684\u8282\u70b9\u5e76\u975elock\u6240\u6709\u5b50\u8282\u70b9\u4e2d\u6700\u5c0f\u7684\uff0c\u8bf4\u660e\u81ea\u5df1\u8fd8\u6ca1\u6709\u83b7\u53d6\u5230\u9501\uff0c\u6b64\u65f6\u5ba2\u6237\u7aef\u9700\u8981\u627e\u5230\u6bd4\u81ea\u5df1\u5c0f\u7684\u90a3\u4e2a\u8282\u70b9\uff0c\u540c\u65f6\u5bf9\u5176\u6ce8\u518c\u4e8b\u4ef6\u76d1\u542c\u5668\uff0c\u76d1\u542c\u5220\u9664\u4e8b\u4ef6\u3002 4.\u5982\u679c\u53d1\u73b0\u6bd4\u81ea\u5df1\u5c0f\u7684\u90a3\u4e2a\u8282\u70b9\u88ab\u5220\u9664\uff0c\u5219\u5ba2\u6237\u7aef\u7684 \u200b Watcher\u4f1a\u6536\u5230\u76f8\u5e94\u901a\u77e5\uff0c\u6b64\u65f6\u518d\u6b21\u5224\u65ad\u81ea\u5df1\u521b\u5efa\u7684\u8282\u70b9 \u200b \u662f\u5426\u662flock\u5b50\u8282\u70b9\u4e2d\u5e8f\u53f7\u6700\u5c0f\u7684\uff0c\u5982\u679c\u662f\u5219\u83b7\u53d6\u5230\u4e86\u9501\uff0c \u200b \u5982\u679c\u4e0d\u662f\u5219\u91cd\u590d\u4ee5\u4e0a\u6b65\u9aa4\u7ee7\u7eed\u83b7\u53d6\u5230\u6bd4\u81ea\u5df1\u5c0f\u7684\u4e00\u4e2a\u8282\u70b9 \u200b \u5e76\u6ce8\u518c\u76d1\u542c\u3002","title":"4.12)Zookeeper \u5206\u5e03\u5f0f\u9501-zookeeper\u5206\u5e03\u5f0f\u9501\u539f\u7406"},{"location":"zookeeper/zk/#413zookeeper_-12306","text":"Curator\u5b9e\u73b0\u5206\u5e03\u5f0f\u9501API \u5728Curator\u4e2d\u6709\u4e94\u79cd\u9501\u65b9\u6848\uff1a InterProcessSemaphoreMutex\uff1a\u5206\u5e03\u5f0f\u6392\u5b83\u9501\uff08\u975e\u53ef\u91cd\u5165\u9501\uff09 InterProcessMutex\uff1a\u5206\u5e03\u5f0f\u53ef\u91cd\u5165\u6392\u5b83\u9501 InterProcessReadWriteLock\uff1a\u5206\u5e03\u5f0f\u8bfb\u5199\u9501 InterProcessMultiLock\uff1a\u5c06\u591a\u4e2a\u9501\u4f5c\u4e3a\u5355\u4e2a\u5b9e\u4f53\u7ba1\u7406\u7684\u5bb9\u5668 InterProcessSemaphoreV2\uff1a\u5171\u4eab\u4fe1\u53f7\u91cf 1,\u521b\u5efa\u7ebf\u7a0b\u8fdb\u884c\u52a0\u9501\u8bbe\u7f6e public class Ticket12306 implements Runnable { private int tickets = 10 ; //\u6570\u636e\u5e93\u7684\u7968\u6570 private InterProcessMutex lock ; @Override public void run () { while ( true ){ //\u83b7\u53d6\u9501 try { lock . acquire ( 3 , TimeUnit . SECONDS ); if ( tickets > 0 ){ System . out . println ( Thread . currentThread () + \":\" + tickets ); Thread . sleep ( 100 ); tickets -- ; } } catch ( Exception e ) { e . printStackTrace (); } finally { //\u91ca\u653e\u9501 try { lock . release (); } catch ( Exception e ) { e . printStackTrace (); } } } } } 2,\u521b\u5efa\u8fde\u63a5\uff0c\u5e76\u4e14\u521d\u59cb\u5316\u9501 public Ticket12306 (){ //\u91cd\u8bd5\u7b56\u7565 RetryPolicy retryPolicy = new ExponentialBackoffRetry ( 3000 , 10 ); //2.\u7b2c\u4e8c\u79cd\u65b9\u5f0f //CuratorFrameworkFactory.builder(); CuratorFramework client = CuratorFrameworkFactory . builder () . connectString ( \"192.168.149.135:2181\" ) . sessionTimeoutMs ( 60 * 1000 ) . connectionTimeoutMs ( 15 * 1000 ) . retryPolicy ( retryPolicy ) . build (); //\u5f00\u542f\u8fde\u63a5 client . start (); lock = new InterProcessMutex ( client , \"/lock\" ); } 3,\u8fd0\u884c\u591a\u4e2a\u7ebf\u7a0b\u8fdb\u884c\u6d4b\u8bd5 public class LockTest { public static void main ( String [] args ) { Ticket12306 ticket12306 = new Ticket12306 (); //\u521b\u5efa\u5ba2\u6237\u7aef Thread t1 = new Thread ( ticket12306 , \"\u643a\u7a0b\" ); Thread t2 = new Thread ( ticket12306 , \"\u98de\u732a\" ); t1 . start (); t2 . start (); } }","title":"4.13)Zookeeper \u5206\u5e03\u5f0f\u9501-\u6a21\u62df12306\u552e\u7968\u6848\u4f8b"},{"location":"zookeeper/zk/#5zookeeper","text":"","title":"5)ZooKeeper \u96c6\u7fa4\u642d\u5efa"},{"location":"zookeeper/zk/#51zookeeper","text":"Leader\u9009\u4e3e\uff1a \u2022Serverid\uff1a\u670d\u52a1\u5668ID \u6bd4\u5982\u6709\u4e09\u53f0\u670d\u52a1\u5668\uff0c\u7f16\u53f7\u5206\u522b\u662f1,2,3\u3002 \u7f16\u53f7\u8d8a\u5927\u5728\u9009\u62e9\u7b97\u6cd5\u4e2d\u7684\u6743\u91cd\u8d8a\u5927\u3002 \u2022Zxid\uff1a\u6570\u636eID \u670d\u52a1\u5668\u4e2d\u5b58\u653e\u7684\u6700\u5927\u6570\u636eID.\u503c\u8d8a\u5927\u8bf4\u660e\u6570\u636e \u8d8a\u65b0\uff0c\u5728\u9009\u4e3e\u7b97\u6cd5\u4e2d\u6570\u636e\u8d8a\u65b0\u6743\u91cd\u8d8a\u5927\u3002 \u2022\u5728Leader\u9009\u4e3e\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u67d0\u53f0ZooKeeper \u200b \u83b7\u5f97\u4e86\u8d85\u8fc7\u534a\u6570\u7684\u9009\u7968\uff0c \u200b \u5219\u6b64ZooKeeper\u5c31\u53ef\u4ee5\u6210\u4e3aLeader\u4e86\u3002","title":"5.1)Zookeeper\u96c6\u7fa4\u4ecb\u7ecd"},{"location":"zookeeper/zk/#52","text":"\u771f\u5b9e\u7684\u96c6\u7fa4\u662f\u9700\u8981\u90e8\u7f72\u5728\u4e0d\u540c\u7684\u670d\u52a1\u5668\u4e0a\u7684\uff0c\u4f46\u662f\u5728\u6211\u4eec\u6d4b\u8bd5\u65f6\u540c\u65f6\u542f\u52a8\u5f88\u591a\u4e2a\u865a\u62df\u673a\u5185\u5b58\u4f1a\u5403\u4e0d\u6d88\uff0c\u6240\u4ee5\u6211\u4eec\u901a\u5e38\u4f1a\u642d\u5efa \u4f2a\u96c6\u7fa4 \uff0c\u4e5f\u5c31\u662f\u628a\u6240\u6709\u7684\u670d\u52a1\u90fd\u642d\u5efa\u5728\u4e00\u53f0\u865a\u62df\u673a\u4e0a\uff0c\u7528\u7aef\u53e3\u8fdb\u884c\u533a\u5206\u3002 \u6211\u4eec\u8fd9\u91cc\u8981\u6c42\u642d\u5efa\u4e00\u4e2a\u4e09\u4e2a\u8282\u70b9\u7684Zookeeper\u96c6\u7fa4\uff08\u4f2a\u96c6\u7fa4\uff09\u3002","title":"5.2)\u642d\u5efa\u8981\u6c42"},{"location":"zookeeper/zk/#53","text":"\u91cd\u65b0\u90e8\u7f72\u4e00\u53f0\u865a\u62df\u673a\u4f5c\u4e3a\u6211\u4eec\u642d\u5efa\u96c6\u7fa4\u7684\u6d4b\u8bd5\u670d\u52a1\u5668\u3002 \uff081\uff09\u5b89\u88c5JDK \u3010\u6b64\u6b65\u9aa4\u7701\u7565\u3011\u3002 \uff082\uff09Zookeeper\u538b\u7f29\u5305\u4e0a\u4f20\u5230\u670d\u52a1\u5668 \uff083\uff09\u5c06Zookeeper\u89e3\u538b \uff0c\u5efa\u7acb/usr/local/zookeeper-cluster\u76ee\u5f55\uff0c\u5c06\u89e3\u538b\u540e\u7684Zookeeper\u590d\u5236\u5230\u4ee5\u4e0b\u4e09\u4e2a\u76ee\u5f55 /usr/local/zookeeper-cluster/zookeeper-1 /usr/local/zookeeper-cluster/zookeeper-2 /usr/local/zookeeper-cluster/zookeeper-3 [ root@localhost ~ ] # mkdir /usr/local/zookeeper-cluster [ root@localhost ~ ] # cp -r apache-zookeeper-3.5.6-bin /usr/local/zookeeper-cluster/zookeeper-1 [ root@localhost ~ ] # cp -r apache-zookeeper-3.5.6-bin /usr/local/zookeeper-cluster/zookeeper-2 [ root@localhost ~ ] # cp -r apache-zookeeper-3.5.6-bin /usr/local/zookeeper-cluster/zookeeper-3 \uff084\uff09\u521b\u5efadata\u76ee\u5f55 \uff0c\u5e76\u4e14\u5c06 conf\u4e0bzoo_sample.cfg \u6587\u4ef6\u6539\u540d\u4e3a zoo.cfg mkdir /usr/local/zookeeper-cluster/zookeeper-1/data mkdir /usr/local/zookeeper-cluster/zookeeper-2/data mkdir /usr/local/zookeeper-cluster/zookeeper-3/data mv /usr/local/zookeeper-cluster/zookeeper-1/conf/zoo_sample.cfg /usr/local/zookeeper-cluster/zookeeper-1/conf/zoo.cfg mv /usr/local/zookeeper-cluster/zookeeper-2/conf/zoo_sample.cfg /usr/local/zookeeper-cluster/zookeeper-2/conf/zoo.cfg mv /usr/local/zookeeper-cluster/zookeeper-3/conf/zoo_sample.cfg /usr/local/zookeeper-cluster/zookeeper-3/conf/zoo.cfg \uff085\uff09 \u914d\u7f6e\u6bcf\u4e00\u4e2aZookeeper \u7684dataDir \u548c clientPort \u5206\u522b\u4e3a2181 2182 2183 \u4fee\u6539/usr/local/zookeeper-cluster/zookeeper-1/conf/zoo.cfg vim /usr/local/zookeeper-cluster/zookeeper-1/conf/zoo.cfg clientPort = 2181 dataDir = /usr/local/zookeeper-cluster/zookeeper-1/data \u4fee\u6539/usr/local/zookeeper-cluster/zookeeper-2/conf/zoo.cfg vim /usr/local/zookeeper-cluster/zookeeper-2/conf/zoo.cfg clientPort = 2182 dataDir = /usr/local/zookeeper-cluster/zookeeper-2/data \u4fee\u6539/usr/local/zookeeper-cluster/zookeeper-3/conf/zoo.cfg vim /usr/local/zookeeper-cluster/zookeeper-3/conf/zoo.cfg clientPort = 2183 dataDir = /usr/local/zookeeper-cluster/zookeeper-3/data","title":"5.3)\u51c6\u5907\u5de5\u4f5c"},{"location":"zookeeper/zk/#54","text":"\uff081\uff09\u5728\u6bcf\u4e2azookeeper\u7684 data \u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2a myid \u6587\u4ef6\uff0c\u5185\u5bb9\u5206\u522b\u662f1\u30012\u30013 \u3002\u8fd9\u4e2a\u6587\u4ef6\u5c31\u662f\u8bb0\u5f55\u6bcf\u4e2a\u670d\u52a1\u5668\u7684ID echo 1 >/usr/local/zookeeper-cluster/zookeeper-1/data/myid echo 2 >/usr/local/zookeeper-cluster/zookeeper-2/data/myid echo 3 >/usr/local/zookeeper-cluster/zookeeper-3/data/myid \uff082\uff09\u5728\u6bcf\u4e00\u4e2azookeeper \u7684 zoo.cfg\u914d\u7f6e\u5ba2\u6237\u7aef\u8bbf\u95ee\u7aef\u53e3\uff08clientPort\uff09\u548c\u96c6\u7fa4\u670d\u52a1\u5668IP\u5217\u8868\u3002 \u96c6\u7fa4\u670d\u52a1\u5668IP\u5217\u8868\u5982\u4e0b vim /usr/local/zookeeper-cluster/zookeeper-1/conf/zoo.cfg vim /usr/local/zookeeper-cluster/zookeeper-2/conf/zoo.cfg vim /usr/local/zookeeper-cluster/zookeeper-3/conf/zoo.cfg server.1 = 192 .168.149.135:2881:3881 server.2 = 192 .168.149.135:2882:3882 server.3 = 192 .168.149.135:2883:3883 \u89e3\u91ca\uff1aserver.\u670d\u52a1\u5668ID=\u670d\u52a1\u5668IP\u5730\u5740\uff1a\u670d\u52a1\u5668\u4e4b\u95f4\u901a\u4fe1\u7aef\u53e3\uff1a\u670d\u52a1\u5668\u4e4b\u95f4\u6295\u7968\u9009\u4e3e\u7aef\u53e3","title":"5.4)\u914d\u7f6e\u96c6\u7fa4"},{"location":"zookeeper/zk/#55","text":"\u542f\u52a8\u96c6\u7fa4\u5c31\u662f\u5206\u522b\u542f\u52a8\u6bcf\u4e2a\u5b9e\u4f8b\u3002 /usr/local/zookeeper-cluster/zookeeper-1/bin/zkServer.sh start /usr/local/zookeeper-cluster/zookeeper-2/bin/zkServer.sh start /usr/local/zookeeper-cluster/zookeeper-3/bin/zkServer.sh start \u542f\u52a8\u540e\u6211\u4eec\u67e5\u8be2\u4e00\u4e0b\u6bcf\u4e2a\u5b9e\u4f8b\u7684\u8fd0\u884c\u72b6\u6001 /usr/local/zookeeper-cluster/zookeeper-1/bin/zkServer.sh status /usr/local/zookeeper-cluster/zookeeper-2/bin/zkServer.sh status /usr/local/zookeeper-cluster/zookeeper-3/bin/zkServer.sh status \u5148\u67e5\u8be2\u7b2c\u4e00\u4e2a\u670d\u52a1 Mode\u4e3afollower\u8868\u793a\u662f \u8ddf\u968f\u8005 \uff08\u4ece\uff09 \u518d\u67e5\u8be2\u7b2c\u4e8c\u4e2a\u670d\u52a1Mod \u4e3aleader\u8868\u793a\u662f \u9886\u5bfc\u8005 \uff08\u4e3b\uff09 \u67e5\u8be2\u7b2c\u4e09\u4e2a\u4e3a\u8ddf\u968f\u8005\uff08\u4ece\uff09","title":"5.5)\u542f\u52a8\u96c6\u7fa4"},{"location":"zookeeper/zk/#56","text":"\uff081\uff09\u9996\u5148\u6211\u4eec\u5148\u6d4b\u8bd5\u5982\u679c\u662f\u4ece\u670d\u52a1\u5668\u6302\u6389\uff0c\u4f1a\u600e\u4e48\u6837 \u628a3\u53f7\u670d\u52a1\u5668\u505c\u6389\uff0c\u89c2\u5bdf1\u53f7\u548c2\u53f7\uff0c\u53d1\u73b0\u72b6\u6001\u5e76\u6ca1\u6709\u53d8\u5316 /usr/local/zookeeper-cluster/zookeeper-3/bin/zkServer.sh stop /usr/local/zookeeper-cluster/zookeeper-1/bin/zkServer.sh status /usr/local/zookeeper-cluster/zookeeper-2/bin/zkServer.sh status \u7531\u6b64\u5f97\u51fa\u7ed3\u8bba\uff0c3\u4e2a\u8282\u70b9\u7684\u96c6\u7fa4\uff0c\u4ece\u670d\u52a1\u5668\u6302\u6389\uff0c\u96c6\u7fa4\u6b63\u5e38 \uff082\uff09\u6211\u4eec\u518d\u628a1\u53f7\u670d\u52a1\u5668\uff08\u4ece\u670d\u52a1\u5668\uff09\u4e5f\u505c\u6389\uff0c\u67e5\u770b2\u53f7\uff08\u4e3b\u670d\u52a1\u5668\uff09\u7684\u72b6\u6001\uff0c\u53d1\u73b0\u5df2\u7ecf\u505c\u6b62\u8fd0\u884c\u4e86\u3002 /usr/local/zookeeper-cluster/zookeeper-1/bin/zkServer.sh stop /usr/local/zookeeper-cluster/zookeeper-2/bin/zkServer.sh status \u7531\u6b64\u5f97\u51fa\u7ed3\u8bba\uff0c3\u4e2a\u8282\u70b9\u7684\u96c6\u7fa4\uff0c2\u4e2a\u4ece\u670d\u52a1\u5668\u90fd\u6302\u6389\uff0c\u4e3b\u670d\u52a1\u5668\u4e5f\u65e0\u6cd5\u8fd0\u884c\u3002\u56e0\u4e3a\u53ef\u8fd0\u884c\u7684\u673a\u5668\u6ca1\u6709\u8d85\u8fc7\u96c6\u7fa4\u603b\u6570\u91cf\u7684\u534a\u6570\u3002 \uff083\uff09\u6211\u4eec\u518d\u6b21\u628a1\u53f7\u670d\u52a1\u5668\u542f\u52a8\u8d77\u6765\uff0c\u53d1\u73b02\u53f7\u670d\u52a1\u5668\u53c8\u5f00\u59cb\u6b63\u5e38\u5de5\u4f5c\u4e86\u3002\u800c\u4e14\u4f9d\u7136\u662f\u9886\u5bfc\u8005\u3002 /usr/local/zookeeper-cluster/zookeeper-1/bin/zkServer.sh start /usr/local/zookeeper-cluster/zookeeper-2/bin/zkServer.sh status \uff084\uff09\u6211\u4eec\u628a3\u53f7\u670d\u52a1\u5668\u4e5f\u542f\u52a8\u8d77\u6765\uff0c\u628a2\u53f7\u670d\u52a1\u5668\u505c\u6389,\u505c\u6389\u540e\u89c2\u5bdf1\u53f7\u548c3\u53f7\u7684\u72b6\u6001\u3002 /usr/local/zookeeper-cluster/zookeeper-3/bin/zkServer.sh start /usr/local/zookeeper-cluster/zookeeper-2/bin/zkServer.sh stop /usr/local/zookeeper-cluster/zookeeper-1/bin/zkServer.sh status /usr/local/zookeeper-cluster/zookeeper-3/bin/zkServer.sh status \u53d1\u73b0\u65b0\u7684leader\u4ea7\u751f\u4e86~ \u7531\u6b64\u6211\u4eec\u5f97\u51fa\u7ed3\u8bba\uff0c\u5f53\u96c6\u7fa4\u4e2d\u7684\u4e3b\u670d\u52a1\u5668\u6302\u4e86\uff0c\u96c6\u7fa4\u4e2d\u7684\u5176\u4ed6\u670d\u52a1\u5668\u4f1a\u81ea\u52a8\u8fdb\u884c\u9009\u4e3e\u72b6\u6001\uff0c\u7136\u540e\u4ea7\u751f\u65b0\u5f97leader \uff085\uff09\u6211\u4eec\u518d\u6b21\u6d4b\u8bd5\uff0c\u5f53\u6211\u4eec\u628a2\u53f7\u670d\u52a1\u5668\u91cd\u65b0\u542f\u52a8\u8d77\u6765\u542f\u52a8\u540e\uff0c\u4f1a\u53d1\u751f\u4ec0\u4e48\uff1f2\u53f7\u670d\u52a1\u5668\u4f1a\u518d\u6b21\u6210\u4e3a\u65b0\u7684\u9886\u5bfc\u5417\uff1f\u6211\u4eec\u770b\u7ed3\u679c /usr/local/zookeeper-cluster/zookeeper-2/bin/zkServer.sh start /usr/local/zookeeper-cluster/zookeeper-2/bin/zkServer.sh status /usr/local/zookeeper-cluster/zookeeper-3/bin/zkServer.sh status \u6211\u4eec\u4f1a\u53d1\u73b0\uff0c2\u53f7\u670d\u52a1\u5668\u542f\u52a8\u540e\u4f9d\u7136\u662f\u8ddf\u968f\u8005\uff08\u4ece\u670d\u52a1\u5668\uff09\uff0c3\u53f7\u670d\u52a1\u5668\u4f9d\u7136\u662f\u9886\u5bfc\u8005\uff08\u4e3b\u670d\u52a1\u5668\uff09\uff0c\u6ca1\u6709\u64bc\u52a83\u53f7\u670d\u52a1\u5668\u7684\u9886\u5bfc\u5730\u4f4d\u3002 \u7531\u6b64\u6211\u4eec\u5f97\u51fa\u7ed3\u8bba\uff0c\u5f53\u9886\u5bfc\u8005\u4ea7\u751f\u540e\uff0c\u518d\u6b21\u6709\u65b0\u670d\u52a1\u5668\u52a0\u5165\u96c6\u7fa4\uff0c\u4e0d\u4f1a\u5f71\u54cd\u5230\u73b0\u4efb\u9886\u5bfc\u8005\u3002","title":"5.6)\u6a21\u62df\u96c6\u7fa4\u5f02\u5e38"},{"location":"zookeeper/zk/#6zookeeper","text":"Zookeepe\u96c6\u7fa4\u89d2\u8272 \u5728ZooKeeper\u96c6\u7fa4\u670d\u4e2d\u52a1\u4e2d\u6709\u4e09\u4e2a\u89d2\u8272\uff1a \u2022Leader \u9886\u5bfc\u8005 \uff1a \u200b 1. \u5904\u7406\u4e8b\u52a1\u8bf7\u6c42 \u200b 2. \u96c6\u7fa4\u5185\u90e8\u5404\u670d\u52a1\u5668\u7684\u8c03\u5ea6\u8005 \u2022Follower \u8ddf\u968f\u8005 \uff1a \u200b 1. \u5904\u7406\u5ba2\u6237\u7aef\u975e\u4e8b\u52a1\u8bf7\u6c42\uff0c\u8f6c\u53d1\u4e8b\u52a1\u8bf7\u6c42\u7ed9Leader\u670d\u52a1\u5668 \u200b 2. \u53c2\u4e0eLeader\u9009\u4e3e\u6295\u7968 \u2022Observer \u89c2\u5bdf\u8005\uff1a 1. \u5904\u7406\u5ba2\u6237\u7aef\u975e\u4e8b\u52a1\u8bf7\u6c42 \uff0c \u8f6c\u53d1\u4e8b\u52a1\u8bf7\u6c42\u7ed9Leader\u670d\u52a1\u5668","title":"6)Zookeeper \u6838\u5fc3\u7406\u8bba"}]}